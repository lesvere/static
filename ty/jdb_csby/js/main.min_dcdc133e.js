var __reflect=this&&this.__reflect||function(e,t,o){e.__class__=t,o?o.push(t):o=[t],e.__types__=e.__types__?o.concat(e.__types__):o},__extends=this&&this.__extends||function(e,t){function o(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);o.prototype=t.prototype,e.prototype=new o},__awaiter=this&&this.__awaiter||function(e,t,o,i){return new(o||(o=Promise))(function(n,a){function r(e){try{l(i.next(e))}catch(t){a(t)}}function s(e){try{l(i["throw"](e))}catch(t){a(t)}}function l(e){e.done?n(e.value):new o(function(t){t(e.value)}).then(r,s)}l((i=i.apply(e,t||[])).next())})},__generator=this&&this.__generator||function(e,t){function o(e){return function(t){return i([e,t])}}function i(o){if(n)throw new TypeError("Generator is already executing.");for(;l;)try{if(n=1,a&&(r=a[2&o[0]?"return":o[0]?"throw":"next"])&&!(r=r.call(a,o[1])).done)return r;switch(a=0,r&&(o=[0,r.value]),o[0]){case 0:case 1:r=o;break;case 4:return l.label++,{value:o[1],done:!1};case 5:l.label++,a=o[1],o=[0];continue;case 7:o=l.ops.pop(),l.trys.pop();continue;default:if(r=l.trys,!(r=r.length>0&&r[r.length-1])&&(6===o[0]||2===o[0])){l=0;continue}if(3===o[0]&&(!r||o[1]>r[0]&&o[1]<r[3])){l.label=o[1];break}if(6===o[0]&&l.label<r[1]){l.label=r[1],r=o;break}if(r&&l.label<r[2]){l.label=r[2],l.ops.push(o);break}r[2]&&l.ops.pop(),l.trys.pop();continue}o=t.call(e,l)}catch(i){o=[6,i],a=0}finally{n=r=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}var n,a,r,s,l={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return s={next:o(0),"throw":o(1),"return":o(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s},BaseProxy=function(e){function t(t,o){var i=e.call(this,t,o)||this;return i._logScope="[BaseProxy]",i._isLog=!1,i._allProxy=new RetrieveAllProxy,i.awake(),i}return __extends(t,e),t.prototype.onFacadeAwakeComplete=function(){this.retrieveProxy()},t.prototype.retrieveProxy=function(){this._allProxy.retrieveAllProxy()},t}(puremvc.Proxy);__reflect(BaseProxy.prototype,"BaseProxy",["IProxy","ILogger"]);var Smartfox;!function(e){var t=function(){function e(e){this.name=e}return e.prototype.getName=function(){return this.name},e.prototype.genSerialNo=function(){var e=new Date,t=e.getFullYear().toString(),o=(e.getMonth()+1).toString(),i=e.getDate().toString(),n=e.getHours().toString(),a=e.getMinutes().toString(),r=e.getSeconds().toString(),s=(Math.floor(1e16*Math.random()),t+(o[1]?o:"0"+o[0])+(i[1]?i:"0"+i[0])+(n[1]?n:"0"+n[0])+(a[1]?a:"0"+a[0])+(r[1]?r:"0"+r[0])+"0");return s},e}();e.GameRequest=t,__reflect(t.prototype,"Smartfox.GameRequest")}(Smartfox||(Smartfox={}));var BaseComponent=function(e){function t(){var t=e.call(this)||this;return t._isStartComplete=!1,t._isPlaying=!1,t}return __extends(t,e),t.prototype.start=function(e){Logger.log("[BaseComponent] start "+this.hashCode,this),this._isStartComplete||(this._tableEntity=e,this._isStartComplete=!0,this.startObject(e))},t.prototype.init=function(e){Logger.log("[BaseComponent] init "+this.hashCode,this),this._data=e,this.initObject(e)},t.prototype.reset=function(){Logger.log("[BaseComponent] reset "+this.hashCode,this),this.resetObject(),this._data=null},t.prototype.play=function(){Logger.log("[BaseComponent] play "+this.hashCode,this),this._isPlaying||(this._isPlaying=!0,this.playObject())},t.prototype.stop=function(){Logger.log("[BaseComponent] stop "+this.hashCode,this),0!=this._isPlaying&&this.stopObject()},t.prototype.onComplete=function(e){Logger.log("[BaseComponent] onComplete "+this.hashCode,this),this._isPlaying=!1,this.completeObject(),this.sendCompleteEvent(),this.reset()},t.prototype.sendCompleteEvent=function(e){Logger.log("[BaseComponent] sendCompleteEvent "+this.hashCode,this);var t=new ObjectEvent(ObjectEvent.COMPLETE);this.dispatchEvent(t)},t.prototype.isStartComplete=function(){return this._isStartComplete},t.NAME="BaseComponent",t}(egret.Sprite);__reflect(BaseComponent.prototype,"BaseComponent",["ILogger"]);var BaseCOPObject=function(e){function t(){var t=e.call(this)||this;return t._isStartComplete=!1,t._isPlaying=!1,t._idle=!1,t}return __extends(t,e),t.prototype.start=function(e,t){Logger.log("[BaseCOPObject] start "+this.hashCode,this),this._isStartComplete||(this._proxy=t,this._tableEntity=e,this._isStartComplete=!0,this.startObject(e))},t.prototype.init=function(e){Logger.log("[BaseCOPObject] init "+this.hashCode,this),this._data=e,this.initObject(e)},t.prototype.reset=function(){Logger.log("[BaseCOPObject] reset "+this.hashCode,this),this.resetObject(),this._data=null},t.prototype.play=function(){Logger.log("[BaseCOPObject] play "+this.hashCode,this),this._isPlaying||(this._isPlaying=!0,this.playObject())},t.prototype.stop=function(){Logger.log("[BaseCOPObject] stop "+this.hashCode,this),0!=this._isPlaying&&this.stopObject()},t.prototype.onComplete=function(e){Logger.log("[BaseCOPObject] onComplete "+this.hashCode,this),this._isPlaying=!1,this.completeObject(),this.sendCompleteEvent(),this.reset()},t.prototype.startObject=function(e){Logger.log("[BaseCOPObject] startObject "+this.hashCode,this),this._component.start(e),this.addChild(this._component)},t.prototype.initObject=function(e){Logger.log("[BaseCOPObject] initObject "+this.hashCode,this),Utils.DisplayObjectTool.resetDisplayObject(this,!0),this.opInit(),this._component.init(e)},t.prototype.resetObject=function(){Logger.log("[BaseCOPObject] resetObject "+this.hashCode,this),this._component.reset(),this.opReset(),Utils.DisplayObjectTool.resetDisplayObject(this,!1)},t.prototype.playObject=function(){Logger.log("[BaseCOPObject] playObject "+this.hashCode,this),this._component.addEventListener(ObjectEvent.COMPLETE,this.onComplete,this),this._component.play()},t.prototype.stopObject=function(){Logger.log("[BaseCOPObject] stopObject "+this.hashCode,this),this._component.stop()},t.prototype.completeObject=function(){Logger.log("[BaseCOPObject] completeObject "+this.hashCode,this),this._component.removeEventListener(ObjectEvent.COMPLETE,this.onComplete,this),this._proxy.onCompleteHandle(this)},t.prototype.sendCompleteEvent=function(e){Logger.log("[BaseCOPObject] sendCompleteEvent "+this.hashCode,this);var t=new ObjectEvent(ObjectEvent.COMPLETE);this.dispatchEvent(t)},t.prototype.isStartComplete=function(){return this._isStartComplete},t.prototype.opInit=function(){Logger.log("[BaseCOPObject] init "+this.hashCode,this),this._idle=!1,this._distributor.distribution(this)},t.prototype.opReset=function(){Logger.log("[BaseCOPObject] reset "+this.hashCode,this),this._idle=!0,this._distributor.distribution(this)},t.prototype.opDel=function(){Logger.log("[BaseCOPObject] del "+this.hashCode,this),this.opReset(),this._distributor=null},t.prototype.opSetProtocol=function(e){Logger.log("[BaseCOPObject] setProtocol "+this.hashCode,this),this._distributor=e},Object.defineProperty(t.prototype,"opHashc",{get:function(){return this.hashCode},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"opIsIdle",{get:function(){return this._idle},enumerable:!0,configurable:!0}),t.NAME="BaseCOPObject",t}(egret.Sprite);__reflect(BaseCOPObject.prototype,"BaseCOPObject",["ILogger","ObjectPool.IObject"]);var BaseFX=function(e){function t(){var t=e.call(this)||this;return t._isStartComplete=!1,t._isPlaying=!1,t}return __extends(t,e),t.prototype.start=function(e){Logger.log("[BaseFX] start "+this.hashCode,this),this._isStartComplete||(this._tableEntity=e,this._isStartComplete=!0,this.startObject(e))},t.prototype.init=function(e){Logger.log("[BaseFX] init "+this.hashCode,this),this._data=e,this.initObject(e)},t.prototype.reset=function(){Logger.log("[BaseFX] reset "+this.hashCode,this),this.resetObject(),this._data=null},t.prototype.play=function(){Logger.log("[BaseFX] play "+this.hashCode,this),this._isPlaying||(this._isPlaying=!0,this.playObject())},t.prototype.stop=function(){Logger.log("[BaseFX] stop "+this.hashCode,this),0!=this._isPlaying&&this.stopObject()},t.prototype.onComplete=function(e){Logger.log("[BaseFX] onComplete "+this.hashCode,this),this._isPlaying=!1,this.completeObject(),this.sendCompleteEvent(),this.reset()},t.prototype.sendCompleteEvent=function(e){Logger.log("[BaseFX] sendCompleteEvent "+this.hashCode,this);var t=new ObjectEvent(ObjectEvent.COMPLETE);this.dispatchEvent(t)},t.prototype.isStartComplete=function(){return this._isStartComplete},t.NAME="BaseFX",t}(egret.Sprite);__reflect(BaseFX.prototype,"BaseFX",["ILogger"]);var BaseObjectManagerProxy=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._logScope="[BaseObjectManagerProxy]",t._isLog=!1,t._isMVCReady=!1,t._isResourceReady=!1,t._isStartComplete=!1,t._objectMap={},t}return __extends(t,e),t.prototype.awake=function(){Logger.log("awake",this),this.nextAwake()},t.prototype.start=function(){Logger.log("start, _isStartComplete:"+this._isStartComplete+", _isMVCReady:"+this._isMVCReady+", _isResourceReady:"+this._isResourceReady+" ",this),0==this._isStartComplete&&this._isMVCReady&&this._isResourceReady&&(this._isStartComplete=!0,this.nextStart(),this.creatMap())},t.prototype.init=function(){Logger.log("init",this),this._isStartComplete&&this.nextInit()},t.prototype.reset=function(){if(Logger.log("reset",this),this._isStartComplete){this.stopAll();for(var e in this._objectMap)delete this._objectMap[e];for(var t in this._generatorMap)this._generatorMap[t].getDistributor().clear();this.nextReset(),this.sendNotification(this._modifyObjectMapNotify,this._objectMap),this.sendNotification(this._modifyGeneratorMapNotify,this._generatorMap)}},t.prototype.play=function(e){if(Logger.log("play",this),0!=e){if(!this._isStartComplete)return void Logger.warn("play _isStartComplete == false",this);var t=this.startObject(e);return this._objectMap[t.opHashc]=t,this.initObject(t,e),this.playObject(t),this.sendNotification(this._modifyObjectMapNotify,this._objectMap),this.sendNotification(this._modifyGeneratorMapNotify,this._generatorMap),t}},t.prototype.stop=function(e){return Logger.log("stop",this),this._isStartComplete?(this.stopObject(e),delete this._objectMap[e.opHashc],this.sendNotification(this._modifyObjectMapNotify,this._objectMap),void this.sendNotification(this._modifyGeneratorMapNotify,this._generatorMap)):void Logger.warn("stop _isStartComplete == false",this)},t.prototype.onCompleteHandle=function(e){return Logger.log("stop",this),this._isStartComplete?(delete this._objectMap[e.opHashc],void this.onObjectCompleteHandle(e)):void Logger.warn("onCompleteHandle _isStartComplete == false",this)},t.prototype.stopAll=function(){if(Logger.log("stopAll",this),!this._isStartComplete)return void Logger.warn("stopAll _isStartComplete == false",this);for(var e in this._objectMap)delete this._objectMap[e];for(var e in this._generatorMap){var t=this._generatorMap[e];for(var o in t._dis._usedPool){var i=t._dis._usedPool[o];(egret.is(i,BaseOPObject.NAME)||egret.is(i,BaseCOPObject.NAME))&&i.stop()}}this.sendNotification(this._modifyObjectMapNotify,this._objectMap),this.sendNotification(this._modifyGeneratorMapNotify,this._generatorMap)},t.prototype.startData=function(e,t,o){this._modifyGeneratorMapNotify=e,this._modifyObjectMapNotify=t,this._tableEntityArray=o},t.prototype.creatMap=function(){this._objectMap={},this._generatorMap={};var e=this._tableEntityArray;for(var t in e){var o=e[t];this._generatorMap[String(o.id)]=new ObjectPool.Generator}this.sendNotification(this._modifyObjectMapNotify,this._objectMap),this.sendNotification(this._modifyGeneratorMapNotify,this._generatorMap)},t.prototype.facadeComplete=function(){Logger.log("facadeAwakeComplete",this),this.retrieveProxy(),this._isMVCReady=!0,this.start()},t.prototype.resourceComplete=function(){Logger.log("resourceComplete",this),this._isResourceReady=!0,this.start()},t.prototype.getObject=function(e){var t=this._objectMap;for(var o in t){var i=t[o];if(i.hashCode==e)return i}return null},t}(BaseProxy);__reflect(BaseObjectManagerProxy.prototype,"BaseObjectManagerProxy");var BaseOPObject=function(e){function t(){var t=e.call(this)||this;return t._isStartComplete=!1,t._isPlaying=!1,t._idle=!1,t}return __extends(t,e),t.prototype.start=function(e,t){Logger.log("[BaseOPObject] start "+this.hashCode,this),this._isStartComplete||(this._proxy=t,this._tableEntity=e,this._isStartComplete=!0,this.startObject(e))},t.prototype.init=function(e){Logger.log("[BaseOPObject] init "+this.hashCode,this),this._data=e,this.initObject(e)},t.prototype.reset=function(){Logger.log("[BaseOPObject] reset "+this.hashCode,this),this.resetObject(),this._data=null},t.prototype.play=function(){Logger.log("[BaseOPObject] play "+this.hashCode,this),this._isPlaying||(this._isPlaying=!0,this.playObject())},t.prototype.stop=function(){Logger.log("[BaseOPObject] stop "+this.hashCode,this),0!=this._isPlaying&&this.stopObject()},t.prototype.onComplete=function(e){Logger.log("[BaseOPObject] onComplete "+this.hashCode,this),this._isPlaying=!1,this.completeObject(),this.sendCompleteEvent(),this.reset()},t.prototype.startObject=function(e){Logger.log("[BaseOPObject] startObject "+this.hashCode,this)},t.prototype.initObject=function(e){Logger.log("[BaseOPObject] initObject "+this.hashCode,this),Utils.DisplayObjectTool.resetDisplayObject(this,!0),this.opInit()},t.prototype.resetObject=function(){Logger.log("[BaseOPObject] resetObject "+this.hashCode,this),this.opReset(),Utils.DisplayObjectTool.resetDisplayObject(this,!1)},t.prototype.playObject=function(){Logger.log("[BaseOPObject] playObject "+this.hashCode,this)},t.prototype.stopObject=function(){Logger.log("[BaseOPObject] stopObject "+this.hashCode,this),this.onComplete()},t.prototype.completeObject=function(){Logger.log("[BaseOPObject] completeObject "+this.hashCode,this),this._proxy.onCompleteHandle(this)},t.prototype.sendCompleteEvent=function(e){Logger.log("[BaseOPObject] sendCompleteEvent "+this.hashCode,this);var t=new ObjectEvent(ObjectEvent.COMPLETE);this.dispatchEvent(t)},t.prototype.isStartComplete=function(){return this._isStartComplete},t.prototype.opInit=function(){Logger.log("[BaseOPObject] init "+this.hashCode,this),this._idle=!1,this._distributor.distribution(this)},t.prototype.opReset=function(){Logger.log("[BaseOPObject] reset "+this.hashCode,this),this._idle=!0,this._distributor.distribution(this)},t.prototype.opDel=function(){Logger.log("[BaseOPObject] del "+this.hashCode,this),this.opReset(),this._distributor=null},t.prototype.opSetProtocol=function(e){Logger.log("[BaseOPObject] setProtocol "+this.hashCode,this),this._distributor=e},Object.defineProperty(t.prototype,"opHashc",{get:function(){return this.hashCode},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"opIsIdle",{get:function(){return this._idle},enumerable:!0,configurable:!0}),t.prototype.isPlaying=function(){return this._isPlaying},t.NAME="BaseOPObject",t}(egret.Sprite);__reflect(BaseOPObject.prototype,"BaseOPObject",["ILogger","ObjectPool.IObject"]);var BaseAdapterMediator=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._logScope="[SceneMediator]",t._isLog=!1,t._allProxy=new RetrieveAllProxy,t._allMediator=new RetrieveAllMediator,t}return __extends(t,e),t.prototype.retrieveAllProxyAndMediator=function(){Logger.log("retrieveAllProxyAndMediator",this),this._allProxy.retrieveAllProxy(),this._allMediator.retrieveAllMediator()},t}(puremvc.Mediator);__reflect(BaseAdapterMediator.prototype,"BaseAdapterMediator",["ILogger"]);var BaseSceneMediator=function(e){function t(t,o){var i=e.call(this,t,o)||this;return i._logScope="[BaseSceneMediator]",i._isLog=!1,i.awake(),i}return __extends(t,e),t.prototype.start=function(){Logger.log("start",this)},t.prototype.init=function(){Logger.log("init",this)},t.prototype.reset=function(){Logger.log("reset",this)},t.prototype.enable=function(){Logger.log("enable",this),this._view.visible=!0},t.prototype.disable=function(){Logger.log("disable",this),this._view.visible=!1},t.prototype.refresh=function(e){Logger.log("refresh",this)},t}(puremvc.Mediator);__reflect(BaseSceneMediator.prototype,"BaseSceneMediator",["IMediator","ILogger"]);var BaseStateContext=function(){function e(e){this._object=e}return Object.defineProperty(e.prototype,"status",{get:function(){return this._status},enumerable:!0,configurable:!0}),e.prototype.update=function(){},e}();__reflect(BaseStateContext.prototype,"BaseStateContext",["IStateContext","ILogger"]);var BaseViewMediator=function(e){function t(t,o){var i=e.call(this,t,o)||this;return i._logScope="[BaseViewMediator]",i._isLog=!1,i._isMVCReady=!1,i._isResourceReady=!1,i._isStartComplete=!1,i._isInitComplete=!1,i._allProxy=new RetrieveAllProxy,i._allMediator=new RetrieveAllMediator,i.awake(),i}return __extends(t,e),t.prototype.awake=function(){Logger.log("awake",this),this.nextAwake()},t.prototype.start=function(){Logger.log("start _isStartComplete:"+this._isStartComplete+" _isMVCReady:"+this._isMVCReady+" _isResourceReady:"+this._isResourceReady,this),0==this._isStartComplete&&this._isMVCReady&&this._isResourceReady&&(this._isStartComplete=!0,this.nextStart())},t.prototype.init=function(e){return Logger.log("init",this),this._isStartComplete?(this._isInitComplete=!0,void this.nextInit(e)):void Logger.warn("init _isStartComplete == false",this)},t.prototype.reset=function(){Logger.log("reset",this),this._isStartComplete&&(this._isInitComplete=!1,this.nextReset())},t.prototype.enable=function(e){if(Logger.log("enable",this),this._isInitComplete)this._view.visible=!0,this.nextEnable(e);else{Logger.warn("enable _isInitComplete == false",this);var t=this._allProxy._gameDataProxy.gameSceneByEnable,o=this._allProxy._gameDataProxy.gameSceneByEnable,i="class : "+this._logScope+", sceneNumByEnable : "+GameEnum.SceneTypeEnum[t]+", sceneNumByShow : "+GameEnum.SceneTypeEnum[o];this.onErrorCallback("fish_isInitComplete_error",i)}},t.prototype.disable=function(e){return Logger.log("disable",this),this._isInitComplete?(this._view.visible=!1,void this.nextDisable(e)):void(this._view.visible=!1)},t.prototype.refresh=function(e){return Logger.log("refresh",this),this._isStartComplete?void this.nextRefresh(e):void Logger.warn("refresh _isStartComplete == false",this)},t.prototype.facadeAwakeComplete=function(){Logger.log("facadeAwakeComplete",this),this.retrieveAllProxyAndMediator(),this._isMVCReady=!0,this.start()},t.prototype.resourceComplete=function(){Logger.log("resourceComplete",this),this._isResourceReady=!0,this.start()},t.prototype.retrieveAllProxyAndMediator=function(){Logger.log("retrieveAllProxyAndMediator",this),this._allProxy.retrieveAllProxy(),this._allMediator.retrieveAllMediator()},t.prototype.getSkinView=function(){return this._view},t.prototype.onErrorCallback=function(e,t){this._allProxy._webBridgeProxy.showErrorMsgByCode(9999);var o=new kibana.logData;o.logType=e,o.errorMassage=t,kibana.m.send(o)},t}(puremvc.Mediator);__reflect(BaseViewMediator.prototype,"BaseViewMediator",["IMediator","ILogger"]);var BaseParse=function(){function e(e){void 0===e&&(e=null),e&&(this._bytes=e)}return e.prototype.decode=function(){},e.prototype.encode=function(){var e=new egret.ByteArray;return e},e.prototype.writeInt64=function(e){var t="00000000",o=new egret.ByteArray,i=e.toString(16);return i=t.substr(0,16-i.length)+i,o.writeUnsignedInt(parseInt(i.substr(0,8),16)),o.writeUnsignedInt(parseInt(i.substr(8,8),16)),o.position=0,o},e.prototype.readInt64=function(e){var t="00000000",o=e.readUnsignedInt().toString(16),i=t.substr(0,8-o.length)+o;return o=e.readUnsignedInt().toString(16),i+=t.substr(0,8-o.length)+o,Number(parseInt(i,16).toString())},e.prototype.trans=function(e,t,o,i){for(var n=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F"],a=[],r=a.length;0!=e;){var s=e&t;a[--r]=n[s],e>>>=o}for(var l="",c=r;c<a.length;c++)l+=""+a[c];for(var h=8-l.split("").length,u="",p=0;h>p;p++)u+="0";return u+l},e.prototype.trans2=function(e){for(var t=0,o=0,i=e.length-1;i>=0;i--)t+=Math.pow(2,o)*("1"==e.charAt(i)?1:0),o++;return t},e}();__reflect(BaseParse.prototype,"BaseParse");var GameEvent;!function(e){var t=function(){function t(){}return t.checkIsExistInShowEvent=function(t,o){return t==(""+e.DebuggerViewEventNamingRules.SHOW+o+e.DebuggerViewEventNamingRules.VIEW).toUpperCase()?!0:!1},t.checkIsExistInHideEvent=function(t,o){return t==(""+e.DebuggerViewEventNamingRules.HIDE+o+e.DebuggerViewEventNamingRules.VIEW).toUpperCase()?!0:!1},t.check=function(e){return-1!=e.search(/^HIDE[A-Z_]+VIEW$/)?!0:!1},t.SHOW="Show_",t.HIDE="Hide_",t.VIEW="_View",t}();e.DebuggerViewEventNamingRules=t,__reflect(t.prototype,"GameEvent.DebuggerViewEventNamingRules")}(GameEvent||(GameEvent={}));var GameEvent;!function(e){var t=function(){function t(){}return t.checkIsExistInLoadEvent=function(t,o){return t==(""+e.SceneEventNamingRules.LOAD+o+e.SceneEventNamingRules.SCENE).toUpperCase()?!0:!1},t.checkIsExistInUnLoadEvent=function(t,o){return t==(""+e.SceneEventNamingRules.UNLOAD+o+e.SceneEventNamingRules.SCENE).toUpperCase()?!0:!1},t.checkLoadFormat=function(e){return-1!=e.search(/^LOAD[A-Z_]+SCENE$/)?!0:!1},t.checkUnloadFormat=function(e){return-1!=e.search(/^UNLOAD[A-Z_]+SCENE$/)?!0:!1},t.checkIsExistInShowEvent=function(t,o){return t==(""+e.SceneEventNamingRules.SHOW+o+e.SceneEventNamingRules.SCENE).toUpperCase()?!0:!1},t.checkIsExistInHideEvent=function(t,o){return t==(""+e.SceneEventNamingRules.HIDE+o+e.SceneEventNamingRules.SCENE).toUpperCase()?!0:!1},t.checkShowFormat=function(e){return-1!=e.search(/^SHOW[A-Z_]+SCENE$/)?!0:!1},t.checkHideFormat=function(e){return-1!=e.search(/^HIDE[A-Z_]+SCENE$/)?!0:!1},t.LOAD="Load_",t.UNLOAD="Unload_",t.SHOW="Show_",t.HIDE="Hide_",t.SCENE="_Scene",t}();e.SceneEventNamingRules=t,__reflect(t.prototype,"GameEvent.SceneEventNamingRules")}(GameEvent||(GameEvent={}));var WaveBillboardFX=function(e){function t(){var t=e.call(this)||this;return t._logScope="[WaveBillboardFX]",t._isLog=!1,t._battleWaveSkinView=new BattleWaveSkinView,t.addChild(t._battleWaveSkinView),t}return __extends(t,e),t.prototype.startObject=function(e){Logger.log("startObject"+this.hashCode,this)},t.prototype.initObject=function(){Logger.log("initObject "+this.hashCode,this),this._battleWaveSkinView&&(Utils.DisplayObjectTool.resetDisplayObject(this._battleWaveSkinView,!0),this._battleWaveSkinView.start(),this._battleWaveSkinView.init()),Utils.DisplayObjectTool.resetDisplayObject(this,!0)},t.prototype.resetObject=function(){Logger.log("resetObject "+this.hashCode,this),this._battleWaveSkinView&&(Utils.DisplayObjectTool.resetDisplayObject(this._battleWaveSkinView,!1),this._battleWaveSkinView.reset()),Utils.DisplayObjectTool.resetDisplayObject(this,!1)},t.prototype.playObject=function(){var e=this;Logger.log("playObject "+this.hashCode,this),this._battleWaveSkinView,this._data,this._battleWaveSkinView.enable(),this._battleWaveSkinView.moveWave(),this._battleWaveSkinView.completeCallback=function(){return e.onComplete()}},t.prototype.stopObject=function(){Logger.log("stopObject "+this.hashCode,this),this.onComplete()},t.prototype.completeObject=function(){Logger.log("completeObject "+this.hashCode,this),this._battleWaveSkinView.disable(),egret.Tween.removeTweens(this)},t.NAME="WaveBillboardFX",t}(BaseFX);__reflect(WaveBillboardFX.prototype,"WaveBillboardFX");var BattleBroadcastViewMediator=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._logScope="BattleBroadcastViewMediator",t._isLog=!1,t.broadcastDataArray=new Array,t}return __extends(t,e),t.prototype.listNotificationInterests=function(){return[GameEvent.ApplicationFacadeEvent.AWAKE_COMPLETE,GameEvent.ResourceProxyEvent.LOAD_COMPLETE_NON_PRELOAD_GROUP,GameEvent.ProtocolProxyEvent.MODIFY_COMPLETE_BROADCAST,GameEvent.BattleCaiShenFaFaFaViewMediatorEvent.DISABLE_COMPLETE,GameEvent.BattleWheelOfFortuneViewMediatorEvent.DISABLE_COMPLETE,GameEvent.PlayerViewEntityArrayProxyEvent.MODIFY_COMPLETE_FORT]},t.prototype.handleNotification=function(e){var t=e.getBody();switch(e.getName()){case GameEvent.ApplicationFacadeEvent.AWAKE_COMPLETE:this.facadeAwakeComplete();break;case GameEvent.ResourceProxyEvent.LOAD_COMPLETE_NON_PRELOAD_GROUP:t==GameEnum.LoadingCollectionTypeEnum.Battle&&(this.resourceComplete(),this.init(),this.disable());break;case GameEvent.ProtocolProxyEvent.MODIFY_COMPLETE_BROADCAST:for(var o,i=e.getBody();i.length>0;)o=i.shift(),o.win>=o.multiplier&&this.broadcastDataArray.push(o);o=null,this.checkAndShowBroadcast();break;case GameEvent.BattleWheelOfFortuneViewMediatorEvent.DISABLE_COMPLETE:case GameEvent.BattleCaiShenFaFaFaViewMediatorEvent.DISABLE_COMPLETE:egret.setTimeout(this.checkAndShowBroadcast,this,10);break;case GameEvent.PlayerViewEntityArrayProxyEvent.MODIFY_COMPLETE_FORT:t.seatID==this._allProxy._playerViewEntityArrayProxy.getPlayerViewEntityBySelf().seat&&egret.setTimeout(this.checkAndShowBroadcast,this,10)}},t.prototype.nextAwake=function(){var e=this;this._view=new BattleBroadcastView,this._view.checkAndShowBroadcast=function(){return e.checkAndShowBroadcast()},this.getViewComponent().addChild(this._view),this._view.visible=!1,this._view.touchEnabled=this._view.touchChildren=!1,this._view.y=100,this._view.setTextColor()},t.prototype.nextStart=function(){this._view.start()},t.prototype.nextEnable=function(e){this._view.enable(e)},t.prototype.nextReset=function(){this._view.reset()},t.prototype.nextInit=function(){this._view.init()},t.prototype.nextDisable=function(){this._view.disable()},t.prototype.nextRefresh=function(){this._view.refresh()},t.prototype.checkAndShowBroadcast=function(){var e=this._allProxy._playerViewEntityArrayProxy.getPlayerViewEntityBySelf();e?!this._view.visible&&this.broadcastDataArray.length>0&&this._allProxy._gameDataProxy.playerNowStatus==GameName.SpecialFeatureName.NORMAL&&e.bulletType!=GameEnum.FortTableEnum.MegaDrill&&this.enable(this.broadcastDataArray.shift()):this.broadcastDataArray=[]},t.NAME="BattleBroadcastViewMediator",t}(BaseViewMediator);__reflect(BattleBroadcastViewMediator.prototype,"BattleBroadcastViewMediator");var BattleBulletArraySkinView=function(e){function t(){var t=e.call(this)||this;return t._logScope="[BattleBulletArraySkinView]",t._isLog=!1,t.name="BattleBulletArraySkinView",t.currentState=Utils.ResourceTool.language,t}return __extends(t,e),t.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),this.awake()},t.prototype.awake=function(){Logger.log("awake",this)},t.prototype.start=function(){Logger.log("start",this)},t.prototype.init=function(){Logger.log("init",this)},t.prototype.reset=function(){Logger.log("reset",this)},t.prototype.enable=function(){Logger.log("enable",this),this.visible=!0},t.prototype.disable=function(){Logger.log("disable",this),this.visible=!1},t.prototype.refresh=function(){Logger.log("refresh",this)},t}(eui.Component);__reflect(BattleBulletArraySkinView.prototype,"BattleBulletArraySkinView",["IView"]);var BattleBulletArrayViewMediator=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._logScope="[BattleBulletArrayViewMediator]",t._isLog=!1,t}return __extends(t,e),t.prototype.listNotificationInterests=function(){return[GameEvent.ApplicationFacadeEvent.AWAKE_COMPLETE,GameEvent.ResourceProxyEvent.LOAD_COMPLETE_NON_PRELOAD_GROUP,GameEvent.SceneEvent.LOAD_BATTLE_SCENE,GameEvent.SceneEvent.UNLOAD_BATTLE_SCENE]},t.prototype.handleNotification=function(e){var t=e.getBody();switch(e.getName()){case GameEvent.ApplicationFacadeEvent.AWAKE_COMPLETE:this.facadeAwakeComplete();break;case GameEvent.ResourceProxyEvent.LOAD_COMPLETE_NON_PRELOAD_GROUP:t==GameEnum.LoadingCollectionTypeEnum.Battle&&this.resourceComplete();break;case GameEvent.SceneEvent.LOAD_BATTLE_SCENE:this.init(),this.enable();break;case GameEvent.SceneEvent.UNLOAD_BATTLE_SCENE:this.disable(),this.reset()}},t.prototype.nextAwake=function(){this._view=new BattleBulletArraySkinView,this.getViewComponent().addChild(this._view),this._view.visible=!1},t.prototype.nextStart=function(){this._view.start()},t.prototype.nextInit=function(){this._view.init()},t.prototype.nextReset=function(){this._view.reset()},t.prototype.nextEnable=function(){this._view.enable()},t.prototype.nextDisable=function(){this._view.disable()},t.prototype.nextRefresh=function(){this._view.refresh()},t.NAME="BattleBulletArrayViewMediator",t}(BaseViewMediator);__reflect(BattleBulletArrayViewMediator.prototype,"BattleBulletArrayViewMediator");var BattleCaiShenFaFaFaSkinView=function(e){function t(){var t=e.call(this)||this;return t._logScope="[BattleCaiShenFaFaFaSkinView]",t._isLog=!1,t.allRedEnvelopeMovieClip=new egret.MovieClip,t.itemMovieClip1=new egret.MovieClip,t.itemMovieClip2=new egret.MovieClip,t.itemMovieClip3=new egret.MovieClip,t.itemMovieClip4=new egret.MovieClip,t.itemMovieClip5=new egret.MovieClip,t.fxMovieClip1=new egret.MovieClip,t.fxMovieClip2=new egret.MovieClip,t.itemScoreName="itemScore",t.itemName="itemMovieClip",t.name="BattleCaiShenFaFaFaSkinView",t.currentState=Utils.ResourceTool.language,t}return __extends(t,e),t.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),this.awake()},t.prototype.awake=function(){Logger.log("awake",this)},t.prototype.start=function(){Logger.log("start",this),this.leftDoorMovieClip=Utils.ResourceTool.getMovieClip(GameName.JsonName.AnimationAtlas02,GameName.MCName.CaiShenFaFaFaDoor),this.leftDoorGroup.addChild(this.leftDoorMovieClip),this.rightDoorMovieClip=Utils.ResourceTool.getMovieClip(GameName.JsonName.AnimationAtlas02,GameName.MCName.CaiShenFaFaFaDoor),this.rightDoorGroup.addChild(this.rightDoorMovieClip),Utils.ResourceTool.setMovieClipData(this.allRedEnvelopeMovieClip,GameName.JsonName.AnimationAtlas02,GameName.MCName.CaiShenFaFaFaRedEnvelope),this.allRedEnvelopeMovieClip.addEventListener(egret.Event.COMPLETE,this.onOpenAnimationComplete,this),this.doorGroup.addChild(this.allRedEnvelopeMovieClip),this.startItem(this.itemMovieClip1,1),this.startItem(this.itemMovieClip2,2),this.startItem(this.itemMovieClip3,3),this.startItem(this.itemMovieClip4,4),this.startItem(this.itemMovieClip5,5),this.itemBGGroup.visible=!1,this.winGroup.blendMode=egret.BlendMode.ADD,Utils.ResourceTool.setMovieClipData(this.fxMovieClip1,GameName.JsonName.AnimationAtlas02,GameName.MCName.CaiShenFaFaFaDoorFX),this.fxGroup.addChild(this.fxMovieClip1),Utils.ResourceTool.setMovieClipData(this.fxMovieClip2,GameName.JsonName.AnimationAtlas02,GameName.MCName.CaiShenFaFaFaWinFX),this.fxGroup.addChild(this.fxMovieClip2)},t.prototype.init=function(){Logger.log("init",this)},t.prototype.reset=function(){Logger.log("reset",this),this.isLock=!1},t.prototype.enable=function(e,t,o){if(Logger.log("enable",this),0>e||e>5){var i="enable selectCount out of range, value:"+e;return Logger.error(i),void this.onErrorCallback("fish_redenvelope_error",i)}if(this.isLock){var i="enable isLock";return Logger.error(i),void this.onErrorCallback("fish_redenvelope_error",i)}this.isLock=!0;try{Utils.DisplayObjectTool.resetDisplayObject(this.itemGroup,!1);for(var n=1;5>=n;)Utils.DisplayObjectTool.resetMovieClip(this["itemMovieClip"+n],!1),this["itemMovieClip"+n].touchEnabled=!1,this["itemScore"+n].visible=!1,this["itemScore"+n].text="0",n++;this._selectEnd=!1,this._selectedCount=0,this._selectCountByLeftover=e,this._selectCountLimit=e,this._scoreArray=t,this._totoWin=Utils.MathTool.multiply(o,.001),Utils.DisplayObjectTool.resetDisplayObject(this,!0),Utils.DisplayObjectTool.resetDisplayObject(this.mainGroup,!0),this.leftDoorMovieClip.scaleX=2,this.leftDoorMovieClip.scaleY=2,this.rightDoorMovieClip.scaleX=2,this.rightDoorMovieClip.scaleY=2,Utils.DisplayObjectTool.resetDisplayObject(this.titleWordImage,!1),Utils.DisplayObjectTool.resetDisplayObject(this.titleLightWordImage,!1),this.allRedEnvelopeMovieClip.scaleX=4,this.allRedEnvelopeMovieClip.scaleY=4,Utils.DisplayObjectTool.resetDisplayObject(this.itemScoreGroup,!1),Utils.DisplayObjectTool.resetDisplayObject(this.itemBGGroup,!1),Utils.DisplayObjectTool.resetDisplayObject(this.selectWordGroup,!1),this.selectCountLabel.text="0",Utils.DisplayObjectTool.resetDisplayObject(this.winGroup,!1),this.winLabel.text="0",Utils.DisplayObjectTool.resetDisplayObject(this.winCopyGroup,!1),this.winCopyLabel.text="0",Utils.DisplayObjectTool.resetMovieClip(this.fxMovieClip1,!1),this.fxMovieClip1.scaleX=2,this.fxMovieClip1.scaleY=2,Utils.DisplayObjectTool.resetMovieClip(this.fxMovieClip2,!1),this.fxMovieClip2.scaleX=4,this.fxMovieClip2.scaleY=4,this.openDoorAnimation()
}catch(a){this.onErrorCallback("fish_redenvelope_error",a.message?a.message:"")}},t.prototype.disable=function(){Logger.log("disable",this),this._soundBGMByStart&&SoundObjectManagerProxy.getInstance().stop(this._soundBGMByStart),this._soundBGMByWait&&SoundObjectManagerProxy.getInstance().stop(this._soundBGMByWait),this._soundBGMByEnd&&SoundObjectManagerProxy.getInstance().stop(this._soundBGMByEnd),this.visible=!1,this.isLock=!1},t.prototype.refresh=function(){Logger.log("refresh",this)},t.prototype.openDoorAnimation=function(){Logger.log("openDoorAnimation",this),SoundObjectManagerProxy.getInstance().play(GameEnum.SoundTableEnum.SE_Narration_CaiShenFaFaFa_01_cn),this._soundBGMByStart=SoundObjectManagerProxy.getInstance().play(GameEnum.SoundTableEnum.SE_LD_Hit),egret.Tween.removeTweens(this.mainGroup),egret.Tween.get(this.mainGroup).wait(1250).set({scaleX:1,scaleY:1}).to({scaleX:.98,scaleY:.98},66).to({scaleX:1,scaleY:1},100),this.leftDoorMovieClip.gotoAndPlay(0,1),this.rightDoorMovieClip.gotoAndPlay(0,1),egret.Tween.removeTweens(this.titleLightWordImage),egret.Tween.get(this.titleLightWordImage).set({alpha:0,visible:!0}).wait(500).to({alpha:1},700).to({alpha:0},400).set({visible:!1}),egret.Tween.removeTweens(this.titleWordImage),egret.Tween.get(this.titleWordImage).wait(1e3).set({visible:!0}),egret.Tween.removeTweens(this.allRedEnvelopeMovieClip),this.allRedEnvelopeMovieClip.gotoAndPlay(0,1),this.allRedEnvelopeMovieClip.alpha=1,this.selectCountLabel.text=String(this._selectCountLimit),egret.Tween.removeTweens(this.selectWordGroup),egret.Tween.get(this.selectWordGroup).set({scaleX:0,scaleY:0,visible:!0}).wait(1500).to({scaleX:1.1,scaleY:1.1},330).to({scaleX:1,scaleY:1},230),this.fxMovieClip1.visible=!0,this.fxMovieClip1.gotoAndPlay(0,1)},t.prototype.onOpenAnimationComplete=function(e){Logger.log("onOpenAnimationComplete",this),this.waitAnimation()},t.prototype.waitAnimation=function(){Logger.log("waitAnimation",this),this._soundBGMByStart&&SoundObjectManagerProxy.getInstance().stop(this._soundBGMByStart),this._soundBGMByWait=SoundObjectManagerProxy.getInstance().play(GameEnum.SoundTableEnum.SE_LD_Background),egret.Tween.removeTweens(this.allRedEnvelopeMovieClip),egret.Tween.get(this.allRedEnvelopeMovieClip).to({alpha:0},2e3),egret.Tween.removeTweens(this.itemGroup),egret.Tween.get(this.itemGroup).set({alpha:0,visible:!0}).to({alpha:1},500),this.setItemAnimationByWait(this.itemMovieClip1,423,302,-12),egret.Tween.removeTweens(this.itemMovieClip1),egret.Tween.get(this.itemMovieClip1,{loop:!0}).to({alpha:.5},500).to({alpha:1},500),this.setItemAnimationByWait(this.itemMovieClip2,571,303,18),egret.Tween.removeTweens(this.itemMovieClip2),egret.Tween.get(this.itemMovieClip2,{loop:!0}).to({alpha:.5},500).to({alpha:1},500),this.setItemAnimationByWait(this.itemMovieClip3,346,417,-24),egret.Tween.removeTweens(this.itemMovieClip3),egret.Tween.get(this.itemMovieClip3,{loop:!0}).to({alpha:.5},500).to({alpha:1},500),this.setItemAnimationByWait(this.itemMovieClip4,499,406,0),egret.Tween.removeTweens(this.itemMovieClip4),egret.Tween.get(this.itemMovieClip4,{loop:!0}).to({alpha:.5},500).to({alpha:1},500),this.setItemAnimationByWait(this.itemMovieClip5,640,419,29),egret.Tween.removeTweens(this.itemMovieClip5),egret.Tween.get(this.itemMovieClip5,{loop:!0}).to({alpha:.5},500).to({alpha:1},500),this.itemScoreGroup.visible=!0,this.itemBGGroup.visible=!0,this.itemBGGroup.alpha=0,egret.Tween.get(this.itemBGGroup).to({alpha:1},200),this.setItemBGImage(this.itemBGImage1,423,302,-12),this.setItemBGImage(this.itemBGImage2,571,303,18),this.setItemBGImage(this.itemBGImage3,346,417,-24),this.setItemBGImage(this.itemBGImage4,499,406,0),this.setItemBGImage(this.itemBGImage5,640,419,29),egret.Tween.removeTweens(this),egret.Tween.get(this).wait(1e3).call(this.enabledTouch,this)},t.prototype.enabledTouch=function(){Logger.log("enabledTouch",this),this.itemMovieClip1.touchEnabled=!0,this.itemMovieClip2.touchEnabled=!0,this.itemMovieClip3.touchEnabled=!0,this.itemMovieClip4.touchEnabled=!0,this.itemMovieClip5.touchEnabled=!0,this.onCaiShenReadyCallback&&this.onCaiShenReadyCallback(this.itemMovieClip1)},t.prototype.onTouchTap=function(e){if(Logger.log("onTouchTap",this),this.itemBGGroup.visible=!1,this._selectCountByLeftover>0){SoundObjectManagerProxy.getInstance().play(GameEnum.SoundTableEnum.SE_LD_Click),this._selectCountByLeftover--;var t=e.target;this.selectItem(t);var o=Number(t.name),i=this.getItemScoreByNum(o);this.selectItemScore(i),this.selectCountLabel.text=String(this._selectCountByLeftover),this._selectedCount++}ApplicationFacade.getInstance().sendNotification(GameEvent.SceneEvent.HIDE_CURSOR)},t.prototype.onItemAnimationComplete=function(e){Logger.log("onTouchItemAnimationComplete",this);var t=e.target;egret.Tween.removeTweens(t),0==this._selectCountByLeftover&&0==this._selectEnd?(this._selectEnd=!0,egret.Tween.removeTweens(this.itemGroup),egret.Tween.get(this.itemGroup).to({alpha:1},500),egret.Tween.removeTweens(this),this._selectedCount!=this.itemGroup.numChildren?egret.Tween.get(this).wait(1e3).call(this.openAllRedEnvelopeAnimation,this):egret.Tween.get(this).wait(2e3).call(this.winAnimation,this)):0==this._selectCountByLeftover&&1==this._selectEnd&&this._selectedCount==this.itemGroup.numChildren&&(egret.Tween.removeTweens(this),egret.Tween.get(this).wait(2e3).call(this.winAnimation,this))},t.prototype.openAllRedEnvelopeAnimation=function(){Logger.log("openAllRedEnvelopeAnimation",this);for(var e=0;e<this.itemScoreGroup.numChildren;e++){var t=this.itemScoreGroup.getChildAt(e);if(0==t.visible){this.noSelectItemScore(t);var o=Number(t.name),i=this.getItemByNum(o);this.noSelectItem(i),this._selectedCount++}}},t.prototype.winAnimation=function(){var e=this;Logger.log("winAnimation",this),this._soundBGMByWait&&SoundObjectManagerProxy.getInstance().stop(this._soundBGMByWait),this._soundBGMByEnd=SoundObjectManagerProxy.getInstance().play(GameEnum.SoundTableEnum.SE_LD_End),egret.Tween.removeTweens(this.itemGroup),egret.Tween.get(this.itemGroup).wait(200).set({visible:!1}),this.selectWordGroup.visible=!1,egret.Tween.removeTweens(this.itemScoreGroup),egret.Tween.get(this.itemScoreGroup).to({alpha:0},200),this.winLabel.text=String(this._totoWin),egret.Tween.removeTweens(this.winGroup),egret.Tween.get(this.winGroup).set({scaleX:.1,scaleY:.1,alpha:0,visible:!0}).to({scaleX:1.1,scaleY:1.1,alpha:1},200).to({scaleX:1,scaleY:1,alpha:.5},200).to({alpha:0},300),this.winCopyLabel.text=String(this._totoWin),egret.Tween.removeTweens(this.winCopyGroup),egret.Tween.get(this.winCopyGroup).set({scaleX:.1,scaleY:.1,alpha:0,visible:!0}).to({scaleX:1.1,scaleY:1.1,alpha:1},200).to({scaleX:1,scaleY:1},200),egret.Tween.removeTweens(this.fxMovieClip2),egret.Tween.get(this.fxMovieClip2).wait(200).call(function(){e.fxMovieClip2.visible=!0,e.fxMovieClip2.gotoAndPlay(0,1)},this),egret.Tween.removeTweens(this),egret.Tween.get(this).wait(2e3).call(this.endAnimation,this)},t.prototype.endAnimation=function(){Logger.log("endAnimation",this),egret.Tween.removeTweens(this.mainGroup),egret.Tween.get(this.mainGroup).to({scaleX:1.1,scaleY:1.1},200).to({scaleX:.25,scaleY:.25,alpha:0},200).call(this.onPlayComplete,this)},t.prototype.onPlayComplete=function(){Logger.log("onPlayComplete",this),this._soundBGMByEnd&&SoundObjectManagerProxy.getInstance().stop(this._soundBGMByEnd),this.isLock=!1,this.onCompleteCallback&&this.onCompleteCallback(this)},t.prototype.setItemAnimationByWait=function(e,t,o,i){Logger.log("setItemAnimationByWait name:"+e.name,this),Utils.ResourceTool.setMovieClipData(e,GameName.JsonName.AnimationAtlas02,GameName.MCName.CaiShenFaFaFaRedEnvelopeSelect),e.visible=!0,e.x=t,e.y=o,e.rotation=i,e.gotoAndStop(0)},t.prototype.setItemBGImage=function(e,t,o,i){Logger.log("setItemBGImage name:"+e.name,this),Utils.DisplayObjectTool.setAnchorOffset(e),e.visible=!0,e.x=t,e.y=o,e.rotation=i,e.alpha=1},t.prototype.selectItem=function(e){Logger.log("selectItem name:"+e.name,this),e.gotoAndPlay(0,1),e.touchEnabled=!1},t.prototype.noSelectItem=function(e){Logger.log("noSelectItem name:"+e.name,this),Utils.ResourceTool.setMovieClipData(e,GameName.JsonName.AnimationAtlas02,GameName.MCName.CaiShenFaFaFaRedEnvelopeNoSelect),e.gotoAndPlay(0,1),e.touchEnabled=!1},t.prototype.setItemcoreAnimationByWin=function(e){Logger.log("setItemcoreAnimationByWin name:"+e.name,this),egret.Tween.removeTweens(e),egret.Tween.get(e).to({alpha:0},200)},t.prototype.selectItemScore=function(e){Logger.log("selectItemScore name:"+e.name,this),e.font=GameName.FontName.RedEnvelopeNumSelect,e.text=String(this._scoreArray[this._selectedCount]),egret.Tween.removeTweens(e),egret.Tween.get(e).wait(500).set({alpha:0,visible:!0}).to({alpha:1},300)},t.prototype.noSelectItemScore=function(e){Logger.log("noSelectItemScore name:"+e.name,this),e.font=GameName.FontName.RedEnvelopeNumNoSelect,e.text=String(this._scoreArray[this._selectedCount]),egret.Tween.removeTweens(e),egret.Tween.get(e).wait(500).set({alpha:0,visible:!0}).to({alpha:.5},300)},t.prototype.startItem=function(e,t){e.name=String(t),e.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTouchTap,this),e.addEventListener(egret.Event.COMPLETE,this.onItemAnimationComplete,this),this.itemGroup.addChild(e)},t.prototype.getItemScoreByNum=function(e){var t=this[""+this.itemScoreName+e];return t},t.prototype.getItemByNum=function(e){var t=this[""+this.itemName+e];return t},t}(eui.Component);__reflect(BattleCaiShenFaFaFaSkinView.prototype,"BattleCaiShenFaFaFaSkinView",["IView"]);var BattleCaiShenFaFaFaViewMediator=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._logScope="[BattleCaiShenFaFaFaViewMediator]",t._isLog=!1,t.currCaiShenFaFaFaEntity=null,t}return __extends(t,e),t.prototype.listNotificationInterests=function(){return[GameEvent.ApplicationFacadeEvent.AWAKE_COMPLETE,GameEvent.ResourceProxyEvent.LOAD_COMPLETE_NON_PRELOAD_GROUP,GameEvent.SceneEvent.LOAD_BATTLE_SCENE,GameEvent.SceneEvent.UNLOAD_BATTLE_SCENE,GameEvent.BattleCaiShenFaFaFaViewMediatorEvent.ENABLE,GameEvent.BattleCaiShenFaFaFaViewMediatorEvent.DISABLE,GameEvent.SceneEvent.HIDE_BATTLE_SCENE]},t.prototype.handleNotification=function(e){var t=e.getBody();switch(e.getName()){case GameEvent.ApplicationFacadeEvent.AWAKE_COMPLETE:this.facadeAwakeComplete();break;case GameEvent.ResourceProxyEvent.LOAD_COMPLETE_NON_PRELOAD_GROUP:t==GameEnum.LoadingCollectionTypeEnum.Battle&&this.resourceComplete();break;case GameEvent.SceneEvent.LOAD_BATTLE_SCENE:this.init();break;case GameEvent.SceneEvent.UNLOAD_BATTLE_SCENE:this.reset();break;case GameEvent.BattleCaiShenFaFaFaViewMediatorEvent.ENABLE:this.enable(t);break;case GameEvent.BattleCaiShenFaFaFaViewMediatorEvent.DISABLE:this.disable();break;case GameEvent.SceneEvent.HIDE_BATTLE_SCENE:this.disable()}},t.prototype.nextAwake=function(){this._view=new BattleCaiShenFaFaFaSkinView,this.getViewComponent().addChild(this._view),this._view.visible=!1},t.prototype.nextStart=function(){var e=this;this._view.onCompleteCallback=function(){return e.onCompleteHandled()},this._view.onCaiShenReadyCallback=function(t){return e.onCaiShenReadyCallback(t)},this._view.onErrorCallback=function(t,o){return e.onErrorCallback(t,o)},this._view.start()},t.prototype.nextInit=function(){this._view.init()},t.prototype.nextReset=function(){this._view.reset()},t.prototype.nextEnable=function(e){this._view.isLock||(this._allProxy._playerViewEntityArrayProxy.getPlayerViewEntityBySelf()==e&&e.luckyDrawEntityArray.length>0?(this._allProxy._gameDataProxy.playerNowStatus=GameName.SpecialFeatureName.SF_03,this.currCaiShenFaFaFaEntity=e.luckyDrawEntityArray.shift(),this._view.enable(this.currCaiShenFaFaFaEntity.awardOddsCount,this.currCaiShenFaFaFaEntity.showOdds,this.currCaiShenFaFaFaEntity.totalWin)):this._view.disable()),this.sendNotification(GameEvent.BattleCaiShenFaFaFaViewMediatorEvent.ENABLE_COMPLETE,e)},t.prototype.nextDisable=function(){this._view.disable();var e=this._allProxy._playerViewEntityArrayProxy.getPlayerViewEntityBySelf();this.currCaiShenFaFaFaEntity&&(e.removeQueueTotalWin(this.currCaiShenFaFaFaEntity.totalWin),this.sendNotification(GameEvent.PlayerViewEntityArrayProxyEvent.MODIFY_COMPLETE_CREDIT_VALUE,[e.seat,e.getCreditByPreCharge()]),this.currCaiShenFaFaFaEntity=null),this.sendNotification(GameEvent.BattleCaiShenFaFaFaViewMediatorEvent.DISABLE_COMPLETE)},t.prototype.nextRefresh=function(){this._view.refresh()},t.prototype.onCompleteHandled=function(){this.disable()},t.prototype.onCaiShenReadyCallback=function(e){this.sendNotification(GameEvent.BattleCaiShenFaFaFaViewMediatorEvent.READY_COMPLETE,e)},t.prototype.onWheelOfFortuneReadyCallback=function(e){this.sendNotification(GameEvent.BattleWheelOfFortuneViewMediatorEvent.READY_COMPLETE,e)},t.NAME="BattleCaiShenFaFaFaViewMediator",t}(BaseViewMediator);__reflect(BattleCaiShenFaFaFaViewMediator.prototype,"BattleCaiShenFaFaFaViewMediator");var BattleCoinArraySkinView=function(e){function t(){var t=e.call(this)||this;return t._logScope="[BattleCoinArraySkinView]",t._isLog=!1,t.name="BattleCoinArraySkinView",t.touchEnabled=t.touchChildren=!1,t.currentState=Utils.ResourceTool.language,t}return __extends(t,e),t.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),this.awake()},t.prototype.awake=function(){Logger.log("awake",this)},t.prototype.start=function(){Logger.log("start",this)},t.prototype.init=function(){Logger.log("init",this)},t.prototype.reset=function(){Logger.log("reset",this)},t.prototype.enable=function(){Logger.log("enable",this),this.visible=!0},t.prototype.disable=function(){Logger.log("disable",this),this.visible=!1},t.prototype.refresh=function(){Logger.log("refresh",this)},t}(eui.Component);__reflect(BattleCoinArraySkinView.prototype,"BattleCoinArraySkinView",["IView"]);var BattleCoinArrayViewMediator=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._logScope="[BattleCoinArrayViewMediator]",t._isLog=!1,t}return __extends(t,e),t.prototype.listNotificationInterests=function(){return[GameEvent.ApplicationFacadeEvent.AWAKE_COMPLETE,GameEvent.ResourceProxyEvent.LOAD_COMPLETE_NON_PRELOAD_GROUP,GameEvent.SceneEvent.LOAD_BATTLE_SCENE,GameEvent.SceneEvent.UNLOAD_BATTLE_SCENE]},t.prototype.handleNotification=function(e){var t=e.getBody();switch(e.getName()){case GameEvent.ApplicationFacadeEvent.AWAKE_COMPLETE:this.facadeAwakeComplete();break;case GameEvent.ResourceProxyEvent.LOAD_COMPLETE_NON_PRELOAD_GROUP:t==GameEnum.LoadingCollectionTypeEnum.Battle&&this.resourceComplete();break;case GameEvent.SceneEvent.LOAD_BATTLE_SCENE:this.init(),this.enable();break;case GameEvent.SceneEvent.UNLOAD_BATTLE_SCENE:this.disable(),this.reset()}},t.prototype.nextAwake=function(){this._view=new BattleCoinArraySkinView,this.getViewComponent().addChild(this._view),this._view.visible=!1},t.prototype.nextStart=function(){this._view.start()},t.prototype.nextInit=function(){this._view.init(),this._view.touchEnabled=this._view.touchChildren=!1},t.prototype.nextReset=function(){this._view.reset()},t.prototype.nextEnable=function(){this._view.enable()},t.prototype.nextDisable=function(){this._view.disable()},t.prototype.nextRefresh=function(){this._view.refresh()},t.NAME="BattleCoinArrayViewMediator",t}(BaseViewMediator);__reflect(BattleCoinArrayViewMediator.prototype,"BattleCoinArrayViewMediator");var BattleEffectArraySkinView=function(e){function t(){var t=e.call(this)||this;return t._logScope="[BattleEffectArraySkinView]",t._isLog=!1,t.name="BattleEffectArraySkinView",t.touchEnabled=t.touchChildren=!1,t.currentState=Utils.ResourceTool.language,t}return __extends(t,e),t.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),this.awake()},t.prototype.awake=function(){Logger.log("awake",this)},t.prototype.start=function(){Logger.log("start",this)},t.prototype.init=function(){Logger.log("init",this)},t.prototype.reset=function(){Logger.log("reset",this)},t.prototype.enable=function(){Logger.log("enable",this),this.visible=!0},t.prototype.disable=function(){Logger.log("disable",this),this.visible=!1},t.prototype.refresh=function(){Logger.log("refresh",this)},t}(eui.Component);__reflect(BattleEffectArraySkinView.prototype,"BattleEffectArraySkinView",["IView"]);var BattleEffectArrayViewMediator=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._logScope="[BattleEffectArrayViewMediator]",t._isLog=!1,t}return __extends(t,e),t.prototype.listNotificationInterests=function(){return[GameEvent.ApplicationFacadeEvent.AWAKE_COMPLETE,GameEvent.ResourceProxyEvent.LOAD_COMPLETE_NON_PRELOAD_GROUP,GameEvent.SceneEvent.LOAD_BATTLE_SCENE,GameEvent.SceneEvent.UNLOAD_BATTLE_SCENE]},t.prototype.handleNotification=function(e){var t=e.getBody();switch(e.getName()){case GameEvent.ApplicationFacadeEvent.AWAKE_COMPLETE:this.facadeAwakeComplete();break;case GameEvent.ResourceProxyEvent.LOAD_COMPLETE_NON_PRELOAD_GROUP:t==GameEnum.LoadingCollectionTypeEnum.Battle&&this.resourceComplete();break;case GameEvent.SceneEvent.LOAD_BATTLE_SCENE:this.init(),this.enable();break;case GameEvent.SceneEvent.UNLOAD_BATTLE_SCENE:this.disable(),this.reset()}},t.prototype.nextAwake=function(){this._view=new BattleEffectArraySkinView,this.getViewComponent().addChild(this._view),this._view.visible=!1},t.prototype.nextStart=function(){this._view.start()},t.prototype.nextInit=function(){this._view.init()},t.prototype.nextReset=function(){this._view.reset()},t.prototype.nextEnable=function(){this._view.enable()},t.prototype.nextDisable=function(){this._view.disable()},t.prototype.nextRefresh=function(){this._view.refresh()},t.NAME="BattleEffectArrayViewMediator",t}(BaseViewMediator);__reflect(BattleEffectArrayViewMediator.prototype,"BattleEffectArrayViewMediator");var BattleFishArraySkinView=function(e){function t(){var t=e.call(this)||this;return t._logScope="[BattleFishArraySkinView]",t._isLog=!1,t._moveTime=3e3,t._offsetX=300,t.name="BattleFishArraySkinView",t.currentState=Utils.ResourceTool.language,t}return __extends(t,e),t.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),this.awake()},t.prototype.awake=function(){Logger.log("awake",this),this.width=GameSettingProxy.screenWidth,this.height=GameSettingProxy.screenHeight,Utils.DisplayObjectTool.setAnchorOffset(this),this.x=this.width/2,this.y=this.height/2,this.outsidePointArray=new Array,this.insidePointArray=new Array;for(var e=0;e<this.outsidePointGroup.numChildren;e++){var t=this.outsidePointGroup.getChildAt(e),o=new egret.Point(t.x,t.y);this.outsidePointArray.push(o)}for(var e=0;e<this.insidePointGroup.numChildren;e++){var t=this.insidePointGroup.getChildAt(e),o=new egret.Point(t.x,t.y);this.insidePointArray.push(o)}},t.prototype.start=function(){Logger.log("start",this),this.scrollRect=new egret.Rectangle(0,0,this.width,this.height)},t.prototype.init=function(){Logger.log("init",this),this._lock=!1,this.scrollRect.width=this.width+this._offsetX},t.prototype.reset=function(){Logger.log("reset",this),this._lock=!1,egret.Tween.removeTweens(this.scrollRect),this.scrollRect.x=0,this.scrollRect.width=this.width+this._offsetX},t.prototype.enable=function(){Logger.log("enable",this),this.visible=!0},t.prototype.disable=function(){Logger.log("disable",this),this.visible=!1},t.prototype.refresh=function(){Logger.log("refresh",this)},t.prototype.getOutsidePoint=function(e){return this.getSidePoint(e,this.outsidePointGroup)},t.prototype.getInsidePoint=function(e){return this.getSidePoint(e,this.insidePointGroup)},t.prototype.getSidePoint=function(e,t){for(var o=0;o<t.numChildren;o++){var i=t.name+"_"+e,n=t.getChildAt(o);if(n.id==i)return n}return null},t.prototype.moveWave=function(){this._lock||(this.init(),this._lock=!0,0==this.rotation?egret.Tween.get(this.scrollRect).to({width:-this._offsetX},3e3).call(this.onMoveWaveComplete,this):egret.Tween.get(this.scrollRect,{onChange:this.onChange,onChangeObj:this}).to({width:-this._offsetX},3e3).call(this.onMoveWaveComplete,this))},t.prototype.onChange=function(){this.scrollRect.x=this.width-this.scrollRect.width},t.prototype.onMoveWaveComplete=function(){egret.callLater(this.reset,this)},t}(eui.Component);__reflect(BattleFishArraySkinView.prototype,"BattleFishArraySkinView",["IView"]);var BattleFishArrayViewMediator=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._logScope="[BattleFishArrayViewMediator]",t._isLog=!1,t}return __extends(t,e),t.prototype.listNotificationInterests=function(){return[GameEvent.ApplicationFacadeEvent.AWAKE_COMPLETE,GameEvent.ResourceProxyEvent.LOAD_COMPLETE_NON_PRELOAD_GROUP,GameEvent.SceneEvent.LOAD_BATTLE_SCENE,GameEvent.SceneEvent.UNLOAD_BATTLE_SCENE,GameEvent.BattleSceneEvent.CHANGE_BACKGROUND,GameEvent.BattleSceneEvent.ENTER_FRAME]},t.prototype.handleNotification=function(e){var t=e.getBody();switch(e.getName()){case GameEvent.BattleSceneEvent.ENTER_FRAME:this.shadowMode&&(this.renderTexture.drawToTexture(this._view,this.rect),this._bmp.texture=this.renderTexture,this._allProxy._gameDataProxy.averageFPS<30&&(this.shadowMode=!1,this._bmp.texture=null,this._shadowView.removeChild(this._bmp),this.getViewComponent().removeChild(this._shadowView)));break;case GameEvent.ApplicationFacadeEvent.AWAKE_COMPLETE:this.facadeAwakeComplete();break;case GameEvent.ResourceProxyEvent.LOAD_COMPLETE_NON_PRELOAD_GROUP:t==GameEnum.LoadingCollectionTypeEnum.Battle&&this.resourceComplete();break;case GameEvent.SceneEvent.LOAD_BATTLE_SCENE:this.init(),this.enable();break;case GameEvent.SceneEvent.UNLOAD_BATTLE_SCENE:this.disable(),this.reset();break;case GameEvent.ProtocolProxyEvent.MODIFY_COMPLETE_SC_SYNC_VALUE:this.refresh();break;case GameEvent.BattleSceneEvent.CHANGE_BACKGROUND:this._view.moveWave()}},t.prototype.nextAwake=function(){this._view=new BattleFishArraySkinView,this.getViewComponent().addChild(this._view),this._view.visible=!1,this.shadowMode=!0,this.shadowMode&&(this.renderTexture=new egret.RenderTexture,this.rect=new egret.Rectangle(0,0,GameSettingProxy.screenWidth,GameSettingProxy.screenHeight),this._bmp=new egret.Bitmap,this._bmp.anchorOffsetX=Utils.MathTool.multiply(GameSettingProxy.screenWidth,.5),this._bmp.anchorOffsetY=Utils.MathTool.multiply(GameSettingProxy.screenHeight,.5),this._bmp.x=this._bmp.anchorOffsetX,this._bmp.y=this._bmp.anchorOffsetY,this._shadowView=new egret.Sprite,this._shadowView.addChild(this._bmp),this._shadowView.name="shadow",this.getViewComponent().addChildAt(this._shadowView,1),this._shadowView.x=25,this._shadowView.y=25,this._shadowView.filters=[new egret.ColorMatrixFilter([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,.3,0])])},t.prototype.nextStart=function(){this._view.start()},t.prototype.nextInit=function(){this._view.init()},t.prototype.nextReset=function(){this._view.reset()},t.prototype.nextEnable=function(){Utils.GameTool.isReverseByLayer(this._allProxy._gameDataProxy.seatID)?(this._view.rotation=180,this.shadowMode&&(this._bmp.rotation=180)):(this._view.rotation=0,this.shadowMode&&(this._bmp.rotation=0)),this._view.enable()},t.prototype.nextDisable=function(){this._view.disable()},t.prototype.nextRefresh=function(){this._view.refresh()},t.NAME="BattleFishArrayViewMediator",t}(BaseViewMediator);__reflect(BattleFishArrayViewMediator.prototype,"BattleFishArrayViewMediator");var BattleInfoSkinView=function(e){function t(){var t=e.call(this)||this;return t._logScope="[BattleInfoSkinView]",t._isLog=!1,t.lockIcon=new eui.Image,t.dampingTime=500,t.name="BattleInfoSkinView",t}return __extends(t,e),t.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),this.awake()},t.prototype.awake=function(){Logger.log("awake",this)},t.prototype.start=function(){Logger.log("start",this),this.lockIcon.texture=Utils.ResourceTool.getTextureRes(GameName.TextureName.LockSign),this.lockIcon.visible=!1,Utils.DisplayObjectTool.setAnchorOffset(this.lockIcon),this.addChild(this.lockIcon);var e=new eui.Group;this.autoIcon=Utils.ResourceTool.getMovieClip(GameName.JsonName.AnimationAtlas01,GameName.MCName.Touch),this.autoIcon.visible=!1,this.autoIcon.addEventListener(egret.Event.COMPLETE,this.stopAutoIcon,this),this.touchEnabled=this.touchChildren=!1,e.touchThrough=!0,this.addChild(e),e.addChild(this.autoIcon)},t.prototype.init=function(e,t,o){Logger.log("init",this);var i=TableEntityProxy.getInstance().getZoneTableEntity(e);this.roomInfoZoneTypeImage.texture=Utils.ResourceTool.getTextureResByLanguage(i.battleTextureName),this.roomNumberLabel.text=t,this.denomRangeLabel.text=o},t.prototype.reset=function(){Logger.log("reset",this)},t.prototype.enable=function(){Logger.log("enable",this),this.visible=!0},t.prototype.disable=function(){Logger.log("disable",this),this.visible=!1},t.prototype.refresh=function(){Logger.log("refresh",this)},t.prototype.setLockIconPos=function(e){var t=this.lockIcon;egret.Tween.removeTweens(this.lockIcon),t.visible=!0,t.alpha=0,t.scaleX=2,t.scaleY=2,t.x=e.x-this.x,t.y=e.y-this.y,t.rotation=0,egret.Tween.get(t).to({alpha:1,scaleX:1,scaleY:1},150),egret.Tween.get(t,{loop:!0}).to({rotation:90},2e3).set({rotation:0})},t.prototype.updateLockIconPos=function(e,t){var o=this.lockIcon;t?(o.x=960-e.x-this.x,o.y=540-e.y-this.y):(o.x=e.x-this.x,o.y=e.y-this.y)},t.prototype.hideLockIcon=function(){egret.Tween.get(this.lockIcon).to({alpha:0},300).set({visible:!1})},t.prototype.setAutoIconPos=function(e){var t=this.autoIcon;egret.Tween.removeTweens(t),t.alpha=1,t.x=e[0],t.y=e[1],t.visible||t.gotoAndPlay("Loop",0),t.visible=!0},t.prototype.hideAutoIcon=function(){egret.Tween.get(this.autoIcon).to({alpha:0},300).set({visible:!1})},t.prototype.stopAutoIcon=function(e){var t=e.currentTarget;"Loop"==t.currentLabel&&t.gotoAndPlay("Once",0)},t}(eui.Component);__reflect(BattleInfoSkinView.prototype,"BattleInfoSkinView",["IView"]);var BattleInfoViewMediator=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._logScope="BattleInfoViewMediator",t._isLog=!1,t}return __extends(t,e),t.prototype.listNotificationInterests=function(){return[GameEvent.ApplicationFacadeEvent.AWAKE_COMPLETE,GameEvent.ResourceProxyEvent.LOAD_COMPLETE_NON_PRELOAD_GROUP,GameEvent.SceneEvent.LOAD_BATTLE_SCENE,GameEvent.SceneEvent.UNLOAD_BATTLE_SCENE,GameEvent.ProtocolProxyEvent.MODIFY_COMPLETE_SC_ROOM_LOGIN_VALUE,GameEvent.ProtocolProxyEvent.MODIFY_COMPLETE_CS_ROOM_LOGOUT_VALUE,GameEvent.BattleSceneEvent.ENTER_FRAME,GameEvent.GameDataProxyEvent.SET_AUTO_FIRE_TARGET,GameEvent.GameDataProxyEvent.REMOVE_AUTO_FIRE_TARGET,GameEvent.GameDataProxyEvent.SET_LOCK_FIRE_TARGET,GameEvent.GameDataProxyEvent.REMOVE_LOCK_FIRE_TARGET,GameEvent.BattleSpecialButtonViewMediatorEvent.SET_COMPLETE_AUTO,GameEvent.BattleSpecialButtonViewMediatorEvent.SET_COMPLETE_LOCK,GameEvent.FishViewObjectManagerProxyEvent.CHANGE_COMPLETE_STATE_DIE,GameEvent.FishViewObjectManagerProxyEvent.CHANGE_COMPLETE_STATE_STONE_BEGIN,GameEvent.PlayerViewEntityArrayProxyEvent.MODIFY_COMPLETE_FORT,GameEvent.BattleCaiShenFaFaFaViewMediatorEvent.ENABLE_COMPLETE,GameEvent.BattleWheelOfFortuneViewMediatorEvent.ENABLE_COMPLETE]},t.prototype.handleNotification=function(e){var t=e.getBody();switch(e.getName()){case GameEvent.ApplicationFacadeEvent.AWAKE_COMPLETE:this.facadeAwakeComplete();break;case GameEvent.ResourceProxyEvent.LOAD_COMPLETE_NON_PRELOAD_GROUP:t==GameEnum.LoadingCollectionTypeEnum.Battle&&this.resourceComplete();break;case GameEvent.SceneEvent.LOAD_BATTLE_SCENE:break;case GameEvent.SceneEvent.UNLOAD_BATTLE_SCENE:this.disable(),this.reset();break;case GameEvent.ProtocolProxyEvent.MODIFY_COMPLETE_SC_ROOM_LOGIN_VALUE:this.init(t),this.enable();break;case GameEvent.BattleSceneEvent.ENTER_FRAME:this.onEnterFrame();break;case GameEvent.GameDataProxyEvent.SET_AUTO_FIRE_TARGET:this.setAutoFireTarget(t);break;case GameEvent.GameDataProxyEvent.REMOVE_AUTO_FIRE_TARGET:this.removeAutoFireTarget();break;case GameEvent.GameDataProxyEvent.SET_LOCK_FIRE_TARGET:this.setLockFireTarget(t);break;case GameEvent.GameDataProxyEvent.REMOVE_LOCK_FIRE_TARGET:this.removeLockFireTarget();break;case GameEvent.BattleSpecialButtonViewMediatorEvent.SET_COMPLETE_AUTO:case GameEvent.BattleSpecialButtonViewMediatorEvent.SET_COMPLETE_LOCK:case GameEvent.ProtocolProxyEvent.MODIFY_COMPLETE_CS_ROOM_LOGOUT_VALUE:this._view.hideAutoIcon(),this._view.hideLockIcon();break;case GameEvent.FishViewObjectManagerProxyEvent.CHANGE_COMPLETE_STATE_DIE:case GameEvent.FishViewObjectManagerProxyEvent.CHANGE_COMPLETE_STATE_STONE_BEGIN:var o=t,i=o.scSyncEntity;i.playerId==this._allProxy._gameDataProxy.playerID&&i.spinRequest.targetId==GameEnum.FishTableEnum.S_201&&this._view.hideAutoIcon();break;case GameEvent.PlayerViewEntityArrayProxyEvent.MODIFY_COMPLETE_FORT:this._allProxy._playerViewEntityArrayProxy.checkIsSelfBySeatID(t.seatID)&&this._view.hideAutoIcon();break;case GameEvent.BattleCaiShenFaFaFaViewMediatorEvent.ENABLE_COMPLETE:case GameEvent.BattleWheelOfFortuneViewMediatorEvent.ENABLE_COMPLETE:t=t,t.isSelf&&this._view.hideAutoIcon()}},t.prototype.nextAwake=function(){this._view=new BattleInfoSkinView,this.getViewComponent().addChild(this._view),this._view.visible=!1},t.prototype.nextStart=function(){this._view.start()},t.prototype.nextInit=function(e){var t=this._allProxy._gameDataProxy.roomNumber,o=""+Utils.TranslateTool.betRange2CashTenDolla2Sign(e.iMinBet,e.iMaxBet,e.iDenom);this._view.init(e.iRoomType,String(t),""+o),this._view.roomNumberLabel.visible=GameSettingProxy.debug},t.prototype.nextReset=function(){this._view.reset()},t.prototype.nextEnable=function(){this._view.enable()},t.prototype.nextDisable=function(){this._view.disable()},t.prototype.nextRefresh=function(){this._view.refresh()},t.prototype.onEnterFrame=function(){null!=this._allProxy._gameDataProxy.lockFish&&this._view.updateLockIconPos(this._allProxy._gameDataProxy.lockFish,Utils.GameTool.isReverseByLayer(this._allProxy._gameDataProxy.seatID))},t.prototype.setAutoFireTarget=function(e){this._view.setAutoIconPos(e)},t.prototype.removeAutoFireTarget=function(){this._view.hideAutoIcon()},t.prototype.setLockFireTarget=function(e){this._view.setLockIconPos(e)},t.prototype.removeLockFireTarget=function(){this._view.hideLockIcon()},t.NAME="BattleInfoViewMediator",t}(BaseViewMediator);__reflect(BattleInfoViewMediator.prototype,"BattleInfoViewMediator");var BattleLockSkinView=function(e){function t(){var t=e.call(this)||this;return t._logScope="[BattleLockSkinView]",t._isLog=!1,t.name="BattleLockSkinView",t.currentState=Utils.ResourceTool.language,t}return __extends(t,e),t.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),this.awake()},t.prototype.awake=function(){Logger.log("awake",this)},t.prototype.start=function(){Logger.log("start",this)},t.prototype.init=function(){Logger.log("init",this)},t.prototype.reset=function(){Logger.log("reset",this)},t.prototype.enable=function(){Logger.log("enable",this),this.visible=!0},t.prototype.disable=function(){Logger.log("disable",this),this.visible=!1},t.prototype.refresh=function(){Logger.log("refresh",this)},t}(eui.Component);__reflect(BattleLockSkinView.prototype,"BattleLockSkinView",["IView"]);var BattleMedalArraySkinView=function(e){function t(){var t=e.call(this)||this;return t._logScope="[BattleMedalArraySkinView]",t._isLog=!1,t.name="BattleMedalArraySkinView",t.touchEnabled=t.touchChildren=!1,t.currentState=Utils.ResourceTool.language,t}return __extends(t,e),t.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),this.awake()},t.prototype.awake=function(){Logger.log("awake",this)},t.prototype.start=function(){Logger.log("start",this)},t.prototype.init=function(){Logger.log("init",this)},t.prototype.reset=function(){Logger.log("reset",this)},t.prototype.enable=function(){Logger.log("enable",this),this.visible=!0},t.prototype.disable=function(){Logger.log("disable",this),this.visible=!1},t.prototype.refresh=function(){Logger.log("refresh",this)},t}(eui.Component);__reflect(BattleMedalArraySkinView.prototype,"BattleMedalArraySkinView",["IView"]);var BattleMedalArrayViewMediator=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;
return t._logScope="[BattleMedalArrayViewMediator]",t._isLog=!1,t}return __extends(t,e),t.prototype.listNotificationInterests=function(){return[GameEvent.ApplicationFacadeEvent.AWAKE_COMPLETE,GameEvent.ResourceProxyEvent.LOAD_COMPLETE_NON_PRELOAD_GROUP,GameEvent.SceneEvent.LOAD_BATTLE_SCENE,GameEvent.SceneEvent.UNLOAD_BATTLE_SCENE,GameEvent.ProtocolProxyEvent.MODIFY_COMPLETE_SC_SYNC_VALUE]},t.prototype.handleNotification=function(e){var t=e.getBody();switch(e.getName()){case GameEvent.ApplicationFacadeEvent.AWAKE_COMPLETE:this.facadeAwakeComplete();break;case GameEvent.ResourceProxyEvent.LOAD_COMPLETE_NON_PRELOAD_GROUP:t==GameEnum.LoadingCollectionTypeEnum.Battle&&this.resourceComplete();break;case GameEvent.SceneEvent.LOAD_BATTLE_SCENE:this.init(),this.enable();break;case GameEvent.SceneEvent.UNLOAD_BATTLE_SCENE:this.disable(),this.reset();break;case GameEvent.ProtocolProxyEvent.MODIFY_COMPLETE_SC_SYNC_VALUE:this.refresh()}},t.prototype.nextAwake=function(){this._view=new BattleMedalArraySkinView,this.getViewComponent().addChild(this._view),this._view.visible=!1},t.prototype.nextStart=function(){this._view.start()},t.prototype.nextInit=function(){this._view.init()},t.prototype.nextReset=function(){this._view.reset()},t.prototype.nextEnable=function(){this._view.enable()},t.prototype.nextDisable=function(){this._view.disable()},t.prototype.nextRefresh=function(){this._view.refresh()},t.NAME="BattleMedalArrayViewMediator",t}(BaseViewMediator);__reflect(BattleMedalArrayViewMediator.prototype,"BattleMedalArrayViewMediator");var BattlePlayerArraySkinView=function(e){function t(){var t=e.call(this)||this;return t._logScope="[BattlePlayerArraySkinView]",t._isLog=!1,t.name="BattlePlayerArraySkinView",t.currentState=Utils.ResourceTool.language,t}return __extends(t,e),t.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),this.awake()},t.prototype.awake=function(){Logger.log("awake",this),Utils.DisplayObjectTool.setAnchorOffset(this),this.x=this.width/2,this.y=this.height/2,this.battlePlayerSkinViewArray=new Array,this.battlePlayerSkinViewArray.push(this.player0),this.battlePlayerSkinViewArray.push(this.player1),this.battlePlayerSkinViewArray.push(this.player2),this.battlePlayerSkinViewArray.push(this.player3)},t.prototype.start=function(){Logger.log("start",this);for(var e in this.battlePlayerSkinViewArray)this.battlePlayerSkinViewArray[e].start(Number(e))},t.prototype.init=function(e){Logger.log("init",this);for(var t in this.battlePlayerSkinViewArray)this.battlePlayerSkinViewArray[t].init(e)},t.prototype.reset=function(){Logger.log("reset",this);for(var e in this.battlePlayerSkinViewArray)this.battlePlayerSkinViewArray[e].reset()},t.prototype.enable=function(){Logger.log("enable",this),this.visible=!0;for(var e in this.battlePlayerSkinViewArray)this.battlePlayerSkinViewArray[e].enable()},t.prototype.disable=function(){Logger.log("disable",this),this.visible=!1;for(var e in this.battlePlayerSkinViewArray)this.battlePlayerSkinViewArray[e].disable()},t.prototype.refresh=function(){Logger.log("refresh",this);for(var e in this.battlePlayerSkinViewArray)this.battlePlayerSkinViewArray[e].refresh()},t}(eui.Component);__reflect(BattlePlayerArraySkinView.prototype,"BattlePlayerArraySkinView",["IView"]);var BattlePlayerArrayViewMediator=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._logScope="[BattlePlayerArrayViewMediator]",t._isLog=!1,t.autoFireMode=!1,t.autoFireDelay=200,t.autoFireBazookaDelay=125,t.lockFireMode=!1,t.fireTime=0,t}return __extends(t,e),t.prototype.listNotificationInterests=function(){return[GameEvent.ApplicationFacadeEvent.AWAKE_COMPLETE,GameEvent.ResourceProxyEvent.LOAD_COMPLETE_NON_PRELOAD_GROUP,GameEvent.SceneEvent.LOAD_BATTLE_SCENE,GameEvent.SceneEvent.UNLOAD_BATTLE_SCENE,GameEvent.PlayerViewEntityArrayProxyEvent.CLEAR_COMPLETE_PLAYER_ARRAY,GameEvent.PlayerViewEntityArrayProxyEvent.MODIFY_COMPLETE_CREDIT_VALUE,GameEvent.PlayerViewEntityArrayProxyEvent.MODIFY_COMPLETE_BET_VALUE,GameEvent.PlayerViewEntityArrayProxyEvent.MODIFY_COMPLETE_FORT,GameEvent.PlayerViewEntityArrayProxyEvent.FIRE_BULLET,GameEvent.PlayerViewEntityArrayProxyEvent.ADD_COMPLETE_PLAYER,GameEvent.PlayerViewEntityArrayProxyEvent.REMOVE_COMPLETE_PLAYER,GameEvent.PlayerViewEntityArrayProxyEvent.REMOVE_COMPLETE_PLAYER,GameEvent.SceneEvent.BATTLE_TOUCH_BEGIN,GameEvent.SceneEvent.BATTLE_TOUCH_MOVE,GameEvent.SceneEvent.BATTLE_TOUCH_END,GameEvent.BattleSpecialButtonViewMediatorEvent.SET_COMPLETE_AUTO,GameEvent.BattleSpecialButtonViewMediatorEvent.SET_COMPLETE_LOCK,GameEvent.FishViewObjectManagerProxyEvent.CHANGE_COMPLETE_STATE_DIE,GameEvent.FishViewObjectManagerProxyEvent.CHANGE_COMPLETE_STATE_STONE_BEGIN,GameEvent.FishViewObjectManagerProxyEvent.MODIFY_COMPLETE_GO_OUT_FISH,GameEvent.FishViewObjectManagerProxyEvent.MODIFY_COMPLETE_MOVE_FISH,GameEvent.BattleSceneEvent.CHANGE_BACKGROUND,GameEvent.BattleSceneEvent.CHANGE_BACKGROUND_COMPLETE,GameEvent.BattleCaiShenFaFaFaViewMediatorEvent.ENABLE_COMPLETE,GameEvent.BattleWheelOfFortuneViewMediatorEvent.ENABLE_COMPLETE,GameEvent.ProtocolProxyEvent.DISCONNECT_SMARTFOX]},t.prototype.handleNotification=function(e){var t=e.getBody();switch(e.getName()){case GameEvent.ApplicationFacadeEvent.AWAKE_COMPLETE:this.facadeAwakeComplete();break;case GameEvent.ResourceProxyEvent.LOAD_COMPLETE_NON_PRELOAD_GROUP:t==GameEnum.LoadingCollectionTypeEnum.Battle&&this.resourceComplete();break;case GameEvent.SceneEvent.LOAD_BATTLE_SCENE:this.init(),this.enable();break;case GameEvent.SceneEvent.UNLOAD_BATTLE_SCENE:this.disable(),this.reset(),this._allProxy._gameDataProxy.lockFish=null,this.stopAutoFire(),this.autoFireMode=this.lockFireMode=!1;break;case GameEvent.PlayerViewEntityArrayProxyEvent.ADD_COMPLETE_PLAYER:this.addPlayer(t);break;case GameEvent.PlayerViewEntityArrayProxyEvent.REMOVE_COMPLETE_PLAYER:this.removePlayer(t);break;case GameEvent.PlayerViewEntityArrayProxyEvent.CLEAR_COMPLETE_PLAYER_ARRAY:this.clearPlayerArray();break;case GameEvent.PlayerViewEntityArrayProxyEvent.MODIFY_COMPLETE_CREDIT_VALUE:this.updateCredit(t[0],t[1]);break;case GameEvent.PlayerViewEntityArrayProxyEvent.MODIFY_COMPLETE_BET_VALUE:this.updateBet(t[0],t[1],t[2]);break;case GameEvent.PlayerViewEntityArrayProxyEvent.MODIFY_COMPLETE_FORT:this.updateFort(t.seatID,t.bulletType,t.bulletCount,t.animation),this.updateFortCount(t.seatID,t.bulletCount),this._allProxy._playerViewEntityArrayProxy.checkIsSelfBySeatID(t.seatID)&&(t.isRetrigger||(this.stopAutoFire(),this._allProxy._gameDataProxy.lockFish=null),t.bulletType!=GameEnum.FortTableEnum.Normal?this.disableBetBtn():this.enableBetBtn());break;case GameEvent.PlayerViewEntityArrayProxyEvent.FIRE_BULLET:this.fireBullet(t[0],t[1]);break;case GameEvent.SceneEvent.BATTLE_TOUCH_BEGIN:this.TouchDown(t);break;case GameEvent.SceneEvent.BATTLE_TOUCH_MOVE:this.TouchMove(t);break;case GameEvent.SceneEvent.BATTLE_TOUCH_END:this.TouchEnd(t);break;case GameEvent.BattleSpecialButtonViewMediatorEvent.SET_COMPLETE_AUTO:this._allProxy._gameDataProxy.lockFish=null,this.stopAutoFire(),this.autoFireMode=!this.autoFireMode,this.lockFireMode=!1;break;case GameEvent.BattleSpecialButtonViewMediatorEvent.SET_COMPLETE_LOCK:this.stopAutoFire(),this.autoFireMode=!1,this.lockFireMode=!this.lockFireMode,this.lockFireMode||(this._allProxy._gameDataProxy.lockFish=null);break;case GameEvent.FishViewObjectManagerProxyEvent.CHANGE_COMPLETE_STATE_DIE:case GameEvent.FishViewObjectManagerProxyEvent.CHANGE_COMPLETE_STATE_STONE_BEGIN:var o=t,i=o.scSyncEntity;(t==this._allProxy._gameDataProxy.lockFish&&null!=i&&!Utils.GameTool.isWeaponFish(i.spinRequest.targetId)||Utils.GameTool.isWeaponFish(i.spinRequest.targetId)&&this._allProxy._protocolProxy.checkSelfPlayerID(i.playerId))&&(this._allProxy._gameDataProxy.lockFish=null,this.stopAutoFire(),t.scSyncEntity.spinRequest.targetId==GameEnum.FishTableEnum.S_201&&(this.autoFireMode=this.lockFireMode=!1));break;case GameEvent.FishViewObjectManagerProxyEvent.MODIFY_COMPLETE_GO_OUT_FISH:this._allProxy._gameDataProxy.lockFish==t&&(this._allProxy._gameDataProxy.lockFish=null,this.stopAutoFire());break;case GameEvent.FishViewObjectManagerProxyEvent.MODIFY_COMPLETE_MOVE_FISH:this.onLockedFishMove(t);break;case GameEvent.BattleSceneEvent.CHANGE_BACKGROUND:this._allProxy._gameDataProxy.changingBackground=!0,this._allProxy._gameDataProxy.lockFish=null,this.lockFireMode&&this.stopAutoFire();break;case GameEvent.BattleSceneEvent.CHANGE_BACKGROUND_COMPLETE:this._allProxy._gameDataProxy.changingBackground=!1;break;case GameEvent.BattleCaiShenFaFaFaViewMediatorEvent.ENABLE_COMPLETE:case GameEvent.BattleWheelOfFortuneViewMediatorEvent.ENABLE_COMPLETE:t=t,t.isSelf&&(this._allProxy._gameDataProxy.lockFish=null,this.stopAutoFire());break;case GameEvent.ProtocolProxyEvent.DISCONNECT_SMARTFOX:this._allProxy._gameDataProxy.lockFish=null,this.stopAutoFire()}},t.prototype.nextAwake=function(){this._view=new BattlePlayerArraySkinView,this.getViewComponent().addChild(this._view),this._view.visible=!1,this.autoFireTimer=new egret.Timer(this.autoFireDelay)},t.prototype.nextStart=function(){var e=this;for(var t in this._view.battlePlayerSkinViewArray){var o=this._view.battlePlayerSkinViewArray[t];o.updateFortCompleteCallback=function(t){return e.updateFortCompleteHandle(t)},o.touchTapCallback=function(t,o){return e.touchTapHandle(t,o)},o.setPlayerCanFire=function(t,o){return e.setPlayerCanFire(t,o)}}this._view.start()},t.prototype.nextInit=function(){var e=this;egret.setTimeout(function(){var t=e._allProxy._gameDataProxy.seatID;e._view.init(t)},this,100),this.autoFireTimer.addEventListener(egret.TimerEvent.TIMER,this.onAutoFireTimer,this)},t.prototype.nextReset=function(){this.autoFireTimer.removeEventListener(egret.TimerEvent.TIMER,this.onAutoFireTimer,this),this._view.reset()},t.prototype.nextEnable=function(){Utils.GameTool.isReverseByLayer(this._allProxy._gameDataProxy.seatID)?this._view.rotation=180:this._view.rotation=0,this._view.enable()},t.prototype.nextDisable=function(){this._view.disable()},t.prototype.nextRefresh=function(){this._view.refresh()},t.prototype.getSkinView=function(){return this._view},t.prototype.getBattlePlayerSkinViewBySeat=function(e){return this._view.battlePlayerSkinViewArray[e]},t.prototype.addPlayer=function(e){Logger.log("addPlayer",this);var t=this.getBattlePlayerSkinViewBySeat(e.seat);t.setPlayerInfo(e.credit,e.bet,e.denom,e.betArray,e.betLevelArray),e.view=t},t.prototype.removePlayer=function(e){Logger.log("removePlayer",this);var t=this.getBattlePlayerSkinViewBySeat(e.seat);t.reset()},t.prototype.clearPlayerArray=function(){Logger.log("clearPlayerArray",this);for(var e in this._view.battlePlayerSkinViewArray)this._view.battlePlayerSkinViewArray[e].reset()},t.prototype.updateCredit=function(e,t){Logger.log("updateCredit seat:"+e+" credit:"+t,this);var o=this.getBattlePlayerSkinViewBySeat(e);o.setCredit(t)},t.prototype.updateBet=function(e,t,o){Logger.log("updateBet seat:"+e+" bulletType:{bulletType} bet:"+o,this);var i=this.getBattlePlayerSkinViewBySeat(e);i.setBet(o),i.setBarrel(o)},t.prototype.updateFort=function(e,t,o,i){Logger.log("updateFort seat:"+e+" bulletType:"+t+" count:"+o,this);var n=this.getBattlePlayerSkinViewBySeat(e);n.setFort(t,o,i)},t.prototype.updateFortCount=function(e,t){Logger.log("updateFortCount count:"+t,this);var o=this.getBattlePlayerSkinViewBySeat(e);o.setBulletCount(t)},t.prototype.fireBullet=function(e,t){Logger.log("fireBullet seat:"+e+" rotation:"+t,this);var o=this.getBattlePlayerSkinViewBySeat(e);o.fire(t)},t.prototype.updateFortCompleteHandle=function(e){},t.prototype.touchTapHandle=function(e,t){var o=this._allProxy._playerViewEntityArrayProxy.getPlayerViewEntityBySelf();if(o.bulletType==GameEnum.FortTableEnum.Normal){var i=void 0;e.target==t.addBetButtom?(i=o.nextBet(),SoundObjectManagerProxy.getInstance().play(GameEnum.SoundTableEnum.SE_Game_Bet_01)):e.target==t.reduseBetButtom&&(i=o.previousBet(),SoundObjectManagerProxy.getInstance().play(GameEnum.SoundTableEnum.SE_Game_Bet_02)),t.setBet(i),t.setBarrel(i),t.playBetPop()}},t.prototype.TouchDown=function(e){if(this._allProxy._protocolProxy.scRoomLogin){var t=this._allProxy._playerViewEntityArrayProxy.getPlayerViewEntityBySelf(),o=this.getBattlePlayerSkinViewBySeat(this._allProxy._gameDataProxy.seatID),i=this._allProxy._bulletViewEntityArrayProxy.getBulletViewEntityArrayBySelf().length;if(10>i&&this._allProxy._gameDataProxy.bulletIDArray.length>0){var n=o.RotateWithMouse(e.stageX,e.stageY,Utils.GameTool.isReverseByLayer(this._allProxy._gameDataProxy.seatID));this.autoFireMode?(this.autoFireRotate=n,t.bulletType==GameEnum.FortTableEnum.Normal?this.autoFireTimer.delay=this.autoFireDelay:this.autoFireTimer.delay=this.autoFireBazookaDelay,this.autoFireTimer.start(),this.sendNotification(GameEvent.GameDataProxyEvent.SET_AUTO_FIRE_TARGET,[e.stageX,e.stageY])):this.lockFireMode?(this._allProxy._gameDataProxy.lockFish=this.getClickedFish(e),null!=this._allProxy._gameDataProxy.lockFish?(this.autoFireRotate=n,t.bulletType==GameEnum.FortTableEnum.Normal?this.autoFireTimer.delay=this.autoFireDelay:this.autoFireTimer.delay=this.autoFireBazookaDelay,this.autoFireTimer.start()):(this.stopAutoFire(),this.sendNotification(GameEvent.GameDataProxyEvent.REMOVE_AUTO_FIRE_TARGET))):(this.sendNotification(GameEvent.GameDataProxyEvent.SET_AUTO_FIRE_TARGET,[e.stageX,e.stageY]),this.autoFireRotate=n,t.bulletType==GameEnum.FortTableEnum.Normal?this.autoFireTimer.delay=this.autoFireDelay:this.autoFireTimer.delay=this.autoFireBazookaDelay,this.autoFireTimer.start(),this.fire(t,n))}}},t.prototype.TouchMove=function(e){if(!this.lockFireMode&&this.autoFireTimer.running){var t=this.getBattlePlayerSkinViewBySeat(this._allProxy._gameDataProxy.seatID),o=t.RotateWithMouse(e.stageX,e.stageY,Utils.GameTool.isReverseByLayer(this._allProxy._gameDataProxy.seatID));this.autoFireRotate=o,this.sendNotification(GameEvent.GameDataProxyEvent.SET_AUTO_FIRE_TARGET,[e.stageX,e.stageY])}},t.prototype.TouchEnd=function(e){this.autoFireMode||this.lockFireMode||(this.stopAutoFire(),this.sendNotification(GameEvent.GameDataProxyEvent.REMOVE_AUTO_FIRE_TARGET))},t.prototype.fire=function(e,t,o){void 0===o&&(o=-1);var i=(new Date).getTime();if(i-this.fireTime>=100&&this._allProxy._gameDataProxy.playerCanFire){this.fireTime=i;var n=new ProtocolEntity.CSFireEntity;n.iBet=e.bet,n.iPlayerID=e.id,n.iBulletType=e.bulletType,n.iRotation=Utils.TranslateTool.rotation2WeaponInfo(Math.round(t)),n.iTargetSN=this._allProxy._gameDataProxy.lockFish?this._allProxy._gameDataProxy.lockFish.getData().sn:-1,this.sendNotification(GeneratorProtocolCommand.NAME,[ProtocolType.csFire,n]),e.isSelf&&n.iBulletType==GameEnum.FortTableEnum.MegaDrill&&(this._allProxy._gameDataProxy.playerCanFire=!1),n=null}},t.prototype.onAutoFireTimer=function(e){var t=this._allProxy._playerViewEntityArrayProxy.getPlayerViewEntityBySelf(),o=(this.getBattlePlayerSkinViewBySeat(t.seat),this._allProxy._bulletViewEntityArrayProxy.getBulletViewEntityArrayBySelf().length);10>o&&this._allProxy._gameDataProxy.bulletIDArray.length>0&&this.fire(t,this.autoFireRotate)},t.prototype.stopAutoFire=function(){this.autoFireTimer.reset(),this.autoFireTimer.stop()},t.prototype.getClickedFish=function(e){var t=this;if(this._allProxy._gameDataProxy.changingBackground)return null;var o,i,n,a=this._allProxy._playerViewEntityArrayProxy.getPlayerViewEntityBySelf().seat,r=1>=a?new egret.Point(e.stageX,e.stageY):new egret.Point(960-e.stageX,540-e.stageY),s=this._allProxy._fishViewObjectManagerProxy.getMap(),l=[],c=-1;for(var h in s)o=s[h],i=Utils.MathTool.multiply(o.width>o.height?o.width:o.height,.3),o.getStatus()==GameEnum.FishStateEnum.Move&&this.getDistance(new egret.Point(o.x,o.y),r)<i&&this.isFishInScreen(o)&&l.push(o);return i=1e3,o=null,l.length>0?(l.forEach(function(a){a.getData().tableEntityID==GameEnum.FishTableEnum.S_201&&Utils.BulletTool.IsSpecialBulletByBulletType(t._allProxy._playerViewEntityArrayProxy.getPlayerViewEntityBySelf().bulletType)||(n=t.getDistance(new egret.Point(a.x,a.y),r),a.hitTestPoint(e.stageX,e.stageY)&&i>n&&(i=n,c=a.getTableEntity().id,o=a))}),o):null},t.prototype.getDistance=function(e,t){return egret.Point.distance(e,t)},t.prototype.onLockedFishMove=function(e){var t,o,i=this.getBattlePlayerSkinViewBySeat(this._allProxy._gameDataProxy.seatID);Utils.GameTool.isReverseByLayer(this._allProxy._gameDataProxy.seatID)?(t=960-e.x,o=540-e.y):(t=e.x,o=e.y),this.autoFireRotate=i.RotateWithMouse(t,o,Utils.GameTool.isReverseByLayer(this._allProxy._gameDataProxy.seatID)),i.setFortRotation(this.autoFireRotate)},t.prototype.setPlayerCanFire=function(e,t){this._allProxy._playerViewEntityArrayProxy.getPlayerViewEntityBySelf()&&this._allProxy._playerViewEntityArrayProxy.getPlayerViewEntityBySelf().view==t&&(this._allProxy._gameDataProxy.playerCanFire=e)},t.prototype.disableBetBtn=function(){var e=this._allProxy._playerViewEntityArrayProxy.getPlayerViewEntityBySelf();e.view.betControlGroup.touchEnabled=e.view.betControlGroup.touchChildren=!1},t.prototype.enableBetBtn=function(){var e=this._allProxy._playerViewEntityArrayProxy.getPlayerViewEntityBySelf();e.view.betControlGroup.touchEnabled=e.view.betControlGroup.touchChildren=!0},t.prototype.isFishInScreen=function(e){return e.x>0&&e.y>0&&e.x<GameSettingProxy.screenWidth&&e.y<GameSettingProxy.screenHeight},t.NAME="BattlePlayerArrayViewMediator",t}(BaseViewMediator);__reflect(BattlePlayerArrayViewMediator.prototype,"BattlePlayerArrayViewMediator");var BattlePlayerLRPortSkinView=function(e){function t(){var t=e.call(this)||this;return t._logScope="[BattlePlayerLRPortSkinView]",t._isLog=!1,t._self=!1,t.tempCredit=1,t.name="BattlePlayerLRPortSkinView",t.currentState=Utils.ResourceTool.language,t}return __extends(t,e),t.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),this.awake()},t.prototype.awake=function(){Logger.log("awake",this)},t.prototype.start=function(){Logger.log("start",this),this._loadingMC=Utils.ResourceTool.getMovieClip(GameName.JsonName.SS_Lobby,GameName.MCName.GAME_LOADING),this._loadingMC.gotoAndStop(1),this._loadingMC.x=120,this._loadingMC.y=25,this._loadingMC.visible=!1,this.creditGroup.addChild(this._loadingMC)},t.prototype.init=function(e,t,o){this._self=e==t,this._playerID=o,this._seatID=e,this._seatIDBySelf=t,Logger.log("init",this),Utils.GameTool.isReverseByLabelAndBulletRotation(e,t)?(this.freeBulletGroup.rotation=180,this.creditGroup.rotation=180):(this.freeBulletGroup.rotation=0,this.creditGroup.rotation=0)},t.prototype.reset=function(){Logger.log("reset",this)},t.prototype.enable=function(){Logger.log("enable",this),this.visible=!0},t.prototype.disable=function(){Logger.log("disable",this),this.visible=!1},t.prototype.refresh=function(){Logger.log("refresh",this)},t.prototype.setCredit=function(e){Logger.log("setCredit",this);var t=!1;0>e?(this.onCreditError(e.toString(),"fish_setCreditCent_cent"),t=!0):this._loadingMC.visible=!1;var o=Utils.TranslateTool.cent2TenDolla2GroupSeperator2Sign(e);-1!=o.indexOf("-")&&(this.onCreditError(o,"fish_setCreditCent_moneyStr"),t=!0),(!t||this._self)&&(this.creditLabel.text=o)},t.prototype.onCreditError=function(e,t){if(this._self){var o=ApplicationFacade.getInstance().retrieveProxy(PlayerViewEntityArrayProxy.NAME);o.sendNotification(ParserMessageCommand.NAME,new ParserMessageData(MessageType.disconnectLost))}else this._loadingMC.play(-1),this._loadingMC.visible=!0,this.creditLabel.text=""},t.prototype.setFreeBulletCount=function(e){Logger.log("setFreeBulletCount",this),this.freeBulletCountLabel.text=String(e)},t.prototype.showFreeBullet=function(e){Logger.log("showFreeBullet",this),this.freeBulletGroup.visible=e},t.prototype.startTest=function(){var e=new egret.Timer(1e3);e.addEventListener(egret.TimerEvent.TIMER,this.onTestCredit,this),e.start()},t.prototype.onTestCredit=function(){this.tempCredit*=10,this.setCredit(this.tempCredit)},t}(eui.Component);__reflect(BattlePlayerLRPortSkinView.prototype,"BattlePlayerLRPortSkinView",["IView"]);var BattlePlayerSkinView=function(e){function t(){var t=e.call(this)||this;return t._logScope="[BattlePlayerSkinView]",t._isLog=!1,t._fortBaseMovieClip=new egret.MovieClip,t._fortBaseMovieClipCopy=new egret.MovieClip,t._fortBarrelMovieClip=new egret.MovieClip,t._fortBarrelMovieClipCopy=new egret.MovieClip,t._fortFireMovieClip=new egret.MovieClip,t._baseEffectMovieClip=new egret.MovieClip,t._betArrayIndex=0,t._betPopState=GameEnum.PopStateEnum.End,t.name="BattlePlayerSkinView",t.currentState=Utils.ResourceTool.language,t}return __extends(t,e),t.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),this.awake()},t.prototype.awake=function(){Logger.log("awake",this),this._portSkinView=new BattlePlayerLRPortSkinView,this._fortBarreSourceY=this.fortBarrelGroup.y,this._betPopGroupSourceY=this.betPopGroup.y,this._weaponRotationGroupY=this.weaponRotationGroup.y},t.prototype.start=function(e){Logger.log("start",this),this.fortBaseGroup.addChild(this._fortBaseMovieClip),this.fortBaseGroup.addChild(this._fortBaseMovieClipCopy),this.fortBarrelGroup.addChild(this._fortBarrelMovieClip),this.fortBarrelGroup.addChild(this._fortBarrelMovieClipCopy),this.firePointGroup.addChild(this._fortFireMovieClip),this.effectGroup.addChild(this._baseEffectMovieClip),this.setLeftOrRightPortSkinView(e),this.seat=e,this.playerGroup.visible=!1,this.waittingGroup.visible=!0,this.addBetButtom.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTouchTapHandle,this),this.reduseBetButtom.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTouchTapHandle,this)},t.prototype.init=function(e){Logger.log("init",this),this._portSkinView.init(this.seat,e,this.playerID),this.seatBySelf=e,this.setReverseUI(this.seat,this.seatBySelf),this.setSelfUI(this.seat==this.seatBySelf),this.betControlGroup.touchThrough=!0,this.betControlGroup.touchEnabled=this.betControlGroup.touchChildren=!0,this.seat==this.seatBySelf?this.alpha=1:this.alpha=.5},t.prototype.reset=function(){Logger.log("reset",this),this._portSkinView.reset(),this.playerGroup.visible=!1,this.waittingGroup.visible=!0,this.betPopGroup.visible=!1},t.prototype.enable=function(){Logger.log("enable",this),this._portSkinView.enable(),this.visible=!0},t.prototype.disable=function(){this.reset(),Logger.log("disable",this),this._portSkinView.disable(),this.visible=!1},t.prototype.refresh=function(){Logger.log("refresh",this),this._portSkinView.refresh()},t.prototype.setPlayerInfo=function(e,t,o,i,n){Logger.log("setPlayerInfo",this),this.playerGroup.visible=!0,this.waittingGroup.visible=!1,this.betPopGroup.visible=!1,this._betArrayIndex=0,this._betArray=i,this._betLevelArray=n,this._denom=o,this._fortTableEntity=null,this._betPopState=GameEnum.PopStateEnum.End,this.setFortRotation(0),this.setBet(t),this.setFort(GameEnum.FortTableEnum.Normal,10,!1),this.setBarrel(this._lastBetValue),this.setCredit(e),this.endBetPop()},t.prototype.setBet=function(e){Logger.log("setBet",this);var t=Utils.TranslateTool.bet2CashTenDolla(e,this._denom).toString();this.betLabel.text=t,this.betPopLabel.text=t,this._lastBetValue=e},t.prototype.setCredit=function(e){Logger.log("setCredit",this),this._portSkinView.setCredit(e)},t.prototype.setFort=function(e,t,o){Logger.log("setFort",this),this._fortTableEntity=TableEntityProxy.getInstance().getFortTableEntity(e),o?this.beforeChangeFort():this.changeFort(!1),e==GameEnum.FortTableEnum.AutomaticBazooka?(t>0&&this.showFreeBullet(!0),this.setBulletCount(t)):this.showFreeBullet(!1)},t.prototype.beforeChangeFort=function(){this.setPlayerCanFire&&this.setPlayerCanFire(!1,this),(this.isSelf()||this._fortTableEntity.isSoundByOther)&&this._fortTableEntity.changeFortSoundID>0&&SoundObjectManagerProxy.getInstance().play(this._fortTableEntity.changeFortSoundID),egret.Tween.get(this.weaponRotationGroup).to({rotation:0},Math.abs(5*this.weaponRotationGroup.rotation)).to({y:this._weaponRotationGroupY-35},100).to({y:this._weaponRotationGroupY+200},200).call(this.changeFort,this,[!0])},t.prototype.changeFort=function(e){var t=this._fortTableEntity;if(Utils.ResourceTool.setTexture(this.fortBaseImage,t.baseTextureName,this),this.fortBaseImage.visible=!0,Utils.ResourceTool.setMovieClipData(this._fortFireMovieClip,t.fireJsonName_1,t.fireClipName_1,this),Utils.ResourceTool.setMovieClipData(this._fortBaseMovieClip,t.baseJsonName,t.baseClipName,this),this._fortBaseMovieClip.movieClipData&&(e?this._fortBaseMovieClip.gotoAndPlay(0,1):this._fortBaseMovieClip.gotoAndStop(this._fortBaseMovieClip.$totalFrames-1)),t.id==GameEnum.FortTableEnum.MegaDrill?(Utils.ResourceTool.setMovieClipData(this._fortBaseMovieClipCopy,t.baseJsonName,t.baseClipName,this),this._fortBaseMovieClipCopy.name+="Copy",this._fortBaseMovieClipCopy.visible=!1,this._fortBaseMovieClipCopy.blendMode=egret.BlendMode.ADD):this._fortBaseMovieClipCopy.visible=!1,Utils.ResourceTool.setMovieClipData(this._fortBarrelMovieClip,t.barrelJsonName_1,t.barrelClipName_1,this),this._fortBarrelMovieClip.visible=!0,this._fortBarrelMovieClip.gotoAndPlay(0,-1),t.id==GameEnum.FortTableEnum.MegaDrill?(Utils.ResourceTool.setMovieClipData(this._fortBarrelMovieClipCopy,t.barrelJsonName_1,t.barrelClipName_1,this),this._fortBarrelMovieClipCopy.name+="Copy",this._fortBarrelMovieClipCopy.visible=!1,this._fortBarrelMovieClipCopy.gotoAndPlay(0,-1),this._fortBarrelMovieClipCopy.blendMode=egret.BlendMode.ADD):this._fortBarrelMovieClipCopy.visible=!1,0!=t.baseMovieClipFXID){var o=TableEntityProxy.getInstance().getMovieClipFXTableEntity(t.baseMovieClipFXID);Utils.ResourceTool.setMovieClipData(this._baseEffectMovieClip,o.jsonName,o.clipName,this),this._baseEffectMovieClip.scaleX=o.scale,this._baseEffectMovieClip.scaleY=o.scale,this._baseEffectMovieClip.visible=!1,this._baseEffectMovieClip.stop(),t.id==GameEnum.FortTableEnum.AutomaticBazooka?this._baseEffectMovieClip.filters=[Utils.FilterTool.getLightRColorFilter()]:this._baseEffectMovieClip.filters=null}else this._baseEffectMovieClip.movieClipData=null,this._baseEffectMovieClip.visible=!1,this._baseEffectMovieClip.filters=null;e?this.afterChangeFort():this.ChangeFortComplete()},t.prototype.afterChangeFort=function(){var e=this;switch(this._fortTableEntity.id){case GameEnum.FortTableEnum.MegaDrill:egret.Tween.get(this.weaponRotationGroup).to({y:this._weaponRotationGroupY},200),egret.Tween.get(this._fortBaseMovieClipCopy).wait(200).set({visible:!0,scaleX:1,scaleY:1,alpha:.5}).to({scaleX:2,scaleY:2,alpha:0},400).set({visible:!1}),egret.Tween.get(this._fortBarrelMovieClipCopy).wait(200).set({visible:!0,scaleX:1,scaleY:1,alpha:.5}).to({scaleX:2,scaleY:2,alpha:0},400).set({visible:!1}).call(function(){e.ChangeFortComplete(),e.setBarrel(e._lastBetValue)},this);break;case GameEnum.FortTableEnum.Normal:this.setBarrel(this._lastBetValue),egret.Tween.get(this.weaponRotationGroup).to({y:this._weaponRotationGroupY},500).call(this.ChangeFortComplete,this);break;case GameEnum.FortTableEnum.AutomaticBazooka:this._fortBarrelMovieClip.visible=!1,egret.Tween.get(this.weaponRotationGroup).to({y:this._weaponRotationGroupY},200).call(function(){e._fortBaseMovieClip.gotoAndPlay(0,1)},this).to({y:this._weaponRotationGroupY},500).call(function(){e._fortBarrelMovieClip.visible=!0,e._fortBarrelMovieClip.gotoAndPlay(0,-1),e.ChangeFortComplete(),e.setBarrel(e._lastBetValue)},this);break;default:Logger.error("setFort type is not exist",this)}this._fortBarrelMovieClip.scaleX=this._fortBarrelMovieClip.scaleY=1},t.prototype.ChangeFortComplete=function(){this._baseEffectMovieClip.movieClipData&&(this._baseEffectMovieClip.visible=!0,this._baseEffectMovieClip.gotoAndPlay(0,-1)),this.setPlayerCanFire&&this.setPlayerCanFire(!0,this),this.updateFortCompleteCallback&&(this.updateFortCompleteCallback(this),(this.isSelf()||this._fortTableEntity.isSoundByOther)&&this._fortTableEntity.waitSoundID>0&&SoundObjectManagerProxy.getInstance().play(this._fortTableEntity.waitSoundID))},t.prototype.setFortRotation=function(e){Logger.log("setFortRotation",this),this.weaponRotationGroup.rotation=e},t.prototype.setBarrel=function(e){Logger.log("setBarrel",this);var t=Utils.GameTool.getBarrelLevel(e,this._betArray[0],this._betArray[this._betArray.length-1],PlayerViewEntity.betLevelDivide),o=this._fortTableEntity;switch(t){case 0:Utils.ResourceTool.setMovieClipData(this._fortBarrelMovieClip,o.barrelJsonName_1,o.barrelClipName_1),Utils.ResourceTool.setMovieClipData(this._fortFireMovieClip,o.fireJsonName_1,o.fireClipName_1),this._fortBarrelMovieClip.gotoAndPlay(0,-1);break;case 1:Utils.ResourceTool.setMovieClipData(this._fortBarrelMovieClip,o.barrelJsonName_2,o.barrelClipName_2),Utils.ResourceTool.setMovieClipData(this._fortFireMovieClip,o.fireJsonName_2,o.fireClipName_2),this._fortBarrelMovieClip.gotoAndPlay(0,-1);break;case 2:Utils.ResourceTool.setMovieClipData(this._fortBarrelMovieClip,o.barrelJsonName_3,o.barrelClipName_3),Utils.ResourceTool.setMovieClipData(this._fortFireMovieClip,o.fireJsonName_3,o.fireClipName_3),this._fortBarrelMovieClip.gotoAndPlay(0,-1);break;default:Logger.error("setBarrel type is not exist",this)}this._fortFireMovieClip.alpha=0,this._currentLevel!=t&&(this._currentLevel=t,egret.Tween.get(this._fortBarrelMovieClip).to({scaleX:1.3,scaleY:1.3},100).to({scaleX:1,scaleY:1},100),(this.isSelf()||this._fortTableEntity.isSoundByOther)&&this._fortTableEntity.changeBarrelSoundID>0&&SoundObjectManagerProxy.getInstance().play(this._fortTableEntity.changeBarrelSoundID))},t.prototype.fire=function(e){this.seat==this.seatBySelf?this.alpha=1:this.alpha=.5;var t=this;Logger.log("fire",this),this.setFortRotation(e),(this.isSelf()||this._fortTableEntity.isSoundByOther)&&this._fortTableEntity.fireSoundID>0&&SoundObjectManagerProxy.getInstance().play(this._fortTableEntity.fireSoundID);var o=this._fortFireMovieClip;switch(o.alpha=0,o.scaleX=0,o.scaleY=0,egret.Tween.get(o).wait(100).call(function(){t._fortFireMovieClip.gotoAndPlay(0,1)},this).to({alpha:1,scaleX:1,scaleY:1},50,egret.Ease.quartOut).to({alpha:0,scaleX:0,scaleY:0},50,egret.Ease.quartIn),this._fortTableEntity.id){case GameEnum.FortTableEnum.MegaDrill:this._fortBarrelMovieClip.visible=!1,this._baseEffectMovieClip.visible=!1;break;case GameEnum.FortTableEnum.Normal:var i=this._fortBarrelMovieClip;i.y=this._fortBarreSourceY,egret.Tween.get(i).to({y:this._fortBarreSourceY+8},100).to({y:this._fortBarreSourceY},100,egret.Ease.elasticOut);break;case GameEnum.FortTableEnum.AutomaticBazooka:var i=this._fortBarrelMovieClip;i.gotoAndPlay(0,-1);break;default:Logger.error("setFort type is not exist",this)}},t.prototype.setLeftOrRightPortSkinView=function(e){0==e||2==e?this.rightPortGroup.addChild(this._portSkinView):this.leftPortGroup.addChild(this._portSkinView),this._portSkinView.start()},t.prototype.setReverseUI=function(e,t){Utils.GameTool.isReverseByLabelAndBulletRotation(e,t)?(this.betPopGroup.rotation=180,this.betGroup.rotation=180,this.waittingGroup.rotation=180):(this.betPopGroup.rotation=0,this.betGroup.rotation=0,this.waittingGroup.rotation=0)},t.prototype.setSelfUI=function(e){e?this.betControlGroup.visible=!0:this.betControlGroup.visible=!1},t.prototype.onTouchTapHandle=function(e){Logger.log("onTouchTapHandle",this),Utils.ButtonTool.buttonEffect(e.currentTarget),this.touchTapCallback&&this.touchTapCallback(e,this)},t.prototype.playBetPop=function(){switch(this._betPopState){case GameEnum.PopStateEnum.MoveUp:break;case GameEnum.PopStateEnum.Wait:this.waitBetPop();break;case GameEnum.PopStateEnum.MoveDown:break;case GameEnum.PopStateEnum.End:this.moveUpBetPop()}},t.prototype.moveUpBetPop=function(){this._betPopState=GameEnum.PopStateEnum.MoveUp,egret.Tween.removeTweens(this.betPopGroup),this.betPopGroup.visible=!0,this.betPopGroup.y=this._betPopGroupSourceY-20,this.betPopGroup.scaleX=0,this.betPopGroup.scaleY=0,this.betPopGroup.anchorOffsetY=this.betPopGroup.height/2,egret.Tween.get(this.betPopGroup).to({y:this._betPopGroupSourceY},100,egret.Ease.quadIn).wait(50).to({scaleX:1,scaleY:1},100,egret.Ease.circOut).call(this.waitBetPop,this)},t.prototype.waitBetPop=function(){this._betPopState=GameEnum.PopStateEnum.Wait,egret.Tween.removeTweens(this.betPopGroup),egret.Tween.get(this.betPopGroup).wait(1e3).call(this.moveDownBetPop,this)
},t.prototype.moveDownBetPop=function(){this._betPopState=GameEnum.PopStateEnum.MoveDown,egret.Tween.removeTweens(this.betPopGroup),egret.Tween.get(this.betPopGroup).to({scaleY:0},100).call(this.endBetPop,this)},t.prototype.endBetPop=function(){this._betPopState=GameEnum.PopStateEnum.End,egret.Tween.removeTweens(this.betPopGroup)},t.prototype.RotateWithMouse=function(e,t,o){var i=new egret.Point;0==this.anchorOffsetX&&0==this.anchorOffsetY?(i.x=(o?960-this.x:this.x)+this.weaponRotationGroup.x,i.y=(o?540-this.y:this.y)+this.weaponRotationGroup.y):(i.x=this.x,i.y=this.y);var n=e-i.x,a=t-i.y,r=Math.atan2(a,n),s=r/Math.PI*180;return s=s>0&&90>=s?0:s,s=s>90&&180>=s?-180:s,s+=90,s>=90?s=89:-90>=s&&(s=-89),s},t.prototype.getPortSkinView=function(){return this._portSkinView},t.prototype.setBulletCount=function(e){this._portSkinView.setFreeBulletCount(e)},t.prototype.showFreeBullet=function(e){this._portSkinView.showFreeBullet(e)},t.prototype.isSelf=function(){return this.seat==this.seatBySelf},t}(eui.Component);__reflect(BattlePlayerSkinView.prototype,"BattlePlayerSkinView",["IView"]);var BattleSceneMediator=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._logScope="[BattleSceneMediator]",t._isLog=!1,t._caiShenFaFaFaEnable=!1,t._wheelOfFortuneEnable=!1,t}return __extends(t,e),t.prototype.listNotificationInterests=function(){return[GameEvent.SceneEvent.LOAD_BATTLE_SCENE,GameEvent.SceneEvent.UNLOAD_BATTLE_SCENE,GameEvent.SceneEvent.SHOW_BATTLE_SCENE,GameEvent.SceneEvent.HIDE_BATTLE_SCENE,GameEvent.BattleSceneEvent.SET_BACKGROUND,GameEvent.BattleCaiShenFaFaFaViewMediatorEvent.ENABLE_COMPLETE,GameEvent.BattleCaiShenFaFaFaViewMediatorEvent.DISABLE_COMPLETE,GameEvent.BattleWheelOfFortuneViewMediatorEvent.ENABLE_COMPLETE,GameEvent.BattleWheelOfFortuneViewMediatorEvent.DISABLE_COMPLETE]},t.prototype.handleNotification=function(e){var t=e.getBody();switch(e.getName()){case GameEvent.SceneEvent.LOAD_BATTLE_SCENE:this.init();break;case GameEvent.SceneEvent.UNLOAD_BATTLE_SCENE:this.reset();break;case GameEvent.SceneEvent.SHOW_BATTLE_SCENE:this.enable();break;case GameEvent.SceneEvent.HIDE_BATTLE_SCENE:this.disable();break;case GameEvent.BattleSceneEvent.SET_BACKGROUND:this.sendNotification(LoadGameSceneCommand.NAME,GameEnum.SceneTypeEnum.Battle),this.sendNotification(ShowGameSceneCommand.NAME,GameEnum.SceneTypeEnum.Battle);break;case GameEvent.BattleCaiShenFaFaFaViewMediatorEvent.ENABLE_COMPLETE:t.isSelf&&(this._caiShenFaFaFaEnable=!0);break;case GameEvent.BattleCaiShenFaFaFaViewMediatorEvent.DISABLE_COMPLETE:this._caiShenFaFaFaEnable=!1;break;case GameEvent.BattleWheelOfFortuneViewMediatorEvent.ENABLE_COMPLETE:t.isSelf&&(this._wheelOfFortuneEnable=!0);break;case GameEvent.BattleWheelOfFortuneViewMediatorEvent.DISABLE_COMPLETE:this._wheelOfFortuneEnable=!1}},t.prototype.awake=function(){Logger.log("awake",this),this._view=new egret.DisplayObjectContainer,this._view.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onTouchBeginHandle,this),this._view.addEventListener(egret.TouchEvent.TOUCH_MOVE,this.onTouchMoveHandle,this),this._view.addEventListener(egret.TouchEvent.TOUCH_END,this.onToucEndHandle,this),this._view.name=t.NAME,this.getViewComponent().addChild(this._view),this.sendNotification(RegistBattleSceneMediatorsCommand.NAME,this._view)},t.prototype.getView=function(){return this._view},t.prototype.onTouchBeginHandle=function(e){Logger.log("onTouchBeginHandle",this),this.isFireTouchArea(e)&&0==this.isSpecilaFeature()&&this.sendNotification(GameEvent.SceneEvent.BATTLE_TOUCH_BEGIN,e)},t.prototype.onTouchMoveHandle=function(e){this.isFireTouchArea(e)&&0==this.isSpecilaFeature()&&this.sendNotification(GameEvent.SceneEvent.BATTLE_TOUCH_MOVE,e)},t.prototype.onToucEndHandle=function(e){this.isFireTouchArea(e)&&0==this.isSpecilaFeature()&&this.sendNotification(GameEvent.SceneEvent.BATTLE_TOUCH_END,e)},t.prototype.onEnterFrame=function(e){this.sendNotification(GameEvent.BattleSceneEvent.ENTER_FRAME)},t.prototype.enable=function(){e.prototype.enable.call(this),this._view.addEventListener(egret.Event.ENTER_FRAME,this.onEnterFrame,this)},t.prototype.disable=function(){e.prototype.disable.call(this),this._view.removeEventListener(egret.Event.ENTER_FRAME,this.onEnterFrame,this)},t.prototype.isFireTouchArea=function(e){return"addBetButtom"==e.target.name||"reduseBetButtom"==e.target.name||"BattleCoinArraySkinView"==e.target.name||"BattleSpecialButtonViewMediator"==e.target.name||"betControlGroup"==e.target.name?!1:!0},t.prototype.isSpecilaFeature=function(){return this._caiShenFaFaFaEnable?!0:this._wheelOfFortuneEnable?!0:!1},t.NAME="BattleSceneMediator",t}(BaseSceneMediator);__reflect(BattleSceneMediator.prototype,"BattleSceneMediator");var BattleScoreArraySkinView=function(e){function t(){var t=e.call(this)||this;return t._logScope="[BattleScoreArraySkinView]",t._isLog=!1,t.name="BattleScoreArraySkinView",t.currentState=Utils.ResourceTool.language,t}return __extends(t,e),t.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),this.awake()},t.prototype.awake=function(){Logger.log("awake",this)},t.prototype.start=function(){Logger.log("start",this)},t.prototype.init=function(){Logger.log("init",this)},t.prototype.reset=function(){Logger.log("reset",this)},t.prototype.enable=function(){Logger.log("enable",this),this.visible=!0},t.prototype.disable=function(){Logger.log("disable",this),this.visible=!1},t.prototype.refresh=function(){Logger.log("refresh",this)},t}(eui.Component);__reflect(BattleScoreArraySkinView.prototype,"BattleScoreArraySkinView",["IView"]);var BattleScoreArrayViewMediator=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._logScope="[BattleScoreArrayViewMediator]",t._isLog=!1,t}return __extends(t,e),t.prototype.listNotificationInterests=function(){return[GameEvent.ApplicationFacadeEvent.AWAKE_COMPLETE,GameEvent.ResourceProxyEvent.LOAD_COMPLETE_NON_PRELOAD_GROUP,GameEvent.SceneEvent.LOAD_BATTLE_SCENE,GameEvent.SceneEvent.UNLOAD_BATTLE_SCENE]},t.prototype.handleNotification=function(e){var t=e.getBody();switch(e.getName()){case GameEvent.ApplicationFacadeEvent.AWAKE_COMPLETE:this.facadeAwakeComplete();break;case GameEvent.ResourceProxyEvent.LOAD_COMPLETE_NON_PRELOAD_GROUP:t==GameEnum.LoadingCollectionTypeEnum.Battle&&this.resourceComplete();break;case GameEvent.SceneEvent.LOAD_BATTLE_SCENE:this.init(),this.enable();break;case GameEvent.SceneEvent.UNLOAD_BATTLE_SCENE:this.disable(),this.reset()}},t.prototype.nextAwake=function(){this._view=new BattleScoreArraySkinView,this.getViewComponent().addChild(this._view),this._view.visible=!1},t.prototype.nextStart=function(){this._view.start()},t.prototype.nextInit=function(){this._view.init()},t.prototype.nextReset=function(){this._view.reset()},t.prototype.nextEnable=function(){this._view.enable()},t.prototype.nextDisable=function(){this._view.disable()},t.prototype.nextRefresh=function(){this._view.refresh()},t.NAME="BattleScoreArrayViewMediator",t}(BaseViewMediator);__reflect(BattleScoreArrayViewMediator.prototype,"BattleScoreArrayViewMediator");var BattleSkinView=function(e){function t(){var t=e.call(this)||this;return t._logScope="[BattleSkinView]",t._isLog=!1,t._moveTime=3e3,t._offsetX=300,t._effectCount=4,t._effectTimerArray=new Array,t.name="BattleSkinView",t.currentState=Utils.ResourceTool.language,t}return __extends(t,e),t.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),this.awake()},t.prototype.awake=function(){Logger.log("awake",this)},t.prototype.start=function(){Logger.log("start",this),this.currectBGImage.scrollRect=new egret.Rectangle(0,0,this.width,this.height),this.nextBGImage.scrollRect=new egret.Rectangle(0,0,this.width,this.height);for(var e=0;e<this._effectCount;e++)this._effectTimerArray.push(null)},t.prototype.init=function(){Logger.log("init",this),this._lock=!1,this.currectBGImage.scrollRect.width=this.currectBGImage.width+this._offsetX},t.prototype.reset=function(){Logger.log("reset",this),this._lock=!1,this.currectBGImage.scrollRect.width=this.currectBGImage.width+this._offsetX},t.prototype.enable=function(){Logger.log("enable",this),this.visible=!0},t.prototype.disable=function(){Logger.log("disable",this);for(var e=0;e<this._effectTimerArray.length;e++){var t=this._effectTimerArray[e];t&&t.stop()}this.visible=!1},t.prototype.refresh=function(){Logger.log("refresh",this)},t.prototype.getBattleBGTableEntity=function(){return this._battleBGTableEntity},t.prototype.setBackground=function(e){this.setBackgroundTextureByMoveWaveComplete(e),void 0!==this.setBackgroundCompleteCallback&&this.setBackgroundCompleteCallback()},t.prototype.changeBackground=function(){this._lock||(this.init(),this._lock=!0,this.setBackgroundTextureByMoveWave(),egret.Tween.get(this.currectBGImage.scrollRect).to({width:-this._offsetX},3e3).call(this.onMoveWaveComplete,this))},t.prototype.onMoveWaveComplete=function(){this.reset(),this.setBackgroundTextureByMoveWaveComplete(this._battleBGTableEntity.nextID),void 0!==this.changeBackgroundCompleteCallback&&this.changeBackgroundCompleteCallback()},t.prototype.setBackgroundTextureByMoveWave=function(){var e=this._battleBGTableEntity;this.currectBGImage.texture=Utils.ResourceTool.getTextureRes(e.textureName);var t=TableEntityProxy.getInstance().getBattleBGTableEntity(e.nextID);this.nextBGImage.texture=Utils.ResourceTool.getTextureRes(t.textureName)},t.prototype.setBackgroundTextureByMoveWaveComplete=function(e){var t=TableEntityProxy.getInstance().getBattleBGTableEntity(e);this.currectBGImage.texture=Utils.ResourceTool.getTextureRes(t.textureName),this.nextBGImage.texture=Utils.ResourceTool.getTextureRes(t.textureName),this._battleBGTableEntity=t},t.prototype.playAllEffect=function(){for(var e=this._battleBGTableEntity,t=0;t<this._effectTimerArray.length;t++){var o=t+1,i=this._effectTimerArray[t];if(null==i){if(0==e["effectID_"+o])return;i=new egret.Timer(1e3*e["effectWaitTime_"+o],-1),i.addEventListener(egret.TimerEvent.TIMER,this.playEffect.bind(this,o),this),this._effectTimerArray[t]=i,i.start()}else{if(i.stop(),i.removeEventListener(egret.TimerEvent.TIMER,this.playEffect.bind(this,o),this),this._effectTimerArray[t]=null,0==e["effectID_"+o])return;i=new egret.Timer(1e3*e["effectWaitTime_"+o],-1),i.addEventListener(egret.TimerEvent.TIMER,this.playEffect.bind(this,o),this),this._effectTimerArray[t]=i,i.start()}}},t.prototype.playEffect=function(e,t){var o=this._battleBGTableEntity,i=new egret.DisplayObject;i.x=o["effectX_"+e],i.y=o["effectY_"+e];var n=this.currectBGImage,a=(GameDataProxy.getInstance().playerID,new EffectViewObjectData(o["effectID_"+e],!0,0,i,i,n,n));EffectViewObjectManagerProxy.getInstance().play(a),a=null},t}(eui.Component);__reflect(BattleSkinView.prototype,"BattleSkinView",["IView"]);var BattleSpecialButtonSkinView=function(e){function t(){var t=e.call(this)||this;return t._logScope="[BattleSpecialButtonSkinView]",t._isLog=!1,t.name="BattleSpecialButtonSkinView",t.currentState=Utils.ResourceTool.language,t}return __extends(t,e),t.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),this.awake()},t.prototype.awake=function(){Logger.log("awake",this)},t.prototype.start=function(){Logger.log("start",this),this.btnAuto.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.autoClickCallBack,this),this.btnLock.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.lockClickCallBack,this),this.btnAutoFocus.touchEnabled=this.btnLockFocus.touchEnabled=!1,this.effectMC=Utils.ResourceTool.getMovieClip(GameName.JsonName.AnimationAtlas01,GameName.MCName.SpecialButtleFX),this.effectMC.visible=!1,this.effectMC.gotoAndPlay(0,-1),this.effectMC.name="effectM",this.effectMC.blendMode=egret.BlendMode.ADD,this.addChild(this.effectMC),this.touchEnabled=!1,this.btnAuto.touchEnabled=!0,this.btnLock.touchEnabled=!0,this.resetAllButtons()},t.prototype.init=function(){Logger.log("init",this),this.btnAuto.texture=Utils.ResourceTool.getTextureResByLanguage("UI_Auto_01_{0}"),this.btnAutoFocus.texture=Utils.ResourceTool.getTextureResByLanguage("UI_Auto_02_{0}"),this.btnLock.texture=Utils.ResourceTool.getTextureResByLanguage("UI_Aim_01_{0}"),this.btnLockFocus.texture=Utils.ResourceTool.getTextureResByLanguage("UI_Aim_02_{0}")},t.prototype.reset=function(){Logger.log("reset",this)},t.prototype.enable=function(){Logger.log("enable",this),this.visible=!0},t.prototype.disable=function(){Logger.log("disable",this),this.visible=!1,this.resetAllButtons()},t.prototype.refresh=function(e){Logger.log("refresh",this)},t.prototype.resetAllButtons=function(){this.btnAutoFocus.visible=this.btnLockFocus.visible=!1,this.effectMC.visible=!1,this.btnAuto.filters=[],this.btnLock.filters=[]},t.prototype.onBtnAutoClicked=function(){this.resetAllButtons(),this.btnAutoFocus.visible=!0,this.effectMC.visible=!0;var e=this.btnAutoFocus.localToGlobal(this.btnAutoFocus.width/2,this.btnAutoFocus.height/2);this.effectMC.x=e.x-.5,this.effectMC.y=e.y+1},t.prototype.onBtnLockClicked=function(){this.resetAllButtons(),this.btnLockFocus.visible=!0,this.effectMC.visible=!0;var e=this.btnLockFocus.localToGlobal(this.btnLockFocus.width/2,this.btnLockFocus.height/2);this.effectMC.x=e.x-.5,this.effectMC.y=e.y+1},t}(eui.Component);__reflect(BattleSpecialButtonSkinView.prototype,"BattleSpecialButtonSkinView",["IView"]);var BattleSpecialButtonViewMediator=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._logScope="[BattleSpecialButtonViewMediator]",t._isLog=!1,t.isAuto=!1,t.isLock=!1,t}return __extends(t,e),t.prototype.listNotificationInterests=function(){return[GameEvent.ApplicationFacadeEvent.AWAKE_COMPLETE,GameEvent.ResourceProxyEvent.LOAD_COMPLETE_NON_PRELOAD_GROUP,GameEvent.SceneEvent.LOAD_BATTLE_SCENE,GameEvent.SceneEvent.UNLOAD_BATTLE_SCENE,GameEvent.PlayerViewEntityArrayProxyEvent.MODIFY_COMPLETE_FORT]},t.prototype.handleNotification=function(e){var t=e.getBody();switch(e.getName()){case GameEvent.ApplicationFacadeEvent.AWAKE_COMPLETE:this.facadeAwakeComplete();break;case GameEvent.ResourceProxyEvent.LOAD_COMPLETE_NON_PRELOAD_GROUP:t==GameEnum.LoadingCollectionTypeEnum.Battle&&this.resourceComplete();break;case GameEvent.SceneEvent.LOAD_BATTLE_SCENE:this.init(),this.enable();break;case GameEvent.SceneEvent.UNLOAD_BATTLE_SCENE:this.disable(),this.reset(),this.isAuto=this.isLock=!1;break;case GameEvent.PlayerViewEntityArrayProxyEvent.MODIFY_COMPLETE_FORT:t.seatID==this._allProxy._playerViewEntityArrayProxy.getPlayerViewEntityBySelf().seat&&this.onSetFortComplete(t)}},t.prototype.nextAwake=function(){this._view=new BattleSpecialButtonSkinView,this.getViewComponent().addChild(this._view),this._view.name=t.NAME,this._view.visible=!1},t.prototype.nextStart=function(){var e=this;this._view.autoClickCallBack=function(t){return e.autoClickCallBackHandle(t)},this._view.lockClickCallBack=function(t){return e.lockClickCallBackHandle(t)},this._view.start()},t.prototype.nextInit=function(){this._view.init()},t.prototype.nextReset=function(){this._view.reset()},t.prototype.nextEnable=function(){this._view.enable()},t.prototype.nextDisable=function(){this._view.disable()},t.prototype.nextRefresh=function(e){this._view.refresh(e)},t.prototype.autoClickCallBackHandle=function(e){e.stopImmediatePropagation(),this.setAutoClick()},t.prototype.setAutoClick=function(){this._allProxy._playerViewEntityArrayProxy.getPlayerViewEntityBySelf().bulletType!=GameEnum.FortTableEnum.MegaDrill&&(this.isAuto=!this.isAuto,this.isLock=!1,this.isAuto?(this._view.onBtnAutoClicked(),SoundObjectManagerProxy.getInstance().play(GameEnum.SoundTableEnum.SE_Game_AutoFire_01)):(this._view.resetAllButtons(),SoundObjectManagerProxy.getInstance().play(GameEnum.SoundTableEnum.SE_Game_AutoFire_02)),this.facade.sendNotification(GameEvent.BattleSpecialButtonViewMediatorEvent.SET_COMPLETE_AUTO))},t.prototype.lockClickCallBackHandle=function(e){e.stopImmediatePropagation(),this.setLockClick()},t.prototype.setLockClick=function(){this._allProxy._playerViewEntityArrayProxy.getPlayerViewEntityBySelf().bulletType!=GameEnum.FortTableEnum.MegaDrill&&(this.isLock=!this.isLock,this.isAuto=!1,this.isLock?(this._view.onBtnLockClicked(),SoundObjectManagerProxy.getInstance().play(GameEnum.SoundTableEnum.SE_Game_AutoFire_01)):(this._view.resetAllButtons(),SoundObjectManagerProxy.getInstance().play(GameEnum.SoundTableEnum.SE_Game_AutoFire_02)),this.facade.sendNotification(GameEvent.BattleSpecialButtonViewMediatorEvent.SET_COMPLETE_LOCK))},t.prototype.onSetFortComplete=function(e){e.bulletType==GameEnum.FortTableEnum.MegaDrill&&(this._view.resetAllButtons(),this.isAuto=this.isLock=!1)},t.NAME="BattleSpecialButtonViewMediator",t}(BaseViewMediator);__reflect(BattleSpecialButtonViewMediator.prototype,"BattleSpecialButtonViewMediator");var BattleSpecialEffectArraySkinView=function(e){function t(){var t=e.call(this)||this;return t._logScope="[BattleSpecialEffectArraySkinView]",t._isLog=!1,t.name="BattleSpecialEffectArraySkinView",t.touchEnabled=t.touchChildren=!1,t.currentState=Utils.ResourceTool.language,t}return __extends(t,e),t.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),this.awake()},t.prototype.awake=function(){Logger.log("awake",this)},t.prototype.start=function(){Logger.log("start",this)},t.prototype.init=function(){Logger.log("init",this)},t.prototype.reset=function(){Logger.log("reset",this)},t.prototype.enable=function(){Logger.log("enable",this)},t.prototype.disable=function(){Logger.log("disable",this),this.visible=!1},t.prototype.refresh=function(){Logger.log("refresh",this)},t}(eui.Component);__reflect(BattleSpecialEffectArraySkinView.prototype,"BattleSpecialEffectArraySkinView",["IView"]);var BattleSpecialEffectArrayViewMediator=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._logScope="[BattleSpecialEffectArrayViewMediator]",t._isLog=!1,t}return __extends(t,e),t.prototype.listNotificationInterests=function(){return[GameEvent.ApplicationFacadeEvent.AWAKE_COMPLETE,GameEvent.ResourceProxyEvent.LOAD_COMPLETE_NON_PRELOAD_GROUP,GameEvent.SceneEvent.LOAD_BATTLE_SCENE,GameEvent.SceneEvent.UNLOAD_BATTLE_SCENE]},t.prototype.handleNotification=function(e){var t=e.getBody();switch(e.getName()){case GameEvent.ApplicationFacadeEvent.AWAKE_COMPLETE:this.facadeAwakeComplete();break;case GameEvent.ResourceProxyEvent.LOAD_COMPLETE_NON_PRELOAD_GROUP:t==GameEnum.LoadingCollectionTypeEnum.Battle&&this.resourceComplete();break;case GameEvent.SceneEvent.LOAD_BATTLE_SCENE:this.init(),this.enable();break;case GameEvent.SceneEvent.UNLOAD_BATTLE_SCENE:this.disable(),this.reset()}},t.prototype.nextAwake=function(){this._view=new BattleSpecialEffectArraySkinView,this.getViewComponent().addChild(this._view),this._view.visible=!1},t.prototype.nextStart=function(){this._view.start()},t.prototype.nextInit=function(){this._view.init()},t.prototype.nextReset=function(){this._view.reset()},t.prototype.nextEnable=function(){this._view.enable()},t.prototype.nextDisable=function(){this._view.disable()},t.prototype.nextRefresh=function(){this._view.refresh()},t.NAME="BattleSpecialEffectArrayViewMediator",t}(BaseViewMediator);__reflect(BattleSpecialEffectArrayViewMediator.prototype,"BattleSpecialEffectArrayViewMediator");var BattleViewMediator=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._logScope="[BattleViewMediator]",t._isLog=!1,t}return __extends(t,e),t.prototype.listNotificationInterests=function(){return[GameEvent.ApplicationFacadeEvent.AWAKE_COMPLETE,GameEvent.ResourceProxyEvent.LOAD_COMPLETE_NON_PRELOAD_GROUP,GameEvent.SceneEvent.LOAD_BATTLE_SCENE,GameEvent.SceneEvent.UNLOAD_BATTLE_SCENE,GameEvent.BattleSceneEvent.SET_BACKGROUND,GameEvent.BattleSceneEvent.CHANGE_BACKGROUND,GameEvent.BattleSceneEvent.CHANGE_BACKGROUND_COMPLETE,GameEvent.BattleSceneEvent.PLAY_BGM]},t.prototype.handleNotification=function(e){var t=e.getBody();switch(e.getName()){case GameEvent.ApplicationFacadeEvent.AWAKE_COMPLETE:this.facadeAwakeComplete();break;case GameEvent.ResourceProxyEvent.LOAD_COMPLETE_NON_PRELOAD_GROUP:t==GameEnum.LoadingCollectionTypeEnum.Battle&&this.resourceComplete();break;case GameEvent.SceneEvent.LOAD_BATTLE_SCENE:this.init(),this.enable();break;case GameEvent.SceneEvent.UNLOAD_BATTLE_SCENE:this.disable(),this.reset();break;case GameEvent.BattleSceneEvent.SET_BACKGROUND:this._view.setBackground(t);break;case GameEvent.BattleSceneEvent.CHANGE_BACKGROUND:this._view.changeBackground(),this._waveBGSoundObject=SoundObjectManagerProxy.getInstance().play(GameEnum.SoundTableEnum.SE_Game_Transition);break;case GameEvent.BattleSceneEvent.CHANGE_BACKGROUND_COMPLETE:SoundObjectManagerProxy.getInstance().stop(this._waveBGSoundObject);break;case GameEvent.BattleSceneEvent.PLAY_BGM:this.playSound()}},t.prototype.nextAwake=function(){this._view=new BattleSkinView,this.getViewComponent().addChild(this._view),this._view.visible=!1},t.prototype.nextStart=function(){var e=this;this._view.setBackgroundCompleteCallback=function(){return e.setBackgroundCompleteCallbackHandle()},this._view.changeBackgroundCompleteCallback=function(){return e.changeBackgroundCompleteCallbackHandle()},this._view.start()},t.prototype.nextInit=function(){this._view.init()},t.prototype.nextReset=function(){this._view.reset()},t.prototype.nextEnable=function(){this._view.enable()},t.prototype.nextDisable=function(){this._view.disable()},t.prototype.nextRefresh=function(){this._view.refresh()},t.prototype.setBackgroundCompleteCallbackHandle=function(){Logger.log("setBackgroundCompleteCallbackHandle ********************************",this);var e=this._view.getBattleBGTableEntity();this.playSound(),this.sendNotification(GameEvent.BattleSceneEvent.SET_BACKGROUND_COMPLETE,e),this._view.playAllEffect()},t.prototype.changeBackgroundCompleteCallbackHandle=function(){Logger.log("changeBackgroundCompleteCallbackHandle ********************************",this);var e=this._view.getBattleBGTableEntity();this.playSound(),this.sendNotification(GameEvent.BattleSceneEvent.CHANGE_BACKGROUND_COMPLETE,e),this._view.playAllEffect()},t.prototype.playSound=function(){var e=this._view.getBattleBGTableEntity();this._bgSoundObject=SoundObjectManagerProxy.getInstance().play(e.soundID)},t.NAME="BattleViewMediator",t}(BaseViewMediator);__reflect(BattleViewMediator.prototype,"BattleViewMediator");var BattleWaveSkinView=function(e){function t(){var t=e.call(this)||this;return t._logScope="[BattleWaveSkinView]",t._isLog=!1,t._waveMoveTime=3e3,t._waveMoveOffsetX=300,t.name="BattleWaveSkinView",t.currentState=Utils.ResourceTool.language,t}return __extends(t,e),t.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),this.awake()},t.prototype.awake=function(){Logger.log("awake",this)},t.prototype.start=function(){if(Logger.log("start",this),null==this._waveMoveMovieClipArray){this._waveMoveMovieClipArray=new Array;for(var e=150,t=0;5>t;t++){var o=Utils.ResourceTool.getMovieClip(GameName.JsonName.SS_TST_Wave2,GameName.MCName.SS_TST_Wave2);o.x=0,o.y=t*e,this._waveMoveMovieClipArray[t]=o,this._waveMoveMovieClipArray[t].blendMode=egret.BlendMode.ADD,this.waveMoveGroup.addChild(o)}}this._waveMoveStartPointX=this.width+this._waveMoveOffsetX,this._waveMoveEndPointX=-1*this._waveMoveOffsetX},t.prototype.init=function(){Logger.log("init",this),this._lock=!1,this.waveMoveGroup.visible=!1,this.waveWordImage.visible=!1,this.waveMoveGroup.x=this._waveMoveStartPointX;for(var e in this._waveMoveMovieClipArray)this._waveMoveMovieClipArray[e].gotoAndPlay(0,-1);for(var e in this._waveSpurtMovieClipArray)this._waveSpurtMovieClipArray[e].gotoAndPlay(0,-1)},t.prototype.reset=function(){Logger.log("reset",this),this._lock=!1,this.waveMoveGroup.visible=!1,this.waveWordImage.visible=!1,this.waveMoveGroup.x=this._waveMoveStartPointX;for(var e in this._waveMoveMovieClipArray)this._waveMoveMovieClipArray[e].stop();for(var e in this._waveSpurtMovieClipArray)this._waveSpurtMovieClipArray[e].stop()},t.prototype.enable=function(){Logger.log("enable",this),this.visible=!0},t.prototype.disable=function(){Logger.log("disable",this),this.visible=!1},t.prototype.refresh=function(){Logger.log("refresh",this)},t.prototype.moveWave=function(){this._lock||(this.init(),this._lock=!0,this.waveMoveGroup.visible=!0,this.waveWordImage.visible=!0,this.waveWordImage.scaleX=0,this.waveWordImage.scaleY=0,this.waveWordImage.alpha=1,egret.Tween.get(this.waveWordImage).to({scaleX:1,scaleY:1},1e3,egret.Ease.elasticOut).wait(1500).to({alpha:0},500),egret.Tween.get(this.waveMoveGroup).to({x:this._waveMoveEndPointX},3e3).call(this.onMoveWaveComplete,this))},t.prototype.onMoveWaveComplete=function(){this.completeCallback&&this.completeCallback(),this.reset()},t}(eui.Component);__reflect(BattleWaveSkinView.prototype,"BattleWaveSkinView",["IView"]);var BattleWheelOfFortuneSkinView=function(e){function t(){var t=e.call(this)||this;return t._logScope="[BattleWheelOfFortuneSkinView]",t._isLog=!1,t._itemScore0Image=new eui.Image,t._itemScore1Image=new eui.Image,t._itemScore2Image=new eui.Image,t._itemScore3Image=new eui.Image,t._itemScore4Image=new eui.Image,t._itemScore5Image=new eui.Image,t._itemScore6Image=new eui.Image,t._itemScore7Image=new eui.Image,t._itemScore8Image=new eui.Image,t._itemScore9Image=new eui.Image,t._itemMask0MovieClip=new egret.MovieClip,t._itemMask1MovieClip=new egret.MovieClip,t._itemMask2MovieClip=new egret.MovieClip,t._itemMask3MovieClip=new egret.MovieClip,t._itemMask4MovieClip=new egret.MovieClip,t._itemMask5MovieClip=new egret.MovieClip,t._itemMask6MovieClip=new egret.MovieClip,t._itemMask7MovieClip=new egret.MovieClip,t._itemMask8MovieClip=new egret.MovieClip,t._itemMask9MovieClip=new egret.MovieClip,t._winFireFXMovieClip=new egret.MovieClip,t._rouletteFXMovieClip=new egret.MovieClip,t.rotationRate=36,t.name="BattleWheelOfFortuneSkinView",t.currentState=Utils.ResourceTool.language,t}return __extends(t,e),t.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),this.awake()},t.prototype.awake=function(){Logger.log("awake",this)},t.prototype.start=function(){Logger.log("start",this);for(var e=0;10>e;e++)this.startItem(e,this["_itemScore"+e+"Image"],this["_itemMask"+e+"MovieClip"]);this.rouletteImage.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTouchTap,this),this.itemMaskGroup.y=1,this.pointerFX02Image.blendMode=egret.BlendMode.ADD,this.pointerFX01CopyImage.blendMode=egret.BlendMode.ADD,Utils.ResourceTool.setMovieClipData(this._winFireFXMovieClip,GameName.JsonName.AnimationAtlas02,GameName.MCName.CaiShenFaFaFaWinFX),this.fxGroup.addChild(this._winFireFXMovieClip),this._winFireFXMovieClip.scaleX=4,this._winFireFXMovieClip.scaleY=4,this.winGroup.blendMode=egret.BlendMode.ADD;var t=Utils.ResourceTool.getArmatureByDragonBones("SS_Roulette","SS_Roulette");this._rouletteArmatureDisplay=t.getDisplay(),this._rouletteArmatureDisplay.x=GameSettingProxy.screenWidth/2,this._rouletteArmatureDisplay.y=GameSettingProxy.screenHeight,this.newStartAnimationGroup.addChild(this._rouletteArmatureDisplay),Utils.ResourceTool.setMovieClipData(this._rouletteFXMovieClip,GameName.JsonName.AnimationAtlas03,GameName.MCName.WheelOfFortuneRouletteFX),this._rouletteFXMovieClip.scaleX=2,this._rouletteFXMovieClip.scaleY=2,this._rouletteFXMovieClip.blendMode=egret.BlendMode.ADD,this.newStartAnimationGroup.addChild(this._rouletteFXMovieClip)},t.prototype.init=function(){Logger.log("init",this)},t.prototype.reset=function(){Logger.log("reset",this),this.isLock=!1},t.prototype.enable=function(e,t,o,i,n){if(Logger.log("enable",this),0>e||e>5)return void Logger.error("enable selectCount out of range, value:"+e);if(10!=t.length)return void Logger.error("enable scoreArray length out of range, value:"+t.length);if(!this.isLock){this.isLock=!0,this.visible=!0,this._scoreArray=t,this._templeteRotation=0,this._acceleration=0,this._currectRotation=0,this._speed=0,this._finalRotation=0,this._selectIndexByScoreArray=n,Utils.DisplayObjectTool.resetDisplayObject(this.mainGroup,!0),Utils.DisplayObjectTool.resetDisplayObject(this.titleWordImage,!1),this.maskImage.alpha=0,Utils.DisplayObjectTool.resetDisplayObject(this.wheelGroup,!0),Utils.DisplayObjectTool.resetDisplayObject(this.rouletteGroup,!0),this.rouletteMaskImage.visible=!1,this.rouletteImage.touchEnabled=!1;for(var a=0;10>a;a++)this.enableItem(a,this["_itemScore"+a+"Image"],this["_itemMask"+a+"MovieClip"],Utils.TranslateTool.cent2TenDollar(i));this.itemScoreGroup.visible=!1,this.itemMaskGroup.visible=!1,this.bgLightGroup.visible=!1,this.pointerFX02Image.visible=!1,this.pointerFX01CopyImage.visible=!1,this.betWordLabel.text=Utils.TranslateTool.cent2TenDollar(i).toString(),this.winGroup.visible=!1,this.winLabel.text=Utils.TranslateTool.cent2TenDollar(o).toString(),Utils.DisplayObjectTool.resetDisplayObject(this.winCopyGroup,!1),this.winCopyLabel.text=this.winLabel.text,this._winFireFXMovieClip.visible=!1,this.newStartAnimationGroup.visible=!1,this.openingAnimation()}},t.prototype.disable=function(){Logger.log("disable",this),this._soundBGMByStart&&SoundObjectManagerProxy.getInstance().stop(this._soundBGMByStart),this._soundBGMByWait&&SoundObjectManagerProxy.getInstance().stop(this._soundBGMByWait),this._soundBGMByEnd&&SoundObjectManagerProxy.getInstance().stop(this._soundBGMByEnd),this.visible=!1,this.isLock=!1,this.removeEventListener(egret.Event.ENTER_FRAME,this.onEnterFrame,this)},t.prototype.refresh=function(){Logger.log("refresh",this)},t.prototype.openingAnimation=function(){Logger.log("openingAnimation",this),SoundObjectManagerProxy.getInstance().play(GameEnum.SoundTableEnum.SE_Game_LuckyRoll_01),SoundObjectManagerProxy.getInstance().play(GameEnum.SoundTableEnum.SE_Narration_LuckyRoll_cn),this._soundBGMByStart=SoundObjectManagerProxy.getInstance().play(GameEnum.SoundTableEnum.SE_Game_LuckyRoll_Hit),egret.Tween.removeTweens(this.maskImage),this.maskImage.alpha=0,egret.Tween.get(this.maskImage).to({alpha:.8},500),egret.Tween.removeTweens(this.wheelGroup),this.wheelGroup.alpha=0,this.wheelGroup.y=7,this.wheelGroup.x=-1,egret.Tween.get(this.wheelGroup).wait(500).to({alpha:1},500),egret.Tween.removeTweens(this.titleWordImage),this.titleWordImage.visible=!0,this.titleWordImage.alpha=0,egret.Tween.get(this.titleWordImage).wait(500).to({alpha:1},500).wait(500).call(this.waitSelectAnimation,this),this.itemMaskGroup.visible=!0,egret.Tween.get(this.pointerGroup,{loop:!0}).set({rotation:-36}).wait(1e3).set({rotation:0}).wait(1e3).set({rotation:36}).wait(1e3),this.newStartAnimationGroup.visible=!0,this._rouletteFXMovieClip.gotoAndPlay(0,1),this._rouletteArmatureDisplay.visible=!0,this._rouletteArmatureDisplay.alpha=1,this._rouletteArmatureDisplay.animation.play("animation",1),egret.Tween.removeTweens(this._rouletteArmatureDisplay),egret.Tween.get(this._rouletteArmatureDisplay).wait(1e3).to({alpha:0},200)},t.prototype.waitSelectAnimation=function(){Logger.log("waitSelectAnimation",this),this._soundBGMByStart&&SoundObjectManagerProxy.getInstance().stop(this._soundBGMByStart),this._soundBGMByWait=SoundObjectManagerProxy.getInstance().play(GameEnum.SoundTableEnum.SE_Game_LuckyRoll_Background),egret.Tween.removeTweens(this),egret.Tween.get(this).wait(1e3).call(this.enabledTouch,this),this.itemScoreGroup.visible=!0},t.prototype.enabledTouch=function(){Logger.log("enabledTouch",this),this.rouletteImage.touchEnabled=!0,this.onWheelOfFortuneReadyCallback&&this.onWheelOfFortuneReadyCallback(this.rouletteImage)},t.prototype.onTouchTap=function(e){Logger.log("onTouchTap",this);var t=new egret.Point(this.rouletteGroup.x,this.rouletteGroup.y),o=new egret.Point(e.stageX,e.stageY),i=egret.Point.distance(t,o),n=Utils.Vector2Tool.getRotationByPoint(t,o);180>i||i>280||n<-(this.rotationRate+18)||n>this.rotationRate+18||(this.selectAnimation(n),ApplicationFacade.getInstance().sendNotification(GameEvent.SceneEvent.HIDE_CURSOR))},t.prototype.selectAnimation=function(e){Logger.log("selectAnimation",this),egret.Tween.removeTweens(this.titleWordImage),egret.Tween.get(this.titleWordImage).to({alpha:0},330),this.rouletteImage.touchEnabled=!1;
for(var t=0;10>t;t++)this.selectedItem(t,this["_itemScore"+t+"Image"],this["_itemMask"+t+"MovieClip"]);SoundObjectManagerProxy.getInstance().play(GameEnum.SoundTableEnum.SE_Game_LuckyRoll_02),egret.Tween.removeTweens(this.pointerGroup),e=Math.round(e/this.rotationRate)*this.rotationRate,this.pointerGroup.rotation=e,this.rouletteMaskImage.rotation=e,this.pointerFX01CopyImage.scaleX=1,this.pointerFX01CopyImage.scaleY=1,this.pointerFX01CopyImage.alpha=1,this.pointerFX01CopyImage.visible=!0,egret.Tween.removeTweens(this.pointerFX01CopyImage),egret.Tween.get(this.pointerFX01CopyImage).to({scaleX:1.3,scaleY:1.3,alpha:0},500).wait(500).call(this.rollAnimation,this,[e])},t.prototype.rollAnimation=function(e){Logger.log("rollAnimation",this),egret.Tween.removeTweens(this.bgLightGroup),this.bgLightGroup.visible=!0,this.bgLightGroup.alpha=0,egret.Tween.get(this.bgLightGroup,{loop:!0}).to({alpha:1},1e3).to({alpha:0},1e3),this._rollStopType=Utils.MathTool.randomRange(0,3),this._rollBackType=Utils.MathTool.randomRange(0,2),this._acceleration=0,this._currectRotation=0,this._speed=0,this._finalRotation=720+e-(-3*this.rotationRate+this._selectIndexByScoreArray*this.rotationRate),this.addEventListener(egret.Event.ENTER_FRAME,this.onEnterFrame,this)},t.prototype.onEnterFrame=function(e){if(this._currectRotation<=90)this._acceleration+=3e-4,this._acceleration>.1&&(this._acceleration=.1),this._speed+=this._acceleration,this._speed>3&&(this._speed=3);else if(this._finalRotation-this._currectRotation<=90+36*this._rollStopType)switch(this._acceleration-=3e-4,this._acceleration<.01&&(this._acceleration=.01),this._speed-=this._acceleration,this._rollStopType){case 0:this._speed<.3&&(this._speed=.3);break;case 1:this._finalRotation-this._currectRotation<=36?this._speed<.3&&(this._speed=.3):this._speed<.3&&(this._speed=.3);break;case 2:this._finalRotation-this._currectRotation<=36?this._speed<.3&&(this._speed=.3):this._finalRotation-this._currectRotation<=72?this._speed<.3&&(this._speed=.3):this._speed<.3&&(this._speed=.3)}switch(this.onChange(),this._currectRotation+=this._speed,this.rouletteGroup.rotation=this._currectRotation,Logger.log("finalRotation:"+this._finalRotation+", rotation:"+this._currectRotation+", speed:"+this._speed+", acceleration:"+this._acceleration,this),this._rollBackType){case 0:if(this._currectRotation>this._finalRotation+1.5){var t=this.rouletteGroup.rotation-(this._currectRotation-this._finalRotation);this.removeEventListener(egret.Event.ENTER_FRAME,this.onEnterFrame,this),egret.Tween.removeTweens(this.rouletteGroup),egret.Tween.get(this.rouletteGroup).to({rotation:t},1e3,egret.Ease.quadInOut).wait(100*Utils.MathTool.randomRange(5,1)).call(this.rollCompleteAfterAnimation,this)}break;case 1:this._currectRotation>this._finalRotation&&(this._currectRotation=this._finalRotation,this.removeEventListener(egret.Event.ENTER_FRAME,this.onEnterFrame,this),egret.Tween.removeTweens(this),egret.Tween.get(this).wait(100*Utils.MathTool.randomRange(5,1)).call(this.rollCompleteAfterAnimation,this))}},t.prototype.createCustomEase=function(e,t){var o,i,n;return o=(t-e)/(e*(e-1)),i=.5*(t-e*e)/(t-e),n=-o*i*i,function(e){var t=o*Math.pow(e-i,2)+n;return egret.Ease.quadInOut(t)}},t.prototype.rollCompleteAfterAnimation=function(){Logger.log("rollCompleteAfterAnimation",this),SoundObjectManagerProxy.getInstance().play(GameEnum.SoundTableEnum.SE_Game_LuckyRoll_04),egret.Tween.removeTweens(this.wheelGroup),egret.Tween.get(this.wheelGroup).wait(2500).to({alpha:0},500),this.rouletteMaskImage.visible=!0,egret.Tween.removeTweens(this.bgLightGroup),egret.Tween.get(this.bgLightGroup).to({alpha:0},1e3).wait(1250).call(this.winAnimation,this),egret.Tween.removeTweens(this.pointerFX02Image),this.pointerFX02Image.visible=!0,this.pointerFX02Image.alpha=.2,egret.Tween.get(this.pointerFX02Image,{loop:!0}).to({alpha:0},500).to({alpha:.2},500)},t.prototype.winAnimation=function(){Logger.log("winAnimation",this),this._soundBGMByWait&&SoundObjectManagerProxy.getInstance().stop(this._soundBGMByWait),this._soundBGMByEnd=SoundObjectManagerProxy.getInstance().play(GameEnum.SoundTableEnum.SE_Game_LuckyRoll_End),egret.Tween.removeTweens(this.winGroup),egret.Tween.get(this.winGroup).set({scaleX:.1,scaleY:.1,alpha:0,visible:!0}).to({scaleX:1.1,scaleY:1.1,alpha:1},200).to({scaleX:1,scaleY:1,alpha:.5},200).to({alpha:0},300),egret.Tween.removeTweens(this.winCopyGroup),egret.Tween.get(this.winCopyGroup).set({scaleX:.1,scaleY:.1,alpha:0,visible:!0}).to({scaleX:1.1,scaleY:1.1,alpha:1},200).to({scaleX:1,scaleY:1},200),this._winFireFXMovieClip.visible=!0,this._winFireFXMovieClip.gotoAndPlay(0,1),egret.Tween.removeTweens(this),egret.Tween.get(this).wait(2e3).call(this.endAnimation,this)},t.prototype.endAnimation=function(){Logger.log("endAnimation",this),egret.Tween.removeTweens(this.mainGroup),egret.Tween.get(this.mainGroup).to({scaleX:1.1,scaleY:1.1},200).to({scaleX:.25,scaleY:.25,alpha:0},200).call(this.onPlayComplete,this)},t.prototype.onPlayComplete=function(){Logger.log("onPlayComplete",this),this.isLock=!1,this.onCompleteCallback&&this.onCompleteCallback(this)},t.prototype.startItem=function(e,t,o){var i=-3*this.rotationRate+e*this.rotationRate,n=Utils.Vector2Tool.getVectorByRotationReturnPoint(i,230);this.itemScoreGroup.addChild(t),t.x=n.x,t.y=n.y,t.rotation=i;var a=Utils.Vector2Tool.getVectorByRotationReturnPoint(i,230),r=GameName.JsonName.AnimationAtlas01,s=GameName.MCName.WheelOfFortuneBoardFX2;e>=2&&4>=e&&(s=GameName.MCName.WheelOfFortuneBoardFX1),Utils.ResourceTool.setMovieClipData(o,r,s),this.itemMaskGroup.addChild(o),o.x=a.x,o.y=a.y,o.rotation=i,o.gotoAndStop(0)},t.prototype.enableItem=function(e,t,o,i){o.gotoAndStop(0),t.texture=Utils.ResourceTool.getTextureRes(this.getScoreTextureName(Math.round(this._scoreArray[e]/i))),t.anchorOffsetX=t.width/2,t.anchorOffsetY=t.height/2},t.prototype.selectedItem=function(e,t,o){egret.setTimeout(function(){o.gotoAndPlay(0,1)},this,200)},t.prototype.getScoreTextureName=function(e){var t,o=e/40;return t=GameName.TextureName["GPRouletteMuti0"+o]},t.prototype.onChange=function(){var e=Math.round(this._currectRotation/this.rotationRate);e!=this._templeteRotation&&(this._templeteRotation=e,SoundObjectManagerProxy.getInstance().play(GameEnum.SoundTableEnum.SE_Game_LuckyRoll_03))},t}(eui.Component);__reflect(BattleWheelOfFortuneSkinView.prototype,"BattleWheelOfFortuneSkinView",["IView"]);var BattleWheelOfFortuneViewMediator=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._logScope="[BattleWheelOfFortuneViewMediator]",t._isLog=!1,t.currWheelOfFortuneEntity=null,t}return __extends(t,e),t.prototype.listNotificationInterests=function(){return[GameEvent.ApplicationFacadeEvent.AWAKE_COMPLETE,GameEvent.ResourceProxyEvent.LOAD_COMPLETE_NON_PRELOAD_GROUP,GameEvent.SceneEvent.LOAD_BATTLE_SCENE,GameEvent.SceneEvent.UNLOAD_BATTLE_SCENE,GameEvent.BattleWheelOfFortuneViewMediatorEvent.ENABLE,GameEvent.BattleWheelOfFortuneViewMediatorEvent.DISABLE,GameEvent.SceneEvent.HIDE_BATTLE_SCENE]},t.prototype.handleNotification=function(e){var t=e.getBody();switch(e.getName()){case GameEvent.ApplicationFacadeEvent.AWAKE_COMPLETE:this.facadeAwakeComplete();break;case GameEvent.ResourceProxyEvent.LOAD_COMPLETE_NON_PRELOAD_GROUP:t==GameEnum.LoadingCollectionTypeEnum.Battle&&this.resourceComplete();break;case GameEvent.SceneEvent.LOAD_BATTLE_SCENE:this.init();break;case GameEvent.SceneEvent.UNLOAD_BATTLE_SCENE:this.reset();break;case GameEvent.BattleWheelOfFortuneViewMediatorEvent.ENABLE:this.enable(t);break;case GameEvent.BattleWheelOfFortuneViewMediatorEvent.DISABLE:this.disable();break;case GameEvent.SceneEvent.HIDE_BATTLE_SCENE:this.disable()}},t.prototype.nextAwake=function(){this._view=new BattleWheelOfFortuneSkinView,this.getViewComponent().addChild(this._view),this._view.visible=!1},t.prototype.nextStart=function(){var e=this;this._view.onCompleteCallback=function(){return e.onCompleteHandled()},this._view.onWheelOfFortuneReadyCallback=function(t){return e.onWheelOfFortuneReadyCallback(t)},this._view.start()},t.prototype.nextInit=function(){this._view.init()},t.prototype.nextReset=function(){this._view.reset()},t.prototype.nextEnable=function(e){this._view.isLock||(this._allProxy._playerViewEntityArrayProxy.getPlayerViewEntityBySelf()==e&&e.luckyDrawEntityArray.length>0?(this._allProxy._gameDataProxy.playerNowStatus=GameName.SpecialFeatureName.SF_02,this.currWheelOfFortuneEntity=e.luckyDrawEntityArray.shift(),this.currWheelOfFortuneEntity=this.getWheelOfFortuneEntityByServer(this.currWheelOfFortuneEntity),this._view.enable(this.currWheelOfFortuneEntity.awardOddsCount,this.currWheelOfFortuneEntity.showOdds,this.currWheelOfFortuneEntity.totalWin,this.currWheelOfFortuneEntity.bet,this.currWheelOfFortuneEntity.selectIndex)):this._view.disable()),this.sendNotification(GameEvent.BattleWheelOfFortuneViewMediatorEvent.ENABLE_COMPLETE,e)},t.prototype.nextDisable=function(){this._view.disable();var e=this._allProxy._playerViewEntityArrayProxy.getPlayerViewEntityBySelf();this.currWheelOfFortuneEntity&&(e.removeQueueTotalWin(this.currWheelOfFortuneEntity.totalWin),this.sendNotification(GameEvent.PlayerViewEntityArrayProxyEvent.MODIFY_COMPLETE_CREDIT_VALUE,[e.seat,e.getCreditByPreCharge()]),this.currWheelOfFortuneEntity=null),this.sendNotification(GameEvent.BattleWheelOfFortuneViewMediatorEvent.DISABLE_COMPLETE)},t.prototype.nextRefresh=function(){this._view.refresh()},t.prototype.onCompleteHandled=function(){this.disable()},t.prototype.onWheelOfFortuneReadyCallback=function(e){this.sendNotification(GameEvent.BattleWheelOfFortuneViewMediatorEvent.READY_COMPLETE,e)},t.prototype.getWheelOfFortuneEntityByTable=function(e){for(var t,o=new Array,i=Utils.MathTool.randomRange(1,TableEntityProxy.getInstance().luckyDrawTableEntityArray.length+1),n=TableEntityProxy.getInstance().getLuckyDrawTableEntity(i),a=Utils.MathTool.randomRange(0,10),r=0;10>r;r++){var s=(r+a)%10,l=n["item_"+s];o.push(l),e.showOdds[this.currWheelOfFortuneEntity.selectIndex]==l&&(t=r)}return e.selectIndex=t,e.showOdds=o,e},t.prototype.getWheelOfFortuneEntityByServer=function(e){for(var t,o=new Array,i=Utils.MathTool.randomRange(0,10),n=0;10>n;n++){var a=(n+i)%10,r=e.showOdds[a];o.push(r),e.showOdds[this.currWheelOfFortuneEntity.selectIndex]==r&&(t=n)}return e.selectIndex=t,e.showOdds=o,e},t.NAME="BattleWheelOfFortuneViewMediator",t}(BaseViewMediator);__reflect(BattleWheelOfFortuneViewMediator.prototype,"BattleWheelOfFortuneViewMediator");var BulletComponent=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._logScope="[BulletComponent]",t._isLog=!1,t}return __extends(t,e),t.prototype.startObject=function(e){if(Logger.log("startObject "+this.hashCode,this),this.bulletMovieClip=Utils.ResourceTool.getMovieClip(e.jsonName,e.clipName),this.bulletMovieClip.name=e.clipName,this.bulletMovieClip.visible=!1,this.addChild(this.bulletMovieClip),e.moveMovieClipFXID_1>0){var t=TableEntityProxy.getInstance().getMovieClipFXTableEntity(e.moveMovieClipFXID_1);this.moveEffectMovieClip01=Utils.ResourceTool.getMovieClip(t.jsonName,t.clipName),this.moveEffectMovieClip01.name=t.clipName,this.moveEffectMovieClip01.visible=!1,this.addChild(this.moveEffectMovieClip01)}if(e.moveMovieClipFXID_2){var o=TableEntityProxy.getInstance().getMovieClipFXTableEntity(e.moveMovieClipFXID_2);this.moveEffectMovieClip02=Utils.ResourceTool.getMovieClip(o.jsonName,o.clipName),this.moveEffectMovieClip02.name=o.clipName,this.moveEffectMovieClip02.visible=!1,this.addChild(this.moveEffectMovieClip02)}"null"!=e.netTextureName&&(this.netImage=new eui.Image,this.netImage.texture=Utils.ResourceTool.getTextureRes(e.netTextureName),this.netImage.name=e.netTextureName,this.netImage.visible=!1,this.addChild(this.netImage))},t.prototype.initObject=function(e){Logger.log("initObject "+this.hashCode,this),this.bulletMovieClip&&Utils.DisplayObjectTool.resetDisplayObject(this.bulletMovieClip,!0),this.netImage&&Utils.DisplayObjectTool.resetDisplayObject(this.netImage,!0),this.moveEffectMovieClip01&&Utils.DisplayObjectTool.resetDisplayObject(this.moveEffectMovieClip01,!0),this.moveEffectMovieClip02&&Utils.DisplayObjectTool.resetDisplayObject(this.moveEffectMovieClip02,!0),Utils.DisplayObjectTool.resetDisplayObject(this,!0)},t.prototype.resetObject=function(){Logger.log("resetObject "+this.hashCode,this),this.bulletMovieClip&&Utils.DisplayObjectTool.resetDisplayObject(this.bulletMovieClip,!1),this.netImage&&Utils.DisplayObjectTool.resetDisplayObject(this.netImage,!1),this.moveEffectMovieClip01&&Utils.DisplayObjectTool.resetDisplayObject(this.moveEffectMovieClip01,!1),this.moveEffectMovieClip02&&Utils.DisplayObjectTool.resetDisplayObject(this.moveEffectMovieClip02,!1),Utils.DisplayObjectTool.resetDisplayObject(this,!1)},t.prototype.playObject=function(){Logger.log("playObject "+this.hashCode,this);var e=(this._data,this._tableEntity),t=Utils.MathTool.randomRange(0,this.bulletMovieClip.totalFrames);if(this.bulletMovieClip.gotoAndStop(t),this.moveEffectMovieClip01){var o=TableEntityProxy.getInstance().getMovieClipFXTableEntity(e.moveMovieClipFXID_1);this.moveEffectMovieClip01.scaleX=o.scale,this.moveEffectMovieClip01.scaleY=o.scale}if(e.moveMovieClipFXID_2){var i=TableEntityProxy.getInstance().getMovieClipFXTableEntity(e.moveMovieClipFXID_2);this.moveEffectMovieClip02.scaleX=i.scale,this.moveEffectMovieClip02.scaleY=i.scale,this.moveEffectMovieClip02.y-=this.bulletMovieClip.height}this.netImage&&Utils.DisplayObjectTool.setAnchorOffset(this.netImage)},t.prototype.stopObject=function(){Logger.log("stopObject "+this.hashCode,this),this.onComplete()},t.prototype.completeObject=function(){Logger.log("completeObject "+this.hashCode,this)},t.NAME="BulletComponent",t}(BaseComponent);__reflect(BulletComponent.prototype,"BulletComponent");var BulletStateDie=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._logScope="[BulletStateDie]",t._isLog=!1,t._status=GameEnum.BulletStateEnum.Die,t._isAnimationComplete=!0,t._isEffectViewObjectComplete=!0,t}return __extends(t,e),t.prototype.enable=function(){Logger.log("enable "+this._object.hashCode,this);var e=this._object,t=e.getData(),o=e.getTableEntity();this._isAnimationComplete=!1,this._isEffectViewObjectComplete=!1,this.playAnimation(),this._setTimeout=egret.setTimeout(this.playEffect,this,100),(t.self||o.isSoundByOther)&&o.dieSoundID>0&&this.playSound();var i=e.getMoveMovieClipEffect01();i&&(i.play(-1),i.visible=!1);var n=e.getMoveMovieClipEffect02();n&&(n.play(-1),n.visible=!1)},t.prototype.disable=function(){Logger.log("disable "+this._object.hashCode,this),this.stopAnimation(),this.stopEffect()},t.prototype.onComplete=function(){if(this._isAnimationComplete&&this._isEffectViewObjectComplete){Logger.log("onComplete "+this._object.hashCode,this);var e=this._object;e.bulletViewEntityArrayProxy.removeBulletFromArray(e.bulletViewEntity),e.setStatus(GameEnum.BulletStateEnum.None)}},t.prototype.playAnimation=function(){Logger.log("playAnimation "+this._object.hashCode,this);var e=this._object,t=(e.getData(),e.getNetUI());if(t){t.visible=!0,t.x=Utils.MathTool.randomRange(-10,10),t.y=Utils.MathTool.randomRange(-10,10),t.rotation=Utils.MathTool.randomRange(-180,180),t.scaleX=0,t.scaleY=0;var o=.2*Math.random()+.8;egret.Tween.removeTweens(t),egret.Tween.get(t).to({scaleX:o,scaleY:o},400,egret.Ease.elasticOut).to({alpha:0},100).call(this.onAnimationComplete,this)}else this.onAnimationComplete()},t.prototype.stopAnimation=function(){Logger.log("stopAnimation "+this._object.hashCode,this);var e=this._object,t=e.getNetUI();t&&(t.visible=!1,egret.Tween.removeTweens(t))},t.prototype.onAnimationComplete=function(){Logger.log("onAnimationComplete "+this._object.hashCode,this),this._isAnimationComplete=!0,this.onComplete()},t.prototype.playEffect=function(){Logger.log("playEffect "+this._object.hashCode,this);var e=this._object,t=e.getData(),o=e.getTableEntity(),i=this._effect;if(i&&(i.removeEventListener(ObjectEvent.COMPLETE,this.onEffectComplete,this),EffectViewObjectManagerProxy.getInstance().stop(i)),o.dieEffectID>0){var n=e,a=e.rotation;o.isRandomPointByDieEffect&&(n=Utils.Vector2Tool.getRandomDisplayObjectByDisplayObject(e,20),a=Utils.MathTool.randomRange(e.rotation-180,e.rotation+180));var r=ApplicationFacade.getInstance().retrieveMediator(BattleViewMediator.NAME),s=r.getSkinView(),l=new EffectViewObjectData(o.dieEffectID,t.self,a,n,n,s.currectBGImage,s.currectBGImage);i=EffectViewObjectManagerProxy.getInstance().play(l),i.addEventListener(ObjectEvent.COMPLETE,this.onEffectComplete,this),this._effect=i,l=null}else this.onEffectComplete()},t.prototype.stopEffect=function(){Logger.log("stopEffect "+this._object.hashCode,this),this._effect&&(this._effect.removeEventListener(ObjectEvent.COMPLETE,this.onEffectComplete,this),EffectViewObjectManagerProxy.getInstance().stop(this._effect)),this._setTimeout&&(egret.clearTimeout(this._setTimeout),this._setTimeout=void 0)},t.prototype.onEffectComplete=function(){Logger.log("onEffectComplete "+this._object.hashCode,this),this._isEffectViewObjectComplete=!0,this._setTimeout&&(egret.clearTimeout(this._setTimeout),this._setTimeout=void 0),this.onComplete()},t.prototype.playSound=function(){Logger.log("playSound "+this._object.hashCode,this),SoundObjectManagerProxy.getInstance().play(this._object.getTableEntity().dieSoundID)},t}(BaseStateContext);__reflect(BulletStateDie.prototype,"BulletStateDie");var BulletStateHit=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._logScope="[BulletStateHit]",t._isLog=!1,t._status=GameEnum.BulletStateEnum.Hit,t._isAnimationComplete=!0,t._isEffectViewObjectComplete=!0,t}return __extends(t,e),t.prototype.enable=function(){Logger.log("enable "+this._object.hashCode,this);var e=this._object,t=e.getData(),o=e.getTableEntity();this._isAnimationComplete=!1,this._isEffectViewObjectComplete=!1,this.playAnimation(),this.playEffect(),(t.self||o.isSoundByOther)&&o.hitSoundID>0&&SoundObjectManagerProxy.getInstance().play(o.hitSoundID)},t.prototype.disable=function(){Logger.log("disable "+this._object.hashCode,this),this.stopAnimation(),this.stopEffect()},t.prototype.onComplete=function(){this._isAnimationComplete&&this._isEffectViewObjectComplete&&(Logger.log("onComplete "+this._object.hashCode,this),this._object,Utils.BulletTool.IsMegaDrillBullet(this._object.getData().bulletID)?(this._object.getData().rotation=this._object.rotation,this._object.setStatus(GameEnum.BulletStateEnum.Move)):this._object.setStatus(GameEnum.BulletStateEnum.Die))},t.prototype.playAnimation=function(){Logger.log("playAnimation "+this._object.hashCode,this),this.onAnimationComplete()},t.prototype.stopAnimation=function(){Logger.log("stopAnimation "+this._object.hashCode,this)},t.prototype.onAnimationComplete=function(){Logger.log("onAnimationComplete "+this._object.hashCode,this),this._isAnimationComplete=!0,this.onComplete()},t.prototype.playEffect=function(){Logger.log("playEffect "+this._object.hashCode,this);var e=this._object,t=e.getData(),o=e.getTableEntity();if(o.hitEffectID>0){var i=e,n=e.rotation;o.isRandomPointByHitEffect&&(i=Utils.Vector2Tool.getRandomDisplayObjectByDisplayObject(e,20),n=Utils.MathTool.randomRange(e.rotation-180,e.rotation+180));var a=ApplicationFacade.getInstance().retrieveMediator(BattleViewMediator.NAME),r=a.getSkinView(),s=new EffectViewObjectData(o.hitEffectID,t.self,n,i,i,r.currectBGImage,r.currectBGImage);EffectViewObjectManagerProxy.getInstance().play(s),s=null}this.onEffectComplete()},t.prototype.stopEffect=function(){Logger.log("stopEffect"+this._object.hashCode,this)},t.prototype.onEffectComplete=function(){Logger.log("onEffectComplete "+this._object.hashCode,this),this._isEffectViewObjectComplete=!0,this.onComplete()},t}(BaseStateContext);__reflect(BulletStateHit.prototype,"BulletStateHit");var BulletStateIdle=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._logScope="[BulletStateIdle]",t._isLog=!1,t._status=GameEnum.BulletStateEnum.Idle,t}return __extends(t,e),t.prototype.enable=function(){var e=this;Logger.log("enable "+this._object.hashCode,this);var t=this._object;t.visible=!1;var o=t.getData(),i=t.getTableEntity();t.visible=!1;var n=t.getBulletUI();n.visible=!1;var a=t.getNetUI();a&&(a.visible=!1);var r=t.getMoveMovieClipEffect01();r&&(r.play(-1),r.visible=!1);var s=t.getMoveMovieClipEffect02();s&&(s.play(-1),r.visible=!1),this._setTimeout=egret.setTimeout(function(){var n=Utils.Vector2Tool.getVectorByRotationReturnPoint(o.rotation,t.getBulletUI().measuredHeight/2),a=o.targetObject.localToGlobal(0,0);t.visible=!0,t.x=a.x+n.x,t.y=a.y+n.y,t.scaleX=i.scale,t.scaleY=i.scale,e.onComplete()},this,100)},t.prototype.disable=function(){Logger.log("disable "+this._object.hashCode,this),egret.clearTimeout(this._setTimeout)},t.prototype.onComplete=function(){Logger.log("onComplete "+this._object.hashCode,this);var e=this._object;e.setStatus(GameEnum.BulletStateEnum.Move)},t}(BaseStateContext);__reflect(BulletStateIdle.prototype,"BulletStateIdle");var BulletStateMove=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._logScope="[BulletStateMove]",t._isLog=!1,t._status=GameEnum.BulletStateEnum.Move,t._vectorTemp=[],t._pointTempA=[],t._pointTempB=[],t._pointTempC=[],t}return __extends(t,e),t.prototype.enable=function(){Logger.log("enable "+this._object.hashCode,this);var e=this._object,t=e.getData();e.getTableEntity(),this._screenPointArray=Utils.DisplayObjectTool.createRectanglePointArrayByNumber(ApplicationFacade.getInstance().getView()),this.playMoveObject(t.rotation),this.playAnimation(),this.playEffect()},t.prototype.disable=function(){Logger.log("disable "+this._object.hashCode,this),this.stopMoveObject(),this.stopAnimation(),this.stopEffect()},t.prototype.onComplete=function(){Logger.log("onComplete "+this._object.hashCode,this),this._object},t.prototype.playAnimation=function(){Logger.log("playAnimation "+this._object.hashCode,this);var e=this._object,t=e.getBulletUI();t.visible=!0;var o=e.getMoveMovieClipEffect01();o&&(o.visible=!0);var i=e.getMoveMovieClipEffect02();i&&(o.visible=!0)},t.prototype.stopAnimation=function(){Logger.log("stopAnimation "+this._object.hashCode,this);var e=this._object,t=e.getBulletUI();t.visible=!1},t.prototype.playEffect=function(){Logger.log("playEffect "+this._object.hashCode,this);var e=this._object;e.getData(),e.getTableEntity()},t.prototype.stopEffect=function(){Logger.log("stopEffect "+this._object.hashCode,this)},t.prototype.playMoveObject=function(e){Logger.log("playMoveObject "+this._object.hashCode,this);var t=this._object;t.rotation=e},t.prototype.stopMoveObject=function(){Logger.log("stopMoveObject "+this._object.hashCode,this),this._object},t.prototype.onMoveComplete=function(){Logger.log("onMoveComplete "+this._object.hashCode,this);var e=this._object,t=e.getData(),o=e.getTableEntity(),i=!1;this._isTopCllision&&this.goUp?(this.goUp=!1,this.goDown=!0,i=!0,this.setUpDownRotate()):this._isDownCllision&&this.goDown?(this.goUp=!0,this.goDown=!1,i=!0,this.setUpDownRotate()):this._isLeftCllision&&this.goLeft?(this.goLeft=!1,this.goRight=!0,i=!0,this.setLeftRightRotate()):this._isRightCllision&&this.goRight&&(this.goLeft=!0,this.goRight=!1,i=!0,this.setLeftRightRotate()),i&&(t.lockedFish=null,(t.self||o.isSoundByOther)&&o.hitWallSoundID>0&&this.playHitWallSound()),this.playMoveObject(e.rotation)},t.prototype.setUpDownRotate=function(){var e=this._object;e.rotation<0?e.rotation=-1*(180-Math.abs(e.rotation)):e.rotation=180-Math.abs(e.rotation)},t.prototype.setLeftRightRotate=function(){var e=this._object;e.rotation<0?e.rotation=-1*(0-Math.abs(e.rotation)):e.rotation=0-Math.abs(e.rotation)},t.prototype.onEnterFrame=function(e,t){var o,i,n=t?33.54:16.77;if(e){var a=Utils.Vector2Tool.getRotationByPoint(this._object.localToGlobal(),e.localToGlobal());Math.abs(a-this._object.rotation)<45&&(this._object.rotation=Utils.Vector2Tool.getRotationByPoint(this._object.localToGlobal(),e.localToGlobal()));var r=Utils.Vector2Tool.getVectorByRotationReturnPoint(this._object.rotation,1);o=r.x,i=r.y}else o=Math.cos((this._object.rotation-90)*(Math.PI/180)),i=Math.sin((this._object.rotation-90)*(Math.PI/180));o=Utils.MathTool.multiply(this.formatFloat(o,2),n),i=Utils.MathTool.multiply(this.formatFloat(i,2),n),this._object.x=this._object.x+o,this._object.y=this._object.y+i,(this._object.x<this._object.width||this._object.x>GameSettingProxy.screenWidth-this._object.width||this._object.y<this._object.height||this._object.y>GameSettingProxy.screenHeight-this._object.height)&&(0>o?(this.goLeft=!0,this.goRight=!1):(this.goLeft=!1,this.goRight=!0),0>i?(this.goUp=!0,this.goDown=!1):(this.goUp=!1,this.goDown=!0),this.calculateWallCollision())},t.prototype.formatFloat=function(e,t){var o=Math.pow(10,t);return Math.round(e*o)/o},t.prototype.enableLockFish=function(){Logger.log("enableLockFish "+this._object.hashCode,this);var e=this._object;e.getData(),e.getTableEntity(),this._screenPointArray=Utils.DisplayObjectTool.createRectanglePointArrayByNumber(ApplicationFacade.getInstance().getView()),this.playAnimation(),this.playEffect()},t.prototype.calculateWallCollision=function(){this._object.getCollisionDisplayObject(),this.goUp&&(this._isTopCllision=this._object.y<0),this.goRight&&(this._isRightCllision=this._object.x>GameSettingProxy.screenWidth),this.goDown&&(this._isDownCllision=this._object.y>GameSettingProxy.screenHeight),this.goLeft&&(this._isLeftCllision=this._object.x<0),(this._isTopCllision||this._isRightCllision||this._isDownCllision||this._isLeftCllision)&&this.onMoveComplete()},t.prototype.playHitWallSound=function(){var e=this._object.getTableEntity();e.hitWallSoundID>0&&SoundObjectManagerProxy.getInstance().play(e.hitWallSoundID)},t}(BaseStateContext);__reflect(BulletStateMove.prototype,"BulletStateMove");var BulletStateNone=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._logScope="[BulletStateNone]",t._isLog=!1,t._status=GameEnum.BulletStateEnum.None,t}return __extends(t,e),t.prototype.enable=function(){Logger.log("enable "+this._object.hashCode,this),this._object.visible=!1,this.onComplete()},t.prototype.disable=function(){Logger.log("disable "+this._object.hashCode,this)},t.prototype.onComplete=function(){Logger.log("onComplete "+this._object.hashCode,this);var e=this._object;e.stop()},t}(BaseStateContext);__reflect(BulletStateNone.prototype,"BulletStateNone");var BulletViewEntity=function(){function e(){this._logScope="[BulletViewEntity]",this._isLog=!1,this.state=GameEnum.BulletStateEnum.Idle}return e}();__reflect(BulletViewEntity.prototype,"BulletViewEntity");var BulletViewEntityArrayProxy=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._logScope="[BulletViewEntityArrayProxy]",t._isLog=!1,t}return __extends(t,e),t.prototype.onFacadeAwakeComplete=function(){this.retrieveProxy()},t.prototype.onPreloadResourceComplete=function(){},t.prototype.onNonPreloadResourceComplete=function(e){e==GameEnum.LoadingCollectionTypeEnum.Lobby&&this.start()},t.prototype.onSCRoomLoginComplete=function(){this.init()},t.prototype.onSCRoomLogoutComplete=function(){this.reset()},t.prototype.awake=function(){this._bulletViewEntityArray=new Array},t.prototype.start=function(){},t.prototype.init=function(){},t.prototype.reset=function(){this.clearArray(),this._scRoomLogin=null},t.prototype.getBulletViewEntityArray=function(){return this._bulletViewEntityArray},t.prototype.getBulletViewEntityArrayByPlayerID=function(e){var t=this._bulletViewEntityArray,o=new Array;for(var i in t){var n=t[i];n.iPlayerID==e&&o.push(n)}return o},t.prototype.getBulletViewEntityArrayBySeatID=function(e){var t=this._bulletViewEntityArray,o=new Array;for(var i in t){var n=t[i];n.seat==e&&o.push(n)}return o},t.prototype.getBulletViewEntityArrayBySelf=function(){var e=this._bulletViewEntityArray,t=new Array;for(var o in e){var i=e[o];i.isSelf&&t.push(i)}return t},t.prototype.getBulletViewEntity=function(e){var t=this._bulletViewEntityArray;for(var o in t){var i=t[o];if(i.iBulletID==e)return i}return null},t.prototype.parserSCPlayerRoomLogout=function(e){Logger.log("parserSCPlayerRoomLogout",this),this.removeBulletFromArrayByPlayerID(e.iPlayerID)},t.prototype.parserSCFire=function(e){Logger.log("parserSCFire",this),this.fireBullet(e)},t.prototype.parseBulletHitFish=function(e){Logger.log("parserSCHit",this),this.hitBullet(e)},t.prototype.parserSCSyncEntity=function(e){this.handlePlayDieBullet(e.bulletId)},t.prototype.fireBullet=function(e){if(Logger.log("fireBullet",this),this.checkSelfPlayerID(e.iPlayerID)){if(this.checkBulletIDIsExist(e.iBulletID)){var t=this._bulletViewEntityArray,o=[];for(var i in t){var n=t[i];o.push(n.iBulletID)}return Logger.log("checkBulletIDIsExist, "+e.iBulletID+" , entity:["+o+"]",this),void Logger.error(this._logScope+" fireBullet, iBulletID:"+e.iBulletID+" duplicate")}}else if(this.checkBulletIDIsExist(e.iBulletID))return;var a=this.getPlayerViewEntityByPlayerID(e.iPlayerID);if(a){var r=this.newBulletViewEntity(e);if(r){this.addBulletToArray(r);var s=a.view.firePointGroup,l=TableEntityProxy.getInstance().getFortTableEntity(r.bulletType),c=this._allProxy._gameDataProxy.getBarrelLevel(r.iPlayerID,r.bet),h=l["bulletID_"+(c+1)],u=void 0;u=Utils.GameTool.isReverseByLabelAndBulletRotation(a.seat,this._allProxy._gameDataProxy.seatID)?r.rotation+180:r.rotation;var p=new BulletViewObjectData(h,a.id,a.isSelf,s,u,c,r.lockFish,r.iBulletID);r.bulletViewObject=this._allProxy._bulletViewObjectManagerProxy.play(p),r.bulletViewObject.bulletViewEntity=r,r.bulletViewObject.bulletViewEntityArrayProxy=this}}},t.prototype.hitBullet=function(e){Logger.log("hitBullet",this);var t=this.getBulletViewEntity(e.bulletId);t&&(t.bulletViewObject.setStatus(GameEnum.BulletStateEnum.Hit),this.handlePlayDieBullet(e.bulletId))},t.prototype.handlePlayDieBullet=function(e){Logger.log("dieBullet",this);var t=this.getBulletViewEntity(e);if(t){if(t.bulletViewObject.getStatus()==GameEnum.BulletStateEnum.Idle)return;t.bulletType!=GameEnum.FortTableEnum.MegaDrill||Utils.BulletTool.IsMegaDrillBullet(t.iBulletID)&&t.bulletViewObject.setStatus(GameEnum.BulletStateEnum.Move)}else if(Utils.BulletTool.IsFinalMegaDrillBullet(e)){var o=Utils.BulletTool.GetSeatIDByBulletID(e),i=this.getBulletViewEntity(Number(o+Utils.GameTool.addZero(GameEnum.FortTableEnum.MegaDrill,2)+"050"));i&&(i.bulletViewObject.setStatus(GameEnum.BulletStateEnum.Die),this.removeBulletFromArray(i))}},t.prototype.addBulletToArray=function(e){Logger.log("addBulletToArray",this);var t=this._bulletViewEntityArray;t.push(e),this.sendNotification(GameEvent.BulletViewEntityArrayProxyEvent.MODIFY_COMPLETE_BULLET_ARRAY,t)},t.prototype.removeBulletFromArray=function(e){Logger.log("removeBulletFromArray",this);var t=this._bulletViewEntityArray;for(var o in t)if(t[o].iBulletID==e.iBulletID)return t.splice(Number(o),1),void this.sendNotification(GameEvent.BulletViewEntityArrayProxyEvent.MODIFY_COMPLETE_BULLET_ARRAY,t,e.isSelf.toString())},t.prototype.removeBulletFromArrayByPlayerID=function(e){Logger.log("removeBulletFromArrayByPlayerID playerID:"+e,this);for(var t=this._bulletViewEntityArray,o=t.length-1;o>-1;o--){var i=t[o];i.iPlayerID==e&&(i.bulletViewObject.stop(),t.splice(Number(o),1))}this.sendNotification(GameEvent.BulletViewEntityArrayProxyEvent.MODIFY_COMPLETE_BULLET_ARRAY,t)},t.prototype.clearArray=function(){Logger.log("clearArray",this);for(var e=this._bulletViewEntityArray,t=e.length-1;t>-1;t--){var o=e[t];o.bulletViewObject.stop(),e.splice(Number(t),1)}this.sendNotification(GameEvent.BulletViewEntityArrayProxyEvent.MODIFY_COMPLETE_BULLET_ARRAY,e)},t.prototype.newBulletViewEntity=function(e){Logger.log("newBulletViewEntity",this);var t=new BulletViewEntity,o=this._allProxy._playerViewEntityArrayProxy.getPlayerViewEntityByPlayerID(e.iPlayerID);return o?(t.iPlayerID=e.iPlayerID,t.isSelf=o.isSelf,t.bet=e.iBet,t.iBulletID=e.iBulletID,t.bulletType=Utils.BulletTool.IsSpecialBullet(t.iBulletID)?Utils.BulletTool.IsAutomaticBazookaBullet(t.iBulletID)?GameEnum.FortTableEnum.AutomaticBazooka:GameEnum.FortTableEnum.MegaDrill:GameEnum.FortTableEnum.Normal,t.rotation=Utils.TranslateTool.weaponInfo2Rotation(e.iRotation),t.state=GameEnum.BulletStateEnum.Idle,t.lockFish=this._allProxy._fishViewObjectManagerProxy.getMoveStateObjectInScreenBySN(e.iTargetSN),t):null
},t.prototype.checkBulletIDIsExist=function(e){if(Utils.BulletTool.IsSpecialBullet(e))return!1;var t=this._bulletViewEntityArray;for(var o in t)if(t[o],t[o].iBulletID==e)return!0;return!1},t.prototype.getPlayerViewEntityByPlayerID=function(e){return this._allProxy._playerViewEntityArrayProxy.getPlayerViewEntityByPlayerID(e)},t.prototype.getPlayerViewEntityBySeatID=function(e){return this._allProxy._playerViewEntityArrayProxy.getPlayerViewEntityBySeat(e)},t.prototype.checkSelfPlayerID=function(e){return this._allProxy._playerViewEntityArrayProxy.checkIsSelfByPlayerID(e)},t.prototype.checkSelfSeatID=function(e){return this._allProxy._playerViewEntityArrayProxy.checkIsSelfBySeatID(e)},t.NAME="BulletViewEntityArrayProxy",t}(BaseProxy);__reflect(BulletViewEntityArrayProxy.prototype,"BulletViewEntityArrayProxy");var BulletViewEntityProxyAdapterMediator=function(e){function t(t,o){var i=e.call(this,t,o)||this;return i._logScope="[BulletViewEntityProxyAdapterMediator]",i._isLog=!1,i}return __extends(t,e),t.prototype.listNotificationInterests=function(){return[GameEvent.ApplicationFacadeEvent.AWAKE_COMPLETE,GameEvent.ProtocolProxyEvent.MODIFY_COMPLETE_SC_PLAYER_ROOM_LOGOUT_VALUE,GameEvent.ProtocolProxyEvent.MODIFY_COMPLETE_SC_FIRE_VALUE,GameEvent.ProtocolProxyEvent.MODIFY_COMPLETE_SC_SYNC_VALUE]},t.prototype.handleNotification=function(t){var o=t.getBody();switch(t.getName()){case GameEvent.ApplicationFacadeEvent.AWAKE_COMPLETE:e.prototype.retrieveAllProxyAndMediator.call(this);break;case GameEvent.ProtocolProxyEvent.MODIFY_COMPLETE_SC_PLAYER_ROOM_LOGOUT_VALUE:this._allProxy._bulletViewEntityArrayProxy.parserSCPlayerRoomLogout(o);break;case GameEvent.ProtocolProxyEvent.MODIFY_COMPLETE_SC_FIRE_VALUE:this._allProxy._bulletViewEntityArrayProxy.parserSCFire(o);break;case GameEvent.ProtocolProxyEvent.MODIFY_COMPLETE_SC_SYNC_VALUE:this._allProxy._bulletViewEntityArrayProxy.parserSCSyncEntity(o)}},t.NAME="BulletViewEntityProxyAdapterMediator",t}(BaseAdapterMediator);__reflect(BulletViewEntityProxyAdapterMediator.prototype,"BulletViewEntityProxyAdapterMediator");var BulletViewObject=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._logScope="[BulletViewObject]",t._isLog=!1,t._component=new BulletComponent,t._isDrawCollisionRectByDebug=!1,t._status=GameEnum.BulletStateEnum.None,t}return __extends(t,e),t.prototype.startObject=function(t){Logger.log("startObject "+this.hashCode,this),e.prototype.startObject.call(this,t),this.createColliderData(t)},t.prototype.initObject=function(t){Logger.log("initObject "+this.hashCode,this),this.name=this._tableEntity.enumName+"_"+String(this.hashCode)+"_bulletID:"+String(t.bulletID),e.prototype.initObject.call(this,t),this.setStatus(GameEnum.BulletStateEnum.None)},t.prototype.resetObject=function(){Logger.log("resetObject "+this.hashCode,this),e.prototype.resetObject.call(this)},t.prototype.playObject=function(){Logger.log("playObject "+this.hashCode,this),e.prototype.playObject.call(this),this.setStatus(GameEnum.BulletStateEnum.Idle),this._tableEntity.isAlphaByOther&&0==this._data.self?this.alpha=.5:this.alpha=1},t.prototype.stopObject=function(){Logger.log("stopObject "+this.hashCode,this),e.prototype.stopObject.call(this)},t.prototype.completeObject=function(){Logger.log("completeObject "+this.hashCode,this),e.prototype.completeObject.call(this),this._stateContext.disable(),this._proxy.onObjectCompleteHandle(this)},t.prototype.getProxy=function(){return this._proxy},t.prototype.getData=function(){return this._data},t.prototype.getTableEntity=function(){return this._tableEntity},t.prototype.setStatus=function(e){if(!this._stateContext||e!=this._stateContext.status){var t,o;switch(e){case GameEnum.BulletStateEnum.Die:t=new BulletStateDie(this),o=GameEvent.BulletViewObjectManagerProxyEvent.CHANGE_COMPLETE_STATE_DIE;break;case GameEnum.BulletStateEnum.Move:t=new BulletStateMove(this),o=GameEvent.BulletViewObjectManagerProxyEvent.CHANGE_COMPLETE_STATE_MOVE;break;case GameEnum.BulletStateEnum.Hit:t=new BulletStateHit(this),o=GameEvent.BulletViewObjectManagerProxyEvent.CHANGE_COMPLETE_STATE_HIT;break;case GameEnum.BulletStateEnum.Idle:t=new BulletStateIdle(this),o=GameEvent.BulletViewObjectManagerProxyEvent.CHANGE_COMPLETE_STATE_IDLE;break;case GameEnum.BulletStateEnum.None:t=new BulletStateNone(this),o=GameEvent.BulletViewObjectManagerProxyEvent.CHANGE_COMPLETE_STATE_NONE;break;default:Logger.error("setStatus status:"+e+" is not exist")}this._stateContext&&(this._stateContext.disable(),this._proxy.sendNotification(o,this)),this._stateContext=t,this._stateContext.enable()}},t.prototype.getStatus=function(){return this._stateContext.status},t.prototype.createColliderData=function(e){var t=e.collisionRectangleWidth,o=e.collisionRectangleHeight,i=new egret.Shape;if(i.name="ColliderRect",i.graphics.beginFill(16777215,.1),i.graphics.lineStyle(2,16777215),i.graphics.drawRect(t*-.5,o*-.5,t,o),i.graphics.endFill(),i.visible=!1,this.addChild(i),this._isDrawCollisionRectByDebug){i.visible=!0;var n=new eui.Label;n.text=String(this.hashCode),n.name="SNLabel",this.addChild(n)}this._collisionRectangle=i},t.prototype.getCollisionDisplayObject=function(){return this._collisionRectangle},t.prototype.getBulletUI=function(){var e=this._component;return e.bulletMovieClip},t.prototype.getNetUI=function(){return this._component.netImage},t.prototype.getMoveMovieClipEffect01=function(){return this._component.moveEffectMovieClip01},t.prototype.getMoveMovieClipEffect02=function(){return this._component.moveEffectMovieClip02},t.prototype.onEnterFrame=function(){egret.is(this._stateContext,"BulletStateMove")&&this._stateContext.onEnterFrame(this.getData().lockedFish,Utils.BulletTool.IsMegaDrillBullet(this.getData().bulletID))},t.NAME="BulletViewObject",t}(BaseCOPObject);__reflect(BulletViewObject.prototype,"BulletViewObject");var BulletViewObjectData=function(){function e(e,t,o,i,n,a,r,s){this.tableEntityID=e,this.iPlayerID=t,this.self=o,this.targetObject=i,this.rotation=n,this.barrelLevel=a,this.lockedFish=r,this.bulletID=s}return e}();__reflect(BulletViewObjectData.prototype,"BulletViewObjectData");var BulletViewObjectManagerProxy=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._logScope="[BulletViewObjectManagerProxy]",t._isLog=!1,t._objectMap={},t}return __extends(t,e),t.prototype.onFacadeAwakeComplete=function(){this.facadeComplete()},t.prototype.onPreloadResourceComplete=function(){},t.prototype.onNonPreloadResourceComplete=function(e){e==GameEnum.LoadingCollectionTypeEnum.Battle&&this.resourceComplete()},t.prototype.onSCRoomLoginComplete=function(){this.init()},t.prototype.onSCRoomLogoutComplete=function(){this.reset()},t.prototype.nextAwake=function(){},t.prototype.nextStart=function(){var e=GameEvent.BulletViewObjectManagerProxyEvent.MODIFY_COMPLETE_GENERATOR_MAP,t=GameEvent.BulletViewObjectManagerProxyEvent.MODIFY_COMPLETE_OBJECT_MAP,o=TableEntityProxy.getInstance().bulletTableEntityArray;this.startData(e,t,o);var i=ApplicationFacade.getInstance().retrieveMediator(BattleBulletArrayViewMediator.NAME);this._layer=i.getSkinView()},t.prototype.nextInit=function(){},t.prototype.nextReset=function(){},t.prototype.startObject=function(e){var t=e.tableEntityID,o=TableEntityProxy.getInstance().getBulletTableEntity(t),i=this._generatorMap[t],n=i.getObject(BulletViewObject);return this.addChild(n),0==n.isStartComplete()&&(n.opSetProtocol(i.getDistributor()),n.start(o,this)),n},t.prototype.initObject=function(e,t){e.init(t)},t.prototype.playObject=function(e){e.play()},t.prototype.stopObject=function(e){e.stop()},t.prototype.onObjectCompleteHandle=function(e){},t.prototype.getMap=function(){return this._objectMap},t.prototype.addChild=function(e){this._layer.addChild(e)},t.prototype.removeChild=function(e){this._layer.removeChild(e)},t.NAME="BulletViewObjectManagerProxy",t}(BaseObjectManagerProxy);__reflect(BulletViewObjectManagerProxy.prototype,"BulletViewObjectManagerProxy");var BulletViewObjectManagerProxyAdapterMediator=function(e){function t(t,o){var i=e.call(this,t,o)||this;return i._logScope="[BulletViewObjectManagerProxyAdapterMediator]",i._isLog=!1,i}return __extends(t,e),t.prototype.listNotificationInterests=function(){return[GameEvent.ApplicationFacadeEvent.AWAKE_COMPLETE,GameEvent.FishViewObjectManagerProxyEvent.CHANGE_COMPLETE_STATE_DIE,GameEvent.FishViewObjectManagerProxyEvent.CHANGE_COMPLETE_STATE_STONE_BEGIN,GameEvent.FishViewObjectManagerProxyEvent.MODIFY_COMPLETE_GO_OUT_FISH,GameEvent.BattleSceneEvent.ENTER_FRAME,GameEvent.BattleSceneEvent.CHANGE_BACKGROUND]},t.prototype.handleNotification=function(e){var t=e.getBody();switch(e.getName()){case GameEvent.BattleSceneEvent.ENTER_FRAME:this.onEnterFrame();break;case GameEvent.ApplicationFacadeEvent.AWAKE_COMPLETE:this.retrieveAllProxyAndMediator();break;case GameEvent.FishViewObjectManagerProxyEvent.CHANGE_COMPLETE_STATE_DIE:case GameEvent.FishViewObjectManagerProxyEvent.CHANGE_COMPLETE_STATE_STONE_BEGIN:case GameEvent.FishViewObjectManagerProxyEvent.MODIFY_COMPLETE_GO_OUT_FISH:this.onFishDie(t);break;case GameEvent.BattleSceneEvent.CHANGE_BACKGROUND:this.onChangeBackground()}},t.prototype.onFishDie=function(e){for(var t=this._allProxy._bulletViewEntityArrayProxy.getBulletViewEntityArray(),o=t.length,i=0;o>i;i++){var n=t[i];n.bulletViewObject.getData()&&n.bulletViewObject.getData().lockedFish==e&&(n.bulletViewObject.getData().lockedFish=null)}},t.prototype.onEnterFrame=function(){for(var e=this._allProxy._bulletViewEntityArrayProxy.getBulletViewEntityArray(),t=e.length,o=0;t>o;o++){var i=e[o];i.bulletViewObject.onEnterFrame()}},t.prototype.onChangeBackground=function(){for(var e=this._allProxy._bulletViewEntityArrayProxy.getBulletViewEntityArray(),t=e.length,o=0;t>o;o++){var i=e[o];i.bulletViewObject.getData()&&(i.bulletViewObject.getData().lockedFish=null)}},t.NAME="BulletViewObjectManagerProxyAdapterMediator",t}(BaseAdapterMediator);__reflect(BulletViewObjectManagerProxyAdapterMediator.prototype,"BulletViewObjectManagerProxyAdapterMediator");var CaiShenBillboardFX=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._logScope="[CaiShenBillboardFX]",t._isLog=!1,t}return __extends(t,e),t.prototype.startObject=function(e){Logger.log("startObject"+this.hashCode,this);var t=new eui.Image;t.texture=Utils.ResourceTool.getTextureResByLanguage(GameName.TextureName.CaiShenComing),t.visible=!1,Utils.DisplayObjectTool.setAnchorOffset(t),this.addChild(t),this._titleImage=t},t.prototype.initObject=function(){Logger.log("initObject "+this.hashCode,this),this._titleImage&&Utils.DisplayObjectTool.resetDisplayObject(this._titleImage,!0),Utils.DisplayObjectTool.resetDisplayObject(this,!0)},t.prototype.resetObject=function(){Logger.log("resetObject "+this.hashCode,this),this._titleImage&&Utils.DisplayObjectTool.resetDisplayObject(this._titleImage,!1),Utils.DisplayObjectTool.resetDisplayObject(this,!1)},t.prototype.playObject=function(){Logger.log("playObject "+this.hashCode,this);var e=this._titleImage,t=(this._data,GameSettingProxy.screenWidth),o=2*e.width;e.y=200,e.x=1500,egret.Tween.get(e).set({visible:!0,x:t+o}).to({x:t/2},400,egret.Ease.cubicOut).wait(2500).to({x:-1*o},400,egret.Ease.cubicIn).set({visible:!1}).call(this.onComplete,this)},t.prototype.stopObject=function(){Logger.log("stopObject "+this.hashCode,this),this.onComplete()},t.prototype.completeObject=function(){Logger.log("completeObject "+this.hashCode,this),egret.Tween.removeTweens(this)},t.NAME="CaiShenBillboardFX",t}(BaseFX);__reflect(CaiShenBillboardFX.prototype,"CaiShenBillboardFX");var CaiShenBillboardFXData=function(){function e(){}return e}();__reflect(CaiShenBillboardFXData.prototype,"CaiShenBillboardFXData");var CaiShenFaFaFaCoinFX=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._logScope="[CaiShenFaFaFaCoinFX]",t._isLog=!1,t.temporaryBeginPoint=new egret.Point,t.temporaryEndPoint=new egret.Point,t}return __extends(t,e),t.prototype.startObject=function(e){Logger.log("startObject"+this.hashCode,this);var t=Utils.ResourceTool.getMovieClip(e.jsonName,e.clipName);t.anchorOffsetX=t.measuredWidth,t.anchorOffsetY=t.measuredHeight,this.addChild(t),this._coinMC=t},t.prototype.initObject=function(e){Logger.log("initObject "+this.hashCode,this),this._coinMC&&Utils.DisplayObjectTool.resetDisplayObject(this._coinMC,!0),Utils.DisplayObjectTool.resetDisplayObject(this,!1)},t.prototype.resetObject=function(){Logger.log("resetObject "+this.hashCode,this),this._coinMC&&Utils.DisplayObjectTool.resetDisplayObject(this._coinMC,!1),Utils.DisplayObjectTool.resetDisplayObject(this,!1)},t.prototype.playObject=function(){Logger.log("playObject "+this.hashCode,this),this._coinMC,this._data,this.coinMoveFromFish()},t.prototype.stopObject=function(){Logger.log("stopObject "+this.hashCode,this),this.onComplete()},t.prototype.completeObject=function(){Logger.log("completeObject "+this.hashCode,this),egret.Tween.removeTweens(this)},t.prototype.coinMoveFromFish=function(){var e=this._coinMC,t=this._data;if(this.visible=!0,t){var o=t.beginTargetObject.localToGlobal(0,0);e.x=o.x,e.y=o.y,e.scaleX=1,e.scaleY=1,e.visible=!0,e.parent.addChildAt(e,0),this._originalX=e.x,this._originalY=e.y,this.playByMove(0)}},t.prototype.coinMoveFormEndPoint=function(){var e=this._coinMC,t=this._data,o=new egret.Point(e.x,e.y),i=t.endTargetObject.localToGlobal(),n=egret.Point.distance(o,i)/500*1e3;egret.Tween.get(e).to({x:i.x,y:i.y},n).set({visible:!1}).call(this.onComplete,this)},t.prototype.playByMove=function(e){Logger.log("playByMove "+this.hashCode,this);var t=(this._data,this._coinMC),o=(this._tableEntity,this._coinMC,200),i=10;if(egret.Tween.removeTweens,i>=e){e++;var n=this.getMoveValue(e),a=this.getMoveValue(e);egret.Tween.get(t).set({x:this._originalX,y:this._originalY}).to({x:this._originalX+n,y:this._originalY+a},o/4).to({x:this._originalX-n,y:this._originalY-a},o/2).to({x:this._originalX,y:this._originalY},o/4).call(this.playByMove,this,[e])}else this.coinMoveFormEndPoint()},t.prototype.getMoveValue=function(e){var t=Math.pow(1/e,2),o=10,i=Utils.MathTool.randomRange(-1*o,o),n=o*t,a=n;return i>0?a:a=-1*n,a},t.prototype.playAnimation=function(e){var t=this._coinMC;e?t.gotoAndPlay(0,-1):t.gotoAndStop(0)},t.NAME="CaiShenFaFaFaCoinFX",t}(BaseFX);__reflect(CaiShenFaFaFaCoinFX.prototype,"CaiShenFaFaFaCoinFX");var CaiShenFaFaFaCoinFXData=function(){function e(e,t,o){this.beginTargetObject=e,this.endTargetObject=t,this.self=o}return e}();__reflect(CaiShenFaFaFaCoinFXData.prototype,"CaiShenFaFaFaCoinFXData");var CaiShenFaFaFaMedalsFX=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._logScope="[CaiShenFaFaFaMedalsFX]",t._isLog=!1,t._winBitmapLabel=new eui.BitmapLabel,t._winScoreBGImage=new eui.Image,t._winBGImage=new eui.Image,t}return __extends(t,e),t.prototype.startObject=function(e){Logger.log("startObject"+this.hashCode,this),this._data,this._winBitmapLabel.font=Utils.ResourceTool.getRes(GameName.FontName.GoldCredit),this._winScoreBGImage.texture=Utils.ResourceTool.getTextureRes(GameName.TextureName.MedalsCaiShenFaFaFaScoreBG),Utils.DisplayObjectTool.setAnchorOffset(this._winScoreBGImage),this._winBGImage.texture=Utils.ResourceTool.getTextureRes(GameName.TextureName.MedalsCaiShenFaFaFaBG),Utils.DisplayObjectTool.setAnchorOffset(this._winBGImage),this.addChild(this._winBGImage),this.addChild(this._winScoreBGImage),this.addChild(this._winBitmapLabel)},t.prototype.initObject=function(e){Logger.log("initObject "+this.hashCode,this),this._winBitmapLabel&&Utils.DisplayObjectTool.resetDisplayObject(this._winBitmapLabel,!0),this._winScoreBGImage&&Utils.DisplayObjectTool.resetDisplayObject(this._winScoreBGImage,!0),this._winBGImage&&Utils.DisplayObjectTool.resetDisplayObject(this._winBGImage,!0),Utils.DisplayObjectTool.resetDisplayObject(this,!0)},t.prototype.resetObject=function(){Logger.log("resetObject "+this.hashCode,this),this._winBitmapLabel&&Utils.DisplayObjectTool.resetDisplayObject(this._winBitmapLabel,!1),this._winScoreBGImage&&Utils.DisplayObjectTool.resetDisplayObject(this._winScoreBGImage,!1),this._winBGImage&&Utils.DisplayObjectTool.resetDisplayObject(this._winBGImage,!1),Utils.DisplayObjectTool.resetDisplayObject(this,!1)},t.prototype.playObject=function(){Logger.log("playObject "+this.hashCode,this);var e=this._data,t=this._winBitmapLabel,o=this._winScoreBGImage,i=this._winBGImage;this.visible=!0;var n=e.targetObject.localToGlobal(0,0),a=n.x,r=n.y,s=e.reverse?-1:1;t.visible=!0,t.y=25,t.text=String(Utils.TranslateTool.win2CashTenDolla(e.win,e.denom)),Utils.DisplayObjectTool.setAnchorOffset(t),t.scaleX=0,t.scaleY=0,o.visible=!0,Utils.DisplayObjectTool.setAnchorOffset(o),o.y=25,o.scaleX=1,o.scaleY=1,o.alpha=1,i.visible=!0,this.x=a,this.y=r-150*s,this.scaleX=0,this.scaleY=0,this.alpha=1;var l=0;l=e.self?this._tableEntity.waitTimeBySelf:this._tableEntity.waitTimeByOther;var c=Utils.MathTool.randomRange(1e3,3e3);egret.Tween.get(t).wait(320+l/2+150+c).to({scaleX:1.3,scaleY:1.3},260,egret.Ease.quadIn).to({scaleX:1,scaleY:1},60,egret.Ease.quadOut),egret.Tween.get(o).wait(320+l/2+c).to({scaleX:1.3,scaleY:1.3},260,egret.Ease.quadIn).to({scaleX:0,scaleY:0,alpha:0},60,egret.Ease.quadOut),egret.Tween.get(this).to({scaleX:1.3,scaleY:1.3},260,egret.Ease.quadIn).to({scaleX:1,scaleY:1},60,egret.Ease.quadOut).wait(l+c).to({scaleX:1.3,scaleY:1.3,alpha:0},100).wait(1e3).call(this.onComplete,this),(this._tableEntity.isSoundByOther||e.self)&&(MedalsViewObject.soundObject&&SoundObjectManagerProxy.getInstance().stop(MedalsViewObject.soundObject),MedalsViewObject.soundObject=SoundObjectManagerProxy.getInstance().play(this._tableEntity.soundID))},t.prototype.stopObject=function(){Logger.log("stopObject "+this.hashCode,this),this.onComplete()},t.prototype.completeObject=function(){Logger.log("completeObject "+this.hashCode,this),egret.Tween.removeTweens(this)},t.NAME="CaiShenFaFaFaMedalsFX",t}(BaseFX);__reflect(CaiShenFaFaFaMedalsFX.prototype,"CaiShenFaFaFaMedalsFX");var CaiShenFaFaFaMedalsFXData=function(){function e(e,t,o,i,n,a){this.targetObject=e,this.win=t,this.denom=o,this.fishID=i,this.reverse=n,this.self=a}return e}();__reflect(CaiShenFaFaFaMedalsFXData.prototype,"CaiShenFaFaFaMedalsFXData");var ChangeDebuggerViewCommand=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._logScope="[ChangeDebuggerViewCommand]",t._isLog=!1,t}return __extends(t,e),t.prototype.execute=function(e){var t=e.getBody();this.changeDebuggerView(t)},t.prototype.changeDebuggerView=function(e){Logger.log("changeView view:"+GameEnum.DebuggerViewTypeEnum[e],this);for(var t in GameEvent.DebuggerEvent)GameEvent.DebuggerViewEventNamingRules.checkIsExistInShowEvent(t,GameEnum.DebuggerViewTypeEnum[e])?(Logger.log(GameEvent.DebuggerEvent[t],this),this.sendNotification(GameEvent.DebuggerEvent[t])):!GameEvent.DebuggerViewEventNamingRules.checkIsExistInHideEvent(t,GameEnum.DebuggerViewTypeEnum[e])&&GameEvent.DebuggerViewEventNamingRules.check(t)&&(Logger.log(GameEvent.DebuggerEvent[t],this),this.sendNotification(GameEvent.DebuggerEvent[t]))},t.NAME="ChangeDebuggerViewCommand",t}(puremvc.SimpleCommand);__reflect(ChangeDebuggerViewCommand.prototype,"ChangeDebuggerViewCommand",["ILogger"]);var CheckReconnectCommand=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._logScope="[CheckReconnectCommand]",t._isLog=!1,t}return __extends(t,e),t.prototype.execute=function(e){var t=this.facade.retrieveProxy(GameDataProxy.NAME);if(t.reconnectInScene==GameEnum.SceneTypeEnum.Transition){var o=Protocol_App.maintenanceAnnounce;this.sendNotification(ParserProtocolCommand.NAME,[o,!0])}},t.NAME="CheckReconnectCommand",t}(puremvc.SimpleCommand);__reflect(CheckReconnectCommand.prototype,"CheckReconnectCommand",["ILogger"]);var CoinComponent=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._logScope="[CoinComponent]",t._isLog=!1,t._isFXComplete=!0,t}return __extends(t,e),t.prototype.startObject=function(e){switch(Logger.log("startObject"+this.hashCode,this),e.id){case 1:this._fx=new CoinFX;break;case 2:this._fx=new RandomCoinFX;break;case 3:this._fx=new AutomaticBazookaCoinFX;break;default:Logger.error("startObject id:"+e.id+" is not exist",this)}this.fxStart(this._fx,e)},t.prototype.initObject=function(e){switch(Logger.log("initObject "+this.hashCode,this),this._tableEntity.id){case 1:var t=new CoinFXData(e.coinBeginTargetObject,e.coinEndTargetObject,e.coinCreditTargetObject,e.coinNumber,e.coinTotalCount,e.win,e.self);this._fx.init(t);break;case 2:var t=new RandomCoinFXData(e.coinBeginTargetObject,e.coinEndTargetObject,e.coinCreditTargetObject,e.coinNumber,e.coinTotalCount,e.win,e.self);this._fx.init(t);break;case 3:var t=new AutomaticBazookaCoinFXData(e.coinBeginTargetObject,e.coinEndTargetObject,e.coinCreditTargetObject,e.coinNumber,e.coinTotalCount,e.win,e.self);this._fx.init(t);break;default:Logger.error("initObject error id:"+this._tableEntity.id+" is not exist",this)}Utils.DisplayObjectTool.resetDisplayObject(this,!0)},t.prototype.resetObject=function(){Logger.log("resetObject "+this.hashCode,this),Utils.DisplayObjectTool.resetDisplayObject(this,!1)},t.prototype.playObject=function(){Logger.log("playObject "+this.hashCode,this),this._fx&&(this._fx.play(),this._isFXComplete=!1)},t.prototype.stopObject=function(){Logger.log("stopObject "+this.hashCode,this),this._fx&&(this._fx.stop(),this._isFXComplete=!1),this.onComplete()},t.prototype.completeObject=function(){Logger.log("completeObject "+this.hashCode,this)},t.prototype.onFXComplete=function(e){var t;this._isFXComplete=!0,egret.is(e.target,CoinFX.NAME)?t=CoinFX.NAME:egret.is(e.target,RandomCoinFX.NAME)?t=RandomCoinFX.NAME:egret.is(e.target,AutomaticBazookaCoinFX.NAME)?t=AutomaticBazookaCoinFX.NAME:Logger.error("onFXComplete "+e.target+" is not exist",this),Logger.log("onFXComplete "+this.hashCode+" "+t,this),this._isFXComplete&&this.onComplete()},t.prototype.fxStart=function(e,t){e.addEventListener(ObjectEvent.COMPLETE,this.onFXComplete,this),this.addChild(e),e.start(t)},t.NAME="CoinComponent",t}(BaseComponent);__reflect(CoinComponent.prototype,"CoinComponent");var CoinFX=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._logScope="[CoinFX]",t._isLog=!1,t.temporaryBeginPoint=new egret.Point,t.temporaryEndPoint=new egret.Point,t}return __extends(t,e),t.prototype.startObject=function(e){Logger.log("startObject"+this.hashCode,this);var t=Utils.ResourceTool.getMovieClip(e.jsonName,e.clipName);this.addChild(t),this._coinMC=t},t.prototype.initObject=function(e){Logger.log("initObject "+this.hashCode,this),this._coinMC&&Utils.DisplayObjectTool.resetDisplayObject(this._coinMC,!0),Utils.DisplayObjectTool.resetDisplayObject(this,!1)},t.prototype.resetObject=function(){Logger.log("resetObject "+this.hashCode,this),this._coinMC&&Utils.DisplayObjectTool.resetDisplayObject(this._coinMC,!1),Utils.DisplayObjectTool.resetDisplayObject(this,!1)},t.prototype.playObject=function(){var e=this;Logger.log("playObject "+this.hashCode,this);var t=(this._coinMC,this._data);egret.setTimeout(function(){e.coinMoveFromFish()},this,100*t.index)},t.prototype.stopObject=function(){Logger.log("stopObject "+this.hashCode,this),this.onComplete()},t.prototype.completeObject=function(){Logger.log("completeObject "+this.hashCode,this),egret.clearTimeout(this.setTimeout),egret.Tween.removeTweens(this)},t.prototype.coinMoveFromFish=function(){var e=this._coinMC,t=this._data;if(this.visible=!0,t){this.getBeginPointBySort(this.temporaryBeginPoint);var o=this.temporaryBeginPoint;e.x=o.x,e.y=o.y,e.scaleX=1,e.scaleY=1,e.alpha=.8,e.visible=!0,e.parent.addChildAt(e,0),e.gotoAndPlay(0,-1),egret.Tween.get(e).to({y:o.y-100,alpha:1},400,egret.Ease.sineOut).to({y:o.y},400,egret.Ease.sineOut).wait(50*t.index).call(this.coinMoveFormEndPoint,this)}},t.prototype.coinMoveFormEndPoint=function(){var e=this._coinMC,t=this._data,o=new egret.Point(e.x,e.y),i=t.endTargetObject.localToGlobal(),n=egret.Point.distance(o,i)/500*1e3;egret.Tween.get(e).to({y:i.y},n/1.5,egret.Ease.cubicInOut),egret.Tween.get(e).to({x:i.x},n/1.5,egret.Ease.quadOut).set({visible:!1}).wait(50*t.index).call(this.coinMoveFormCredit,this)},t.prototype.coinMoveFormCredit=function(){var e=this._coinMC,t=this._data;if(t.index%8>0||!t.self)this.onComplete();else{var o=t.creditTargetObject.localToGlobal();e.x=o.x,e.y=o.y,e.scaleX=.7,e.scaleY=.7,e.alpha=.5,e.visible=!0,e.gotoAndPlay(Math.floor(e.totalFrames/1),-1),egret.Tween.get(e).to({y:o.y-50,alpha:.9},300,egret.Ease.quadOut).to({y:o.y-30,alpha:.5},120).call(this.onComplete,this);var i=new EffectViewObjectData(8,t.self,0,t.creditTargetObject,t.creditTargetObject,null,null);EffectViewObjectManagerProxy.getInstance().play(i),i=null,SoundObjectManagerProxy.getInstance().play(GameEnum.SoundTableEnum.SE_Game_CoinGet)}},t.prototype.getBeginPointBySort=function(e){var t=4,o=(this._coinMC,this._data),i=40,n=o.totalCount;o.totalCount>t&&(n=t);var a=i*(n-1)/2,r=Math.ceil((o.index+1)/t),s=o.index%t;e.x=o.beginTargetObject.x-a+s*i,e.y=o.beginTargetObject.y+r*i},t.prototype.playAnimation=function(e){var t=this._coinMC;e?t.gotoAndPlay(0,-1):t.gotoAndStop(0)},t.NAME="CoinFX",t}(BaseFX);__reflect(CoinFX.prototype,"CoinFX");var CoinFXData=function(){function e(e,t,o,i,n,a,r){this.beginTargetObject=e,this.endTargetObject=t,this.creditTargetObject=o,this.index=i,this.totalCount=n,this.win=a,this.self=r}return e}();__reflect(CoinFXData.prototype,"CoinFXData");var CoinViewObject=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._logScope="[CoinViewObject]",t._isLog=!1,t._component=new CoinComponent,t}return __extends(t,e),t.prototype.startObject=function(t){Logger.log("startObject "+this.hashCode,this),e.prototype.startObject.call(this,t)},t.prototype.initObject=function(t){Logger.log("initObject "+this.hashCode,this),this.name=this._tableEntity.enumName+"_"+String(this.hashCode),e.prototype.initObject.call(this,t)},t.prototype.resetObject=function(){Logger.log("resetObject "+this.hashCode,this),e.prototype.resetObject.call(this)},t.prototype.playObject=function(){Logger.log("playObject "+this.hashCode,this),e.prototype.playObject.call(this),this._tableEntity.isAlphaByOther&&0==this._data.self?this.alpha=.5:this.alpha=1},t.prototype.stopObject=function(){Logger.log("stopObject "+this.hashCode,this),e.prototype.stopObject.call(this)},t.prototype.completeObject=function(){Logger.log("completeObject "+this.hashCode,this),e.prototype.completeObject.call(this),this._proxy.onObjectCompleteHandle(this)},t.prototype.getProxy=function(){return this._proxy},t.prototype.getData=function(){return this._data},t.prototype.getTableEntity=function(){return this._tableEntity},t.NAME="CoinViewObject",t}(BaseCOPObject);__reflect(CoinViewObject.prototype,"CoinViewObject");var CoinViewObjectData=function(){function e(e,t,o,i,n,a,r,s,l){this.tableEntityID=e,this.iPlayerID=t,this.self=o,this.coinBeginTargetObject=i,this.coinEndTargetObject=n,this.coinCreditTargetObject=a,this.coinNumber=r,this.coinTotalCount=s,this.win=l}return e}();__reflect(CoinViewObjectData.prototype,"CoinViewObjectData");var CoinViewObjectManagerProxy=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._logScope="[CoinViewObjectManagerProxy]",t._isLog=!1,t._objectMap={},t}return __extends(t,e),t.prototype.onFacadeAwakeComplete=function(){this.facadeComplete()},t.prototype.onPreloadResourceComplete=function(){},t.prototype.onNonPreloadResourceComplete=function(e){e==GameEnum.LoadingCollectionTypeEnum.Battle&&this.resourceComplete()},t.prototype.onSCRoomLoginComplete=function(){this.init()},t.prototype.onSCRoomLogoutComplete=function(){this.reset()},t.prototype.nextAwake=function(){},t.prototype.nextStart=function(){var e=GameEvent.CoinViewObjectManagerProxyEvent.MODIFY_COMPLETE_GENERATOR_MAP,t=GameEvent.CoinViewObjectManagerProxyEvent.MODIFY_COMPLETE_OBJECT_MAP,o=TableEntityProxy.getInstance().coinTableEntityArray;this.startData(e,t,o);var i=ApplicationFacade.getInstance().retrieveMediator(BattleCoinArrayViewMediator.NAME);this._layer=i.getSkinView()},t.prototype.nextInit=function(){},t.prototype.nextReset=function(){},t.prototype.startObject=function(e){var t=e.tableEntityID,o=TableEntityProxy.getInstance().getCoinTableEntity(t),i=this._generatorMap[t],n=i.getObject(CoinViewObject);return this.addChild(n),0==n.isStartComplete()&&(n.opSetProtocol(i.getDistributor()),n.start(o,this)),n},t.prototype.initObject=function(e,t){e.init(t)},t.prototype.playObject=function(e){e.play()},t.prototype.stopObject=function(e){e.stop()},t.prototype.onObjectCompleteHandle=function(e){},t.prototype.getMap=function(){return this._objectMap},t.prototype.addChild=function(e){this._layer.addChild(e)},t.prototype.removeChild=function(e){this._layer.removeChild(e)},t.NAME="CoinViewObjectManagerProxy",t}(BaseObjectManagerProxy);__reflect(CoinViewObjectManagerProxy.prototype,"CoinViewObjectManagerProxy");var CoinViewObjectManagerProxyAdapterMediator=function(e){function t(t,o){var i=e.call(this,t,o)||this;return i._logScope="[CoinViewObjectManagerProxyAdapterMediator]",i._isLog=!1,i}return __extends(t,e),t.prototype.listNotificationInterests=function(){return[GameEvent.ApplicationFacadeEvent.AWAKE_COMPLETE,GameEvent.ProtocolProxyEvent.MODIFY_COMPLETE_SC_SYNC_VALUE]},t.prototype.handleNotification=function(e){var t=e.getBody();switch(e.getName()){case GameEvent.ApplicationFacadeEvent.AWAKE_COMPLETE:this.retrieveAllProxyAndMediator();break;case GameEvent.ProtocolProxyEvent.MODIFY_COMPLETE_SC_SYNC_VALUE:this.parserSCSyncEntity(t)}},t.prototype.parserSCSyncEntity=function(e){this.handlePlayCaiShenFaFaFaCoin(e),this.handlePlaySCSyncEntityByBaseCoin(e),this.handlePlaySCSyncEntityByAutomaticBazookaCoin(e)},t.prototype.handlePlayCaiShenFaFaFaCoin=function(e){if(e.spinResult&&!(e.spinResult.mechanismResult.totalWin<=0)&&e.spinRequest.targetId==GameEnum.FishTableEnum.G_103){var t=this._allProxy._fishViewObjectManagerProxy.getObjectBySN(e.targetSN);if(t){var o=this._allProxy._playerViewEntityArrayProxy.getPlayerViewEntityByPlayerID(e.playerId);if(o){var i=TableEntityProxy.getInstance().getFishTableEntity(e.spinRequest.targetId),n=0,a=0;if(i.id==GameEnum.FishTableEnum.G_103&&0==o.isSelf&&(a=1,n=this.payoutToCoinCount(Math.floor(e.spinResult.mechanismResult.totalWin/e.spinRequest.credit))),a>0&&n>0)for(var r=n-1;r>=0;r--){var s=new CoinViewObjectData(a,o.id,o.isSelf,t.localToGlobal(),o.view.centerPointGroup,o.view.getPortSkinView().creditCoinGroup,r,n,e.spinResult.mechanismResult.hitResult.totalWin);this._allProxy._coinViewObjectManagerProxy.play(s),s=null}}}}},t.prototype.handlePlaySCSyncEntityByBaseCoin=function(e){if(e.spinResult&&!(e.spinResult.mechanismResult.hitResult.totalWin<=0)){var t=this._allProxy._fishViewObjectManagerProxy.getObjectBySN(e.targetSN);if(t){var o=this._allProxy._playerViewEntityArrayProxy.getPlayerViewEntityByPlayerID(e.playerId);if(o){var i=TableEntityProxy.getInstance().getFishTableEntity(e.spinRequest.targetId),n=0,a=0;if(1==i.coinID?(a=1,n=this.payoutToCoinCount(e.spinResult.mechanismResult.odd)):2==i.coinID&&(a=2,n=this.payoutToCoinCountByRandomPay(e.spinResult.mechanismResult.odd)),a>0&&n>0)for(var r=n-1;r>=0;r--){var s=new CoinViewObjectData(a,o.id,o.isSelf,t.localToGlobal(),o.view.centerPointGroup,o.view.getPortSkinView().creditCoinGroup,r,n,e.spinResult.mechanismResult.hitResult.totalWin);this._allProxy._coinViewObjectManagerProxy.play(s),s=null}}}}},t.prototype.handlePlaySCSyncEntityByAutomaticBazookaCoin=function(e){var t=this._allProxy._fishViewObjectManagerProxy.getObjectBySN(e.targetSN);if(t&&e.spinResult){var o=0,i=this._allProxy._playerViewEntityArrayProxy.getPlayerViewEntityByPlayerID(e.playerId);if(i&&i.bulletType!=GameEnum.FortTableEnum.Normal){e.spinRequest.targetId==GameEnum.FishTableEnum.S_200&&Utils.SCSyncTools.getAwardBulletCount(e)>0&&(o=Math.ceil(Utils.SCSyncTools.getAwardBulletCount(e)/5));for(var n=o-1;n>=0;n--){var a=new CoinViewObjectData(3,i.id,i.isSelf,t.localToGlobal(),i.view.getPortSkinView().anchorGroup,i.view.getPortSkinView().anchorGroup,n,o,Utils.SCSyncTools.getAwardBulletCount(e));
this._allProxy._coinViewObjectManagerProxy.play(a),a=null}}}},t.prototype.payoutToCoinCount=function(e){var t=0;return t=e>=15?8:e>3?4:e>2?3:2},t.prototype.payoutToCoinCountByRandomPay=function(e){return Math.ceil(e/5)},t.NAME="CoinViewObjectManagerProxyAdapterMediator",t}(BaseAdapterMediator);__reflect(CoinViewObjectManagerProxyAdapterMediator.prototype,"CoinViewObjectManagerProxyAdapterMediator");var ColliderData=function(){function e(){this.posX=0,this.posY=0,this.width=0,this.height=0,this.rotate=0,this.diagonal=0}return e}();__reflect(ColliderData.prototype,"ColliderData");var ColliderProxy=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._logScope="[ColliderProxy]",t._isLog=!1,t._timer=new egret.Timer(1e3/60),t._temp=new egret.Point,t.fireTime=0,t}return __extends(t,e),t.prototype.onFacadeAwakeComplete=function(){this.retrieveProxy()},t.prototype.onPreloadResourceComplete=function(){},t.prototype.onNonPreloadResourceComplete=function(e){e==GameEnum.LoadingCollectionTypeEnum.Battle&&this.start()},t.prototype.onSCRoomLoginComplete=function(){this.init()},t.prototype.onSCRoomLogoutComplete=function(){this.reset()},t.prototype.awake=function(){},t.prototype.start=function(){this._timer.addEventListener(egret.TimerEvent.TIMER,this.onUpdate,this)},t.prototype.init=function(){this._timer.start()},t.prototype.reset=function(){this._timer.stop()},t.prototype.onUpdate=function(e){var t=(this._allProxy._gameDataProxy,this._allProxy._playerViewEntityArrayProxy),o=this._allProxy._bulletViewEntityArrayProxy,i=this._allProxy._fishViewObjectManagerProxy,n=(this._temp,t.getPlayerViewEntityBySelf());if(n&&!this._allProxy._gameDataProxy.changingBackground){var a=o.getBulletViewEntityArray();for(var r in a){var s=a[r],l=s.bulletViewObject;if(this.checkBulletStateMove(l))if(l.getData().lockedFish){var c=l.getData().lockedFish;if(!this.checkFishStateMove(c))continue;if(this.checkHit(c,l)){this.hitHandle(c,l);continue}}else{var h=l.localToGlobal(),u=Math.max(l.width,l.height),p=i.getMap();for(var y in p){var E=p[y];if(this.checkFishStateMove(E)){var _=Math.max(E.width,E.height),g=Utils.MathTool.multiply(_,.5),m=Utils.Vector2Tool.getLengthByPoint(h,E.getLockPoint());if(g+u>m&&this.checkHit(E,l)){this.hitHandle(E,l);break}}}}}}},t.prototype.hitTestPolygon=function(e,t){for(var o,i,n,a,r=e,s=this.setVectors(r),l=t,c=this.setVectors(l),h=!0,u=0;u<r.length+l.length&&(n=u<s.length?s[u]:c[u-s.length],a=n.getNormalVector(),a.Normalize(),o=this.getProjectnumLine(r,a),i=this.getProjectnumLine(l,a),h=h&&NumberLine.getIsOverlapo(o,i),0!=h);u++);return h},t.prototype.setVectors=function(e){for(var t,o,i=new Array,n=0;n<e.length;n++)n<e.length-1?(t=e[n+1].x-e[n].x,o=e[n+1].y-e[n].y):(t=e[0].x-e[n].x,o=e[0].y-e[n].y),i.push(new Vector2D(t,o));return i},t.prototype.getProjectnumLine=function(e,t){for(var o,i=new NumberLine,n=0;n<e.length;n++)o=Vector2D.getDotProduct(Vector2D.toVecter2D(e[n]),t),0==n?(i.min=o,i.max=o):o>i.max?i.max=o:o<i.min&&(i.min=o);return i},t.prototype.displayObjectConverToColliderData=function(e){var t=new ColliderData;return t.posX=e.localToGlobal().x,t.posY=e.localToGlobal().y,t.width=e.measuredWidth,t.height=e.measuredHeight,t.rotate=e.parent.rotation+e.parent.parent.parent.parent.rotation,t.diagonal=Math.sqrt(t.width*t.width+t.height*t.height),t},t.prototype.getVertexs=function(e){var t,o=new Array,i=e.rotate*Math.PI/180;return t=Math.atan2(e.height,e.width)+i,o.push(this.getVertex(t,e)),t=Math.atan2(-e.height,e.width)+i,o.push(this.getVertex(t,e)),t=Math.atan2(-e.height,-e.width)+i,o.push(this.getVertex(t,e)),t=Math.atan2(e.height,-e.width)+i,o.push(this.getVertex(t,e)),o},t.prototype.getVertex=function(e,t){var o=t.posX+Math.cos(e)*t.diagonal/2,i=t.posY+Math.sin(e)*t.diagonal/2;return new egret.Point(o,i)},t.prototype.checkBulletStateMove=function(e){return e.getStatus()==GameEnum.BulletStateEnum.Move},t.prototype.checkFishStateMove=function(e){return e.getStatus()==GameEnum.FishStateEnum.Move},t.prototype.checkHit=function(e,t){if(null===e.getData())return!1;if(Utils.GameTool.isWeaponFish(e.getData().tableEntityID)&&Utils.BulletTool.IsMegaDrillBullet(t.getData().bulletID))return!1;if(e.getData().tableEntityID==GameEnum.FishTableEnum.S_201&&Utils.BulletTool.IsSpecialBullet(t.getData().bulletID))return!1;var o=!1,i=this.displayObjectConverToColliderData(e.getCollisionDisplayObject()),n=this.displayObjectConverToColliderData(t.getCollisionDisplayObject());return this.hitTestPolygon(this.getVertexs(i),this.getVertexs(n))&&(o=!0),o},t.prototype.hitHandle=function(e,t){var o=this._allProxy._playerViewEntityArrayProxy,i=o.getPlayerViewEntityByPlayerID(t.getData().iPlayerID);if(Utils.BulletTool.IsMegaDrillBullet(t.getData().bulletID)){var n=(new Date).getTime();if(n-i.drillBulletHitTime<100)return;i.drillBulletHitTime=n,t.getData().self&&i.bulletUsedCountBySpecial<i.bulletUpperLimitCountBySpecial&&i.bulletUsedCountBySpecial++}if(t.setStatus(GameEnum.BulletStateEnum.Hit),t.getData().self){e.setStatus(GameEnum.FishStateEnum.Hit);var a=this.createCSHitEntity(e,t);this.sendNotification(GeneratorProtocolCommand.NAME,[ProtocolType.csHit,a])}else{var r=this.createSCSyncEntity(e,t);this._allProxy._bulletViewEntityArrayProxy.parseBulletHitFish(r)}},t.prototype.createCSHitEntity=function(e,t){var o=this._allProxy._playerViewEntityArrayProxy,i=o.getPlayerViewEntityByPlayerID(t.getData().iPlayerID),n=new ProtocolEntity.CSHitEntity,a=t.getData().bulletID,r=t.getData().iPlayerID;return Utils.BulletTool.IsSpecialBullet(a)&&Utils.BulletTool.IsMegaDrillBullet(a)?n.iBulletID=Number(this._allProxy._gameDataProxy.seatID+Utils.GameTool.addZero(t.bulletViewEntity.bulletType,2)+Utils.GameTool.addZero(i.bulletUpperLimitCountBySpecial-(i.bulletUsedCountBySpecial-1),3)):n.iBulletID=a,n.iPlayerID=r,n.setBulletInfo(t.bulletViewEntity.bulletType,t.bulletViewEntity.bet,void 0),n.iTargetID=e.getData().tableEntityID,n.iTargetSN=e.getData().sn,n.iBulletType=t.bulletViewEntity.bulletType,n.iBet=t.bulletViewEntity.bet,n},t.prototype.createSCSyncEntity=function(e,t){var o=new ProtocolEntity.SCSyncEntity;return o.bulletId=t.getData().bulletID,o},t.NAME="ColliderProxy",t}(BaseProxy);__reflect(ColliderProxy.prototype,"ColliderProxy");var ControlPanelViewMediator=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._logScope="[ControlPanelViewMediator]",t._isLog=!1,t._skillFishEnable=!1,t.createSoundID=1401,t.createSoundVolume=1,t.createEffectID=1,t.createScoreID=1,t.createMedalsID=1,t.createCoinID=1,t.createFortID=5,t.createFCID=1e4,t.createFishID=200,t.createSpecialEffectID=1,t.createBetID=1,t._testFishTableEnable=!1,t._testFishTableEntityArrayIndex=0,t._testFCTableEnable=!1,t._testFCTableEntityArrayIndex=0,t._testBetTableEnable=!1,t._testBetTableEntityArrayIndex=0,t._lockFPSSpeedOffsetEnable=!1,t._fpsSpeedOffset=1,t._playCreditName="PlayCredit",t}return __extends(t,e),t.prototype.listNotificationInterests=function(){return GameSettingProxy.debug?[GameEvent.ApplicationFacadeEvent.AWAKE_COMPLETE,GameEvent.ResourceProxyEvent.LOAD_COMPLETE_NON_PRELOAD_GROUP,GameEvent.DebuggerEvent.SHOW_CONTROLPANEL_VIEW,GameEvent.DebuggerEvent.HIDE_CONTROLPANEL_VIEW,GameEvent.DebuggerEvent.SET_ITEM_CONTROLPANEL_VIEW,GameEvent.ProtocolProxyEvent.MODIFY_COMPLETE_SC_SYNC_VALUE]:[]},t.prototype.handleNotification=function(e){var t=e.getBody();switch(e.getName()){case GameEvent.ApplicationFacadeEvent.AWAKE_COMPLETE:this.facadeAwakeComplete();break;case GameEvent.ResourceProxyEvent.LOAD_COMPLETE_NON_PRELOAD_GROUP:t==GameEnum.LoadingCollectionTypeEnum.Lobby&&(this.resourceComplete(),this.init());break;case GameEvent.DebuggerEvent.SHOW_CONTROLPANEL_VIEW:this._allMediator._debugSkinViewMediator.selectedIndexTabBar(GameEnum.DebuggerViewTypeEnum.ControlPanel),this.enable();break;case GameEvent.DebuggerEvent.HIDE_CONTROLPANEL_VIEW:this.disable();break;case GameEvent.DebuggerEvent.SET_ITEM_CONTROLPANEL_VIEW:var o=e.getBody();this._view.setItem(o[0],o[1],o[2],o[3],o[4]);break;case GameEvent.ProtocolProxyEvent.MODIFY_COMPLETE_SC_SYNC_VALUE:this.parserSCSyncEntity(t);break;case GameEvent.ProtocolProxyEvent.MODIFY_COMPLETE_CS_ROOM_LOGOUT_VALUE:this._skillFishEnable=!1}},t.prototype.nextAwake=function(){this._view=new DebugListSkinView,this.getViewComponent().addChild(this._view),this._view.name=t.NAME,this._view.visible=!1},t.prototype.nextStart=function(){var e=this;this._view.setItem(t.NAME,void 0,void 0),this._view.touchTapCallback=function(t){return e.onTouchTapHandle(t)},this._view.start()},t.prototype.nextInit=function(){var e=this;this._view.init(),this._keyMap=new Array,this._keyMap[GameEnum.ControlPanelTypeEnum.PlaySound]=function(){return e.sendNotification(GameEvent.DebuggerEvent.SET_ITEM_CONTROLPANEL_VIEW,[GameEnum.ControlPanelTypeEnum[GameEnum.ControlPanelTypeEnum.PlaySound],"number",null,!0,e.createSoundID])},this._keyMap[GameEnum.ControlPanelTypeEnum.StopAllSound]=function(){return e.sendNotification(GameEvent.DebuggerEvent.SET_ITEM_CONTROLPANEL_VIEW,[GameEnum.ControlPanelTypeEnum[GameEnum.ControlPanelTypeEnum.StopAllSound]])},this._keyMap[GameEnum.ControlPanelTypeEnum.PlayEffect]=function(){return e.sendNotification(GameEvent.DebuggerEvent.SET_ITEM_CONTROLPANEL_VIEW,[GameEnum.ControlPanelTypeEnum[GameEnum.ControlPanelTypeEnum.PlayEffect],"number",null,!0,e.createEffectID])},this._keyMap[GameEnum.ControlPanelTypeEnum.StopAllEffect]=function(){return e.sendNotification(GameEvent.DebuggerEvent.SET_ITEM_CONTROLPANEL_VIEW,[GameEnum.ControlPanelTypeEnum[GameEnum.ControlPanelTypeEnum.StopAllEffect]])},this._keyMap[GameEnum.ControlPanelTypeEnum.PlayScore]=function(){return e.sendNotification(GameEvent.DebuggerEvent.SET_ITEM_CONTROLPANEL_VIEW,[GameEnum.ControlPanelTypeEnum[GameEnum.ControlPanelTypeEnum.PlayScore],"number",null,!0,e.createScoreID])},this._keyMap[GameEnum.ControlPanelTypeEnum.StopAllScore]=function(){return e.sendNotification(GameEvent.DebuggerEvent.SET_ITEM_CONTROLPANEL_VIEW,[GameEnum.ControlPanelTypeEnum[GameEnum.ControlPanelTypeEnum.StopAllScore]])},this._keyMap[GameEnum.ControlPanelTypeEnum.PlayMedals]=function(){return e.sendNotification(GameEvent.DebuggerEvent.SET_ITEM_CONTROLPANEL_VIEW,[GameEnum.ControlPanelTypeEnum[GameEnum.ControlPanelTypeEnum.PlayMedals],"number",null,!0,e.createMedalsID])},this._keyMap[GameEnum.ControlPanelTypeEnum.StopAllMedals]=function(){return e.sendNotification(GameEvent.DebuggerEvent.SET_ITEM_CONTROLPANEL_VIEW,[GameEnum.ControlPanelTypeEnum[GameEnum.ControlPanelTypeEnum.StopAllMedals]])},this._keyMap[GameEnum.ControlPanelTypeEnum.PlayCoin]=function(){return e.sendNotification(GameEvent.DebuggerEvent.SET_ITEM_CONTROLPANEL_VIEW,[GameEnum.ControlPanelTypeEnum[GameEnum.ControlPanelTypeEnum.PlayCoin],"number",null,!0,e.createCoinID])},this._keyMap[GameEnum.ControlPanelTypeEnum.StopAllCoin]=function(){return e.sendNotification(GameEvent.DebuggerEvent.SET_ITEM_CONTROLPANEL_VIEW,[GameEnum.ControlPanelTypeEnum[GameEnum.ControlPanelTypeEnum.StopAllCoin]])},this._keyMap[GameEnum.ControlPanelTypeEnum.PlayFort]=function(){return e.sendNotification(GameEvent.DebuggerEvent.SET_ITEM_CONTROLPANEL_VIEW,[GameEnum.ControlPanelTypeEnum[GameEnum.ControlPanelTypeEnum.PlayFort],"number",null,!0,e.createFortID])},this._keyMap[GameEnum.ControlPanelTypeEnum.PlayFC]=function(){return e.sendNotification(GameEvent.DebuggerEvent.SET_ITEM_CONTROLPANEL_VIEW,[GameEnum.ControlPanelTypeEnum[GameEnum.ControlPanelTypeEnum.PlayFC],"number",null,!0,e.createFCID])},this._keyMap[GameEnum.ControlPanelTypeEnum.TestFCTable]=function(){return e.sendNotification(GameEvent.DebuggerEvent.SET_ITEM_CONTROLPANEL_VIEW,[GameEnum.ControlPanelTypeEnum[GameEnum.ControlPanelTypeEnum.TestFCTable]])},this._keyMap[GameEnum.ControlPanelTypeEnum.CreateFish]=function(){return e.sendNotification(GameEvent.DebuggerEvent.SET_ITEM_CONTROLPANEL_VIEW,[GameEnum.ControlPanelTypeEnum[GameEnum.ControlPanelTypeEnum.CreateFish],"number",null,!0,e.createFishID])},this._keyMap[GameEnum.ControlPanelTypeEnum.TestFishTable]=function(){return e.sendNotification(GameEvent.DebuggerEvent.SET_ITEM_CONTROLPANEL_VIEW,[GameEnum.ControlPanelTypeEnum[GameEnum.ControlPanelTypeEnum.TestFishTable]])},this._keyMap[GameEnum.ControlPanelTypeEnum.SpecialEffect]=function(){return e.sendNotification(GameEvent.DebuggerEvent.SET_ITEM_CONTROLPANEL_VIEW,[GameEnum.ControlPanelTypeEnum[GameEnum.ControlPanelTypeEnum.SpecialEffect],"number",null,!0,e.createSpecialEffectID])},this._keyMap[GameEnum.ControlPanelTypeEnum.PrintBet]=function(){return e.sendNotification(GameEvent.DebuggerEvent.SET_ITEM_CONTROLPANEL_VIEW,[GameEnum.ControlPanelTypeEnum[GameEnum.ControlPanelTypeEnum.PrintBet],"number",null,!0,e.createBetID])},this._keyMap[GameEnum.ControlPanelTypeEnum.TestBetTable]=function(){return e.sendNotification(GameEvent.DebuggerEvent.SET_ITEM_CONTROLPANEL_VIEW,[GameEnum.ControlPanelTypeEnum[GameEnum.ControlPanelTypeEnum.TestBetTable]])},this._keyMap[GameEnum.ControlPanelTypeEnum.LockFPSSpeedOffset]=function(){return e.sendNotification(GameEvent.DebuggerEvent.SET_ITEM_CONTROLPANEL_VIEW,[GameEnum.ControlPanelTypeEnum[GameEnum.ControlPanelTypeEnum.LockFPSSpeedOffset],"number",null,!0,e._fpsSpeedOffset])},this._keyMap[GameEnum.ControlPanelTypeEnum.PlayCredit]=function(){return e.sendNotification(GameEvent.DebuggerEvent.SET_ITEM_CONTROLPANEL_VIEW,[GameEnum.ControlPanelTypeEnum[GameEnum.ControlPanelTypeEnum.PlayCredit],"number",null,!0,"0,1000"])};for(var t in this._keyMap)this._keyMap[t]()},t.prototype.nextReset=function(){this._view.reset()},t.prototype.nextEnable=function(){this._view.enable()},t.prototype.nextDisable=function(){this._view.disable()},t.prototype.nextRefresh=function(){this._view.refresh()},t.prototype.onTouchTapHandle=function(e){this.parserTouchItem(e)},t.prototype.parserTouchItem=function(e){var t=GameEnum.ControlPanelTypeEnum[e.getKeyText()],o=e.getTextInputText();switch(t){case GameEnum.ControlPanelTypeEnum.PlaySound:var i=o.split(","),n=this.checkNumber(i[0]),a=0;""!=i[1]&&(a=this.checkNumber(i[1])),this.createSound(n,a),this.createSoundID=n,this.createSoundVolume=a;break;case GameEnum.ControlPanelTypeEnum.StopAllSound:SoundObjectManagerProxy.getInstance().stopAll();break;case GameEnum.ControlPanelTypeEnum.PlayEffect:var n=this.checkNumber(o);this.createEffect(n),this.createEffectID=n;break;case GameEnum.ControlPanelTypeEnum.StopAllEffect:EffectViewObjectManagerProxy.getInstance().stopAll();break;case GameEnum.ControlPanelTypeEnum.PlayScore:var n=this.checkNumber(o);this.createScore(n),this.createScoreID=n;break;case GameEnum.ControlPanelTypeEnum.StopAllScore:this._allProxy._scoreViewObjectManagerProxy.stopAll();break;case GameEnum.ControlPanelTypeEnum.PlayMedals:var n=this.checkNumber(o);this.createMedals(n),this.createMedalsID=n;break;case GameEnum.ControlPanelTypeEnum.StopAllMedals:this._allProxy._medalsViewObjectManagerProxy.stopAll();break;case GameEnum.ControlPanelTypeEnum.PlayCoin:var n=this.checkNumber(o);this.createCoin(n),this.createCoinID=n;break;case GameEnum.ControlPanelTypeEnum.StopAllCoin:this._allProxy._coinViewObjectManagerProxy.stopAll();break;case GameEnum.ControlPanelTypeEnum.PlayFort:var n=this.checkNumber(o);this.createFort(n),this.createFortID=n;break;case GameEnum.ControlPanelTypeEnum.PlayFC:var n=this.checkNumber(o);this.createFC(n),this.createFCID=n;break;case GameEnum.ControlPanelTypeEnum.TestFCTable:this._testFCTableEnable=!this._testFCTableEnable,this._testFCTableEnable?this.enableTestFCTable(0):this.disableTestFCTable();break;case GameEnum.ControlPanelTypeEnum.CreateFish:var n=this.checkNumber(o);this.createFish(n),this.createFishID=n,this._allMediator._goldfingerViewMediator.autoCreateFishID=this.createFishID;break;case GameEnum.ControlPanelTypeEnum.TestFishTable:this._testFishTableEnable=!this._testFishTableEnable,this._testFishTableEnable?this.enableTestFishTable(0):this.disableTestFishTable();break;case GameEnum.ControlPanelTypeEnum.SpecialEffect:var n=this.checkNumber(o);this.createSpecialEffect(n),this.createSpecialEffectID=n;break;case GameEnum.ControlPanelTypeEnum.PrintBet:var n=this.checkNumber(o);this.createBet(n),this.createBetID=n;break;case GameEnum.ControlPanelTypeEnum.TestBetTable:this._testBetTableEnable=!this._testBetTableEnable,this._testBetTableEnable?this.enableTestBetTable(0):this.disableTestBetTable();break;case GameEnum.ControlPanelTypeEnum.LockFPSSpeedOffset:var r=this.checkNumber(o);this._lockFPSSpeedOffsetEnable=!this._lockFPSSpeedOffsetEnable,this._lockFPSSpeedOffsetEnable?this.enableLockFPSSpeedOffset(r):this.disableLockFPSSpeedOffset();break;case GameEnum.ControlPanelTypeEnum.PlayCredit:this.playCredit(o)}},t.prototype.checkNumber=function(e){var t=Number(e);return 0/0===t&&Logger.error("txt === NaN"),t},t.prototype.checkBoolean=function(e){switch(e.toLowerCase().trim()){case"true":return!0;case"false":return!1;default:return Logger.error("txt != true or false"),!1}},t.prototype.onObjectEventComplete=function(e){Logger.log("onObjectEventComplete, NAME:"+e.target.getTableEntityID(),this)},t.prototype.getEffectViewObjectData=function(e){var t=new egret.DisplayObject;t.x=GameSettingProxy.screenWidth/2,t.y=GameSettingProxy.screenHeight/2;var o=this._allMediator._battleViewMediator.getSkinView(),i=o.currectBGImage,n=(this._allProxy._gameDataProxy.playerID,new EffectViewObjectData(e,!0,0,t,t,i,i));return n},t.prototype.getScoreViewObjectData=function(e){var t=new egret.DisplayObject;t.x=GameSettingProxy.screenWidth/2,t.y=GameSettingProxy.screenHeight/2;var o=this._allProxy._gameDataProxy.playerID,i=this._allProxy._protocolProxy.scRoomLogin.iDenom,n=new ScoreViewObjectData(e,o,!0,t,15,i,15,15);return n},t.prototype.getMedalsViewObjectData=function(e){var t=new egret.DisplayObject;t.x=GameSettingProxy.screenWidth/2,t.y=GameSettingProxy.screenHeight/2;var o=this._allProxy._playerViewEntityArrayProxy.getPlayerViewEntityBySelf().view.centerPointGroup,i=this._allProxy._gameDataProxy.playerID,n=this._allProxy._protocolProxy.scRoomLogin.iDenom,a=new MedalsViewObjectData(e,i,!0,o,100,n,15,30,Utils.GameTool.isReverseByLabelAndBulletRotation(this._allProxy._playerViewEntityArrayProxy.getPlayerViewEntityBySelf().seat,GameDataProxy.getInstance().seatID));return a},t.prototype.getCoinViewObjectData=function(e,t,o){var i=new egret.Point;i.x=GameSettingProxy.screenWidth/2,i.y=GameSettingProxy.screenHeight/2;var n=this._allProxy._playerViewEntityArrayProxy.getPlayerViewEntityBySelf().view.centerPointGroup,a=this._allProxy._playerViewEntityArrayProxy.getPlayerViewEntityBySelf().view.getPortSkinView().creditCoinGroup,r=this._allProxy._gameDataProxy.playerID,s=new CoinViewObjectData(e,r,!0,i,n,a,t,o,100);return s},t.prototype.createSound=function(e,t){TableEntityProxy.getInstance().getSoundTableEntity(this.createSoundID).volume=t,SoundObjectManagerProxy.getInstance().play(e)},t.prototype.createEffect=function(e){var t=this.getEffectViewObjectData(e);EffectViewObjectManagerProxy.getInstance().play(t)},t.prototype.createScore=function(e){var t=this.getScoreViewObjectData(e);this._allProxy._scoreViewObjectManagerProxy.play(t)},t.prototype.createMedals=function(e){var t=this.getMedalsViewObjectData(e);this._allProxy._medalsViewObjectManagerProxy.play(t)},t.prototype.createCoin=function(e){var t=8;4==e&&(t=1);for(var o=t-1;o>=0;o--){var i=this.getCoinViewObjectData(e,o,t);this._allProxy._coinViewObjectManagerProxy.play(i)}},t.prototype.createFort=function(e){var t=this._allProxy._playerViewEntityArrayProxy.getPlayerViewEntityBySelf().view;t.setFort(e,10,!0)},t.prototype.createFC=function(e){this._allProxy._flowControlProxy.playByUnitTest(e)},t.prototype.createFish=function(e){var t=this._allProxy._gameDataProxy.getFishPointPath(13),o=Utils.MathTool.randomRange(1e4,99999),i="fish:"+e,n=new FishViewObjectData(e,t,o,0,0,i);return this._allProxy._fishViewObjectManagerProxy.play(n),o},t.prototype.createSpecialEffect=function(e){this._allProxy._specialEffectViewObjectManagerProxy.play(e)},t.prototype.createBet=function(e){Logger.log("[TestBetTable] createBet");var t=TableEntityProxy.getInstance().getBetTableEntity(e),o=t.denom,i=Utils.GameTool.getBetArray(t.minBet,t.maxBet),n=Utils.GameTool.getBetLevelArray(PlayerViewEntity.betLevelDivide,i);Logger.log("[TestBetTable] betArray:"+i+", betLevelArray:"+n+", denom:"+o);for(var a=0;a<i.length;a++){var r=Utils.TranslateTool.bet2CashTenDolla(i[a],o),s=Utils.GameTool.getBarrelLevel(i[a],i[0],i[i.length-1],PlayerViewEntity.betLevelDivide);Logger.log("[TestBetTable] bet:"+r+", level:"+s)}},t.prototype.hitFish=function(e,t){this._testFishTableID=e,this._skillFishSN=t;for(var o=this._allProxy._playerViewEntityArrayProxy.getPlayerViewEntityBySelf(),i=o.csFireArray.length,n=0;n<10-length;n++)this._allMediator._goldfingerViewMediator.parserKeyDown(KeyEnum.E);i=o.csFireArray.length;for(var n=0;i>n;n++){var a=new ProtocolEntity.CSHitEntity,r=o.csFireArray[n];a.iBulletID=r.iBulletID,a.iBulletType=r.iBulletType,a.iPlayerID=r.iPlayerID,a.iTargetID=e,a.iTargetSN=t,a.iBet=r.iBet,a.setBulletInfo(r.iBulletType,r.iBet,1),this.sendNotification(GeneratorProtocolCommand.NAME,[ProtocolType.csHit,a])}},t.prototype.parserSCSyncEntity=function(e){this.handleSkillFish(e)},t.prototype.handleSkillFish=function(e){if(this._skillFishEnable){if(this._testFishTableID!=e.spinRequest.targetId||this._skillFishSN!=e.targetSN)return;if(!e.spinResult)return;if(e.spinResult.mechanismResult.hitResult.totalWin>0)return void(this._skillFishEnable=!1);var t=this._allProxy._playerViewEntityArrayProxy.getPlayerViewEntityBySelf();if(0==t.csFireArray.length){for(var o=0;10>o;o++)this._allMediator._goldfingerViewMediator.parserKeyDown(KeyEnum.E);for(var o=0;10>o;o++){var i=new ProtocolEntity.CSHitEntity,n=t.csFireArray[o];i.iBulletID=n.iBulletID,i.iBulletType=n.iBulletType,i.iPlayerID=n.iPlayerID,i.iTargetID=this._testFishTableID,i.iTargetSN=this._skillFishSN,i.iBet=n.iBet,i.setBulletInfo(n.iBulletType,n.iBet,1),this.sendNotification(GeneratorProtocolCommand.NAME,[ProtocolType.csHit,i])}}}},t.prototype.getFishTableEntityByIndex=function(e){return TableEntityProxy.getInstance().fishTableEntityArray[e]},t.prototype.getFCTableEntityByIndex=function(e){var t,o=this._allProxy._protocolProxy.scRoomLogin.iRoomType,i=TableEntityProxy.getInstance();switch(o){case GameEnum.ZoneTypeEnum.Low:t=i.lowFCTableEntityArray[e];break;case GameEnum.ZoneTypeEnum.Middle:t=i.middleFCTableEntityArray[e];break;case GameEnum.ZoneTypeEnum.High:t=i.highFCTableEntityArray[e]}return t},t.prototype.getBetTableEntityByIndex=function(e){return TableEntityProxy.getInstance().betTableEntityArray[e]},t.prototype.enableTestFishTable=function(e){Logger.log("[TestFishTable] enable"),this._testFishTableEnable=!0,this._testFishTableEntityArrayIndex=e,this._testFishTableTimer||(this._testFishTableTimer=new egret.Timer(1e3,-1),this._testFishTableTimer.addEventListener(egret.TimerEvent.TIMER,this.testFishTableTimerCallBack,this)),this._testFishTableTimer.start(),this.sendNotification(GameEvent.ControlPanelViewMediatorEvent.ENABLE_COMPLETE_TEST_FISH_TABLE)},t.prototype.disableTestFishTable=function(){Logger.log("[TestFishTable] disable"),this._testFishTableEnable=!1,this._testFishTableTimer&&this._testFishTableTimer.stop(),this.sendNotification(GameEvent.ControlPanelViewMediatorEvent.DISABLE_COMPLETE_TEST_FISH_TABLE)},t.prototype.testFishTableTimerCallBack=function(){var e=this.getFishTableEntityByIndex(this._testFishTableEntityArrayIndex);e?(Logger.log("[TestFishTable] createFish:"+e.id),this.createFish(e.id),this._testFishTableEntityArrayIndex++):this.disableTestFishTable()},t.prototype.enableTestFCTable=function(e){Logger.log("[TestFCTable] enable"),this._testFCTableEnable=!0,this._testFCTableEntityArrayIndex=e,this._testFCTableTimer||(this._testFCTableTimer=new egret.Timer(1e3,0),this._testFCTableTimer.addEventListener(egret.TimerEvent.TIMER,this.testFCTableTimerCallBack,this)),this._testFCTableTimer.start(),this.sendNotification(GameEvent.ControlPanelViewMediatorEvent.ENABLE_COMPLETE_TEST_FC_TABLE)},t.prototype.disableTestFCTable=function(){Logger.log("[TestFCTable] disable"),this._testFCTableEnable=!1,this._testFCTableTimer&&this._testFCTableTimer.stop(),this.sendNotification(GameEvent.ControlPanelViewMediatorEvent.DISABLE_COMPLETE_TEST_FC_TABLE)},t.prototype.testFCTableTimerCallBack=function(){var e=this.getFCTableEntityByIndex(this._testFCTableEntityArrayIndex);e?(Logger.log("[TestFCTable] fcTable:"+e.id),this.createFC(e.id),this._testFCTableEntityArrayIndex++):this.disableTestFCTable()},t.prototype.enableTestBetTable=function(e){Logger.log("[TestBetTable] enable"),this._testBetTableEnable=!0,this._testBetTableEntityArrayIndex=e,this._testBetTableTimer||(this._testBetTableTimer=new egret.Timer(100,-1),this._testBetTableTimer.addEventListener(egret.TimerEvent.TIMER,this.testBetTableTimerCallBack,this)),this._testBetTableTimer.start()},t.prototype.disableTestBetTable=function(){Logger.log("[TestBetTable] disable"),this._testBetTableEnable=!1,this._testBetTableTimer&&this._testBetTableTimer.stop()},t.prototype.testBetTableTimerCallBack=function(){var e=this.getBetTableEntityByIndex(this._testBetTableEntityArrayIndex);e?(Logger.log("[TestBetTable] createBet:"+e.id),this.createBet(e.id),this._testBetTableEntityArrayIndex++):this.disableTestBetTable()},t.prototype.enableLockFPSSpeedOffset=function(e){Logger.log("[LockFPSSpeedOffset] enable"),this._lockFPSSpeedOffsetEnable=!0,this.sendNotification(GameEvent.ControlPanelViewMediatorEvent.ENABLE_COMPLETE_LOCK_FPS_SPEED_OFFSET,e)},t.prototype.disableLockFPSSpeedOffset=function(){Logger.log("[LockFPSSpeedOffset] disable"),this._lockFPSSpeedOffsetEnable=!1,this.sendNotification(GameEvent.ControlPanelViewMediatorEvent.DISABLE_COMPLETE_LOCK_FPS_SPEED_OFFSET)},t.prototype.playCredit=function(e){var t,o=e.split(",");if(2==o.length){this._seatID=this.checkNumber(o[0]),this._creditAmount=this.checkNumber(o[1]),t=this._seatID+","+this._creditAmount,this.sendNotification(GameEvent.DebuggerEvent.SET_ITEM_CONTROLPANEL_VIEW,[GameEnum.ControlPanelTypeEnum[GameEnum.ControlPanelTypeEnum.PlayCredit],"number",null,!0,t]);var i=this._allProxy._playerViewEntityArrayProxy.getPlayerViewEntityBySeat(this._seatID);i&&this._allProxy._playerViewEntityArrayProxy.updateCredit(i.id,this._creditAmount)}},t.NAME="ControlPanelViewMediator",t}(BaseViewMediator);__reflect(ControlPanelViewMediator.prototype,"ControlPanelViewMediator");var CurrencyName=function(){function e(){}return e.PP="PP",e.EU="EU",e}();__reflect(CurrencyName.prototype,"CurrencyName");var DebugIRSkinView=function(e){function t(){var t=e.call(this)||this;return t.touchChildren=!0,t}return __extends(t,e),t.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this)},t.prototype.dataChanged=function(){this.key.text=this.data.keyText,this.value.text=this.data.valueText,this.textInput.visible=this.data.textInputVisable,this.textInput.text=this.data.textInputText},t.prototype.getKeyText=function(){return this.key.text},t.prototype.getTextInputText=function(){return this.textInput.text},t.prototype.setTextInputText=function(e){return this.textInput.text=e},t.PROPERTY_DATA="data",t.PROPERTY_KEY_TEXT="keyText",t.PROPERTY_VALUE_TEXT="valueText",t.PROPERTY_TEXT_INPUT_VISABLE="textInputVisable",t.PROPERTY_TEXT_INPUT_TEXT="textInputText",t}(eui.ItemRenderer);__reflect(DebugIRSkinView.prototype,"DebugIRSkinView");var DebugListSkinView=function(e){function t(){var t=e.call(this)||this;return t._logScope="[DebugListSkinView]",t._isLog=!1,t.name="DebugListSkinView",t.currentState=Utils.ResourceTool.language,t}return __extends(t,e),t.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),this.awake()},t.prototype.awake=function(){Logger.log("awake",this),this._sourceMap={},this._collection=new eui.ArrayCollection},t.prototype.start=function(){Logger.log("start",this)},t.prototype.init=function(){Logger.log("init",this),this.list.dataProvider=this._collection,this.list.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTouchTap,this),this.list.addEventListener(eui.ItemTapEvent.ITEM_TAP,this.onItemTap,this)},t.prototype.reset=function(){Logger.log("reset",this)},t.prototype.enable=function(e){Logger.log("enable",this),this.visible=!0,this.scroller.verticalScrollBar.autoVisibility=!1,this.scroller.horizontalScrollBar.autoVisibility=!1,this.scroller.viewport.scrollV=0,this.scroller.viewport.scrollH=0},t.prototype.disable=function(){Logger.log("disable",this),this.visible=!1},t.prototype.refresh=function(){Logger.log("refresh",this),this._collection.refresh()},t.prototype.setItem=function(e,t,o,i,n){if(void 0===i&&(i=!1),void 0===n&&(n=""),e in this._sourceMap){Logger.log("itemUpdated key:"+e+", value:"+t+", textInput:"+i,this);var a=this._sourceMap[e];a.valueText=t,a.dataText=o,a.textInputVisable=i,a.textInputText=n,this._collection.itemUpdated(a)}else{Logger.log("addItem key:"+e+", value:"+t+", textInput:"+i,this);var a={keyText:e,valueText:t,data:o,textInputVisable:i,textInputText:n};this._collection.addItem(a),this._sourceMap[e]=a}},t.prototype.onItemTap=function(e){void 0!==this.itemTapCallback&&this.itemTapCallback(e)},t.prototype.onTouchTap=function(e){if(void 0!==this.touchTapCallback&&egret.is(e.target,"eui.Label")){var t=this.getItemTapByPropertyObj(e.target);t&&this.touchTapCallback(t)}},t.prototype.getItemTapByPropertyObj=function(e){for(var t=0;t<this.list.numChildren;t++){var o=this.list.getChildAt(t);for(var i in o.$children)if(o.$children[i]==e)return o}return null},t.prototype.removeAllItem=function(){this._collection.removeAll(),this._collection.refresh(),this._sourceMap=null,this._sourceMap={}},t}(eui.Component);__reflect(DebugListSkinView.prototype,"DebugListSkinView",["IView"]);var DebugSkinView=function(e){function t(){var t=e.call(this)||this;return t._logScope="[DebugSkinView]",t._isLog=!1,t.name="DebugSkinView",t.currentState=Utils.ResourceTool.language,t}return __extends(t,e),t.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),this.awake()},t.prototype.awake=function(){Logger.log("awake",this)},t.prototype.start=function(e){Logger.log("start",this),this.tabBar.dataProvider=e,this.viewGroup.addChild(e),this.viewGroup.visible=!1},t.prototype.init=function(){Logger.log("init",this),GameSettingProxy.getInstance().demoMode?(this.toggleButton.label="DEMO GAME",this.toggleButton.touchEnabled=this.toggleButton.touchChildren=!1):this.toggleButton.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTouchTapHandle,this)},t.prototype.reset=function(){Logger.log("reset",this)},t.prototype.enable=function(e){Logger.log("enable",this),this.visible=!0},t.prototype.disable=function(){Logger.log("disable",this),this.visible=!1},t.prototype.refresh=function(){Logger.log("refresh",this)},t.prototype.onTouchTapHandle=function(e){this.tapCallback&&this.tapCallback(e)},t}(eui.Component);__reflect(DebugSkinView.prototype,"DebugSkinView",["IView"]);var DebugSkinViewMediator=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._logScope="[DebugSkinViewMediator]",t._isLog=!1,t}return __extends(t,e),t.prototype.listNotificationInterests=function(){return GameSettingProxy.debug||GameSettingProxy.getInstance().demoMode?[GameEvent.ApplicationFacadeEvent.AWAKE_COMPLETE,GameEvent.ResourceProxyEvent.LOAD_COMPLETE_NON_PRELOAD_GROUP,GameEvent.DebuggerEvent.ENABLE_DEBUGGER_VIEW_STACK,GameEvent.DebuggerEvent.DISABLE_DEBUGGER_VIEW_STACK,GameEvent.ProtocolProxyEvent.MODIFY_COMPLETE_SC_USER_INFO_VALUE]:[]},t.prototype.handleNotification=function(e){var t=e.getBody();switch(e.getName()){case GameEvent.ApplicationFacadeEvent.AWAKE_COMPLETE:this.facadeAwakeComplete();break;case GameEvent.ResourceProxyEvent.LOAD_COMPLETE_NON_PRELOAD_GROUP:t==GameEnum.LoadingCollectionTypeEnum.Lobby&&(this.resourceComplete(),this.init());break;case GameEvent.DebuggerEvent.ENABLE_DEBUGGER_VIEW_STACK:this.enable();break;case GameEvent.DebuggerEvent.DISABLE_DEBUGGER_VIEW_STACK:this.disable();break;case GameEvent.ProtocolProxyEvent.MODIFY_COMPLETE_SC_USER_INFO_VALUE:this.sendNotification(GameEvent.DebuggerEvent.ENABLE_DEBUGGER_VIEW_STACK),this.sendNotification(GameEvent.DebuggerEvent.ENABLE_GOLDFINGER_VIEW);
break;case GameEvent.DebuggerEvent.TAP_ITEM_LOGMONITOR_VIEW:}},t.prototype.nextAwake=function(){this._view=new DebugSkinView,this.getViewComponent().addChild(this._view),this._view.visible=!1,this._view.touchEnabled=!1,this._viewStack=new eui.ViewStack,this._view.addChild(this._viewStack),this.sendNotification(RegistDebuggerViewStackMediatorsCommand.NAME,this._viewStack)},t.prototype.nextStart=function(){var e=this;this._view.tapCallback=function(t){return e.tapCallbacknHandle(t)},this._view.start(this._viewStack)},t.prototype.nextInit=function(){this._view.init()},t.prototype.nextReset=function(){this._view.reset()},t.prototype.nextEnable=function(){this._view.visible=!0,this._view.enable()},t.prototype.nextDisable=function(){this._view.visible=!1,this._view.disable()},t.prototype.nextRefresh=function(){this._view.refresh()},t.prototype.selectedIndexTabBar=function(e){this._view.tabBar.selectedIndex=e,this._viewStack.selectedIndex=e},t.prototype.tapCallbacknHandle=function(e){this.refreshToggleButton()},t.prototype.toggleToggleButton=function(){this._view.toggleButton.selected=!this._view.toggleButton.selected,this.refreshToggleButton()},t.prototype.selecteToggleButton=function(e){this._view.toggleButton.selected=e,this.refreshToggleButton()},t.prototype.refreshToggleButton=function(){var e=this._view.toggleButton;e.selected?(e.label="hide",this._view.viewGroup.visible=!0):(e.label="show",this._view.viewGroup.visible=!1)},t.NAME="DebugSkinViewMediator",t}(BaseViewMediator);__reflect(DebugSkinViewMediator.prototype,"DebugSkinViewMediator");var EffectComponent=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._logScope="[EffectComponent]",t._isLog=!1,t._isMovieClipFXComplete=!0,t._isParticleFXComplete=!0,t._isShaderFXComplete=!0,t._isShakeFXComplete=!0,t}return __extends(t,e),t.prototype.startObject=function(e){Logger.log("startObject"+this.hashCode,this);var t=TableEntityProxy.getInstance();e.movieClipFXID>0&&(this._movieClipFXTableEntity=t.getMovieClipFXTableEntity(e.movieClipFXID),this._MovieClipFX=new MovieClipFX,this.fxStart(this._MovieClipFX,this._movieClipFXTableEntity)),e.particleFXID>0&&(this._particleFXTableEntity=t.getParticleFXTableEntity(e.particleFXID),this._ParticleFX=new ParticleFX,this.fxStart(this._ParticleFX,this._particleFXTableEntity)),e.shaderFXID>0&&(this._shaderFXTableEntity=t.getShaderFXTableEntity(e.shaderFXID),this._ShaderFX=new ShaderFX,this.fxStart(this._ShaderFX,this._shaderFXTableEntity)),e.shakeFXID>0&&(this._shakeFXTableEntity=t.getShakeFXTableEntity(e.shakeFXID),this._ShakeFX=new ShakeFX,this.fxStart(this._ShakeFX,this._shakeFXTableEntity))},t.prototype.initObject=function(e){if(Logger.log("initObject "+this.hashCode,this),this._MovieClipFX){var t=new MovieClipFXData;t.targetObject=e.movieClipFXTargetObject,t.loop=!1,t.waitTime=this._tableEntity.movieClipFXWaitTime,this._MovieClipFX.init(t)}if(this._ParticleFX){var t=new ParticleFXData;t.targetObject=e.particleFXTargetObject,t.waitTime=this._tableEntity.particleFXWaitTime,this._ParticleFX.init(t)}if(this._ShaderFX){var t=new ShaderFXData;t.targetObject=e.shaderFXTargetObject,t.waitTime=this._tableEntity.shaderFXWaitTime,this._ShaderFX.init(t)}if(this._ShakeFX){var t=new ShakeFXData;t.targetObject=e.shakeFXTargetObject,t.waitTime=this._tableEntity.shakeFXWaitTime,this._ShakeFX.init(t)}Utils.DisplayObjectTool.resetDisplayObject(this,!0)},t.prototype.resetObject=function(){Logger.log("resetObject "+this.hashCode,this),Utils.DisplayObjectTool.resetDisplayObject(this,!1)},t.prototype.playObject=function(){Logger.log("playObject "+this.hashCode,this),this._MovieClipFX&&(this._MovieClipFX.play(),this._isMovieClipFXComplete=!1),this._ParticleFX&&(this._ParticleFX.play(),this._isParticleFXComplete=!1),this._ShaderFX&&(this._ShaderFX.play(),this._isShaderFXComplete=!1),this._ShakeFX&&(this._ShakeFX.play(),this._isShakeFXComplete=!1)},t.prototype.stopObject=function(){Logger.log("stopObject "+this.hashCode,this),this._MovieClipFX&&this._MovieClipFX.stop(),this._ParticleFX&&this._ParticleFX.stop(),this._ShaderFX&&this._ShaderFX.stop(),this._ShakeFX&&this._ShakeFX.stop(),this.onComplete()},t.prototype.completeObject=function(){Logger.log("completeObject "+this.hashCode,this)},t.prototype.onFXComplete=function(e){var t;egret.is(e.target,MovieClipFX.NAME)?(t=MovieClipFX.NAME,this._isMovieClipFXComplete=!0):egret.is(e.target,ParticleFX.NAME)?(t=ParticleFX.NAME,this._isParticleFXComplete=!0):egret.is(e.target,ShaderFX.NAME)?(t=ShaderFX.NAME,this._isShaderFXComplete=!0):egret.is(e.target,ShakeFX.NAME)?(t=ShakeFX.NAME,this._isShakeFXComplete=!0):Logger.error("onEffectComplete "+e.target+" is not exist",this),Logger.log("onEffectComplete "+this.hashCode+" "+t,this),this._isMovieClipFXComplete&&this._isParticleFXComplete&&this._isShakeFXComplete&&this._isShaderFXComplete&&this.onComplete()},t.prototype.fxStart=function(e,t){e.addEventListener(ObjectEvent.COMPLETE,this.onFXComplete,this),this.addChild(e),e.start(t)},t.NAME="EffectComponent",t}(BaseComponent);__reflect(EffectComponent.prototype,"EffectComponent");var EffectViewObject=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._logScope="[EffectViewObject]",t._isLog=!1,t._component=new EffectComponent,t}return __extends(t,e),t.prototype.startObject=function(t){Logger.log("startObject "+this.hashCode,this),e.prototype.startObject.call(this,t)},t.prototype.initObject=function(t){Logger.log("initObject "+this.hashCode,this),this.name=this._tableEntity.enumName+"_"+String(this.hashCode),e.prototype.initObject.call(this,t)},t.prototype.resetObject=function(){Logger.log("resetObject "+this.hashCode,this),e.prototype.resetObject.call(this)},t.prototype.playObject=function(){Logger.log("playObject "+this.hashCode,this),102202==this._data.tableEntityID;var t=this._data.movieClipFXTargetObject.localToGlobal(0,0);return this.x=t.x,this.y=t.y,this.rotation=this._data.rotation,0==this._tableEntity.isShowByOther&&0==this._data.self?void this.onComplete():(this._tableEntity.isAlphaByOther&&0==this._data.self?this.alpha=.5:this.alpha=1,void e.prototype.playObject.call(this))},t.prototype.stopObject=function(){Logger.log("stopObject "+this.hashCode,this),e.prototype.stopObject.call(this)},t.prototype.completeObject=function(){Logger.log("completeObject "+this.hashCode,this),e.prototype.completeObject.call(this),this._proxy.onObjectCompleteHandle(this)},t.prototype.getProxy=function(){return this._proxy},t.prototype.getData=function(){return this._data},t.prototype.getTableEntity=function(){return this._tableEntity},t.NAME="EffectViewObject",t}(BaseCOPObject);__reflect(EffectViewObject.prototype,"EffectViewObject");var EffectViewObjectData=function(){function e(e,t,o,i,n,a,r){void 0===i&&(i=null),void 0===n&&(n=null),void 0===a&&(a=null),void 0===r&&(r=null),this.tableEntityID=e,this.self=t,this.rotation=o,this.movieClipFXTargetObject=i,this.particleFXTargetObject=n,this.shaderFXTargetObject=a,this.shakeFXTargetObject=r}return e}();__reflect(EffectViewObjectData.prototype,"EffectViewObjectData");var EffectViewObjectManagerProxy=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._logScope="[EffectViewObjectManagerProxy]",t._isLog=!1,t._objectMap={},t}return __extends(t,e),t.getInstance=function(){return null==this._instance&&(this._instance=ApplicationFacade.getInstance().retrieveProxy(t.NAME)),this._instance},t.prototype.onFacadeAwakeComplete=function(){this.facadeComplete()},t.prototype.onPreloadResourceComplete=function(){},t.prototype.onNonPreloadResourceComplete=function(e){e==GameEnum.LoadingCollectionTypeEnum.Battle&&this.resourceComplete()},t.prototype.onSCRoomLoginComplete=function(){this.init()},t.prototype.onSCRoomLogoutComplete=function(){this.reset()},t.prototype.nextAwake=function(){},t.prototype.nextStart=function(){var e=GameEvent.EffectViewObjectManagerProxyEvent.MODIFY_COMPLETE_GENERATOR_MAP,t=GameEvent.EffectViewObjectManagerProxyEvent.MODIFY_COMPLETE_OBJECT_MAP,o=TableEntityProxy.getInstance().effectTableEntityArray;this.startData(e,t,o);var i=ApplicationFacade.getInstance().retrieveMediator(BattleEffectArrayViewMediator.NAME);this._layer=i.getSkinView()},t.prototype.nextInit=function(){},t.prototype.nextReset=function(){},t.prototype.startObject=function(e){var t=e.tableEntityID,o=TableEntityProxy.getInstance().getEffectTableEntity(t),i=this._generatorMap[t],n=i.getObject(EffectViewObject);return this.addChild(n),0==n.isStartComplete()&&(n.opSetProtocol(i.getDistributor()),n.start(o,this)),n},t.prototype.initObject=function(e,t){e.init(t)},t.prototype.playObject=function(e){var t=e.getTableEntity(),o=(e.getData(),this._generatorMap[t.id]);t.isOnlyOne&&o.getDistributor().getUsedPoolCount()>1?e.stop():e.play()},t.prototype.stopObject=function(e){e.stop()},t.prototype.onObjectCompleteHandle=function(e){},t.prototype.getMap=function(){return this._objectMap},t.prototype.addChild=function(e){this._layer.addChild(e)},t.prototype.removeChild=function(e){this._layer.removeChild(e)},t.NAME="EffectViewObjectManagerProxy",t}(BaseObjectManagerProxy);__reflect(EffectViewObjectManagerProxy.prototype,"EffectViewObjectManagerProxy");var EventBannerSkinView=function(e){function t(){var t=e.call(this)||this;return t._logScope="[EventBannerSkinView]",t._isLog=!1,t.name="EventBannerSkinView",t.currentState=Utils.ResourceTool.language,t}return __extends(t,e),t.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),this.awake()},t.prototype.awake=function(){Logger.log("awake",this),this.exitButton.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onExitHandle,this);var e=new egret.Sprite;e.graphics.beginFill(0,.5),e.graphics.drawRect(0,0,GameSettingProxy.screenWidth,GameSettingProxy.screenHeight),e.graphics.endFill(),this.addChildAt(e,0)},t.prototype.start=function(){Logger.log("start",this)},t.prototype.init=function(){Logger.log("init",this)},t.prototype.reset=function(){Logger.log("reset",this)},t.prototype.enable=function(e){Logger.log("enable",this),this.visible=!0},t.prototype.disable=function(){Logger.log("disable",this),this.visible=!1},t.prototype.refresh=function(){Logger.log("refresh",this)},t.prototype.loadBannerImg=function(e){var t=new egret.ImageLoader;t.once(egret.Event.COMPLETE,this.imgLoadHandler,this),t.load(e[0])},t.prototype.imgLoadHandler=function(e){var t=e.currentTarget,o=t.data,i=new egret.Bitmap(o);i.x=.5*-i.width,i.y=.5*-i.height,this.imgGroup.addChild(i)},t.prototype.onExitHandle=function(e){Logger.log("onExitHandle",this),this.disable(),SoundObjectManagerProxy.getInstance().play(GameEnum.SoundTableEnum.SE_MenuPress_01),this.exitTapCallback&&(this.exitButton.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onExitHandle,this),this.exitTapCallback(e))},t}(eui.Component);__reflect(EventBannerSkinView.prototype,"EventBannerSkinView",["IView"]);var EventBannerViewMediator=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._logScope="[EventBannerViewMediator]",t._isLog=!1,t}return __extends(t,e),t.prototype.listNotificationInterests=function(){return[GameEvent.ApplicationFacadeEvent.AWAKE_COMPLETE,GameEvent.ResourceProxyEvent.LOAD_COMPLETE_NON_PRELOAD_GROUP,GameEvent.SceneEvent.LOAD_BATTLE_SCENE,GameEvent.SceneEvent.UNLOAD_BATTLE_SCENE,GameEvent.GameDataProxyEvent.ON_SET_EVENT_BANNER]},t.prototype.handleNotification=function(e){var t=e.getBody();switch(e.getName()){case GameEvent.ApplicationFacadeEvent.AWAKE_COMPLETE:this.facadeAwakeComplete();break;case GameEvent.ResourceProxyEvent.LOAD_COMPLETE_NON_PRELOAD_GROUP:t==GameEnum.LoadingCollectionTypeEnum.Battle&&this.resourceComplete();break;case GameEvent.SceneEvent.LOAD_BATTLE_SCENE:this.init(),this.enable();break;case GameEvent.SceneEvent.UNLOAD_BATTLE_SCENE:this.disable(),this.reset();break;case GameEvent.GameDataProxyEvent.ON_SET_EVENT_BANNER:this.loadBannerImg(t)}},t.prototype.nextAwake=function(){var e=this;this._view=new EventBannerSkinView,this._view.exitTapCallback=function(){return e.extiTapCallback()},this.getViewComponent().addChild(this._view)},t.prototype.nextStart=function(){this._view.start()},t.prototype.nextInit=function(){this._view.init()},t.prototype.nextReset=function(){this._view.reset()},t.prototype.nextEnable=function(){this._view.enable()},t.prototype.nextDisable=function(){this._view.disable()},t.prototype.nextRefresh=function(){this._view.refresh()},t.prototype.loadBannerImg=function(e){e.length>0&&this._view.loadBannerImg(e)},t.prototype.extiTapCallback=function(){this.getViewComponent().removeChild(this._view),ApplicationFacade.getInstance().removeMediator(t.NAME)},t.NAME="EventBannerViewMediator",t}(BaseViewMediator);__reflect(EventBannerViewMediator.prototype,"EventBannerViewMediator");var FakeFish=function(){function e(){this.done=!1,this.OneTrip=!1}return e}();__reflect(FakeFish.prototype,"FakeFish");var FakeTouchEvent=function(e){function t(t,o,i){return void 0===o&&(o=!1),void 0===i&&(i=!1),e.call(this,t,o,i)||this}return __extends(t,e),t.type=egret.TouchEvent.TOUCH_BEGIN,t}(egret.Event);__reflect(FakeTouchEvent.prototype,"FakeTouchEvent");var FishAnimation=function(e){function t(){var t=e.call(this)||this;return t.image=new eui.Image,t}return __extends(t,e),t.prototype.init=function(e){this.image.anchorOffsetX=.5*this.image.width,this.image.anchorOffsetY=.5*this.image.height,this.image.texture=e,this.addChild(this.image)},t.prototype.reverse=function(){0==Math.floor(2*Math.random())?this.direction=t.RtoL:this.direction=t.LtoR},t.LtoR="LtoR",t.RtoL="RtoL",t}(egret.Sprite);__reflect(FishAnimation.prototype,"FishAnimation");var FishComponent=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._logScope="[FishComponent]",t._isLog=!1,t}return __extends(t,e),t.prototype.startObject=function(e){Logger.log("startObject"+this.hashCode,this),("null"!=e.lowerJsonName_3||"null"!=e.lowerClipName_3)&&(this.lower3MC=new egret.MovieClip,this.lower3MC.anchorOffsetX=e.lowerOffsetX_3/e.lowerScale_3,this.lower3MC.anchorOffsetY=e.lowerOffsetY_3/e.lowerScale_3,this.addPort(e.lowerJsonName_3,e.lowerClipName_3,this.lower3MC)),("null"!=e.lowerJsonName_2||"null"!=e.lowerClipName_2)&&(this.lower2MC=new egret.MovieClip,this.lower2MC.anchorOffsetX=e.lowerOffsetX_2/e.lowerScale_2,this.lower2MC.anchorOffsetY=e.lowerOffsetY_2/e.lowerScale_2,this.addPort(e.lowerJsonName_2,e.lowerClipName_2,this.lower2MC)),("null"!=e.lowerJsonName_1||"null"!=e.lowerClipName_1)&&(this.lower1MC=new egret.MovieClip,this.lower1MC.anchorOffsetX=e.lowerOffsetX_1/e.lowerScale_1,this.lower1MC.anchorOffsetY=e.lowerOffsetY_1/e.lowerScale_1,this.addPort(e.lowerJsonName_1,e.lowerClipName_1,this.lower1MC)),this.fishMC=Utils.ResourceTool.getMovieClip(e.jsonName,e.clipName),this.fishMC.name=e.clipName,this.fishMC.anchorOffsetX=e.offsetX,this.fishMC.anchorOffsetY=e.offsetY,this.addChild(this.fishMC),("null"!=e.upperJsonName_3||"null"!=e.upperClipName_3)&&(this.upper3MC=new egret.MovieClip,this.upper3MC.anchorOffsetX=e.upperOffsetX_3/e.upperScale_3,this.upper3MC.anchorOffsetY=e.upperOffsetY_3/e.upperScale_3,this.addPort(e.upperJsonName_3,e.upperClipName_3,this.upper3MC)),("null"!=e.upperJsonName_2||"null"!=e.upperClipName_2)&&(this.upper2MC=new egret.MovieClip,this.upper2MC.anchorOffsetX=e.upperOffsetX_2/e.upperScale_2,this.upper2MC.anchorOffsetY=e.upperOffsetY_2/e.upperScale_2,this.addPort(e.upperJsonName_2,e.upperClipName_2,this.upper2MC)),("null"!=e.upperJsonName_1||"null"!=e.upperClipName_1)&&(this.upper1MC=new egret.MovieClip,this.upper1MC.anchorOffsetX=e.upperOffsetX_1/e.upperScale_1,this.upper1MC.anchorOffsetY=e.upperOffsetY_1/e.upperScale_1,this.addPort(e.upperJsonName_1,e.upperClipName_1,this.upper1MC))},t.prototype.initObject=function(){Logger.log("initObject "+this.hashCode,this),this.upper1MC&&Utils.DisplayObjectTool.resetDisplayObject(this.upper1MC,!0),this.upper2MC&&Utils.DisplayObjectTool.resetDisplayObject(this.upper2MC,!0),this.upper3MC&&Utils.DisplayObjectTool.resetDisplayObject(this.upper3MC,!0),this.fishMC&&Utils.DisplayObjectTool.resetDisplayObject(this.fishMC,!0),this.lower1MC&&Utils.DisplayObjectTool.resetDisplayObject(this.lower1MC,!0),this.lower2MC&&Utils.DisplayObjectTool.resetDisplayObject(this.lower2MC,!0),this.lower3MC&&Utils.DisplayObjectTool.resetDisplayObject(this.lower3MC,!0),Utils.DisplayObjectTool.resetDisplayObject(this,!0)},t.prototype.resetObject=function(){Logger.log("resetObject "+this.hashCode,this),this.upper1MC&&Utils.DisplayObjectTool.resetDisplayObject(this.upper1MC,!1),this.upper2MC&&Utils.DisplayObjectTool.resetDisplayObject(this.upper2MC,!1),this.upper3MC&&Utils.DisplayObjectTool.resetDisplayObject(this.upper3MC,!1),this.fishMC&&Utils.DisplayObjectTool.resetDisplayObject(this.fishMC,!1),this.lower1MC&&Utils.DisplayObjectTool.resetDisplayObject(this.lower1MC,!1),this.lower2MC&&Utils.DisplayObjectTool.resetDisplayObject(this.lower2MC,!1),this.lower3MC&&Utils.DisplayObjectTool.resetDisplayObject(this.lower3MC,!1),Utils.DisplayObjectTool.resetDisplayObject(this,!1)},t.prototype.playObject=function(){Logger.log("playObject "+this.hashCode,this),this.upper1MC&&this.upper1MC.gotoAndPlay(0,-1),this.upper2MC&&this.upper2MC.gotoAndPlay(0,-1),this.upper3MC&&this.upper3MC.gotoAndPlay(0,-1),this.lower1MC&&this.lower1MC.gotoAndPlay(0,-1),this.lower2MC&&this.lower2MC.gotoAndPlay(0,-1),this.lower3MC&&this.lower3MC.gotoAndPlay(0,-1)},t.prototype.stopObject=function(){Logger.log("stopObject "+this.hashCode,this),this.onComplete()},t.prototype.completeObject=function(){Logger.log("completeObject "+this.hashCode,this)},t.prototype.getFishUI=function(){return this.fishMC},t.prototype.addPort=function(e,t,o){Utils.ResourceTool.setMovieClipData(o,e,t),this.addChild(o)},t.NAME="FishComponent",t}(BaseComponent);__reflect(FishComponent.prototype,"FishComponent");var FishStateDie=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._logScope="[FishStateDie]",t._isLog=!1,t._status=GameEnum.FishStateEnum.Die,t._isAnimationComplete=!0,t._isEffectViewObjectComplete=!0,t}return __extends(t,e),t.prototype.enable=function(){Logger.log("enable "+this._object.hashCode,this);var e=this._object;e.getData(),e.getTableEntity(),this._isAnimationComplete=!1,this._isEffectViewObjectComplete=!1,this.playAnimation(),this.playEffect()},t.prototype.disable=function(){Logger.log("disable "+this._object.hashCode,this),this.stopAnimation(),this.stopEffect()},t.prototype.onComplete=function(){if(Logger.log("onComplete "+this._object.hashCode,this),this._isAnimationComplete&&this._isEffectViewObjectComplete){var e=this._object;e.setStatus(GameEnum.FishStateEnum.None)}},t.prototype.playAnimation=function(){Logger.log("playAnimation "+this._object.hashCode,this);var e=this._object,t=(e.getData(),e.getTableEntity()),o=e.getFishMC();o.visible=!0,o.gotoAndPlay(t.dieLabelName,1),o.$frameLabelStart==o.$frameLabelEnd&&null!=o.currentLabel||1==o.totalFrames?this.onAnimationComplete():(o.addEventListener(egret.MovieClipEvent.COMPLETE,this.onAnimationComplete,this),egret.Tween.removeTweens(o),egret.Tween.get(o).to({alpha:0},o.movieClipData.numFrames/o.movieClipData.frameRate*1e3))},t.prototype.stopAnimation=function(){Logger.log("stopAnimation "+this._object.hashCode,this);var e=this._object,t=e.getFishMC();t.visible=!1,t.stop(),egret.Tween.removeTweens(t)},t.prototype.onAnimationComplete=function(){Logger.log("onAnimationComplete "+this._object.hashCode,this);var e=this._object;e.visible=!1,this._isAnimationComplete=!0;var t=e.getFishMC();t.removeEventListener(egret.MovieClipEvent.COMPLETE,this.onAnimationComplete,this),this.onComplete()},t.prototype.playEffect=function(){Logger.log("playEffect "+this._object.hashCode,this);var e=this._object,t=(e.getData(),e.getTableEntity()),o=this._effect;if(o&&(o.removeEventListener(ObjectEvent.COMPLETE,this.onEffectComplete,this),EffectViewObjectManagerProxy.getInstance().stop(o)),t.dieEffectID>0){var i=PlayerViewEntityArrayProxy.getInstance().getPlayerViewEntityByPlayerID(e.scSyncEntity.playerId),n=ApplicationFacade.getInstance().retrieveMediator(BattleViewMediator.NAME),a=n.getSkinView(),r=e.rotation+Utils.MathTool.randomRangeByPositiveAndNegative(0,10),s=Utils.Vector2Tool.getRandomDisplayObjectByPoint(e.localToGlobal(0,0),10),l=new EffectViewObjectData(t.dieEffectID,i?i.isSelf:!1,r,s,s,a.currectBGImage,a.currectBGImage);o=EffectViewObjectManagerProxy.getInstance().play(l),l=null,o.addEventListener(ObjectEvent.COMPLETE,this.onEffectComplete,this),this._effect=o}else this.onEffectComplete()},t.prototype.stopEffect=function(){Logger.log("stopEffect "+this._object.hashCode,this),this._effect&&(this._effect.removeEventListener(ObjectEvent.COMPLETE,this.onEffectComplete,this),EffectViewObjectManagerProxy.getInstance().stop(this._effect))},t.prototype.onEffectComplete=function(){Logger.log("onEffectComplete "+this._object.hashCode,this),this._isEffectViewObjectComplete=!0;var e=this._effect;e&&(e.removeEventListener(ObjectEvent.COMPLETE,this.onEffectComplete,this),EffectViewObjectManagerProxy.getInstance().stop(e)),this.onComplete()},t}(BaseStateContext);__reflect(FishStateDie.prototype,"FishStateDie");var FishStateHit=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._logScope="[FishStateHit]",t._isLog=!1,t._status=GameEnum.FishStateEnum.Hit,t._isAnimationComplete=!0,t._isEffectViewObjectComplete=!0,t.timeoutID=-1,t}return __extends(t,e),t.prototype.enable=function(){Logger.log("enable "+this._object.hashCode,this),this._isAnimationComplete=!1,this._isEffectViewObjectComplete=!1,this.playAnimation(),this.playEffect()},t.prototype.disable=function(){Logger.log("disable "+this._object.hashCode,this),this.stopAnimation(),this.stopEffect()},t.prototype.onComplete=function(){if(this._isAnimationComplete&&this._isEffectViewObjectComplete){Logger.log("onComplete "+this._object.hashCode,this);var e=this._object;e.setStatus(GameEnum.FishStateEnum.Move)}},t.prototype.playAnimation=function(){var e=this;Logger.log("playAnimation "+this._object.hashCode,this);var t=this._object,o=t.getTableEntity(),i=t.getFishMC();if(o.hitFilterEnable&&(t.filters=[Utils.FilterTool.getRedColorFilter()],-1!=this.timeoutID&&egret.clearTimeout(this.timeoutID),this.timeoutID=egret.setTimeout(function(){t.filters=[],e.timeoutID=-1},this,250)),o.hitShake){var n=(i.currentFrame+15)%i.totalFrames;i.gotoAndPlay(n)}this.onAnimationComplete()},t.prototype.stopAnimation=function(){Logger.log("stopAnimation "+this._object.hashCode,this)},t.prototype.onAnimationComplete=function(){Logger.log("onAnimationComplete "+this._object.hashCode,this),this._isAnimationComplete=!0,this.onComplete()},t.prototype.playEffect=function(){Logger.log("playEffect "+this._object.hashCode,this),this.onEffectComplete()},t.prototype.stopEffect=function(){Logger.log("stopEffect "+this._object.hashCode,this)},t.prototype.onEffectComplete=function(){Logger.log("onEffectComplete "+this._object.hashCode,this),this._isEffectViewObjectComplete=!0,this.onComplete()},t}(BaseStateContext);__reflect(FishStateHit.prototype,"FishStateHit");var FishStateIdle=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._logScope="[FishStateIdle]",t._isLog=!1,t._status=GameEnum.FishStateEnum.Idle,t}return __extends(t,e),t.prototype.enable=function(){Logger.log("enable "+this._object.hashCode,this);var e=this._object,t=e.getData();e.getTableEntity(),e.visible=!1,e.moveInScreenComplete=!1,e.moveOutScreenComplete=!1,t.elapsedSecondTime<0&&(this._setTimeoutKey=egret.setTimeout(this.init,this,1e3*Math.abs(t.elapsedSecondTime)),t.elapsedSecondTime=0),this.init()},t.prototype.disable=function(){Logger.log("disable "+this._object.hashCode,this),egret.clearTimeout(this._setTimeoutKey)},t.prototype.onComplete=function(){Logger.log("onComplete "+this._object.hashCode,this);var e=this._object;if(e.getData(),e.getTableEntity().id==GameEnum.FishTableEnum.S_200){var t=PlayerViewEntityArrayProxy.getInstance().getPlayerViewEntityBySelf();if(t&&t.bulletType==GameEnum.FortTableEnum.MegaDrill)return void e.setStatus(GameEnum.FishStateEnum.StoneMove)}else if(e.getTableEntity().id==GameEnum.FishTableEnum.S_201){var t=PlayerViewEntityArrayProxy.getInstance().getPlayerViewEntityBySelf();if(t&&(t.bulletType==GameEnum.FortTableEnum.AutomaticBazooka||t.bulletType==GameEnum.FortTableEnum.MegaDrill))return void e.setStatus(GameEnum.FishStateEnum.StoneMove)}e.setStatus(GameEnum.FishStateEnum.Move)},t.prototype.init=function(){var e=this._object,t=e.getData(),o=e.getTableEntity(),i=(GameDataProxy.getInstance().seatID,GameDataProxy.getInstance().speedByFrame),n=60*t.elapsedSecondTime*o.speed,a=(e.getFishMC().width+10)*t.fishNumber/o.speed*-1;e.pathIndex=Math.round(1*(n+a)/i),e.pathIndex>=t.pathPointArray.length&&(e.pathIndex=t.pathPointArray.length-1),e.setRotation(),this.playAnimationByPort(),this.onComplete()},t.prototype.playAnimationByPort=function(){Logger.log("playAnimationByPort",this);var e=this._object,t=(e.getData(),e.getTableEntity());("null"!=t.lowerJsonName_3||"null"!=t.lowerClipName_3)&&(e.getComponent().lower3MC.x=t.lowerX_3,e.getComponent().lower3MC.y=t.lowerY_3,e.getComponent().lower3MC.scaleX=t.lowerScale_3,e.getComponent().lower3MC.scaleY=t.lowerScale_3,e.getComponent().lower3MC.blendMode=t.lowerBlendType_3,e.getComponent().lower3MC.visible=!0),("null"!=t.lowerJsonName_2||"null"!=t.lowerClipName_2)&&(e.getComponent().lower2MC.x=t.lowerX_2,e.getComponent().lower2MC.y=t.lowerY_2,e.getComponent().lower2MC.scaleX=t.lowerScale_2,e.getComponent().lower2MC.scaleY=t.lowerScale_2,e.getComponent().lower2MC.blendMode=t.lowerBlendType_2,e.getComponent().lower2MC.visible=!0),("null"!=t.lowerJsonName_1||"null"!=t.lowerClipName_1)&&(e.getComponent().lower1MC.x=t.lowerX_1,e.getComponent().lower1MC.y=t.lowerY_1,e.getComponent().lower1MC.scaleX=t.lowerScale_1,e.getComponent().lower1MC.scaleY=t.lowerScale_1,e.getComponent().lower1MC.blendMode=t.lowerBlendType_1,e.getComponent().lower1MC.visible=!0),e.getComponent().fishMC.scaleX=t.scale,e.getComponent().fishMC.scaleY=t.scale,e.getComponent().fishMC.visible=!0,("null"!=t.upperJsonName_3||"null"!=t.upperClipName_3)&&(e.getComponent().upper3MC.x=t.upperX_3,e.getComponent().upper3MC.y=t.upperY_3,e.getComponent().upper3MC.scaleX=t.upperScale_3,e.getComponent().upper3MC.scaleY=t.upperScale_3,e.getComponent().upper3MC.blendMode=t.upperBlendType_3,e.getComponent().upper3MC.visible=!0),("null"!=t.upperJsonName_2||"null"!=t.upperClipName_2)&&(e.getComponent().upper2MC.x=t.upperX_2,e.getComponent().upper2MC.y=t.upperY_2,e.getComponent().upper2MC.scaleX=t.upperScale_2,e.getComponent().upper2MC.scaleY=t.upperScale_2,e.getComponent().upper2MC.blendMode=t.upperBlendType_2,e.getComponent().upper2MC.visible=!0),("null"!=t.upperJsonName_1||"null"!=t.upperClipName_1)&&(e.getComponent().upper1MC.x=t.upperX_1,e.getComponent().upper1MC.y=t.upperY_1,e.getComponent().upper1MC.scaleX=t.upperScale_1,e.getComponent().upper1MC.scaleY=t.upperScale_1,e.getComponent().upper1MC.blendMode=t.upperBlendType_1,e.getComponent().upper1MC.visible=!0)},t}(BaseStateContext);__reflect(FishStateIdle.prototype,"FishStateIdle");var FishStateMove=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._logScope="[FishStateMove]",t._isLog=!1,t._status=GameEnum.FishStateEnum.Move,t}return __extends(t,e),t.prototype.enable=function(){Logger.log("enable "+this._object.hashCode,this),this._object.alpha=1,this.playAnimation(),this.playEffect()},t.prototype.disable=function(){Logger.log("disable "+this._object.hashCode,this),this.stopAnimation(),this.stopEffect(),this.stopMoveObject()},t.prototype.onComplete=function(){Logger.log("onComplete "+this._object.hashCode,this);var e=this._object;e.setStatus(GameEnum.FishStateEnum.None)},t.prototype.update=function(){this.playAnimationByPort(),this.playMoveObject()},t.prototype.playAnimation=function(){Logger.log("playAnimation "+this._object.hashCode,this);var e=this._object,t=(e.getData(),e.getTableEntity()),o=e.getFishMC();o.isPlaying?o.currentLabel!=t.moveLabelName&&o.gotoAndPlay(t.moveLabelName,-1):"null"==t.moveLabelName?o.gotoAndPlay(0,-1):o.gotoAndPlay(t.moveLabelName,-1)},t.prototype.stopAnimation=function(){Logger.log("stopAnimation "+this._object.hashCode,this),this._object},t.prototype.playEffect=function(){Logger.log("playEffect "+this._object.hashCode,this);var e=this._object,t=(e.getData(),e.getTableEntity()),o=this._effect;if(o&&EffectViewObjectManagerProxy.getInstance().stop(o),t.moveEffectID>0){var i=ApplicationFacade.getInstance().retrieveMediator(BattleViewMediator.NAME),n=i.getSkinView(),a=new EffectViewObjectData(t.moveEffectID,!0,e.rotation,e,e,n.currectBGImage,n.currectBGImage);o=EffectViewObjectManagerProxy.getInstance().play(a),a=null,this._effect=o}},t.prototype.stopEffect=function(){Logger.log("stopEffect "+this._object.hashCode,this),this._effect&&EffectViewObjectManagerProxy.getInstance().stop(this._effect)},t.prototype.playMoveObject=function(){var e=this._object,t=e.getData(),o=e.getTableEntity(),i=GameDataProxy.getInstance().speedOffset;if(e.pathIndex+=Math.floor(o.speed*i/GameDataProxy.getInstance().speedByFrame),e.pathIndex<t.pathPointArray.length){if(e.pathIndex<0)return;if(e.visible=!0,e.setRotation(),e.getProxy().facade.retrieveProxy(GameDataProxy.NAME).lockFish==this._object&&e.getProxy().sendNotification(GameEvent.FishViewObjectManagerProxyEvent.MODIFY_COMPLETE_MOVE_FISH,this._object),e.x>GameSettingProxy.screenWidth||e.x<0||e.y>GameSettingProxy.screenHeight||e.y<0)if(e.pathIndex>.5*t.pathPointArray.length&&0==e.moveOutScreenComplete){if(e.moveOutScreenComplete=!0,e.getProxy().sendNotification(GameEvent.FishViewObjectManagerProxyEvent.MODIFY_COMPLETE_GO_OUT_FISH,this._object),o.moveInScreenSpecialEffectID>0){var n=TableEntityProxy.getInstance().getSpecialEffectTableEntity(o.moveInScreenSpecialEffectID);e.moveSoundObject&&SoundObjectManagerProxy.getInstance().stop(e.moveSoundObject)}}else if(e.pathIndex<.5*t.pathPointArray.length&&0==e.moveInScreenComplete&&(e.moveInScreenComplete=!0,e.getProxy().sendNotification(GameEvent.FishViewObjectManagerProxyEvent.MODIFY_COMPLETE_GO_IN_FISH,this._object),o.moveInScreenSpecialEffectID>0)){SpecialEffectViewObjectManagerProxy.getInstance().play(o.moveInScreenSpecialEffectID);var n=TableEntityProxy.getInstance().getSpecialEffectTableEntity(o.moveInScreenSpecialEffectID);n.soundID>0&&(e.moveSoundObject=SoundObjectManagerProxy.getInstance().play(n.soundID))}}else this.onMoveComplete()},t.prototype.stopMoveObject=function(){Logger.log("stopMoveObject "+this._object.hashCode,this);var e=this._object;egret.Tween.removeTweens(e)},t.prototype.onMoveComplete=function(){Logger.log("onMoveComplete "+this._object.hashCode,this),this._object,this.onComplete()},t.prototype.playAnimationByPort=function(){var e=this._object,t=(e.getData(),e.getTableEntity()),o=e.getComponent().upper1MC;o&&(o.rotation+=t.upperRotation_1);var i=e.getComponent().upper2MC;i&&(i.rotation+=t.upperRotation_2);var n=e.getComponent().upper3MC;n&&(n.rotation+=t.upperRotation_3);var a=this._object.getComponent().lower1MC;a&&(a.rotation+=t.lowerRotation_1);var r=this._object.getComponent().lower2MC;r&&(r.rotation+=t.lowerRotation_2);var s=this._object.getComponent().lower3MC;s&&(s.rotation+=t.lowerRotation_3)},t}(BaseStateContext);__reflect(FishStateMove.prototype,"FishStateMove");var FishStateNone=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._logScope="[FishStateNone]",t._isLog=!1,t._status=GameEnum.FishStateEnum.None,t}return __extends(t,e),t.prototype.enable=function(){Logger.log("enable "+this._object.hashCode,this),this._object.visible=!1,this.onComplete()},t.prototype.disable=function(){Logger.log("disable "+this._object.hashCode,this)},t.prototype.onComplete=function(){Logger.log("onComplete "+this._object.hashCode,this);var e=this._object;e.stop()},t}(BaseStateContext);__reflect(FishStateNone.prototype,"FishStateNone");var FishStateStoneBegin=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;
return t._logScope="[FishStateStoneBegin]",t._isLog=!1,t._status=GameEnum.FishStateEnum.StoneBegin,t._isAnimationComplete=!0,t._isEffectViewObjectComplete=!0,t}return __extends(t,e),t.prototype.enable=function(){Logger.log("enable "+this._object.hashCode,this);var e=this._object;e.getData(),e.getTableEntity(),this._object.alpha=1,this._isAnimationComplete=!1,this._isEffectViewObjectComplete=!1,this.playAnimation(),this.playEffect()},t.prototype.disable=function(){Logger.log("disable "+this._object.hashCode,this),this.stopAnimation(),this.stopEffect()},t.prototype.onComplete=function(){if(Logger.log("onComplete "+this._object.hashCode,this),this._isAnimationComplete&&this._isEffectViewObjectComplete){var e=this._object;e.setStatus(GameEnum.FishStateEnum.StoneMove)}},t.prototype.playAnimation=function(){Logger.log("playAnimation "+this._object.hashCode,this);var e=this._object,t=(e.getData(),e.getTableEntity()),o=e.getFishMC();o.gotoAndPlay(t.stoneLabelName,1),this.onAnimationComplete()},t.prototype.stopAnimation=function(){Logger.log("stopAnimation "+this._object.hashCode,this),this._object},t.prototype.onAnimationComplete=function(){Logger.log("onAnimationComplete "+this._object.hashCode,this),this._isAnimationComplete=!0,this.onComplete()},t.prototype.playEffect=function(){Logger.log("playEffect "+this._object.hashCode,this);var e=this._object,t=(e.getData(),e.getTableEntity()),o=this._effect;if(o&&(o.removeEventListener(ObjectEvent.COMPLETE,this.onEffectComplete,this),EffectViewObjectManagerProxy.getInstance().stop(o)),t.stoneBeginEffectID>0){var i=ApplicationFacade.getInstance().retrieveMediator(BattleViewMediator.NAME),n=i.getSkinView(),a=new EffectViewObjectData(t.stoneBeginEffectID,!0,0,e,e,n.currectBGImage,n.currectBGImage);o=EffectViewObjectManagerProxy.getInstance().play(a),a=null,o.addEventListener(ObjectEvent.COMPLETE,this.onEffectComplete,this),this._effect=o}else this.onEffectComplete()},t.prototype.stopEffect=function(){Logger.log("stopEffect "+this._object.hashCode,this),this._effect&&(this._effect.removeEventListener(ObjectEvent.COMPLETE,this.onEffectComplete,this),EffectViewObjectManagerProxy.getInstance().stop(this._effect))},t.prototype.onEffectComplete=function(){Logger.log("onEffectComplete "+this._object.hashCode,this),this._isEffectViewObjectComplete=!0,this.onComplete()},t}(BaseStateContext);__reflect(FishStateStoneBegin.prototype,"FishStateStoneBegin");var FishStateStoneEnd=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._logScope="[FishStateStoneEnd]",t._isLog=!1,t._status=GameEnum.FishStateEnum.StoneEnd,t._isAnimationComplete=!0,t._isEffectViewObjectComplete=!0,t}return __extends(t,e),t.prototype.enable=function(){Logger.log("enable "+this._object.hashCode,this);var e=this._object;e.getData(),e.getTableEntity(),this._object.alpha=1,this._isAnimationComplete=!1,this._isEffectViewObjectComplete=!1,this.playAnimation(),this.playEffect()},t.prototype.disable=function(){Logger.log("disable "+this._object.hashCode,this),this.stopAnimation(),this.stopEffect()},t.prototype.onComplete=function(){if(Logger.log("onComplete "+this._object.hashCode,this),this._isAnimationComplete&&this._isEffectViewObjectComplete){var e=this._object;e.setStatus(GameEnum.FishStateEnum.Move)}},t.prototype.playAnimation=function(){Logger.log("playAnimation "+this._object.hashCode,this);var e=this._object,t=(e.getData(),e.getTableEntity()),o=e.getFishMC();o.gotoAndPlay(t.stoneLabelName,1),this.onAnimationComplete()},t.prototype.stopAnimation=function(){Logger.log("stopAnimation "+this._object.hashCode,this),this._object},t.prototype.onAnimationComplete=function(){Logger.log("onAnimationComplete "+this._object.hashCode,this),this._isAnimationComplete=!0,this.onComplete()},t.prototype.playEffect=function(){Logger.log("playEffect "+this._object.hashCode,this);var e=this._object,t=(e.getData(),e.getTableEntity()),o=this._effect;if(o&&(o.removeEventListener(ObjectEvent.COMPLETE,this.onEffectComplete,this),EffectViewObjectManagerProxy.getInstance().stop(o)),t.stoneEndEffectID>0){var i=ApplicationFacade.getInstance().retrieveMediator(BattleViewMediator.NAME),n=i.getSkinView(),a=new EffectViewObjectData(t.stoneEndEffectID,!0,0,e,e,n.currectBGImage,n.currectBGImage);o=EffectViewObjectManagerProxy.getInstance().play(a),a=null,o.addEventListener(ObjectEvent.COMPLETE,this.onEffectComplete,this),this._effect=o}else this.onEffectComplete()},t.prototype.stopEffect=function(){Logger.log("stopEffect "+this._object.hashCode,this),this._effect&&(this._effect.removeEventListener(ObjectEvent.COMPLETE,this.onEffectComplete,this),EffectViewObjectManagerProxy.getInstance().stop(this._effect))},t.prototype.onEffectComplete=function(){Logger.log("onEffectComplete "+this._object.hashCode,this),this._isEffectViewObjectComplete=!0,this.onComplete()},t}(BaseStateContext);__reflect(FishStateStoneEnd.prototype,"FishStateStoneEnd");var FishStateStoneMove=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._logScope="[FishStateStoneMove]",t._isLog=!1,t._status=GameEnum.FishStateEnum.StoneMove,t._isAnimationComplete=!0,t._isEffectViewObjectComplete=!0,t}return __extends(t,e),t.prototype.enable=function(){Logger.log("enable "+this._object.hashCode,this);var e=this._object;e.getData(),e.getTableEntity(),this._isAnimationComplete=!1,this._isEffectViewObjectComplete=!1,e.alpha=.5,e.parent.setChildIndex(e,0),this.playAnimation(),this.playEffect()},t.prototype.disable=function(){Logger.log("disable "+this._object.hashCode,this),this.stopAnimation(),this.stopEffect(),this.stopMoveObject()},t.prototype.onComplete=function(){Logger.log("onComplete "+this._object.hashCode,this);var e=this._object;e.setStatus(GameEnum.FishStateEnum.None)},t.prototype.update=function(){this.playMoveObject()},t.prototype.playAnimation=function(){Logger.log("playAnimation "+this._object.hashCode,this);var e=this._object,t=(e.getData(),e.getTableEntity()),o=e.getFishMC();o.gotoAndPlay(t.stoneLabelName,-1)},t.prototype.stopAnimation=function(){Logger.log("stopAnimation "+this._object.hashCode,this),this._object},t.prototype.playEffect=function(){Logger.log("playEffect "+this._object.hashCode,this);var e=this._object;e.getData(),e.getTableEntity(),this._effect},t.prototype.stopEffect=function(){Logger.log("stopEffect "+this._object.hashCode,this)},t.prototype.playMoveObject=function(){var e=this._object,t=e.getData(),o=e.getTableEntity(),i=GameDataProxy.getInstance().speedOffset;if(e.pathIndex+=Math.floor(o.speed*i/GameDataProxy.getInstance().speedByFrame),e.pathIndex<t.pathPointArray.length){if(e.pathIndex<0)return;e.visible=!0,e.setRotation(),this._object.getProxy().facade.retrieveProxy(GameDataProxy.NAME).lockFish==this._object&&this._object.getProxy().sendNotification(GameEvent.FishViewObjectManagerProxyEvent.MODIFY_COMPLETE_MOVE_FISH,this._object),e.pathIndex>=.5*t.pathPointArray.length&&(e.x>GameSettingProxy.screenWidth||e.x<0||e.y>GameSettingProxy.screenHeight||e.y<0)&&this._object.getProxy().sendNotification(GameEvent.FishViewObjectManagerProxyEvent.MODIFY_COMPLETE_GO_OUT_FISH,this._object)}else this.onMoveComplete()},t.prototype.stopMoveObject=function(){Logger.log("stopMoveObject "+this._object.hashCode,this);var e=this._object;egret.Tween.removeTweens(e)},t.prototype.onMoveComplete=function(){Logger.log("onMoveComplete "+this._object.hashCode,this),this._object,this.onComplete()},t}(BaseStateContext);__reflect(FishStateStoneMove.prototype,"FishStateStoneMove");var FishViewEntity=function(){function e(){this._logScope="[FishViewEntity]",this._isLog=!1}return e}();__reflect(FishViewEntity.prototype,"FishViewEntity",["ILogger"]);var FishViewObject=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._logScope="[FishViewObject]",t._isLog=!1,t._component=new FishComponent,t._status=GameEnum.FishStateEnum.None,t._fishStateDie=new FishStateDie(t),t._fishStateHit=new FishStateHit(t),t._fishStateIdle=new FishStateIdle(t),t._fishStateMove=new FishStateMove(t),t._fishStateNone=new FishStateNone(t),t._fishStateStoneBegin=new FishStateStoneBegin(t),t._fishStateStoneMove=new FishStateStoneMove(t),t._fishStateStoneEnd=new FishStateStoneEnd(t),t._temPoint=new egret.Point,t._isDrawCollisionRectByDebug=!1,t.pathIndex=0,t.moveInScreenComplete=!1,t.moveOutScreenComplete=!1,t}return __extends(t,e),t.prototype.startObject=function(t){Logger.log("startObject"+this.hashCode,this),e.prototype.startObject.call(this,t),this.createColliderData(t)},t.prototype.initObject=function(t){Logger.log("initObject "+this.hashCode,this),this.name=this._tableEntity.enumName+"_"+String(this.hashCode)+"_sn:"+String(t.sn),this._snLabelByDebug&&0==t.fishNumber&&(this._snLabelByDebug.text=t.logMessage),e.prototype.initObject.call(this,t),this.setStatus(GameEnum.FishStateEnum.None)},t.prototype.resetObject=function(){Logger.log("resetObject "+this.hashCode,this),e.prototype.resetObject.call(this)},t.prototype.playObject=function(){Logger.log("playObject "+this.hashCode,this),e.prototype.playObject.call(this),this.setStatus(GameEnum.FishStateEnum.Idle)},t.prototype.stopObject=function(){Logger.log("stopObject "+this.hashCode,this),this.moveSoundObject&&SoundObjectManagerProxy.getInstance().stop(this.moveSoundObject),e.prototype.stopObject.call(this)},t.prototype.completeObject=function(){Logger.log("completeObject "+this.hashCode,this),e.prototype.completeObject.call(this),this.removeEventListener(egret.Event.ENTER_FRAME,this.onUpdate,this),this._stateContext.disable(),this._proxy.onObjectCompleteHandle(this)},t.prototype.getProxy=function(){return this._proxy},t.prototype.getData=function(){return this._data},t.prototype.getTableEntity=function(){return this._tableEntity},t.prototype.setStatus=function(e){if(!this._stateContext||e!=this._stateContext.status){var t,o;switch(e){case GameEnum.FishStateEnum.Die:t=this._fishStateDie,o=GameEvent.FishViewObjectManagerProxyEvent.CHANGE_COMPLETE_STATE_DIE;break;case GameEnum.FishStateEnum.Move:t=this._fishStateMove,o=GameEvent.FishViewObjectManagerProxyEvent.CHANGE_COMPLETE_STATE_MOVE;break;case GameEnum.FishStateEnum.Hit:t=this._fishStateHit,o=GameEvent.FishViewObjectManagerProxyEvent.CHANGE_COMPLETE_STATE_HIT;break;case GameEnum.FishStateEnum.Idle:t=this._fishStateIdle,o=GameEvent.FishViewObjectManagerProxyEvent.CHANGE_COMPLETE_STATE_IDLE;break;case GameEnum.FishStateEnum.None:t=this._fishStateNone,o=GameEvent.FishViewObjectManagerProxyEvent.CHANGE_COMPLETE_STATE_NONE;break;case GameEnum.FishStateEnum.StoneBegin:t=this._fishStateStoneBegin,o=GameEvent.FishViewObjectManagerProxyEvent.CHANGE_COMPLETE_STATE_STONE_BEGIN;break;case GameEnum.FishStateEnum.StoneMove:t=this._fishStateStoneMove,o=GameEvent.FishViewObjectManagerProxyEvent.CHANGE_COMPLETE_STATE_STONE_MOVE;break;case GameEnum.FishStateEnum.StoneEnd:t=this._fishStateStoneEnd,o=GameEvent.FishViewObjectManagerProxyEvent.CHANGE_COMPLETE_STATE_STONE_END;break;default:Logger.log("setStatus status:"+e+" is not exist")}this._stateContext&&(this._stateContext.disable(),this._proxy.sendNotification(o,this)),this._stateContext=t,this._stateContext.enable()}},t.prototype.getStatus=function(){return this._stateContext.status},t.prototype.createColliderData=function(e){var t=e.collisionRectangleWidth,o=e.collisionRectangleHeight,i=new egret.Shape;i.name="ColliderRect",i.graphics.beginFill(16777215,.1),i.graphics.lineStyle(2,16777215),i.graphics.drawRect(t*-.5,o*-.5,t,o),i.graphics.endFill(),i.visible=!1,this.addChild(i);var n=new eui.Label;n.name="SNLabel",this.addChild(n),this._snLabelByDebug=n,this._snLabelByDebug.visible=!1,this._isDrawCollisionRectByDebug&&(i.visible=!0),this._collisionRectangle=i},t.prototype.getCollisionDisplayObject=function(){return this._collisionRectangle},t.prototype.onUpdate=function(){this._stateContext&&this._stateContext.update()},t.prototype.getFishMC=function(){var e=this._component;return e.getFishUI()},t.prototype.getComponent=function(){var e=this._component;return e},t.prototype.getLabel=function(){return this._snLabelByDebug},t.prototype.setRotation=function(){var e=this,t=e.getData(),o=e.getTableEntity(),i=GameDataProxy.getInstance().seatID;if(!(e.pathIndex<0)){e.x=t.pathPointArray[e.pathIndex][0],e.y=t.pathPointArray[e.pathIndex][1],e.rotation=t.pathPointArray[e.pathIndex][2],e.rotation%=360;var n=e.scaleY;e.scaleY=Math.abs(e.scaleY),e.scaleX=Math.abs(e.scaleX),e.scaleX*=-1,2>i?e.rotation<90&&e.rotation>-90?o.rotationEnable||(e.rotation=0):e.rotation>90||e.rotation<-90?(e.scaleY*=-1,o.rotationEnable||(e.rotation=180)):e.scaleY=n:e.rotation<90&&e.rotation>-90?(e.scaleY*=-1,o.rotationEnable||(e.rotation=0)):e.rotation>90||e.rotation<-90?o.rotationEnable||(e.rotation=180):e.scaleY=n}},t.prototype.getLockPoint=function(){return this.localToGlobal(0,0,this._temPoint),this._temPoint},t.NAME="FishViewObject",t}(BaseCOPObject);__reflect(FishViewObject.prototype,"FishViewObject");var FishViewObjectData=function(){function e(e,t,o,i,n,a){this.tableEntityID=e,this.pathPointArray=t,this.sn=o,this.fishNumber=i,this.elapsedSecondTime=n,this.logMessage=a}return e}();__reflect(FishViewObjectData.prototype,"FishViewObjectData");var FishViewObjectManagerProxy=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._logScope="[FishViewObjectManagerProxy]",t._isLog=!1,t._objectMap={},t}return __extends(t,e),t.prototype.onFacadeAwakeComplete=function(){this.facadeComplete()},t.prototype.onPreloadResourceComplete=function(){},t.prototype.onNonPreloadResourceComplete=function(e){e==GameEnum.LoadingCollectionTypeEnum.Battle&&this.resourceComplete()},t.prototype.onSCRoomLoginComplete=function(){this.init()},t.prototype.onSCRoomLogoutComplete=function(){this.reset()},t.prototype.nextAwake=function(){},t.prototype.nextStart=function(){var e=GameEvent.FishViewObjectManagerProxyEvent.MODIFY_COMPLETE_GENERATOR_MAP,t=GameEvent.FishViewObjectManagerProxyEvent.MODIFY_COMPLETE_OBJECT_MAP,o=TableEntityProxy.getInstance().fishTableEntityArray;this.startData(e,t,o);var i=ApplicationFacade.getInstance().retrieveMediator(BattleFishArrayViewMediator.NAME);this._layer=i.getSkinView()},t.prototype.nextInit=function(){},t.prototype.nextReset=function(){},t.prototype.startObject=function(e){var t=e.tableEntityID,o=TableEntityProxy.getInstance().getFishTableEntity(t),i=this._generatorMap[t],n=i.getObject(FishViewObject);return this.addChild(n,this.getGroupByFishID(t)),0==n.isStartComplete()&&(n.opSetProtocol(i.getDistributor()),n.start(o,this)),n},t.prototype.initObject=function(e,t){e.init(t)},t.prototype.playObject=function(e){e.play()},t.prototype.stopObject=function(e){e.stop()},t.prototype.onObjectCompleteHandle=function(e){},t.prototype.getMap=function(){return this._objectMap},t.prototype.addChild=function(e,t){t.addChild(e)},t.prototype.removeChild=function(e){this._layer.removeChild(e)},t.prototype.getObjectBySN=function(e){if(-1!=e){var t=this._objectMap;for(var o in t){var i=t[o];if(i.getData().sn==e)return i}}return null},t.prototype.getMoveStateObjectInScreenBySN=function(e){var t=this.getObjectBySN(e);return t&&t.getStatus()===GameEnum.FishStateEnum.Move?t.x>GameSettingProxy.screenWidth||t.x<0||t.y>GameSettingProxy.screenHeight||t.y<0?null:t:null},t.prototype.stoneBy200=function(){var e=this._objectMap;for(var t in e)if(e.hasOwnProperty(t)){var o=e[t];o.getData().tableEntityID!=GameEnum.FishTableEnum.S_200||o.getStatus()!=GameEnum.FishStateEnum.Move&&o.getStatus()!=GameEnum.FishStateEnum.StoneEnd||o.setStatus(GameEnum.FishStateEnum.StoneMove)}},t.prototype.unStoneBy200=function(){var e=this._objectMap;for(var t in e)if(e.hasOwnProperty(t)){var o=e[t];o.getData().tableEntityID!=GameEnum.FishTableEnum.S_200||o.getStatus()!=GameEnum.FishStateEnum.StoneBegin&&o.getStatus()!=GameEnum.FishStateEnum.StoneMove||o.setStatus(GameEnum.FishStateEnum.StoneEnd)}},t.prototype.stoneBy201=function(){var e=this._objectMap;for(var t in e)if(e.hasOwnProperty(t)){var o=e[t];o.getData().tableEntityID!=GameEnum.FishTableEnum.S_201||o.getStatus()!=GameEnum.FishStateEnum.Move&&o.getStatus()!=GameEnum.FishStateEnum.StoneEnd||o.setStatus(GameEnum.FishStateEnum.StoneMove)}},t.prototype.unStoneBy201=function(){var e=this._objectMap;for(var t in e)if(e.hasOwnProperty(t)){var o=e[t];o.getData().tableEntityID!=GameEnum.FishTableEnum.S_201||o.getStatus()!=GameEnum.FishStateEnum.StoneBegin&&o.getStatus()!=GameEnum.FishStateEnum.StoneMove||o.setStatus(GameEnum.FishStateEnum.StoneEnd)}},t.prototype.getGroupByFishID=function(e){return e>=GameEnum.FishTableEnum.B_0&&e<GameEnum.FishTableEnum.G_100?this._layer.basicFishGroup:e>=GameEnum.FishTableEnum.G_100&&e<GameEnum.FishTableEnum.S_200?e==GameEnum.FishTableEnum.G_101||e==GameEnum.FishTableEnum.G_103?this._layer.topFishGroup:this._layer.goldFishGroup:e>=GameEnum.FishTableEnum.S_200?this._layer.specialFishGroup:void Logger.error("getGroupByFishID can not find correct group")},t.NAME="FishViewObjectManagerProxy",t}(BaseObjectManagerProxy);__reflect(FishViewObjectManagerProxy.prototype,"FishViewObjectManagerProxy");var FishViewObjectManagerProxyAdapterMediator=function(e){function t(t,o){var i=e.call(this,t,o)||this;return i._logScope="[FishViewObjectManagerProxyAdapterMediator]",i._isLog=!1,i._fishSoundTableEntityArrayMap=new Object,i._fishSoundTableEntityIndexMap=new Object,i}return __extends(t,e),t.prototype.listNotificationInterests=function(){return[GameEvent.ApplicationFacadeEvent.AWAKE_COMPLETE,GameEvent.ProtocolProxyEvent.MODIFY_COMPLETE_SC_SYNC_VALUE,GameEvent.ProtocolProxyEvent.MODIFY_COMPLETE_CS_ROOM_LOGOUT_VALUE,GameEvent.BattleSceneEvent.ENTER_FRAME,GameEvent.BattleSceneEvent.CHANGE_BACKGROUND_COMPLETE,GameEvent.FishViewObjectManagerProxyEvent.STONE,GameEvent.FishViewObjectManagerProxyEvent.UNSTONE]},t.prototype.handleNotification=function(e){var t=e.getBody();switch(e.getName()){case GameEvent.ApplicationFacadeEvent.AWAKE_COMPLETE:this.retrieveAllProxyAndMediator();break;case GameEvent.ProtocolProxyEvent.MODIFY_COMPLETE_SC_SYNC_VALUE:this.parserSCSyncEntity(t);break;case GameEvent.ProtocolProxyEvent.MODIFY_COMPLETE_CS_ROOM_LOGOUT_VALUE:var o=this._allProxy._fishViewObjectManagerProxy;o.stopAll();break;case GameEvent.BattleSceneEvent.ENTER_FRAME:this.onEnterFrame();break;case GameEvent.BattleSceneEvent.CHANGE_BACKGROUND_COMPLETE:var i=this._allProxy._fishViewObjectManagerProxy;i.stopAll();break;case GameEvent.FishViewObjectManagerProxyEvent.STONE:t==GameEnum.FishTableEnum.S_200?this._allProxy._fishViewObjectManagerProxy.stoneBy201():t==GameEnum.FishTableEnum.S_201&&(this._allProxy._fishViewObjectManagerProxy.stoneBy200(),this._allProxy._fishViewObjectManagerProxy.stoneBy201());break;case GameEvent.FishViewObjectManagerProxyEvent.UNSTONE:this._allProxy._fishViewObjectManagerProxy.unStoneBy200(),this._allProxy._fishViewObjectManagerProxy.unStoneBy201()}},t.prototype.parserSCSyncEntity=function(e){this.handleDie(e),this.handleStone(e),this.handleUnstone(e)},t.prototype.handleDie=function(e){var t=this._allProxy._fishViewObjectManagerProxy.getObjectBySN(e.targetSN);if(t&&e.spinResult&&e.spinResult.mechanismResult.hitResult.killCount>0){var o=this._allProxy._playerViewEntityArrayProxy.getPlayerViewEntityByPlayerID(e.playerId),i=TableEntityProxy.getInstance().getFishTableEntity(e.spinRequest.targetId);if(t.scSyncEntity=e,i.speakSoundGroupID>0){var n=TableEntityProxy.getInstance().getSpeakSoundGroupTableEntity(i.speakSoundGroupID);(o&&o.isSelf||n.isShowByOther)&&this.playSound(i.speakSoundGroupID,e.playerId)}switch(i.dieType){case 1:t.setStatus(GameEnum.FishStateEnum.Die);break;case 2:if(!o||!o.isSelf)return;e.spinRequest.targetId==GameEnum.FishTableEnum.S_201&&t.setStatus(GameEnum.FishStateEnum.StoneBegin);break;case 3:}}},t.prototype.handleStone=function(e){Logger.log("checkStone",this);var t=this._allProxy._playerViewEntityArrayProxy.getPlayerViewEntityByPlayerID(e.playerId);t&&t.isSelf&&e.spinResult&&t.bulletType==GameEnum.FortTableEnum.Normal&&e.spinResult.mechanismResult.hitResult.killCount>0&&Utils.SCSyncTools.getAwardBulletCount(e)>0&&(e.spinRequest.targetId==GameEnum.FishTableEnum.S_200||e.spinRequest.targetId==GameEnum.FishTableEnum.S_201)&&this.sendNotification(GameEvent.FishViewObjectManagerProxyEvent.STONE,e.spinRequest.targetId)},t.prototype.handleUnstone=function(e){if(Logger.log("checkUnstone",this),e.spinResult){var t=this._allProxy._playerViewEntityArrayProxy.getPlayerViewEntityByPlayerID(e.playerId);t&&t.isSelf&&("Bazooka"==e.spinRequest.bulletInfo.bulletType||"MegaDrill"==e.spinRequest.bulletInfo.bulletType)&&e.spinResult.mechanismResult.specialFeatureResults.length>1&&0==e.spinResult.mechanismResult.specialFeatureResults[0].remainTargetBulletCount&&this.sendNotification(GameEvent.FishViewObjectManagerProxyEvent.UNSTONE)}},t.prototype.onEnterFrame=function(){var e=this._allProxy._fishViewObjectManagerProxy,t=e.getMap();for(var o in t)t.hasOwnProperty(o)&&t[o].onUpdate()},t.prototype.playSound=function(e,t){var o=TableEntityProxy.getInstance().getSpeakSoundGroupTableEntity(e),i="";if(null==this._fishSoundTableEntityArrayMap[e]){this._fishSoundTableEntityArrayMap[o.id]=new Array,this._fishSoundTableEntityIndexMap[o.id]=0;for(var n in o)if(i="th"==Utils.ResourceTool.language?"en":Utils.ResourceTool.language,Utils.ResourceTool.language&&n.match("soundID")&&n.match(i)){var a=o[n];a>0&&this._fishSoundTableEntityArrayMap[o.id].push(a)}}this._fishSoundTableEntityIndexMap[e]%=this._fishSoundTableEntityArrayMap[o.id].length,0==this._fishSoundTableEntityIndexMap[e]&&Utils.MathTool.shuffleArray(this._fishSoundTableEntityArrayMap[e]),SoundObjectManagerProxy.getInstance().play(this._fishSoundTableEntityArrayMap[e][this._fishSoundTableEntityIndexMap[e]]),this._fishSoundTableEntityIndexMap[e]++},t.NAME="FishViewObjectManagerProxyAdapterMediator",t}(BaseAdapterMediator);__reflect(FishViewObjectManagerProxyAdapterMediator.prototype,"FishViewObjectManagerProxyAdapterMediator");var FlowControlProxy=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._logScope="[FlowControlProxy]",t._isLog=!1,t._waveIntervalTime=4,t._waveComingFCID=1e4,t._fcIDArrayLength=225,t._timesBy1001To2000=4,t._timesBy2001To3000=12,t._fcIDArrayBy10000=new Array,t._createFCIDArrayBySyncReuqest=!1,t._fcIDArrayCurrectIndex=0,t._fcIDArray=new Array,t._fcIDArrayBy0001To1000=new Array,t._fcIDArrayBy1001To2000=new Array,t._fcIDArrayBy2001To3000=new Array,t._fishPathIDArrayByRandom=new Array,t}return __extends(t,e),t.prototype.onFacadeAwakeComplete=function(){this.retrieveProxy()},t.prototype.onPreloadResourceComplete=function(){},t.prototype.onNonPreloadResourceComplete=function(e){e==GameEnum.LoadingCollectionTypeEnum.Battle&&this.start()},t.prototype.onSCRoomLoginComplete=function(){this.init()},t.prototype.onSCRoomLogoutComplete=function(){this.reset()},t.prototype.awake=function(){},t.prototype.start=function(){this._fcIDArrayBy10000.length=0;var e=TableEntityProxy.getInstance().bossAndWeaponFCTableEntityArray;for(var t in e)e[t].fcID==this._waveComingFCID&&this._fcIDArrayBy10000.push(e[t].id)},t.prototype.init=function(){this._init=!0},t.prototype.reset=function(){},t.prototype.playByLogin=function(e){if(Logger.log("playByLogin trunID:"+e,this),this._init){this._createFCIDArrayBySyncReuqest=!0,this._trunIDByLogin=e,this.sendNotification(GameEvent.FlowControlProxyEvent.MODIFY_TURN_ID_BY_LOGIN_VALUE,e);var t=this.getTrunIDByCreateArray(e);this.createFCIDArray(t);var o=this.getTrunIDBySync(e),i=this.getFCIDArrayIndex(o);this.setBackground(i),this.calculateCreateFishTeamByLogin(e,0)&&this.calculateCreateFishTeamByLogin(e,1)&&this.calculateCreateFishTeamByLogin(e,2)&&!this.calculateCreateFishTeamByLogin(e,3)}},t.prototype.playBySync=function(e){if(this._init){if(this._createFCIDArrayBySyncReuqest){this._createFCIDArrayBySyncReuqest=!1;var t=this.getTrunIDByCreateArray(this._trunIDByLogin),o=this.getTrunIDByCreateArray(e);t!=o&&this.createFCIDArray(o);var i=this.getFCIDArrayIndex(t),n=this.getFCIDArrayIndex(o),a=this.getBattleBGTableEntityID(i),r=this.getBattleBGTableEntityID(n);a!=r&&this.sendNotification(GameEvent.BattleSceneEvent.CHANGE_BACKGROUND,0)}this.sendNotification(GameEvent.FlowControlProxyEvent.MODIFY_TURN_ID_BY_SYNC_VALUE,e),this._fcIDArrayCurrectIndex=this.getFCIDArrayIndex(e),this.sendNotification(GameEvent.FlowControlProxyEvent.MODIFY_FC_INDEX_VALUE,this._fcIDArrayCurrectIndex),this._fcIDArrayCurrectIndex==this._fcIDArray.length-1?(this.playSpecialEffect(this._fcIDArray[this._fcIDArrayCurrectIndex]),this.sendNotification(GameEvent.BattleSceneEvent.CHANGE_BACKGROUND,0),this.createFCIDArray(e+4)):this.createFishTeam(this._fcIDArrayCurrectIndex,1e3*e,0)}},t.prototype.playByUnitTest=function(e){if(Logger.log("playByUnitTest fcID:"+e,this),this._init){if(e===this._waveComingFCID)return this.playSpecialEffect(e),void this.sendNotification(GameEvent.BattleSceneEvent.CHANGE_BACKGROUND,0);var t=TableEntityProxy.getInstance(),o=this.getFCTableEntity(e),i=0;for(var n in o)if(n.match("teamID")){var a=n.split("_"),r=a[a.length-1],s=(Number(r),o[n]),l=o["fishPathID_"+r];if(0>=s)continue;0>=l&&(l=1);var c=t.getFishTeamTableEntity(s),h=(t.getFishTableEntity(c.fishID),"fc:"+e+"[t:"+s+", p:"+l+"], fish:"+c.fishID);Logger.log("createFishTeamByUnitTest logMessage:"+h,this);for(var u=0;u<c.count;u++)i++,this.createFish(c.fishID,i,l,0,u,h)}}},t.prototype.calculateCreateFishTeamByLogin=function(e,t){Logger.log("calculateCreateFishTeamByLogin trunID:"+e+", previous:"+t,this);var o=this._waveIntervalTime,i=e%o+t*o,n=this.getFCIDArrayIndex(e)-t,a=n*o,r=1e3*a,s=this._fcIDArray[n];return s===this._waveComingFCID||0>n?!1:(this.createFishTeam(n,r,i),!0)},t.prototype.createFishTeam=function(e,t,o){Logger.log("****",this),Logger.log("createFishTeam fcIDArrayIndex:"+e+", trunID:"+t/1e3+", elapsedTime:"+o,this);var i=this._fcIDArray[e];if(this.playSpecialEffect(i),i===this._waveComingFCID)return void this.sendNotification(GameEvent.BattleSceneEvent.CHANGE_BACKGROUND,o);var n=0,a=this.getFCTableEntity(i);Logger.log("createFishTeam fCTableEntity, fcID:"+a.id+", t_1:"+a.teamID_1+", p_1:"+a.fishPathID_1+", t_2:"+a.teamID_2+", p_2:"+a.fishPathID_2+", t_3:"+a.teamID_3+", p_3:"+a.fishPathID_3+", t_4:"+a.teamID_4+", p_4:"+a.fishPathID_4,this);for(var r in a)if(r.match("teamID")){var s=r.split("_"),l=s[s.length-1],c=Number(l),h=a[r],u=a["fishPathID_"+l],p=!1;if(0>=h)continue;0>=u&&(p=!0,u=this.getFishPath(e,c));var y=TableEntityProxy.getInstance(),E=y.getFishTeamTableEntity(h),_="fc:"+i+"[t:"+h+", p:"+u+"], fish:"+E.fishID;p&&(_+=" autoPath"),Logger.log("createFishTeam logMessage:"+_,this);for(var g=0;g<E.count;g++)n++,this.createFish(E.fishID,t+n,u,o,g,_)}},t.prototype.createFish=function(e,t,o,i,n,a){var r=(this._allProxy._gameDataProxy,this._allProxy._fishViewObjectManagerProxy),s=TableEntityProxy.getInstance(),l=(s.getFishTableEntity(e),s.getFishPathTableEntity(o)),c=this._allProxy._gameDataProxy.getFishPointPath(l.id),h=new FishViewObjectData(e,c,t,n,i,a);r.play(h),h=null},t.prototype.createFCIDArray=function(e){Logger.log("================",this),Logger.log("createFCIDArray trunIDByCreateFC:"+e,this),this.sendNotification(GameEvent.FlowControlProxyEvent.MODIFY_TURN_ID_BY_CREATE_FC_ARRAY_VALUE,e);var t=this._fcIDArrayLength;this._fcIDArray.length=0,this._fcIDArrayCurrectIndex=0;var o=Utils.MathTool.getSeed(e+136+GameDataProxy.getInstance().roomNumber);this.createFishPathIDArrayByRandom(o),this.createClassifyFCIDArray(o);for(var i=this._timesBy1001To2000,n=0,a=this._timesBy2001To3000,r=0,s=(this._fcIDArrayBy0001To1000.length,0),l=this._fcIDArrayBy10000[0],c=this._fcIDArrayBy10000[1],h=this._fcIDArrayBy10000[2],u=0;t>u;u++){var p=u,y=u+1,E=this.getBossAndWeaponFCTableEntity(y);if(E)this._fcIDArray[p]=E.fcID;else if(y>=1&&a>=y||y>l&&l+a>=y||y>c&&c+a>=y){1==y?(r=this.getStartIndex(this._fcIDArrayBy2001To3000,e),Logger.log("waveNumber:"+y+", seedWaveNumber:1, seed:"+e+", indexBy2001To3000:"+r+", length:"+this._fcIDArrayBy2001To3000.length+", fcID:"+this._fcIDArrayBy2001To3000[r],this)):y==l+1?(r=this.getStartIndex(this._fcIDArrayBy2001To3000,this._fcIDArray[p-7]),Logger.log("waveNumber:"+y+", seedWaveNumber:"+(y-7)+", seed:"+this._fcIDArray[p-7]+", indexBy2001To3000:"+r+", length:"+this._fcIDArrayBy2001To3000.length+", fcID:"+this._fcIDArrayBy2001To3000[r],this)):y==c+1&&(r=this.getStartIndex(this._fcIDArrayBy2001To3000,this._fcIDArray[p-7]),Logger.log("waveNumber:"+y+", seedWaveNumber:"+(y-7)+", seed:"+this._fcIDArray[p-7]+", indexBy2001To3000:"+r+", length:"+this._fcIDArrayBy2001To3000.length+", fcID:"+this._fcIDArrayBy2001To3000[r],this)),r%=this._fcIDArrayBy2001To3000.length;var _=this._fcIDArrayBy2001To3000[r];_||Logger.error("createFCIDArray fcID is not exist"),this._fcIDArray[p]=_,r++}else if(y>=l-i&&l>y||y>=c-i&&c>y||y>=h-i&&h>y){y==l-i?(n=this.getStartIndex(this._fcIDArrayBy1001To2000,this._fcIDArray[p-1]),Logger.log("waveNumber:"+y+", seedWaveNumber:"+(y-1)+", seed:"+this._fcIDArray[p-1]+", indexBy1001To2000:"+n+", length:"+this._fcIDArrayBy1001To2000.length+", fcID:"+this._fcIDArrayBy1001To2000[n],this)):y==c-i?(n=this.getStartIndex(this._fcIDArrayBy1001To2000,this._fcIDArray[p-1]),Logger.log("waveNumber:"+y+", seedWaveNumber:"+(y-1)+", seed:"+this._fcIDArray[p-1]+", indexBy1001To2000:"+n+", length:"+this._fcIDArrayBy1001To2000.length+", fcID:"+this._fcIDArrayBy1001To2000[n],this)):y==h-i&&(n=this.getStartIndex(this._fcIDArrayBy1001To2000,this._fcIDArray[p-1]),Logger.log("waveNumber:"+y+", seedWaveNumber:"+(y-1)+", seed:"+this._fcIDArray[p-1]+", indexBy1001To2000:"+n+", length:"+this._fcIDArrayBy1001To2000.length+", fcID:"+this._fcIDArrayBy1001To2000[n],this)),n%=this._fcIDArrayBy1001To2000.length;var _=this._fcIDArrayBy1001To2000[n];_||Logger.error("createFCIDArray fcID is not exist"),this._fcIDArray[p]=_,n++}else{s%=this._fcIDArrayBy0001To1000.length;var _=this._fcIDArrayBy0001To1000[s];_||Logger.error("createFCIDArray fcID is not exist"),this._fcIDArray[p]=_,s++}}Logger.log("createFCIDArray fcIDArray:"+this._fcIDArray,this)},t.prototype.createClassifyFCIDArray=function(e){Logger.log("createClassifyFCIDArray, randomSeed:"+e,this);var t=this.getFCTableArray();this._fcIDArrayBy0001To1000.length=0,this._fcIDArrayBy1001To2000.length=0,this._fcIDArrayBy2001To3000.length=0;for(var o in t)1<=t[o].id&&t[o].id<=1e3?this._fcIDArrayBy0001To1000.push(t[o].id):1001<=t[o].id&&t[o].id<=2e3?this._fcIDArrayBy1001To2000.push(t[o].id):2001<=t[o].id&&t[o].id<=3e3&&this._fcIDArrayBy2001To3000.push(t[o].id);e&&Utils.MathTool.shuffleArrayBySeed(this._fcIDArrayBy0001To1000,e),Logger.log("createClassifyFCIDArray, randomSeed:"+e+", lengh:"+this._fcIDArrayBy0001To1000.length+", fcIDArrayBy0001To1000:["+this._fcIDArrayBy0001To1000+"]",this)},t.prototype.createFishPathIDArrayByRandom=function(e){var t=this._fishPathIDArrayByRandom;t.length=0;var o=TableEntityProxy.getInstance().fishPathTableEntityArray;for(var i in o)o[i].aotoEnable&&t.push(o[i].id);var n=(this._allProxy._protocolProxy.scRoomLogin.iRoomType,this.getFCTableArray());for(var i in n){var a=n[i];for(var r in a)if(r.match("teamID")){var s=r.split("_"),l=s[s.length-1],c=a["teamID_"+l],h=a["fishPathID_"+l];if(0>=c)continue;if(h>0)for(var u in t){var p=t[u];if(h==p){t.splice(Number(l),1);break}}}}e&&Utils.MathTool.shuffleArrayBySeed(t,e),this.sendNotification(GameEvent.FlowControlProxyEvent.MODIFY_FC_LOG,"fishPathIDArray:["+this._fishPathIDArrayByRandom+"]"),Logger.log("createFishPathIDArrayByRandom, randomSeed:"+e+", lengh:"+t.length+", ["+this._fishPathIDArrayByRandom+"]",this),0==this._fishPathIDArrayByRandom.length&&Logger.error("createFishPathIDArrayByRandom this._fishPathIDArrayByRandom.length == 0",this)},t.prototype.getStartIndex=function(e,t){Logger.log("getStartIndex seed:"+t+GameDataProxy.getInstance().roomNumber,this);var o=new Array;for(var i in e){var n=e[i];n%100==1&&o.push(Number(i))}var a=o.length,r=Utils.MathTool.getSeed(t+GameDataProxy.getInstance().roomNumber)%a,s=o[r];return s},t.prototype.getFCTableEntity=function(e){var t,o=this._allProxy._protocolProxy.scRoomLogin.iRoomType,i=TableEntityProxy.getInstance();
switch(o){case GameEnum.ZoneTypeEnum.Low:t=i.getLowFCTableEntity(e);break;case GameEnum.ZoneTypeEnum.Middle:t=i.getMiddleFCTableEntity(e);break;case GameEnum.ZoneTypeEnum.High:t=i.getHighFCTableEntity(e)}return t},t.prototype.getFCTableArray=function(){Logger.log("getFCTableArray, zoneType:"+GameEnum.ZoneTypeEnum[this._allProxy._protocolProxy.scRoomLogin.iRoomType],this);var e,t=this._allProxy._protocolProxy.scRoomLogin.iRoomType,o=TableEntityProxy.getInstance();switch(t){case GameEnum.ZoneTypeEnum.Low:e=o.lowFCTableEntityArray;break;case GameEnum.ZoneTypeEnum.Middle:e=o.middleFCTableEntityArray;break;case GameEnum.ZoneTypeEnum.High:e=o.highFCTableEntityArray}return e},t.prototype.getBossAndWeaponFCTableEntity=function(e){for(var t=TableEntityProxy.getInstance(),o=0;o<t.bossAndWeaponFCTableEntityArray.length;o++)if(t.bossAndWeaponFCTableEntityArray[o].id==e)return t.bossAndWeaponFCTableEntityArray[o];return null},t.prototype.getTrunIDByCreateArray=function(e){var t=this.getTrunIDBySync(e),o=this._fcIDArrayLength*this._waveIntervalTime,i=Math.floor(t/o)*o;return Logger.log("getTrunIDByCreateArray trunID:"+e+", trunIDByCreateFC:"+i,this),i},t.prototype.getTrunIDBySync=function(e){var t=Math.floor(e/this._waveIntervalTime)*this._waveIntervalTime;return Logger.log("getTrunIDBySync trunID:"+e+", trunIDBySync:"+t,this),t},t.prototype.getFCIDArrayIndex=function(e){var t=Math.floor(e/this._waveIntervalTime),o=t%this._fcIDArray.length;return o},t.prototype.getFishPath=function(e,t){Logger.log("getFishPath fcIDArrayIndex:"+e+", num:"+t,this);var o=(4*e+t-1)%this._fishPathIDArrayByRandom.length,i=this._fishPathIDArrayByRandom[o];return Logger.log("getFishPath fcIDArrayIndex:"+e+", num:"+t+", fishPathID:"+i,this),i},t.prototype.getBattleBGTableEntityID=function(e){for(var t=0,o=0;o<this._fcIDArrayBy10000.length;o++)if(e<this._fcIDArrayBy10000[o]){t=o+1;break}return 0==t&&Logger.error("setBackgroun fcIDArrayIndex:"+e+" is not exit"),t},t.prototype.setBackground=function(e){Logger.log("setBackground fcIDArrayIndex:"+e,this);var t=this.getBattleBGTableEntityID(e);this.sendNotification(GameEvent.BattleSceneEvent.SET_BACKGROUND,t)},t.prototype.playSpecialEffect=function(e){var t=this.getFCTableEntity(e),o=t.specialEffectID;if(o>0){var i=TableEntityProxy.getInstance().getSpecialEffectTableEntity(o);this._specialEffectViewObject=SpecialEffectViewObjectManagerProxy.getInstance().play(o),this._specialEffectViewObject.addEventListener(ObjectEvent.COMPLETE,this.onCompleteSpecialEffect,this),this._specialEffectSoundObject=SoundObjectManagerProxy.getInstance().play(i.soundID)}},t.prototype.onCompleteSpecialEffect=function(){this._specialEffectViewObject.removeEventListener(ObjectEvent.COMPLETE,this.onCompleteSpecialEffect,this),this._specialEffectSoundObject&&SoundObjectManagerProxy.getInstance().stop(this._specialEffectSoundObject)},t.NAME="FlowControlProxy",t}(BaseProxy);__reflect(FlowControlProxy.prototype,"FlowControlProxy");var FlowControlProxyAdapterMediator=function(e){function t(t,o){var i=e.call(this,t,o)||this;return i._logScope="[FlowControlProxyAdapterMediator]",i._isLog=!1,i._loginTurnComplete=!1,i._lastCalledTime=Date.now(),i._enable=!0,i}return __extends(t,e),t.prototype.listNotificationInterests=function(){return[GameEvent.ApplicationFacadeEvent.AWAKE_COMPLETE,GameEvent.ProtocolProxyEvent.MODIFY_COMPLETE_SC_TURN_VALUE,GameEvent.ProtocolProxyEvent.MODIFY_COMPLETE_SC_ROOM_LOGIN_VALUE,GameEvent.ProtocolProxyEvent.MODIFY_COMPLETE_SC_ROOM_LOGOUT_VALUE,GameEvent.GoldfingerViewMediatorEvent.ENABLE_COMPLTET_AUTO_CREATE_FISH,GameEvent.GoldfingerViewMediatorEvent.DISABLE_COMPLTET_AUTO_CREATE_FISH,GameEvent.ControlPanelViewMediatorEvent.ENABLE_COMPLETE_TEST_FISH_TABLE,GameEvent.ControlPanelViewMediatorEvent.DISABLE_COMPLETE_TEST_FISH_TABLE,GameEvent.ControlPanelViewMediatorEvent.ENABLE_COMPLETE_TEST_FC_TABLE,GameEvent.ControlPanelViewMediatorEvent.DISABLE_COMPLETE_TEST_FC_TABLE]},t.prototype.handleNotification=function(e){var t=e.getBody();switch(e.getName()){case GameEvent.ApplicationFacadeEvent.AWAKE_COMPLETE:this.retrieveAllProxyAndMediator();break;case GameEvent.ProtocolProxyEvent.MODIFY_COMPLETE_SC_ROOM_LOGOUT_VALUE:this._loginTurnComplete=!1,egret.clearInterval(this._intervalKey);break;case GameEvent.ProtocolProxyEvent.MODIFY_COMPLETE_SC_TURN_VALUE:if(!this._enable)return;this.parserSCTurn(t);break;case GameEvent.ProtocolProxyEvent.MODIFY_COMPLETE_SC_ROOM_LOGIN_VALUE:this._turnIDBySCTurn=void 0,this.parserSCLogin(t),this._intervalKey=egret.setInterval(this.onUpdate,this,200);break;case GameEvent.ControlPanelViewMediatorEvent.ENABLE_COMPLETE_TEST_FC_TABLE:case GameEvent.ControlPanelViewMediatorEvent.ENABLE_COMPLETE_TEST_FISH_TABLE:case GameEvent.GoldfingerViewMediatorEvent.ENABLE_COMPLTET_AUTO_CREATE_FISH:this._allProxy._fishViewObjectManagerProxy.stopAll(),this._enable=!1;break;case GameEvent.ControlPanelViewMediatorEvent.DISABLE_COMPLETE_TEST_FC_TABLE:case GameEvent.ControlPanelViewMediatorEvent.DISABLE_COMPLETE_TEST_FISH_TABLE:case GameEvent.GoldfingerViewMediatorEvent.DISABLE_COMPLTET_AUTO_CREATE_FISH:this._enable=!0}},t.prototype.parserSCTurn=function(e){this._allProxy._gameDataProxy.gameSceneByEnable==GameEnum.SceneTypeEnum.Battle&&this._loginTurnComplete&&(this._turnIDBySCTurn=e.llTurn)},t.prototype.parserSCLogin=function(e){this._loginTurnComplete||(this._allProxy._flowControlProxy.playByLogin(e.llTurn),this._loginTurnComplete=!0)},t.prototype.onUpdate=function(){this._turnIDBySCTurn&&this._allProxy._flowControlProxy.playBySync(this._turnIDBySCTurn),this._turnIDBySCTurn=void 0},t.NAME="FlowControlProxyAdapterMediator",t}(BaseAdapterMediator);__reflect(FlowControlProxyAdapterMediator.prototype,"FlowControlProxyAdapterMediator");var GameDataProxy=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._logScope="[GameDataProxy]",t._isLog=!1,t._playerCanFire=!0,t.playerNowStatus=GameName.SpecialFeatureName.NORMAL,t._fishPointPathObject=new Object,t._lockFish=null,t._speedOffset=1,t.speedByFrame=.2,t._fpsArray=new Array,t.setAverageFPS=-1,t._isUpdateTicketRequest=!1,t._isReconnectRequest=!1,t._isCloseMaintanceDialogRequest=!1,t}return __extends(t,e),t.getInstance=function(){return null==this._instance&&(this._instance=ApplicationFacade.getInstance().retrieveProxy(t.NAME)),this._instance},t.prototype.onFacadeAwakeComplete=function(){this.retrieveProxy()},t.prototype.onPreloadResourceComplete=function(){this.start()},t.prototype.onNonPreloadResourceComplete=function(e){},t.prototype.onSCRoomLoginComplete=function(e){this._seatID=Utils.GameTool.getSeatID(this._sfsUser.id,e);var t=this._allProxy._protocolProxy.scUserInfo;this._allProxy._protocolProxy.scLobbyJoin,Utils.GameTool.getZoneTypeArray(t),this._roomNumber=e.iRoomNum},t.prototype.onSCRoomLogoutComplete=function(){this.playerCanFire=!0,this.playerNowStatus=GameName.SpecialFeatureName.NORMAL,this._roomNumber=null,this._seatID=void 0,this.battleBGTableEntity=null,this.changingBackground=!1,this._lockFish=null,this.speedOffset=1},t.prototype.awake=function(){},t.prototype.start=function(){Logger.log("start",this)},t.prototype.init=function(){},t.prototype.reset=function(){},t.prototype.setSelf=function(e){this._sfsUser=e,this._playerID=this._sfsUser.id},t.prototype.setFishPointPath=function(e,t){Logger.log("setFishPath id:"+e,this),this._fishPointPathObject[e]=t},t.prototype.getFishPointPath=function(e){return this._fishPointPathObject[String(e)]},t.prototype.getBarrelLevel=function(e,t){var o=this._allProxy._protocolProxy.scRoomLogin;return Utils.GameTool.getBarrelLevel(t,o.iMinBet,o.iMaxBet,PlayerViewEntity.betLevelDivide)},Object.defineProperty(t.prototype,"playerID",{get:function(){return this._playerID},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"seatID",{get:function(){return this._seatID},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"roomNumber",{get:function(){return this._roomNumber},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"gameSceneByEnable",{get:function(){return this._gameSceneByEnable},set:function(e){this._gameSceneByEnable!=e&&(this._gameSceneByEnable=e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"gameSceneByShow",{get:function(){return this._gameSceneByShow},set:function(e){this._gameSceneByShow!=e&&(this._gameSceneByShow=e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"lockFish",{get:function(){return this._lockFish},set:function(e){e?(this._lockFish!=e&&this.sendNotification(GameEvent.GameDataProxyEvent.SET_LOCK_FIRE_TARGET,e),this._lockFish=e):(this._lockFish=null,this.sendNotification(GameEvent.GameDataProxyEvent.REMOVE_LOCK_FIRE_TARGET))},enumerable:!0,configurable:!0}),t.prototype.resetBulletIDArray=function(){this.bulletIDArray=[0,1,2,3,4,5,6,7,8,9]},t.prototype.getReseve=function(){return this.seatID>1?!0:!1},Object.defineProperty(t.prototype,"speedOffset",{get:function(){return this.changingBackground?10*this._speedOffset:this._speedOffset},set:function(e){this._speedOffset=e,this._fpsArray.length==t._maxFpsCountNum&&this._fpsArray.shift(),this._fpsArray.push(e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"roomRetryCount",{get:function(){return this._roomRetryCount},set:function(e){this._roomRetryCount=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"averageFPS",{get:function(){if(-1==this.setAverageFPS){if(this._fpsArray.length==t._maxFpsCountNum){for(var e=this._fpsArray.length,o=0,i=0;e>i;i++)o+=this._fpsArray[i];return Math.round(60/(o/e))}return 60}return this.setAverageFPS},set:function(e){this.setAverageFPS=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isUpdateTicketRequest",{get:function(){return this._isUpdateTicketRequest},set:function(e){this._isUpdateTicketRequest=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isReconnectRequest",{get:function(){return this._isReconnectRequest},set:function(e){this._isReconnectRequest=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isCloseMaintanceDialogRequest",{get:function(){return this._isCloseMaintanceDialogRequest},set:function(e){this._isCloseMaintanceDialogRequest=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"reconnectInScene",{get:function(){return this._reconnectInScene},set:function(e){this._reconnectInScene=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"playerCanFire",{get:function(){return this._playerCanFire&&!this.isUpdateTicketRequest},set:function(e){this._playerCanFire=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"playerIsIdle",{get:function(){return 0==this._allProxy._bulletViewEntityArrayProxy.getBulletViewEntityArrayBySelf().length&&this._allProxy._gameDataProxy.playerNowStatus==GameName.SpecialFeatureName.NORMAL&&0==this._allProxy._playerViewEntityArrayProxy.getPlayerViewEntityBySelf().luckyDrawEntityArray.length},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"gameAchievementData",{get:function(){return this._gameAchievementData},set:function(e){this._gameAchievementData=e},enumerable:!0,configurable:!0}),t.NAME="GameProxy",t._maxFpsCountNum=180,t}(BaseProxy);__reflect(GameDataProxy.prototype,"GameDataProxy");var GameDataProxyAdapterMediator=function(e){function t(t,o){var i=e.call(this,t,o)||this;return i._logScope="[GameDataProxyAdapterMediator]",i._isLog=!1,i._lastCalledTime=0,i._lockFPSSpeedOffset=!1,i._lockFPSSpeedOffsetVal=0,i}return __extends(t,e),t.prototype.listNotificationInterests=function(){return[GameEvent.ApplicationFacadeEvent.AWAKE_COMPLETE,GameEvent.ResourceProxyEvent.LOAD_COMPLETE_NON_PRELOAD_GROUP,GameEvent.ProtocolProxyEvent.MODIFY_COMPLETE_SC_LOGIN_VALUE,GameEvent.BattleSceneEvent.ENTER_FRAME,GameEvent.ControlPanelViewMediatorEvent.ENABLE_COMPLETE_LOCK_FPS_SPEED_OFFSET,GameEvent.ControlPanelViewMediatorEvent.DISABLE_COMPLETE_LOCK_FPS_SPEED_OFFSET]},t.prototype.handleNotification=function(e){var t=e.getBody(),o=this._allProxy._gameDataProxy;switch(e.getName()){case GameEvent.ApplicationFacadeEvent.AWAKE_COMPLETE:this.retrieveAllProxyAndMediator(),this._lastCalledTime=Date.now();break;case GameEvent.ResourceProxyEvent.LOAD_COMPLETE_NON_PRELOAD_GROUP:t==GameEnum.LoadingCollectionTypeEnum.Lobby&&this.sendNotification(GeneratePathCommand.NAME);break;case GameEvent.ProtocolProxyEvent.MODIFY_COMPLETE_SC_LOGIN_VALUE:o.setSelf(t);break;case GameEvent.BattleSceneEvent.ENTER_FRAME:var i=(Date.now()-this._lastCalledTime)/1e3;if(this._lastCalledTime=Date.now(),i>1)return;this._lockFPSSpeedOffset?o.speedOffset=this._lockFPSSpeedOffsetVal:o.speedOffset=60/(1/i);break;case GameEvent.BattleSceneEvent.SET_BACKGROUND_COMPLETE:o.battleBGTableEntity=t;break;case GameEvent.ControlPanelViewMediatorEvent.ENABLE_COMPLETE_LOCK_FPS_SPEED_OFFSET:this._lockFPSSpeedOffset=!0,this._lockFPSSpeedOffsetVal=t;break;case GameEvent.ControlPanelViewMediatorEvent.DISABLE_COMPLETE_LOCK_FPS_SPEED_OFFSET:this._lockFPSSpeedOffset=!1}},t.NAME="GameDataProxyAdapterMediator",t}(BaseAdapterMediator);__reflect(GameDataProxyAdapterMediator.prototype,"GameDataProxyAdapterMediator");var GameSettingProxy=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._logScope="[GameDataProxy]",t._isLog=!1,t.initTicket=null,t.userInfo=null,t.serverInfo=null,t.dollarSign="E",t.multipleSign="x",t.maxPlayerCountInRoom=4,t.waveMoveOffsetX=300,t.waveMoveTime=3e3,t._demoMode=!1,t.lobbyType=GameEnum.LobbyTypeEnum.Auto,t.zoneType=GameEnum.ZoneTypeEnum.Low,t}return __extends(t,e),t.getInstance=function(){return null==this._instance&&(this._instance=ApplicationFacade.getInstance().retrieveProxy(t.NAME)),this._instance},t.prototype.onFacadeAwakeComplete=function(){this.retrieveProxy()},t.prototype.onPreloadResourceComplete=function(){},t.prototype.onNonPreloadResourceComplete=function(e){},t.prototype.onSCRoomLoginComplete=function(){},t.prototype.onSCRoomLogoutComplete=function(){},t.prototype.awake=function(){},t.prototype.start=function(e,t,o,i){Logger.log("start",this),this.userInfo=e,this.initTicket=t,this.serverInfo=o,this.gameVer=i,this.language=this.transitionLang(e.lang)},t.prototype.init=function(){},t.prototype.reset=function(){},t.prototype.transitionLang=function(e){var t,o=e.toLowerCase();"zh-tw"==o.toLowerCase()&&(o="tw");for(var i in GameName.LanguageName){var n=i.toLowerCase();GameName.LanguageName[i]==GameName.LanguageName.CN&&(t=n);var a=GameName.LanguageName[i].toLowerCase();if(a==o)return n}return t},Object.defineProperty(t.prototype,"gameResourcePath",{get:function(){return""},enumerable:!0,configurable:!0}),Object.defineProperty(t,"debug",{get:function(){return!1},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"demoMode",{get:function(){return this._demoMode},set:function(e){this._demoMode=e},enumerable:!0,configurable:!0}),t.NAME="GameSettingProxy",t.screenWidth=960,t.screenHeight=540,t._debug=!0,t.lagTimeThreshold=18e4,t}(BaseProxy);__reflect(GameSettingProxy.prototype,"GameSettingProxy");var GeneratePathCommand=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._logScope="[GeneratePathCommand]",t._isLog=!1,t._doneCount=0,t._rotateByFrame=.15,t}return __extends(t,e),t.prototype.execute=function(e){this.getPathArray(),this._gameDataProxy=this.facade.retrieveProxy(GameDataProxy.NAME);var t=this.facade.retrieveMediator(BattleFishArrayViewMediator.NAME),o=t.getSkinView();this._insidePointArray=o.insidePointArray,this._outsidePointArray=o.outsidePointArray;var i,n,a,r,s,l=this._insidePointArray,c=this._outsidePointArray,h=this.facade.retrieveProxy(TableEntityProxy.NAME),u=new Array,p=new Array;for(var y in h.fishPathTableEntityArray){var E=h.fishPathTableEntityArray[y];if(E.use){i=E.outStartPoint,n=E.inStartPoint,a=E.inEndPoint,r=E.outEndPoint;var _=c[i],g=l[n];s=new FakeFish,s.x=c[i].x,s.y=c[i].y,s.currentPath=0,s.path=[i,n,a,r],u[0]=_.x,u[1]=_.y,p[0]=g.x,p[1]=g.y,s.rotation=Utils.Vector2Tool.getRotationByNumber(u,p);for(var m=[];!s.done;)this.swim(s),m.push([s.x,s.y,s.rotation-90]);this._gameDataProxy.setFishPointPath(E.id,m)}}u=null,p=null},t.prototype.swim=function(e){var t,o,i,n,a=this._insidePointArray,r=this._outsidePointArray,s=new egret.Point,l=new egret.Point,c=new egret.Point;switch(c.x=e.x,c.y=e.y,e.currentPath){case 0:s=r[e.path[e.currentPath]],l=a[e.path[e.currentPath+1]];break;case 1:s=a[e.path[e.currentPath]],l=a[e.path[e.currentPath+1]];break;case 2:s=a[e.path[e.currentPath]],l=r[e.path[e.currentPath+1]];break;case 3:s=r[e.path[e.currentPath]],l=s}this.rotate(e,l,c),this.move(e,l,c),e.x>0&&e.x<960&&e.y<540&&e.y>0&&(e.OneTrip=!0);var h=egret.Point.distance(l,c);3!=e.currentPath?(50>h&&(e.currentPath=e.currentPath+1),1==e.OneTrip&&(e.x<-500||e.x>1500||e.y<-500||e.y>1500)&&this.endMove(e)):(1==e.OneTrip&&(-50>n||i>1130||-50>o||t>590)&&this.endMove(e),15>h&&this.endMove(e))},t.prototype.rotate=function(e,t,o){if(0!=e.currentPath){var i=this._rotateByFrame,n=Utils.Vector2Tool.getRotationByNumber([o.x,o.y],[t.x,t.y]);n=this.reDetectRotate(n,e.rotation),(n-e.rotation+360)%360>=180?(e.rotation-=i,n=this.reDetectRotate(n,e.rotation),(n-e.rotation+360)%360<180&&(e.rotation=n)):(n-e.rotation+360)%360<180&&(e.rotation+=i,n=this.reDetectRotate(n,e.rotation),((n-e.rotation+360)%360>=180||n-e.rotation+360<0)&&(e.rotation=n))}},t.prototype.reDetectRotate=function(e,t){var o=e;return 0>t&&e>0?o-=360:t>=0&&0>e&&(o+=360),o},t.prototype.move=function(e,t,o){var i=Math.cos((e.rotation-90)*(Math.PI/180)),n=Math.sin((e.rotation-90)*(Math.PI/180));e.x=e.x+i*this._gameDataProxy.speedByFrame,e.y=e.y+n*this._gameDataProxy.speedByFrame},t.prototype.endMove=function(e){e.done=!0,this._doneCount++},t.prototype.getPathArray=function(){},t.prototype.GetPToPRotation=function(e,t){var o=e.x-t.x,i=e.y-t.y,n=Math.atan2(i,o)/Math.PI*180+90;return n},t.NAME="GeneratePathCommand",t}(puremvc.SimpleCommand);__reflect(GeneratePathCommand.prototype,"GeneratePathCommand",["ILogger"]);var GeneratorProtocolCommand=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._logScope="[GeneratorProtocolCommand]",t._isLog=!1,t}return __extends(t,e),t.prototype.execute=function(e){this._protocolProxy=this.facade.retrieveProxy(ProtocolProxy.NAME);var t=e.getBody();this.parserData(t[0],t[1])},t.prototype.parserData=function(e,t){switch(Logger.log("parserData even:"+ProtocolType[e],this),e){case ProtocolType.csQuickLogin:this._protocolProxy.csQuickLogin=t;break;case ProtocolType.csRoomLogout:this._protocolProxy.csRoomLogout=t;break;case ProtocolType.csFire:if(this._protocolProxy.csFire=t,this._protocolProxy.csFire){var o=new ProtocolEntity.SCFireEntity;o.iPlayerID=this._protocolProxy.csFire.iPlayerID,o.iBet=this._protocolProxy.csFire.iBet,o.iBulletID=this._protocolProxy.csFire.iBulletID,o.iRotation=this._protocolProxy.csFire.iRotation,o.iBulletType=this._protocolProxy.csFire.iBulletType,o.iTargetSN=this._protocolProxy.csFire.iTargetSN,this._protocolProxy.scFire=o}break;case ProtocolType.csHit:this._protocolProxy.csHit=t;break;default:Logger.error(this._logScope+" "+e+" is not exist")}},t.prototype.generatorCSRoomLogout=function(e){var t=e;return t},t.prototype.generatorCSFire=function(e){var t=e;return t},t.prototype.generatorCSHit=function(e){var t=e;return t},t.NAME="GeneratorProtocolCommand",t}(puremvc.SimpleCommand);__reflect(GeneratorProtocolCommand.prototype,"GeneratorProtocolCommand",["ILogger"]);var GoldfingerViewMediator=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._logScope="[GoldfingerViewMediator]",t._isLog=!1,t._autoTestPayoutEnable=!1,t._autoTestPayoutFishTableEntityArrayIndex=0,t._autoTestPayoutBetArrayIndex=0,t._autoClickEnable=!1,t._autoClickBackgroundFixTime=50,t._autoCreateFishEnable=!1,t._autoCreateFishFixTime=5e3,t.autoCreateFishID=0,t._autoSkillFishEnable=!1,t._autoSkillFishID=0,t.onKeyDown=null,t}return __extends(t,e),t.prototype.listNotificationInterests=function(){return GameSettingProxy.debug?[GameEvent.ApplicationFacadeEvent.AWAKE_COMPLETE,GameEvent.ResourceProxyEvent.LOAD_COMPLETE_NON_PRELOAD_GROUP,GameEvent.DebuggerEvent.ENABLE_GOLDFINGER_VIEW,GameEvent.DebuggerEvent.DISABLE_GOLDFINGER_VIEW,GameEvent.DebuggerEvent.SHOW_GOLDFINGER_VIEW,GameEvent.DebuggerEvent.HIDE_GOLDFINGER_VIEW,GameEvent.DebuggerEvent.SET_ITEM_GOLDFINGER_VIEW,GameEvent.ProtocolProxyEvent.MODIFY_COMPLETE_SC_FIRE_VALUE,GameEvent.ProtocolProxyEvent.MODIFY_COMPLETE_SC_SYNC_VALUE,GameEvent.SceneEvent.UNLOAD_BATTLE_SCENE,GameEvent.BattleCaiShenFaFaFaViewMediatorEvent.READY_COMPLETE,GameEvent.BattleWheelOfFortuneViewMediatorEvent.READY_COMPLETE]:[]},t.prototype.handleNotification=function(e){var t=e.getBody();switch(e.getName()){case GameEvent.ApplicationFacadeEvent.AWAKE_COMPLETE:this.facadeAwakeComplete();break;case GameEvent.ResourceProxyEvent.LOAD_COMPLETE_NON_PRELOAD_GROUP:t==GameEnum.LoadingCollectionTypeEnum.Lobby&&(this.resourceComplete(),this.init());break;case GameEvent.DebuggerEvent.ENABLE_GOLDFINGER_VIEW:this._allMediator._debugSkinViewMediator.selectedIndexTabBar(GameEnum.DebuggerViewTypeEnum.Goldfinger),this.enable();break;case GameEvent.DebuggerEvent.DISABLE_GOLDFINGER_VIEW:this.disable();break;case GameEvent.DebuggerEvent.SHOW_GOLDFINGER_VIEW:this.showView();break;case GameEvent.DebuggerEvent.HIDE_GOLDFINGER_VIEW:this.hideView();break;case GameEvent.DebuggerEvent.SET_ITEM_GOLDFINGER_VIEW:this._view.setItem(e.getBody()[0],e.getBody()[1],e.getBody()[2]),this.refresh();break;case GameEvent.ProtocolProxyEvent.MODIFY_COMPLETE_SC_FIRE_VALUE:break;case GameEvent.ProtocolProxyEvent.MODIFY_COMPLETE_SC_SYNC_VALUE:this.parserSCSyncEntity(t);break;case GameEvent.SceneEvent.UNLOAD_BATTLE_SCENE:this.disableAutoClick(),this.disableAutoCreateFish(),this.disableAutoSkillFish(),this.disableAutoTestPayout();break;case GameEvent.BattleCaiShenFaFaFaViewMediatorEvent.READY_COMPLETE:this._autoClickEnable&&this.clickEnvelopeByCaiShenFaFaFa(t);break;case GameEvent.BattleWheelOfFortuneViewMediatorEvent.READY_COMPLETE:this._autoClickEnable&&this.clickByWheelOfFortune(t)}},t.prototype.nextAwake=function(){this._view=new DebugListSkinView,this.getViewComponent().addChild(this._view),this._view.name=t.NAME,this._view.visible=!1},t.prototype.nextStart=function(){var e=this;this._view.setItem(t.NAME,void 0,void 0),this._view.start(),this._view.itemTapCallback=function(t){return e.onItemTapHandle(t)}},t.prototype.nextInit=function(){var e=this;this._view.init(),this._keyMap=new Array,this._keyMap[KeyEnum[KeyEnum.One]]=function(){return e.sendNotification(GameEvent.DebuggerEvent.SET_ITEM_GOLDFINGER_VIEW,[KeyEnum[KeyEnum.One],"GoldfingerView"])},this._keyMap[KeyEnum[KeyEnum.Two]]=function(){return e.sendNotification(GameEvent.DebuggerEvent.SET_ITEM_GOLDFINGER_VIEW,[KeyEnum[KeyEnum.Two],"ControlPanelView"])},this._keyMap[KeyEnum[KeyEnum.Three]]=function(){return e.sendNotification(GameEvent.DebuggerEvent.SET_ITEM_GOLDFINGER_VIEW,[KeyEnum[KeyEnum.Three],"LogMonitorView"])},this._keyMap[KeyEnum[KeyEnum.Four]]=function(){return e.sendNotification(GameEvent.DebuggerEvent.SET_ITEM_GOLDFINGER_VIEW,[KeyEnum[KeyEnum.Four],"GroupListView"])},this._keyMap[KeyEnum[KeyEnum.Q]]=function(){return e.sendNotification(GameEvent.DebuggerEvent.SET_ITEM_GOLDFINGER_VIEW,[KeyEnum[KeyEnum.Q],""])},this._keyMap[KeyEnum[KeyEnum.W]]=function(){return e.sendNotification(GameEvent.DebuggerEvent.SET_ITEM_GOLDFINGER_VIEW,[KeyEnum[KeyEnum.W],"showLog"])},this._keyMap[KeyEnum[KeyEnum.E]]=function(){return e.sendNotification(GameEvent.DebuggerEvent.SET_ITEM_GOLDFINGER_VIEW,[KeyEnum[KeyEnum.E],""])},this._keyMap[KeyEnum[KeyEnum.R]]=function(){return e.sendNotification(GameEvent.DebuggerEvent.SET_ITEM_GOLDFINGER_VIEW,[KeyEnum[KeyEnum.R],""])},this._keyMap[KeyEnum[KeyEnum.T]]=function(){return e.sendNotification(GameEvent.DebuggerEvent.SET_ITEM_GOLDFINGER_VIEW,[KeyEnum[KeyEnum.T],"CaiShenFaFaFa"])},this._keyMap[KeyEnum[KeyEnum.Y]]=function(){return e.sendNotification(GameEvent.DebuggerEvent.SET_ITEM_GOLDFINGER_VIEW,[KeyEnum[KeyEnum.Y],"CaiShenFaFaFa"])},this._keyMap[KeyEnum[KeyEnum.U]]=function(){return e.sendNotification(GameEvent.DebuggerEvent.SET_ITEM_GOLDFINGER_VIEW,[KeyEnum[KeyEnum.U],"CaiShenFaFaFa"])},this._keyMap[KeyEnum[KeyEnum.I]]=function(){return e.sendNotification(GameEvent.DebuggerEvent.SET_ITEM_GOLDFINGER_VIEW,[KeyEnum[KeyEnum.I],"WheelOfFortune"])},this._keyMap[KeyEnum[KeyEnum.O]]=function(){return e.sendNotification(GameEvent.DebuggerEvent.SET_ITEM_GOLDFINGER_VIEW,[KeyEnum[KeyEnum.O],"WheelOfFortune"])},this._keyMap[KeyEnum[KeyEnum.P]]=function(){return e.sendNotification(GameEvent.DebuggerEvent.SET_ITEM_GOLDFINGER_VIEW,[KeyEnum[KeyEnum.P],"WheelOfFortune"])},this._keyMap[KeyEnum[KeyEnum.A]]=function(){return e.sendNotification(GameEvent.DebuggerEvent.SET_ITEM_GOLDFINGER_VIEW,[KeyEnum[KeyEnum.A],"Payou(Bet&)"])},this._keyMap[KeyEnum[KeyEnum.S]]=function(){return e.sendNotification(GameEvent.DebuggerEvent.SET_ITEM_GOLDFINGER_VIEW,[KeyEnum[KeyEnum.S],""])},this._keyMap[KeyEnum[KeyEnum.F]]=function(){return e.sendNotification(GameEvent.DebuggerEvent.SET_ITEM_GOLDFINGER_VIEW,[KeyEnum[KeyEnum.F],"(createFish)"])},this._keyMap[KeyEnum[KeyEnum.G]]=function(){return e.sendNotification(GameEvent.DebuggerEvent.SET_ITEM_GOLDFINGER_VIEW,[KeyEnum[KeyEnum.G],"(+"])},this._keyMap[KeyEnum[KeyEnum.H]]=function(){return e.sendNotification(GameEvent.DebuggerEvent.SET_ITEM_GOLDFINGER_VIEW,[KeyEnum[KeyEnum.H],"(createFish)"])},this._keyMap[KeyEnum[KeyEnum.J]]=function(){return e.sendNotification(GameEvent.DebuggerEvent.SET_ITEM_GOLDFINGER_VIEW,[KeyEnum[KeyEnum.J],"maintainceAnounce"])},this._keyMap[KeyEnum[KeyEnum.SemiColon]]=function(){return e.sendNotification(GameEvent.DebuggerEvent.SET_ITEM_GOLDFINGER_VIEW,[KeyEnum[KeyEnum.SemiColon],""])},this._keyMap[KeyEnum[KeyEnum.Z]]=function(){return e.sendNotification(GameEvent.DebuggerEvent.SET_ITEM_GOLDFINGER_VIEW,[KeyEnum[KeyEnum.Z],"createSound"])},this._keyMap[KeyEnum[KeyEnum.X]]=function(){return e.sendNotification(GameEvent.DebuggerEvent.SET_ITEM_GOLDFINGER_VIEW,[KeyEnum[KeyEnum.X],"createEffect"])},this._keyMap[KeyEnum[KeyEnum.C]]=function(){return e.sendNotification(GameEvent.DebuggerEvent.SET_ITEM_GOLDFINGER_VIEW,[KeyEnum[KeyEnum.C],"createScore"])},this._keyMap[KeyEnum[KeyEnum.V]]=function(){return e.sendNotification(GameEvent.DebuggerEvent.SET_ITEM_GOLDFINGER_VIEW,[KeyEnum[KeyEnum.V],"createMedals"])},this._keyMap[KeyEnum[KeyEnum.B]]=function(){return e.sendNotification(GameEvent.DebuggerEvent.SET_ITEM_GOLDFINGER_VIEW,[KeyEnum[KeyEnum.B],"createCoin"])},this._keyMap[KeyEnum[KeyEnum.N]]=function(){return e.sendNotification(GameEvent.DebuggerEvent.SET_ITEM_GOLDFINGER_VIEW,[KeyEnum[KeyEnum.N],"createFort"])},this._keyMap[KeyEnum[KeyEnum.M]]=function(){return e.sendNotification(GameEvent.DebuggerEvent.SET_ITEM_GOLDFINGER_VIEW,[KeyEnum[KeyEnum.M],"createFC"])},this._keyMap[KeyEnum[KeyEnum.Comma]]=function(){return e.sendNotification(GameEvent.DebuggerEvent.SET_ITEM_GOLDFINGER_VIEW,[KeyEnum[KeyEnum.Comma],"createFish"])},this._keyMap[KeyEnum[KeyEnum.Period]]=function(){return e.sendNotification(GameEvent.DebuggerEvent.SET_ITEM_GOLDFINGER_VIEW,[KeyEnum[KeyEnum.Period],"createSpecialEffect"])};for(var t in this._keyMap)this._keyMap[t]();this.autoCreateFishID=this._allMediator._controlPanelViewMediator.createFishID},t.prototype.nextReset=function(){this._view.reset()},t.prototype.nextEnable=function(){this.addListeners()},t.prototype.nextDisable=function(){this.reomveListeners()},t.prototype.nextRefresh=function(){this._view.refresh()},t.prototype.showView=function(){this._view.enable()},t.prototype.hideView=function(){this._view.disable()},t.prototype.onItemTapHandle=function(e){this.parserTapItem(e.item)},t.prototype.addListeners=function(){document.addEventListener("keydown",this.onKeyDown)},t.prototype.reomveListeners=function(){document.removeEventListener("keydown",this.onKeyDown)},t.prototype.keyDown=function(e){GameSettingProxy.debug&&this.parserKeyDown(e.keyCode)},t.prototype.parserKeyDown=function(e){var t=this._allMediator._controlPanelViewMediator,o=this._allMediator._debugSkinViewMediator;switch(e){case KeyEnum.Escape:o.toggleToggleButton();break;case KeyEnum.Equals:break;case KeyEnum.One:o.selecteToggleButton(!0),this.sendNotification(ChangeDebuggerViewCommand.NAME,GameEnum.DebuggerViewTypeEnum.Goldfinger);break;case KeyEnum.Two:o.selecteToggleButton(!0),this.sendNotification(ChangeDebuggerViewCommand.NAME,GameEnum.DebuggerViewTypeEnum.ControlPanel);break;case KeyEnum.Three:o.selecteToggleButton(!0),this.sendNotification(ChangeDebuggerViewCommand.NAME,GameEnum.DebuggerViewTypeEnum.LogMonitor);break;case KeyEnum.Four:o.selecteToggleButton(!0),this.sendNotification(ChangeDebuggerViewCommand.NAME,GameEnum.DebuggerViewTypeEnum.GroupList);break;case KeyEnum.Q:break;case KeyEnum.W:ApplicationFacade.getInstance().retrieveProxy(SmartFoxProxy.NAME)._isLog=!1,ApplicationFacade.getInstance().retrieveProxy(ProtocolProxy.NAME)._isLog=!1,ApplicationFacade.getInstance().retrieveProxy(WebBridgeProxy.NAME)._isLog=!1;break;case KeyEnum.E:break;case KeyEnum.R:break;case KeyEnum.T:var i=new LuckyDrawEntity;i.luckyDrawType=GameName.SpecialFeatureName.SF_03,i.awardOddsCount=1,i.showOdds=[999999,888888,777777,666666,555555],i.totalWin=Utils.MathTool.multiply(999999,1e3),i.bet=100;for(var n=void 0,a=0;a<this._allProxy._playerViewEntityArrayProxy.getPlayerViewEntityArray().length;a++){var r=this._allProxy._playerViewEntityArrayProxy.getPlayerViewEntityArray()[a];if(!r.isSelf){n=r,n.luckyDrawEntityArray.push(i),this.sendNotification(GameEvent.BattleCaiShenFaFaFaViewMediatorEvent.ENABLE,n);break}}break;case KeyEnum.Y:var i=new LuckyDrawEntity;i.luckyDrawType=GameName.SpecialFeatureName.SF_03,i.awardOddsCount=1,i.showOdds=[999999,888888,777777,666666,555555],i.totalWin=Utils.MathTool.multiply(999999,1e3),i.bet=100;var n=void 0;if(n=this._allProxy._playerViewEntityArrayProxy.getPlayerViewEntityBySelf(),n&&(n.luckyDrawEntityArray.push(i),n.bulletType!=GameEnum.FortTableEnum.MegaDrill&&this._allProxy._gameDataProxy.playerNowStatus==GameName.SpecialFeatureName.NORMAL)){var s=ApplicationFacade.getInstance().retrieveProxy(GameDataProxy.NAME);s.gameSceneByShow==GameEnum.SceneTypeEnum.Battle&&this.sendNotification(GameEvent.BattleCaiShenFaFaFaViewMediatorEvent.ENABLE,n)}break;case KeyEnum.U:this.sendNotification(GameEvent.BattleCaiShenFaFaFaViewMediatorEvent.DISABLE);break;case KeyEnum.I:var n=void 0;n=this._allProxy._playerViewEntityArrayProxy.getPlayerViewEntityBySelf();var l=Utils.MathTool.multiply(n.bet,.001),c=new LuckyDrawEntity;c.luckyDrawType=GameName.SpecialFeatureName.SF_02,c.awardOddsCount=1,c.showOdds=[40*l,80*l,120*l,160*l,200*l,40*l,80*l,120*l,160*l,200*l],c.totalWin=Utils.MathTool.multiply(999999,1e3),c.bet=n.bet,c.selectIndex=1;for(var a=0;a<this._allProxy._playerViewEntityArrayProxy.getPlayerViewEntityArray().length;a++){var r=this._allProxy._playerViewEntityArrayProxy.getPlayerViewEntityArray()[a];if(!r.isSelf){n=r,n.luckyDrawEntityArray.push(c),this.sendNotification(GameEvent.BattleWheelOfFortuneViewMediatorEvent.ENABLE,n);break}}break;case KeyEnum.O:var n=void 0;n=this._allProxy._playerViewEntityArrayProxy.getPlayerViewEntityBySelf();var l=Utils.MathTool.multiply(n.bet,.001),c=new LuckyDrawEntity;c.luckyDrawType=GameName.SpecialFeatureName.SF_02,c.awardOddsCount=1,c.showOdds=[40*l,80*l,120*l,160*l,200*l,40*l,80*l,120*l,160*l,200*l],c.totalWin=Utils.MathTool.multiply(999999,1e3),c.bet=n.bet,c.selectIndex=1,n.luckyDrawEntityArray.push(c),n.bulletType!=GameEnum.FortTableEnum.MegaDrill&&this._allProxy._gameDataProxy.playerNowStatus==GameName.SpecialFeatureName.NORMAL&&this.sendNotification(GameEvent.BattleWheelOfFortuneViewMediatorEvent.ENABLE,n);break;case KeyEnum.P:this.sendNotification(GameEvent.BattleWheelOfFortuneViewMediatorEvent.DISABLE);break;case KeyEnum.A:this._autoTestPayoutEnable=!this._autoTestPayoutEnable,this._autoTestPayoutEnable?this.enableAutoTestPayout(0,0):this.disableAutoTestPayout();
break;case KeyEnum.S:var h=new ProtocolEntity.SCBroadcastDataEntity;h.uid="ABCD********",h.roomType=1,h.multiplier=600,h.targetId=103,h.win=700;var u=new ProtocolEntity.SCBroadcastDataEntity;u.uid="ABCD********",u.roomType=1,u.multiplier=600,u.targetId=103,u.win=400,this.sendNotification(GameEvent.ProtocolProxyEvent.MODIFY_COMPLETE_BROADCAST,[h,u]);break;case KeyEnum.D:break;case KeyEnum.F:this._autoCreateFishEnable=!this._autoCreateFishEnable,this._autoCreateFishEnable?this.enableAutoCreateFish(this._allMediator._controlPanelViewMediator.createFishID):this.disableAutoCreateFish();break;case KeyEnum.G:this._autoClickEnable=!this._autoClickEnable,this._autoClickEnable?this.enableAutoClick():this.disableAutoClick();break;case KeyEnum.H:this._autoSkillFishEnable=!this._autoSkillFishEnable,this._autoSkillFishEnable?this.enableAutoSkillFish(this._allMediator._controlPanelViewMediator.createFishID):this.disableAutoSkillFish();break;case KeyEnum.J:var p=Protocol_App.maintenanceAnnounce;this.sendNotification(ParserProtocolCommand.NAME,[p,!0]);break;case KeyEnum.K:this.sendNotification(ParserProtocolCommand.NAME,[0,{bSystemError:!0,iPlayerID:"sptest1234",iErrorCode:10,iExtraData:0}]);break;case KeyEnum.L:break;case KeyEnum.SemiColon:this.sendNotification(GameEvent.BattleSceneEvent.CHANGE_BACKGROUND);break;case KeyEnum.Z:var y=t.createSoundID,E=t.createSoundVolume;t.createSound(y,E);break;case KeyEnum.X:var y=t.createEffectID;t.createEffect(y);break;case KeyEnum.C:var y=t.createScoreID;t.createScore(y);break;case KeyEnum.V:var y=t.createMedalsID;t.createMedals(y);break;case KeyEnum.B:var y=t.createCoinID;t.createCoin(y);break;case KeyEnum.N:var y=t.createFortID;t.createFort(y);break;case KeyEnum.M:var y=t.createFCID;t.createFC(y);break;case KeyEnum.Comma:var y=t.createFishID;t.createFish(y);break;case KeyEnum.Period:var y=t.createSpecialEffectID;t.createSpecialEffect(y);break;case KeyEnum.ForwardSlash:}},t.prototype.parserTapItem=function(e){var t=e[DebugIRSkinView.PROPERTY_KEY_TEXT];this.parserKeyDown(KeyEnum[t])},t.prototype.parserSCSyncEntity=function(e){this.handleEnableAutoTestPayout(e),this.handleEnableAutoSkillFish(e)},t.prototype.handleEnableAutoTestPayout=function(e){if(this._autoTestPayoutEnable&&0!=this._allProxy._playerViewEntityArrayProxy.checkIsSelfByPlayerID(e.playerId)&&!(e.spinResult.mechanismResult.hitResult.killCount<=0)){var t=this.getFishTableEntityByIndex(this._autoTestPayoutFishTableEntityArrayIndex),o=this.getBetByIndex(this._autoTestPayoutBetArrayIndex),i=e.spinRequest.credit,n=e.spinResult.mechanismResult.hitResult.totalWin;if(t.id==e.spinRequest.targetId&&o==i){this._allProxy._fishViewObjectManagerProxy.stopAll();var a=this._allProxy._protocolProxy.scRoomLogin.iDenom,r=Utils.TranslateTool.bet2CashTenDolla(i,a),s=Utils.TranslateTool.win2CashTenDolla(n,a),l=Utils.TranslateTool.getPayout(n,i);if(t.id==GameEnum.FishTableEnum.G_102||t.id==GameEnum.FishTableEnum.G_103){var c=void 0;t.id==GameEnum.FishTableEnum.G_102?c=Utils.GameTool.getWheelOfFortuneDataIndex(e.spinResult.mechanismResult):t.id==GameEnum.FishTableEnum.G_103&&(c=Utils.GameTool.getCaiShenFaFaFaDataIndex(e.spinResult.mechanismResult)),c>=0&&(n=e.spinResult.mechanismResult.specialFeatureResults[c].totalWin,s=Utils.TranslateTool.win2CashTenDolla(n,a),l=Utils.TranslateTool.getPayout(n,i))}var h=t.payout.toString().split("-"),u=Number(h[0]),p=Number(h[0]);h[1]&&(p=Number(h[1])),Logger.log("[autoTest] s_SymbolID:"+e.spinRequest.targetId+", s_bet:"+i+", s_Win:"+n+", c_denom:"+a+", c_Bet:"+r+", c_Win:"+s+", c_Payout:"+l),(u>l||l>p)&&Logger.log("[autoTest][error] payout != table value, s_SymbolID:"+e.spinRequest.targetId+", c_payout:"+l+", min:"+u+", max:"+p),this._autoTestPayoutFishTableEntityArrayIndex++;var y=!1;if(this._autoTestPayoutFishTableEntityArrayIndex>TableEntityProxy.getInstance().fishTableEntityArray.length-1?y=!0:(t=this.getFishTableEntityByIndex(this._autoTestPayoutFishTableEntityArrayIndex),t.id>=GameEnum.FishTableEnum.S_200&&(y=!0)),y){this._autoTestPayoutFishTableEntityArrayIndex=0,this._autoTestPayoutBetArrayIndex++;var E=this._allProxy._playerViewEntityArrayProxy.getPlayerViewEntityBySelf();if(this._autoTestPayoutBetArrayIndex>E.betArray.length-1)return void this.disableAutoTestPayout()}this.autoCreateFishID=this.getFishTableEntityByIndex(this._autoTestPayoutFishTableEntityArrayIndex).id}}},t.prototype.handleEnableAutoSkillFish=function(e){this._autoSkillFishEnable&&0!=this._allProxy._playerViewEntityArrayProxy.checkIsSelfByPlayerID(e.playerId)&&(e.spinResult.mechanismResult.hitResult.killCount<=0||e.spinRequest.targetId==this._autoSkillFishID&&this.disableAutoSkillFish())},t.prototype.enableAutoTestPayout=function(e,t){this._autoTestPayoutEnable=!0,this._autoTestPayoutFishTableEntityArrayIndex=e,this._autoTestPayoutBetArrayIndex=t,this.enableAutoClick();var o=this.getFishTableEntityByIndex(this._autoTestPayoutFishTableEntityArrayIndex).id;this.enableAutoCreateFish(o)},t.prototype.disableAutoTestPayout=function(){this._autoTestPayoutEnable=!1,this.disableAutoClick(),this.disableAutoCreateFish()},t.prototype.enableAutoCreateFish=function(e){this._autoCreateFishEnable=!0,this._autoCreateFishTimer||(this._autoCreateFishTimer=new egret.Timer(this._autoCreateFishFixTime,0),this._autoCreateFishTimer.addEventListener(egret.TimerEvent.TIMER,this.autoCreateFishTimerCallBack,this)),this._autoCreateFishTimer.start(),this.autoCreateFishID=e,this.sendNotification(GameEvent.GoldfingerViewMediatorEvent.ENABLE_COMPLTET_AUTO_CREATE_FISH)},t.prototype.disableAutoCreateFish=function(){this._autoCreateFishEnable=!1,this._autoCreateFishTimer&&this._autoCreateFishTimer.stop(),this.sendNotification(GameEvent.GoldfingerViewMediatorEvent.DISABLE_COMPLTET_AUTO_CREATE_FISH)},t.prototype.autoCreateFishTimerCallBack=function(){this._allMediator._controlPanelViewMediator.createFish(this.autoCreateFishID)},t.prototype.enableAutoClick=function(){this._autoClickEnable=!0,this._autoClickBackgroundTimer||(this._autoClickBackgroundTimer=new egret.Timer(this._autoClickBackgroundFixTime,0),this._autoClickBackgroundTimer.addEventListener(egret.TimerEvent.TIMER,this.clickBackgroundByBattleScene,this)),this._autoClickBackgroundTimer.start()},t.prototype.disableAutoClick=function(){this._autoClickEnable=!1,this._autoClickBackgroundTimer&&this._autoClickBackgroundTimer.stop()},t.prototype.clickBackgroundByBattleScene=function(){var e=ApplicationFacade.getInstance().retrieveMediator(BattleSceneMediator.NAME),t=new egret.TouchEvent(egret.TouchEvent.TOUCH_BEGIN,!1,!1,500,250);t.$target=e.getViewComponent(),this.sendNotification(GameEvent.SceneEvent.BATTLE_TOUCH_BEGIN,t),this.sendNotification(GameEvent.SceneEvent.BATTLE_TOUCH_END,t)},t.prototype.clickEnvelopeByCaiShenFaFaFa=function(e){var t=new egret.TouchEvent(egret.TouchEvent.TOUCH_TAP,!1,!1,500,250);t.$target=e,e.dispatchEvent(t)},t.prototype.clickByWheelOfFortune=function(e){var t=new egret.TouchEvent(egret.TouchEvent.TOUCH_TAP,!1,!1,340,370);t.$target=e,e.dispatchEvent(t)},t.prototype.enableAutoSkillFish=function(e){this._autoSkillFishEnable=!0,this._autoSkillFishID=e,this.enableAutoClick(),this.enableAutoCreateFish(e)},t.prototype.disableAutoSkillFish=function(){this._autoSkillFishEnable=!1,this.disableAutoClick(),this.disableAutoCreateFish()},t.prototype.getFishTableEntityByIndex=function(e){return TableEntityProxy.getInstance().fishTableEntityArray[e]},t.prototype.getBetByIndex=function(e){var t=this._allProxy._playerViewEntityArrayProxy.getPlayerViewEntityBySelf();return t.betArrayIndex=e,t.bet},t.NAME="GoldfingerViewMediator",t}(BaseViewMediator);__reflect(GoldfingerViewMediator.prototype,"GoldfingerViewMediator");var GroupListViewMediator=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._logScope="[GroupListViewMediator]",t._isLog=!1,t}return __extends(t,e),t.prototype.listNotificationInterests=function(){return GameSettingProxy.debug?[GameEvent.ApplicationFacadeEvent.AWAKE_COMPLETE,GameEvent.ResourceProxyEvent.LOAD_COMPLETE_NON_PRELOAD_GROUP,GameEvent.DebuggerEvent.SHOW_GROUPLIST_VIEW,GameEvent.DebuggerEvent.HIDE_GROUPLIST_VIEW,GameEvent.DebuggerEvent.SET_ITEM_GROUPLIST_VIEW,GameEvent.DebuggerEvent.TAP_ITEM_LOGMONITOR_VIEW]:[]},t.prototype.handleNotification=function(e){var t=e.getBody();switch(e.getName()){case GameEvent.ApplicationFacadeEvent.AWAKE_COMPLETE:this.facadeAwakeComplete();break;case GameEvent.ResourceProxyEvent.LOAD_COMPLETE_NON_PRELOAD_GROUP:t==GameEnum.LoadingCollectionTypeEnum.Lobby&&(this.resourceComplete(),this.init());break;case GameEvent.DebuggerEvent.SHOW_GROUPLIST_VIEW:this._allMediator._debugSkinViewMediator.selectedIndexTabBar(GameEnum.DebuggerViewTypeEnum.GroupList),this.enable();break;case GameEvent.DebuggerEvent.HIDE_GROUPLIST_VIEW:this.disable();break;case GameEvent.DebuggerEvent.SET_ITEM_GROUPLIST_VIEW:this._view.setItem(e.getBody()[0],e.getBody()[1],e.getBody()[2]);break;case GameEvent.DebuggerEvent.TAP_ITEM_LOGMONITOR_VIEW:this._view.removeAllItem(),this._timer.start(),this.sendNotification(ChangeDebuggerViewCommand.NAME,GameEnum.DebuggerViewTypeEnum.GroupList),this._data=e.getBody(),this.parser(this._data)}},t.prototype.nextAwake=function(){this._view=new DebugListSkinView,this.getViewComponent().addChild(this._view),this._view.name=t.NAME,this._view.visible=!1},t.prototype.nextStart=function(){var e=this;this._view.setItem(t.NAME,void 0,void 0),this._view.itemTapCallback=function(){return e.onItemTapHandle(e._view.itemTapCallback.arguments[0])},this._view.start()},t.prototype.nextInit=function(){this._view.init(),this._view.setItem(t.NAME,void 0,void 0),this._timer=new egret.Timer(1e3,0),this._timer.addEventListener(egret.TimerEvent.TIMER,this.timerFunc,this)},t.prototype.nextReset=function(){},t.prototype.nextEnable=function(){this._view.enable()},t.prototype.nextDisable=function(){this._view.disable()},t.prototype.nextRefresh=function(){this._view.refresh()},t.prototype.onItemTapHandle=function(e){this._view.removeAllItem()},t.prototype.parser=function(e){var t=e[DebugIRSkinView.PROPERTY_KEY_TEXT];-1!=t.indexOf("GeneratorMap")?this.parserMap(e):this.parserBase(e)},t.prototype.parserBase=function(e){var t=e[DebugIRSkinView.PROPERTY_DATA];for(var o in t)if(t.hasOwnProperty(o)){var i=t[o],n=o,a="";if("number"==typeof i||"string"==typeof i)a+=""+i;else for(var r in i)if(i.hasOwnProperty(r)&&"$"!=r[0]){var s=i[r];s instanceof Array&&(a+=r+":["+s.length+"], ")}this.sendNotification(GameEvent.DebuggerEvent.SET_ITEM_GROUPLIST_VIEW,[n,a])}},t.prototype.parserMap=function(e){var t=e[DebugIRSkinView.PROPERTY_DATA];for(var o in t)if(t.hasOwnProperty(o)){var i=t[o],n=o,a="";for(var r in i)if(i.hasOwnProperty(r)){var s=i[r],l=this.getPropertyCountSelf(s._idlePool),c=this.getPropertyCountSelf(s._usedPool);a+="idlePool:"+l+", ",a+="usedPool:"+c+", "}this.sendNotification(GameEvent.DebuggerEvent.SET_ITEM_GROUPLIST_VIEW,[n,a])}},t.prototype.parserArray=function(e){var t="";for(var o in e){var i=e[o],n="";for(var a in i)i.hasOwnProperty(a)&&(i[a]instanceof Array||(n+=a+":"+i[a]+", "));t+="["+o+"]:"+n}return t},t.prototype.getPropertyCountSelf=function(e){var t="",o=0;for(var i in e)e.hasOwnProperty(i)&&o++;return t+=o.toString()},t.prototype.timerFunc=function(){this.parser(this._data)},t.NAME="GroupListViewMediator",t}(BaseViewMediator);__reflect(GroupListViewMediator.prototype,"GroupListViewMediator");var GSReconnectCommand=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._logScope="[GSReconnectCommand]",t._isLog=!1,t}return __extends(t,e),t.prototype.execute=function(e){var t=this.facade.retrieveProxy(WebBridgeProxy.NAME),o=this.facade.retrieveProxy(GameDataProxy.NAME),i=!1;e.getBody()&&(i=e.getBody()),i||SoundObjectManagerProxy.getInstance().inTransition||(o.isCloseMaintanceDialogRequest=!0,t.showErrorMsgByCode(301),t.requestTicket())},t.NAME="GSReconnectCommand",t}(puremvc.SimpleCommand);__reflect(GSReconnectCommand.prototype,"GSReconnectCommand",["ILogger"]);var GuideBattleSkinView=function(e){function t(){var t=e.call(this)||this;return t._logScope="[GuideBattleSkinView]",t._isLog=!1,t.name="GuideBattleSkinView",t.currentState=Utils.ResourceTool.language,t}return __extends(t,e),t.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),this.awake()},t.prototype.awake=function(){Logger.log("awake",this),this.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onTouchBeginHandle,this),this.menuLineMaskGroup.visible=!1,this.autoLineMaskGroup.visible=!1,this.lockLineMaskGroup.visible=!1},t.prototype.start=function(){Logger.log("start",this)},t.prototype.init=function(e){Logger.log("init",this),0==e.seat||2==e.seat?this.setPlayer(e,!1,this.rightBattlePlayerSkinView,this.rightCircleImage):this.setPlayer(e,!0,this.leftBattlePlayerSkinView,this.leftCircleImage)},t.prototype.reset=function(){Logger.log("reset",this),egret.Tween.removeTweens(this.leftCircleImage),egret.Tween.removeTweens(this.rightCircleImage),this.leftBattlePlayerSkinView.reset(),this.rightBattlePlayerSkinView.reset()},t.prototype.enable=function(){Logger.log("enable",this),this.visible=!0,this.alpha=1,this.leftBattlePlayerSkinView.enable(),this.rightBattlePlayerSkinView.enable()},t.prototype.disable=function(){Logger.log("disable",this),this.visible=!1,this.leftBattlePlayerSkinView.disable(),this.rightBattlePlayerSkinView.disable()},t.prototype.refresh=function(){Logger.log("refresh",this),this.leftBattlePlayerSkinView.refresh(),this.rightBattlePlayerSkinView.refresh()},t.prototype.setPlayer=function(e,t,o,i){t?(o.start(1),o.init(1),o.setPlayerInfo(e.credit,e.bet,e.denom,e.betArray,e.betLevelArray),o.leftPortGroup.visible=!1,o.rightPortGroup.visible=!1,this.leftPlayerGroup.visible=!0,this.rightPlayerGroup.visible=!1):(o.start(2),o.init(2),o.setPlayerInfo(e.credit,e.bet,e.denom,e.betArray,e.betLevelArray),o.leftPortGroup.visible=!1,o.rightPortGroup.visible=!1,this.leftPlayerGroup.visible=!1,this.rightPlayerGroup.visible=!0),i.scaleX=1.1,i.scaleY=1.1,egret.Tween.get(i,{loop:!0}).to({scaleX:1.2,scaleY:1.2},500).to({scaleX:1.1,scaleY:1.1},500)},t.prototype.playLineAnimation=function(){this.menuLineGroup.mask=this.menuLineMaskGroup,this.menuLineMaskGroup.height=60,this.menuLineMaskGroup.width=0,egret.Tween.get(this.menuLineMaskGroup).wait(600).to({width:400},200),this.autoLineGroup.mask=this.autoLineMaskGroup,this.autoLineMaskGroup.height=0,this.autoLineMaskGroup.width=120,egret.Tween.get(this.autoLineMaskGroup).to({height:300},600).to({width:400},140),this.lockLineGroup.mask=this.lockLineMaskGroup,this.lockLineMaskGroup.height=0,this.lockLineMaskGroup.width=120,egret.Tween.get(this.lockLineMaskGroup).to({height:300},600).to({width:400},140),this.autoImage.alpha=0,egret.Tween.get(this.autoImage).wait(560).to({alpha:1},280),this.lockImage.alpha=0,egret.Tween.get(this.lockImage).wait(560).to({alpha:1},280),this.menuImage.alpha=0,egret.Tween.removeTweens(this.menuImage),egret.Tween.get(this.menuImage).wait(560).to({alpha:1},280)},t.prototype.stopLineAnimation=function(){egret.Tween.get(this.menuLineMaskGroup).to({alpha:0},400),egret.Tween.get(this.autoLineMaskGroup).to({alpha:0},400),egret.Tween.get(this.lockLineMaskGroup).to({alpha:0},400),egret.Tween.get(this.autoImage).to({alpha:0},400),egret.Tween.get(this.lockImage).to({alpha:0},400),egret.Tween.get(this.menuImage).to({alpha:0},400)},t.prototype.onTouchBeginHandle=function(e){var t=this;Logger.log("onTouchBeginHandle",this),egret.Tween.get(this).to({alpha:0},400).call(function(){t.onTouchBeginCallback&&t.onTouchBeginCallback()})},t}(eui.Component);__reflect(GuideBattleSkinView.prototype,"GuideBattleSkinView",["IView"]);var GuideViewMediator=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._logScope="[GuideViewMediator]",t._isLog=!1,t._done=!1,t}return __extends(t,e),t.prototype.listNotificationInterests=function(){return[GameEvent.ApplicationFacadeEvent.AWAKE_COMPLETE,GameEvent.ResourceProxyEvent.LOAD_COMPLETE_NON_PRELOAD_GROUP,GameEvent.GuideViewMediatorEvent.ENABLE,GameEvent.GuideViewMediatorEvent.DISABLE,GameEvent.PlayerViewEntityArrayProxyEvent.ADD_COMPLETE_PLAYER]},t.prototype.handleNotification=function(e){var t=e.getBody();switch(e.getName()){case GameEvent.ApplicationFacadeEvent.AWAKE_COMPLETE:this.facadeAwakeComplete();break;case GameEvent.ResourceProxyEvent.LOAD_COMPLETE_NON_PRELOAD_GROUP:t==GameEnum.LoadingCollectionTypeEnum.Battle&&this.resourceComplete();break;case GameEvent.GuideViewMediatorEvent.ENABLE:this.enable();break;case GameEvent.GuideViewMediatorEvent.DISABLE:this.disable();break;case GameEvent.PlayerViewEntityArrayProxyEvent.ADD_COMPLETE_PLAYER:var o=t;o.isSelf&&this.init(t)}},t.prototype.nextAwake=function(){this._view=new GuideBattleSkinView,this.getViewComponent().addChild(this._view),this._view.visible=!1},t.prototype.nextStart=function(){var e=this;this._view.onTouchBeginCallback=function(){return e.onTouchBeginHandle()},this._view.start(),this._done=!1},t.prototype.nextInit=function(e){this._view.init(e)},t.prototype.nextReset=function(){this._view.reset()},t.prototype.nextEnable=function(){this._view.enable()},t.prototype.nextDisable=function(){this._view.disable()},t.prototype.nextRefresh=function(){this._view.refresh()},t.prototype.onTouchBeginHandle=function(){Logger.log("onTouchBeginHandle",this),this.sendNotification(GameEvent.GuideEvent.TOUCH_BEGIN),this.disable(),this._done=!0},t.NAME="GuideViewMediator",t}(BaseViewMediator);__reflect(GuideViewMediator.prototype,"GuideViewMediator");var HelpGameFeatureSkinView=function(e){function t(){var t=e.call(this)||this;return t._logScope="[HelpGameFeatureSkinView]",t._isLog=!1,t.name="HelpGameFeatureSkinView",t.currentState=Utils.ResourceTool.language,t}return __extends(t,e),t.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),this.awake()},t.prototype.awake=function(){Logger.log("awake",this)},t.prototype.start=function(){Logger.log("start",this),this.setPage(0)},t.prototype.init=function(){Logger.log("init",this),this.setPage(0),this.previousButton.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onPageTouchTapHandle,this),this.nextButton.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onPageTouchTapHandle,this)},t.prototype.reset=function(){Logger.log("reset",this)},t.prototype.enable=function(){Logger.log("enable",this),this.visible=!0,this.setPage(0)},t.prototype.disable=function(){Logger.log("enable",this),this.visible=!1},t.prototype.refresh=function(){Logger.log("refresh",this)},t.prototype.setValue=function(e,t){var o=this["value_"+e];o&&(o.text=t)},t.prototype.onPageTouchTapHandle=function(e){Logger.log("onPageTouchTapHandle",this),SoundObjectManagerProxy.getInstance().play(GameEnum.SoundTableEnum.SE_MenuPress_02);var t=this.helpViewStack.length-1,o=this.helpViewStack.selectedIndex;e.target==this.previousButton?o--:o++,0>=o?o=0:o>=t&&(o=t),this.setPage(o)},t.prototype.setPage=function(e){if(Logger.log("setPage index:"+e,this),1==this.helpViewStack.length)return this.previousButton.visible=!1,this.nextButton.visible=!1,this.helpViewStack.selectedIndex=0,void(this.pageLabel.text=String(e+1)+" / "+this.helpViewStack.length);var t=!0,o=!0,i=this.helpViewStack.length-1;0>=e?(e=0,t=!1):e>=i&&(e=i,o=!1),this.previousButton.visible=t,this.nextButton.visible=o,this.helpViewStack.selectedIndex=e,this.pageLabel.text=String(e+1)+" / "+this.helpViewStack.length},t}(eui.Component);__reflect(HelpGameFeatureSkinView.prototype,"HelpGameFeatureSkinView",["IView"]);var HelpGameRuleSkinView=function(e){function t(){var t=e.call(this)||this;return t._logScope="[HelpGameRuleSkinView]",t._isLog=!1,t.name="HelpGameRuleSkinView",t.currentState=Utils.ResourceTool.language,t}return __extends(t,e),t.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),this.awake()},t.prototype.awake=function(){Logger.log("awake",this)},t.prototype.start=function(){Logger.log("start",this),this.setPage(0)},t.prototype.init=function(){Logger.log("init",this),this.setPage(0),this.previousButton.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onPageTouchTapHandle,this),this.nextButton.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onPageTouchTapHandle,this)},t.prototype.reset=function(){Logger.log("reset",this)},t.prototype.enable=function(){Logger.log("enable",this),this.visible=!0,this.setPage(0)},t.prototype.disable=function(){Logger.log("enable",this),this.visible=!1},t.prototype.refresh=function(){Logger.log("refresh",this)},t.prototype.setValue=function(e,t){var o=this["value_"+e];o&&(o.text=t)},t.prototype.onPageTouchTapHandle=function(e){Logger.log("onPageTouchTapHandle",this);var t=this.helpViewStack.length-1,o=this.helpViewStack.selectedIndex;e.target==this.previousButton?o--:o++,0>=o?o=0:o>=t&&(o=t),this.setPage(o)},t.prototype.setPage=function(e){if(Logger.log("setPage index:"+e,this),1==this.helpViewStack.length)return this.previousButton.visible=!1,this.nextButton.visible=!1,this.helpViewStack.selectedIndex=0,void(this.pageLabel.text=String(e+1)+" / "+this.helpViewStack.length);var t=!0,o=!0,i=this.helpViewStack.length-1;0>=e?(e=0,t=!1):e>=i&&(e=i,o=!1),this.previousButton.visible=t,this.nextButton.visible=o,this.helpViewStack.selectedIndex=e,this.pageLabel.text=String(e+1)+" / "+this.helpViewStack.length},t}(eui.Component);__reflect(HelpGameRuleSkinView.prototype,"HelpGameRuleSkinView",["IView"]);var HelpPayTableSkinView=function(e){function t(){var t=e.call(this)||this;return t._logScope="[HelpPayTableSkinView]",t._isLog=!1,t.name="HelpPayTableSkinView",t.currentState=Utils.ResourceTool.language,t}return __extends(t,e),t.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),this.awake()},t.prototype.awake=function(){Logger.log("awake",this)},t.prototype.start=function(){Logger.log("start",this),this.setPage(0)},t.prototype.init=function(){Logger.log("init",this),this.setPage(0),this.previousButton.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onPageTouchTapHandle,this),this.nextButton.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onPageTouchTapHandle,this)},t.prototype.reset=function(){Logger.log("reset",this)},t.prototype.enable=function(){Logger.log("enable",this),this.visible=!0,this.setPage(0)},t.prototype.disable=function(){Logger.log("enable",this),this.visible=!1},t.prototype.refresh=function(){Logger.log("refresh",this)},t.prototype.setValue=function(e,t){var o=this["value_"+e];o&&(o.text=t)},t.prototype.onPageTouchTapHandle=function(e){Logger.log("onPageTouchTapHandle",this),SoundObjectManagerProxy.getInstance().play(GameEnum.SoundTableEnum.SE_MenuPress_02);var t=this.helpViewStack.length-1,o=this.helpViewStack.selectedIndex;e.target==this.previousButton?o--:o++,0>=o?o=0:o>=t&&(o=t),this.setPage(o)},t.prototype.setPage=function(e){if(Logger.log("setPage index:"+e,this),1==this.helpViewStack.length)return this.previousButton.visible=!1,this.nextButton.visible=!1,this.helpViewStack.selectedIndex=0,void(this.pageLabel.text=String(e+1)+" / "+this.helpViewStack.length);var t=!0,o=!0,i=this.helpViewStack.length-1;0>=e?(e=0,t=!1):e>=i&&(e=i,o=!1),this.previousButton.visible=t,this.nextButton.visible=o,this.helpViewStack.selectedIndex=e,this.pageLabel.text=String(e+1)+" / "+this.helpViewStack.length},t}(eui.Component);__reflect(HelpPayTableSkinView.prototype,"HelpPayTableSkinView",["IView"]);var HelpPayTableSkinViewData=function(){function e(e,t){this.name="",this.value="",this.name=e,this.value=t}return e}();__reflect(HelpPayTableSkinViewData.prototype,"HelpPayTableSkinViewData");var HelpSkinView=function(e){function t(){var t=e.call(this)||this;return t._logScope="[HelpSkinView]",t._isLog=!1,t.name="HelpSkinView",t.currentState=Utils.ResourceTool.language,t}return __extends(t,e),t.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),this.awake()},t.prototype.awake=function(){Logger.log("awake",this)},t.prototype.start=function(){Logger.log("start",this),this.helpPayTableSkinView.start(),this.helpGameFeatureSkinView.start(),this.helpUserInterfaceSkinView.start()},t.prototype.init=function(e){Logger.log("init",this),this.helpPayTableSkinView.init(),this.helpPayTableSkinView.enable(),this.helpGameFeatureSkinView.init(),this.helpGameFeatureSkinView.enable(),this.helpUserInterfaceSkinView.init(),this.helpUserInterfaceSkinView.enable(),this.helpSkinViewData=e,this.exitButton.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onExitHandle,this),this.helpList.dataProvider=new eui.ArrayCollection(e.helpButtonDataArray),this.helpList.addEventListener(eui.ItemTapEvent.ITEM_TAP,this.onHelpTapHandle,this),this.helpViewStack.addEventListener(eui.PropertyEvent.PROPERTY_CHANGE,this.onViewStackIndexChange,this)},t.prototype.reset=function(){Logger.log("reset",this),this.helpPayTableSkinView.reset(),this.helpGameFeatureSkinView.reset(),this.helpUserInterfaceSkinView.reset(),this.exitButton.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onExitHandle,this),this.helpList.removeEventListener(eui.ItemTapEvent.ITEM_TAP,this.onExitHandle,this),this.helpViewStack.removeEventListener(eui.PropertyEvent.PROPERTY_CHANGE,this.onViewStackIndexChange,this)},t.prototype.enable=function(e){Logger.log("enable",this),this.visible=!0,SoundObjectManagerProxy.getInstance().play(GameEnum.SoundTableEnum.SE_MenuPress_02),this.helpViewStack.selectedIndex=e,this.helpPayTableSkinView.enable();for(var t=0;t<this.helpList.numChildren;t++){var o=this.helpList.getChildAt(t);t==e?o.titleImageSelect.visible=!0:o.titleImageSelect.visible=!1}},t.prototype.disable=function(){Logger.log("enable",this),this.visible=!1},t.prototype.refresh=function(e){Logger.log("refresh",this),this.playCountLabel.text="v. "+e},t.prototype.onHelpTapHandle=function(e){Logger.log("onHelpTapHandle",this),this.disable(),this.helpTapCallback&&this.helpTapCallback(e)},t.prototype.onExitHandle=function(e){Logger.log("onExitHandle",this),this.disable(),SoundObjectManagerProxy.getInstance().play(GameEnum.SoundTableEnum.SE_MenuPress_01),this.exitTapCallback&&this.exitTapCallback(e)},t.prototype.onViewStackIndexChange=function(e){e.currentTarget.selectedChild.getChildAt(0).enable()},t}(eui.Component);__reflect(HelpSkinView.prototype,"HelpSkinView",["IView"]);var HelpSkinViewButtonData=function(){function e(){}return e}();__reflect(HelpSkinViewButtonData.prototype,"HelpSkinViewButtonData");var HelpSkinViewData=function(){function e(){}return e}();__reflect(HelpSkinViewData.prototype,"HelpSkinViewData");var HelpUserInterfaceSkinView=function(e){function t(){var t=e.call(this)||this;return t._logScope="[HelpUserInterfaceSkinView]",t._isLog=!1,t.name="HelpUserInterfaceSkinView",t.currentState=Utils.ResourceTool.language,t}return __extends(t,e),t.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),this.awake()},t.prototype.awake=function(){Logger.log("awake",this)},t.prototype.start=function(){Logger.log("start",this),this.setPage(0)},t.prototype.init=function(){Logger.log("init",this),this.setPage(0),this.previousButton.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onPageTouchTapHandle,this),this.nextButton.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onPageTouchTapHandle,this)},t.prototype.reset=function(){Logger.log("reset",this)},t.prototype.enable=function(){Logger.log("enable",this),this.visible=!0,this.setPage(0)},t.prototype.disable=function(){Logger.log("enable",this),this.visible=!1},t.prototype.refresh=function(){Logger.log("refresh",this)},t.prototype.setValue=function(e,t){var o=this["value_"+e];o&&(o.text=t)},t.prototype.onPageTouchTapHandle=function(e){Logger.log("onPageTouchTapHandle",this);var t=this.helpViewStack.length-1,o=this.helpViewStack.selectedIndex;e.target==this.previousButton?o--:o++,0>=o?o=0:o>=t&&(o=t),this.setPage(o)},t.prototype.setPage=function(e){if(Logger.log("setPage index:"+e,this),1==this.helpViewStack.length)return this.previousButton.visible=!1,this.nextButton.visible=!1,this.helpViewStack.selectedIndex=0,void(this.pageLabel.text=String(e+1)+" / "+this.helpViewStack.length);var t=!0,o=!0,i=this.helpViewStack.length-1;0>=e?(e=0,t=!1):e>=i&&(e=i,o=!1),this.previousButton.visible=t,this.nextButton.visible=o,this.helpViewStack.selectedIndex=e,this.pageLabel.text=String(e+1)+" / "+this.helpViewStack.length},t}(eui.Component);__reflect(HelpUserInterfaceSkinView.prototype,"HelpUserInterfaceSkinView",["IView"]);var HelpViewMediator=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._logScope="[HelpViewMediator]",t._isLog=!1,t.reg=new RegExp(",","g"),t}return __extends(t,e),t.prototype.listNotificationInterests=function(){return[GameEvent.ApplicationFacadeEvent.AWAKE_COMPLETE,GameEvent.ResourceProxyEvent.LOAD_COMPLETE_NON_PRELOAD_GROUP,GameEvent.HelpViewMediatorEvent.ENABLE,GameEvent.HelpViewMediatorEvent.DISABLE,GameEvent.ProtocolProxyEvent.MODIFY_COMPLETE_SC_LOBBY_INFO_VALUE,GameEvent.ProtocolProxyEvent.MODIFY_COMPLETE_SC_ROOM_LOGIN_VALUE]},t.prototype.handleNotification=function(e){var t=e.getBody();switch(e.getName()){case GameEvent.ApplicationFacadeEvent.AWAKE_COMPLETE:this.facadeAwakeComplete();break;case GameEvent.ResourceProxyEvent.LOAD_COMPLETE_NON_PRELOAD_GROUP:t==GameEnum.LoadingCollectionTypeEnum.Lobby&&(this.resourceComplete(),this.init());break;case GameEvent.HelpViewMediatorEvent.ENABLE:this.enable(0);break;case GameEvent.HelpViewMediatorEvent.DISABLE:this.disable();break;case GameEvent.ProtocolProxyEvent.MODIFY_COMPLETE_SC_LOBBY_INFO_VALUE:this.refresh(t);break;case GameEvent.ProtocolProxyEvent.MODIFY_COMPLETE_SC_ROOM_LOGIN_VALUE:var o=t.iRoomNum;this._view.refresh(o.toString())}},t.prototype.nextAwake=function(){this._view=new HelpSkinView,this.getViewComponent().addChild(this._view),this._view.visible=!1},t.prototype.nextStart=function(){var e=this;this._view.helpTapCallback=function(t){return e.onHelpTapHandle(t)},this._view.exitTapCallback=function(t){return e.onExitTapHandle(t)},this._view.start()},t.prototype.nextInit=function(){this._view.init(this.createHelpSkinViewData())},t.prototype.nextReset=function(){this._view.reset()},t.prototype.nextEnable=function(e){this._view.enable(e)},t.prototype.nextDisable=function(){this._view.disable()},t.prototype.nextRefresh=function(e){var t=this._allProxy._protocolProxy.scUserInfo,o=e;if(o&&t){var i=Utils.GameTool.getZoneTypeArray(t),n=Utils.GameTool.getZonePlayerCount(i,t,o),a=""+n.toString().replace(this.reg,".");if(GameSettingProxy.debug){var r=Utils.GameTool.getZoneRoomCountArray(i,t,o);a+="."+r.toString().replace(this.reg,".")}this._view.refresh(a)}},t.prototype.onHelpTapHandle=function(e){Logger.log("onHelpTapHandle",this);var t=e.item;this.enable(t.index)},t.prototype.onExitTapHandle=function(e){Logger.log("onExitTapHandle",this),this.disable()},t.prototype.createHelpSkinViewData=function(){var e=new HelpSkinViewData;return e.helpButtonDataArray=this.createHelpSkinViewZoneDataArray(),e},t.prototype.createHelpSkinViewZoneDataArray=function(){var e=new Array,t=new HelpSkinViewButtonData;t.noSelectImage=Utils.StringTool.addPNG(Utils.StringTool.format(GameName.TextureName.HelpPayTable1,Utils.ResourceTool.language)),t.selectImage=Utils.StringTool.addPNG(Utils.StringTool.format(GameName.TextureName.HelpPayTable2,Utils.ResourceTool.language)),t.index=0,e.push(t);var o=new HelpSkinViewButtonData;o.noSelectImage=Utils.StringTool.addPNG(Utils.StringTool.format(GameName.TextureName.HelpGameFeature1,Utils.ResourceTool.language)),o.selectImage=Utils.StringTool.addPNG(Utils.StringTool.format(GameName.TextureName.HelpGameFeature2,Utils.ResourceTool.language)),o.index=1,e.push(o);var i=new HelpSkinViewButtonData;i.noSelectImage=Utils.StringTool.addPNG(Utils.StringTool.format(GameName.TextureName.UserInterface1,Utils.ResourceTool.language)),i.selectImage=Utils.StringTool.addPNG(Utils.StringTool.format(GameName.TextureName.UserInterface2,Utils.ResourceTool.language)),i.index=2,e.push(i);var n=new HelpSkinViewButtonData;return n.noSelectImage=Utils.StringTool.addPNG(Utils.StringTool.format(GameName.TextureName.HelpGameRule1,Utils.ResourceTool.language)),n.selectImage=Utils.StringTool.addPNG(Utils.StringTool.format(GameName.TextureName.HelpGameRule2,Utils.ResourceTool.language)),n.index=3,e.push(n),e
},t.NAME="HelpViewMediator",t}(BaseViewMediator);__reflect(HelpViewMediator.prototype,"HelpViewMediator");var LoadGameSceneCommand=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._logScope="[LoadGameSceneCommand]",t._isLog=!1,t}return __extends(t,e),t.prototype.execute=function(e){var t=e.getBody(),o=this.facade.retrieveProxy(GameDataProxy.NAME);o.gameSceneByEnable!=t&&(this.enableGameScene(t,o.gameSceneByEnable),o.gameSceneByEnable=t)},t.prototype.enableGameScene=function(e,t){Logger.log("changeGameScene newScene:"+GameEnum.SceneTypeEnum[e]+", oldScene:"+GameEnum.SceneTypeEnum[t],this);for(var o in GameEvent.SceneEvent)GameEvent.SceneEventNamingRules.checkIsExistInLoadEvent(o,GameEnum.SceneTypeEnum[e])&&GameEvent.SceneEventNamingRules.checkLoadFormat(o)?this.sendNotification(GameEvent.SceneEvent[o],[e,t]):GameEvent.SceneEventNamingRules.checkIsExistInUnLoadEvent(o,GameEnum.SceneTypeEnum[t])&&GameEvent.SceneEventNamingRules.checkUnloadFormat(o)&&this.sendNotification(GameEvent.SceneEvent[o],[e,t])},t.NAME="LoadGameSceneCommand",t}(puremvc.SimpleCommand);__reflect(LoadGameSceneCommand.prototype,"LoadGameSceneCommand",["ILogger"]);var LoadingSceneMediator=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._logScope="[LoadingSceneMediator]",t._isLog=!1,t}return __extends(t,e),t.prototype.listNotificationInterests=function(){return[GameEvent.SceneEvent.LOAD_LOADING_SCENE,GameEvent.SceneEvent.UNLOAD_LOADING_SCENE,GameEvent.SceneEvent.SHOW_LOADING_SCENE,GameEvent.SceneEvent.HIDE_LOADING_SCENE,GameEvent.ApplicationFacadeEvent.AWAKE_COMPLETE]},t.prototype.handleNotification=function(e){switch(e.getBody(),e.getName()){case GameEvent.SceneEvent.LOAD_LOADING_SCENE:this.init();break;case GameEvent.SceneEvent.UNLOAD_LOADING_SCENE:this.reset();break;case GameEvent.SceneEvent.SHOW_LOADING_SCENE:this.enable();break;case GameEvent.SceneEvent.HIDE_LOADING_SCENE:this.disable();break;case GameEvent.ApplicationFacadeEvent.AWAKE_COMPLETE:this.sendNotification(RegistLoadingSceneMediatorsCommand.NAME,this._view),this.sendNotification(LoadGameSceneCommand.NAME,GameEnum.SceneTypeEnum.Loading),this.sendNotification(ShowGameSceneCommand.NAME,GameEnum.SceneTypeEnum.Loading)}},t.prototype.awake=function(){Logger.log("awake",this),this._view=new egret.DisplayObjectContainer,this._view.name=t.NAME,this.getViewComponent().addChild(this._view)},t.NAME="LoadingSceneMediator",t}(BaseSceneMediator);__reflect(LoadingSceneMediator.prototype,"LoadingSceneMediator");var LoadingSkinView=function(e){function t(){var t=e.call(this)||this;return t._logScope="[LoadingSkinView]",t._isLog=!1,t.name="LoadingSkinView",t}return __extends(t,e),t.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),this.currentState=Utils.ResourceTool.language,this.awake()},t.prototype.awake=function(){Logger.log("awake",this)},t.prototype.start=function(){Logger.log("start",this)},t.prototype.init=function(){Logger.log("init",this)},t.prototype.reset=function(){Logger.log("reset",this)},t.prototype.enable=function(){},t.prototype.disable=function(){Logger.log("disable",this),this.visible=!1},t.prototype.refresh=function(e){Logger.log("refresh",this),this.progressBar.value=e[1],this.progressBar.maximum=e[2],this.progressBar.labelDisplay.visible=!1},t}(eui.Component);__reflect(LoadingSkinView.prototype,"LoadingSkinView",["IView"]);var LoadingUI=function(e){function t(){var t=e.call(this)||this;return t.createView(),t}return __extends(t,e),t.prototype.createView=function(){this.textField=new egret.TextField,this.addChild(this.textField),this.textField.y=300,this.textField.width=480,this.textField.height=100,this.textField.textAlign="center"},t.prototype.onProgress=function(e,t){this.textField.text="Loading..."+e+"/"+t},t}(egret.Sprite);__reflect(LoadingUI.prototype,"LoadingUI",["RES.PromiseTaskReporter"]);var LoadingViewMediator=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._logScope="[LoadingViewMediator]",t._isLog=!1,t}return __extends(t,e),t.prototype.listNotificationInterests=function(){return[GameEvent.ApplicationFacadeEvent.AWAKE_COMPLETE,GameEvent.SceneEvent.LOAD_LOBBY_SCENE,GameEvent.ResourceProxyEvent.LOAD_PROGRESS_NON_PRELOAD_GROUP]},t.prototype.handleNotification=function(e){switch(e.getBody(),e.getName()){case GameEvent.ApplicationFacadeEvent.AWAKE_COMPLETE:this.facadeAwakeComplete(),this.resourceComplete(),this.init(),this.enable();break;case GameEvent.SceneEvent.LOAD_LOBBY_SCENE:this.disable(),this.reset();break;case GameEvent.ResourceProxyEvent.LOAD_PROGRESS_NON_PRELOAD_GROUP:var t=e.getBody()[0];t==GameEnum.LoadingCollectionTypeEnum.Lobby&&this.refresh(e.getBody())}},t.prototype.nextAwake=function(){this._view=new LoadingSkinView,this.getViewComponent().addChild(this._view),this._view.visible=!1},t.prototype.nextStart=function(){this._view.start()},t.prototype.nextInit=function(){this._view.init()},t.prototype.nextReset=function(){this._view.reset()},t.prototype.nextEnable=function(){this._view.enable()},t.prototype.nextDisable=function(){this._view.disable()},t.prototype.nextRefresh=function(e){Logger.log("refreshObject, "+GameEnum.LoadingCollectionTypeEnum[e[0]]+" "+e[1]+" / "+e[2]+" ",this),this._view.refresh(e)},t.NAME="LoadingViewMediator",t}(BaseViewMediator);__reflect(LoadingViewMediator.prototype,"LoadingViewMediator");var LobbyAutoSkinView=function(e){function t(){var t=e.call(this)||this;return t._logScope="[LobbyAutoSkinView]",t._isLog=!1,t.name="LobbyAutoSkinView",t.currentState=Utils.ResourceTool.language,t}return __extends(t,e),t.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),this.awake()},t.prototype.awake=function(){Logger.log("awake",this)},t.prototype.start=function(){Logger.log("start",this)},t.prototype.init=function(e){Logger.log("init",this),this.zoneList.itemRenderer=LobbyAutoZoneIRSkinView,this.zoneList.currentState=this.currentState,this.zoneList.dataProvider=new eui.ArrayCollection(e.zoneDataArray),this.zoneList.addEventListener(eui.ItemTapEvent.ITEM_TAP,this.onItemTapHandle,this)},t.prototype.reset=function(){Logger.log("reset",this)},t.prototype.enable=function(){Logger.log("enable",this),this.visible=!0},t.prototype.disable=function(){Logger.log("disable",this),this.visible=!1},t.prototype.refresh=function(e){Logger.log("refresh",this)},t.prototype.onItemTapHandle=function(e){Logger.log("onItemTapHandle",this),this.itemTapCallback&&this.itemTapCallback(e)},t}(eui.Component);__reflect(LobbyAutoSkinView.prototype,"LobbyAutoSkinView",["IView"]);var LobbyAutoSkinViewData=function(){function e(){this.zoneDataArray=new Array}return e}();__reflect(LobbyAutoSkinViewData.prototype,"LobbyAutoSkinViewData");var LobbyAutoSkinViewZoneData=function(){function e(){}return e}();__reflect(LobbyAutoSkinViewZoneData.prototype,"LobbyAutoSkinViewZoneData");var LobbyAutoZoneIRSkinView=function(e){function t(){var t=e.call(this)||this;return t.touchChildren=!0,t}return __extends(t,e),t.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this)},t.prototype.dataChanged=function(){if(0==this.dragonBoneGroup.numChildren){var e=TableEntityProxy.getInstance().getZoneTableEntity(this.data.zoneBGTableEntityID);this.betBGImage.texture=Utils.ResourceTool.getTextureRes(e.betBGTextureName);var t=Utils.ResourceTool.getArmatureByDragonBones(e.dragonBonesName,e.armatureName),o=t.getDisplay();o.x=e.dragonBonesX,o.y=e.dragonBonesY,o.animation.play(e.animationName,0),this.dragonBoneGroup.addChild(o)}},t}(eui.ItemRenderer);__reflect(LobbyAutoZoneIRSkinView.prototype,"LobbyAutoZoneIRSkinView");var LobbyInfoSkinView=function(e){function t(){var t=e.call(this)||this;return t._logScope="[LobbyInfoSkinView]",t._isLog=!1,t.tempCredit=1,t.name="LobbyInfoSkinView",t.currentState=Utils.ResourceTool.language,t}return __extends(t,e),t.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),this.awake()},t.prototype.awake=function(){Logger.log("awake",this)},t.prototype.start=function(){Logger.log("start",this)},t.prototype.init=function(e){Logger.log("init",this),this.playerNameLabel.text=e.playerName,this.playerCreditLabel.font=Utils.ResourceTool.getRes("UI_Lobby_CreditNum_fnt"),this.playerCreditLabel.text=e.playerCredit,this.versionLabel.text=e.version},t.prototype.reset=function(){Logger.log("reset",this)},t.prototype.enable=function(){Logger.log("enable",this),this.visible=!0},t.prototype.disable=function(){Logger.log("disable",this),this.visible=!1},t.prototype.refresh=function(e){Logger.log("refresh",this),this.playerCreditLabel.text=e},t.prototype.onSwitchTouchTapHandle=function(e){Logger.log("onSwitchTouchTapHandle",this),void 0!==this.switchTouchTapCallback&&this.switchTouchTapCallback(e)},t.prototype.startTest=function(){var e=new egret.Timer(1e3);e.addEventListener(egret.TimerEvent.TIMER,this.onTestCredit,this),e.start()},t.prototype.onTestCredit=function(){this.tempCredit*=10,this.refresh(this.tempCredit.toString())},t}(eui.Component);__reflect(LobbyInfoSkinView.prototype,"LobbyInfoSkinView",["IView"]);var LobbyInfoSkinViewData=function(){function e(){}return e}();__reflect(LobbyInfoSkinViewData.prototype,"LobbyInfoSkinViewData");var LobbySceneMediator=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._logScope="[LobbySceneMediator]",t._isLog=!1,t._scUserInfoSuccess=!1,t._scLobbyInfoSuccess=!1,t._lobbyInfoSkinViewSuccess=!1,t._lobbyAutoSkinSuccess=!1,t._mouseTween=null,t._fadeOutTimer=0,t._forceControl=!1,t.FORCE_HIDE_TIME_TO_FADE_OUT=100,t.IDLE_TIME_TO_FADE_OUT=5e3,t}return __extends(t,e),t.prototype.listNotificationInterests=function(){return[GameEvent.SceneEvent.LOAD_LOBBY_SCENE,GameEvent.SceneEvent.UNLOAD_LOBBY_SCENE,GameEvent.SceneEvent.SHOW_LOBBY_SCENE,GameEvent.SceneEvent.HIDE_LOBBY_SCENE,GameEvent.ProtocolProxyEvent.MODIFY_COMPLETE_SC_LOBBY_JOIN_VALUE,GameEvent.ProtocolProxyEvent.MODIFY_COMPLETE_SC_LOBBY_INFO_VALUE,GameEvent.ProtocolProxyEvent.MODIFY_COMPLETE_SC_USER_INFO_VALUE,GameEvent.SceneEvent.HIDE_CURSOR]},t.prototype.handleNotification=function(e){switch(e.getBody(),e.getName()){case GameEvent.SceneEvent.LOAD_LOBBY_SCENE:this.enable(),egret.Capabilities.isMobile||this._mosueCursor||(this._mosueCursor=new egret.Bitmap,this._mosueCursor.texture=RES.getRes("Cursor_png"),this._mosueCursor.x=2e3,this._mosueCursor.name="Cursor",this._mosueCursor.anchorOffsetX=this._mosueCursor.width/2,this._mosueCursor.anchorOffsetY=this._mosueCursor.height/2,this._mosueCursor.touchEnabled=!1,this._view.stage.addChild(this._mosueCursor),this._view.stage.addEventListener(mouse.MouseEvent.MOUSE_MOVE,this.onMouseMoveHandle,this),this.cursorIdle());break;case GameEvent.SceneEvent.UNLOAD_LOBBY_SCENE:this.disable();break;case GameEvent.SceneEvent.SHOW_LOBBY_SCENE:this.enable();break;case GameEvent.SceneEvent.HIDE_LOBBY_SCENE:this.disable();break;case GameEvent.ProtocolProxyEvent.MODIFY_COMPLETE_SC_LOBBY_JOIN_VALUE:this._scLobbyInfoSuccess=!1,this._scUserInfoSuccess=!1;break;case GameEvent.ProtocolProxyEvent.MODIFY_COMPLETE_SC_LOBBY_INFO_VALUE:this._scLobbyInfoSuccess=!0,this.changeGameScene();break;case GameEvent.ProtocolProxyEvent.MODIFY_COMPLETE_SC_USER_INFO_VALUE:this._scUserInfoSuccess=!0,this.changeGameScene();break;case GameEvent.SceneEvent.HIDE_CURSOR:this.cursorIdle(!0)}},t.prototype.awake=function(){Logger.log("awake",this),this._view=new egret.DisplayObjectContainer,this._view.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onTouchBeginHandle,this),this._view.name=t.NAME,this.getViewComponent().addChild(this._view),this.sendNotification(RegistLobbySceneMediatorsCommand.NAME,this._view),this.enable()},t.prototype.getView=function(){return this._view},t.prototype.onTouchBeginHandle=function(e){Logger.log("onTouchBeginHandle",this),this.sendNotification(GameEvent.SceneEvent.LOBBY_TOUCH_BEGIN,e)},t.prototype.changeGameScene=function(){this._scLobbyInfoSuccess&&this._scUserInfoSuccess&&(this._scLobbyInfoSuccess=!1,this._scUserInfoSuccess=!1,this.sendNotification(LoadGameSceneCommand.NAME,GameEnum.SceneTypeEnum.Lobby),this.sendNotification(ShowGameSceneCommand.NAME,GameEnum.SceneTypeEnum.Lobby))},t.prototype.onMouseMoveHandle=function(e){this._mosueCursor&&(this._forceControl||(this._mosueCursor.x=e.stageX,this._mosueCursor.y=e.stageY,this.cursorIdle()))},t.prototype.cursorIdle=function(e){void 0===e&&(e=!1),this._mosueCursor&&(this._forceControl=e,this._mosueCursor.alpha=1,this._mouseTween&&egret.Tween.removeTweens(this._mouseTween),egret.clearTimeout(this._fadeOutTimer),this._fadeOutTimer=egret.setTimeout(this.fadeOutCursor,this,this._forceControl?this.FORCE_HIDE_TIME_TO_FADE_OUT:this.IDLE_TIME_TO_FADE_OUT))},t.prototype.fadeOutCursor=function(){this._mosueCursor&&(this._mouseTween=egret.Tween.get(this._mosueCursor).to({alpha:0},150).call(this.onFadeDone,this))},t.prototype.onFadeDone=function(){egret.Capabilities.isMobile||(this._forceControl=!1)},t.NAME="LobbySceneMediator",t}(BaseSceneMediator);__reflect(LobbySceneMediator.prototype,"LobbySceneMediator");var LobbySkinView=function(e){function t(){var t=e.call(this)||this;return t._logScope="[LobbySkinView]",t._isLog=!1,t.leftPoint=new egret.Point(-100,0),t.rightPoint=new egret.Point(GameSettingProxy.screenWidth+100,0),t.name="LobbySkinView",t.currentState=Utils.ResourceTool.language,t}return __extends(t,e),t.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),this.awake()},t.prototype.awake=function(){Logger.log("awake",this)},t.prototype.start=function(){Logger.log("start",this),this.lobbyAutoSkinView.start(),this.lobbyInfoSkinView.start(),this.createBGAnimation()},t.prototype.init=function(e,t){Logger.log("init",this),this.lobbyAutoSkinView.init(t),this.lobbyInfoSkinView.init(e),this.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onTouchBeginHandle,this)},t.prototype.reset=function(){Logger.log("reset",this),this.lobbyAutoSkinView.reset(),this.lobbyInfoSkinView.reset()},t.prototype.enable=function(e,t){switch(Logger.log("enable",this),this.visible=!0,this.lobbyTypeViewStack.selectedIndex=e,e){case GameEnum.LobbyTypeEnum.Auto:this.lobbyAutoSkinView.enable()}this.lobbyInfoSkinView.enable()},t.prototype.disable=function(){Logger.log("disable",this),this.visible=!1,this.lobbyAutoSkinView.disable(),this.lobbyInfoSkinView.disable()},t.prototype.refresh=function(e,t){Logger.log("refresh",this),e&&this.lobbyInfoSkinView.refresh(e)},t.prototype.getLobbyType=function(){return this.lobbyTypeViewStack.selectedIndex},t.prototype.onTouchBeginHandle=function(e){this.touchBeginCallback&&this.touchBeginCallback(e)},t.prototype.createBGAnimation=function(){for(var e=5,t=0;e>t;t++){var o=new FishAnimation;o.init(RES.getRes("GP_Lobby_Fish"+(t+1)+"_png")),0==Math.floor(2*Math.random())?o.direction=FishAnimation.LtoR:o.direction=FishAnimation.RtoL,o.x=-100,this.bgAnimationView.addChildAt(o,0),egret.setTimeout(this.fishStartMove,this,5e3*Math.random(),o)}this.createBubbleParticle(775,446),this.createBubbleParticle(557,529),this.createBubbleParticle(39,492)},t.prototype.fishStartMove=function(e){var t,o=this;e.direction==FishAnimation.LtoR?(e.x=this.leftPoint.x,t=this.rightPoint,e.scaleX=-1):(e.x=this.rightPoint.x,t=this.leftPoint,e.scaleX=1),e.y=100*Math.random()+370,egret.Tween.get(e).to({x:t.x},1e3*(5*Math.random()+25)).call(function(){e.reverse(),egret.setTimeout(o.fishStartMove,o,3e3*Math.random(),e)},this)},t.prototype.createBubbleParticle=function(e,t){var o;o=Utils.ResourceTool.getParticleSystem("Lobby_Bubble"),o.x=e,o.y=t,o.start(),this.bgAnimationView.addChild(o)},t.prototype.getRnd=function(){return Math.floor(2*Math.random())},t}(eui.Component);__reflect(LobbySkinView.prototype,"LobbySkinView",["IView"]);var LobbyViewMediator=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._logScope="[LobbyViewMediator]",t._isLog=!1,t._isGameResourceReady=!1,t._lobbyAutoSkinViewZoneData=null,t}return __extends(t,e),t.prototype.listNotificationInterests=function(){return[GameEvent.ApplicationFacadeEvent.AWAKE_COMPLETE,GameEvent.ResourceProxyEvent.LOAD_COMPLETE_NON_PRELOAD_GROUP,GameEvent.SceneEvent.LOAD_LOBBY_SCENE,GameEvent.SceneEvent.LOAD_BATTLE_SCENE,GameEvent.ProtocolProxyEvent.MODIFY_COMPLETE_SC_LOBBY_INFO_VALUE,GameEvent.ProtocolProxyEvent.MODIFY_COMPLETE_SC_USER_INFO_VALUE,GameEvent.ProtocolProxyEvent.MODIFY_COMPLETE_CHANGE_BALANCE]},t.prototype.handleNotification=function(e){var t=e.getBody();switch(e.getName()){case GameEvent.ApplicationFacadeEvent.AWAKE_COMPLETE:this.facadeAwakeComplete();break;case GameEvent.ResourceProxyEvent.LOAD_COMPLETE_NON_PRELOAD_GROUP:t==GameEnum.LoadingCollectionTypeEnum.Lobby?this.resourceComplete():(this._isGameResourceReady=!0,this._lobbyAutoSkinViewZoneData&&this.onSendCSQuickRoomLogin(this._lobbyAutoSkinViewZoneData));break;case GameEvent.SceneEvent.LOAD_LOBBY_SCENE:this.enable();break;case GameEvent.SceneEvent.LOAD_BATTLE_SCENE:this.disable(),this.reset();break;case GameEvent.ProtocolProxyEvent.MODIFY_COMPLETE_SC_LOBBY_INFO_VALUE:this.refresh([null,e.getBody()]);break;case GameEvent.ProtocolProxyEvent.MODIFY_COMPLETE_SC_USER_INFO_VALUE:this.init(this._allProxy._protocolProxy.scUserInfo);break;case GameEvent.ProtocolProxyEvent.MODIFY_COMPLETE_CHANGE_BALANCE:this.refresh([e.getBody(),null])}},t.prototype.nextAwake=function(){this._view=new LobbySkinView,this.getViewComponent().addChild(this._view),this._view.visible=!1},t.prototype.nextStart=function(){var e=this;this._view.lobbyInfoSkinView.switchTouchTapCallback=function(t){return e.onInfoSwitchTouchTapHandle(t)},this._view.lobbyInfoSkinView.itemTapCallback=function(t){return e.onInfoOptionItemTapHandle(t)},this._view.lobbyAutoSkinView.itemTapCallback=function(t){return e.onAutoZoneItemTapHandle(t)},this._view.start()},t.prototype.nextInit=function(e){var t=Utils.GameTool.getZoneTypeArray(e);this.infoSkinViewData=this.createInfoSkinViewData(e),this._autoSkinViewData=this.createAutoSkinViewData(e,t),this._view.init(this.infoSkinViewData,this._autoSkinViewData)},t.prototype.nextReset=function(){this._view.reset()},t.prototype.nextEnable=function(){var e=this._allProxy._gameSettingProxy.lobbyType,t=this._allProxy._gameSettingProxy.zoneType;this._view.enable(e,t)},t.prototype.nextDisable=function(){this._view.disable()},t.prototype.nextRefresh=function(e){var t,o=e[0],i=e[1];if(o){var n=Utils.MathTool.multiply(o.balance,1e3);t=Utils.TranslateTool.cent2TenDolla2GroupSeperator2Sign(n)}var a;i&&(a=i.iLobbyRoomInfo),this._view.refresh(t,a)},t.prototype.createInfoSkinViewData=function(e){var t=new LobbyInfoSkinViewData;return t.playerName=e.showName,t.playerCredit=Utils.TranslateTool.cent2TenDolla2GroupSeperator2Sign(e.llCent),t.version="ver."+this._allProxy._gameSettingProxy.gameVer,t},t.prototype.createAutoSkinViewData=function(e,t){var o=new LobbyAutoSkinViewData,i=TableEntityProxy.getInstance();for(var n in t)for(var a=t[n],r=0;r<e.iRoomCount;r++){var s=e.iRoomType[r];if(s==a){var l=i.getZoneTableEntity(s),c=new LobbyAutoSkinViewZoneData;c.enable=0!==e.iMinBet[r]&&0!==e.iMaxBet[r],c.comingSoonTextureName=Utils.StringTool.format("Lobby_Coming_{0}_png",Utils.ResourceTool.language),c.comingSoonVisible=!c.enable,c.betRangeVisible=c.enable,c.zoneType=s,c.betRange=""+Utils.TranslateTool.betRange2CashTenDolla2Sign(e.iMinBet[r],e.iMaxBet[r],e.iDenom[r]),c.currentState=Utils.ResourceTool.language,c.bgTextureName=Utils.StringTool.addPNG(l.bgTextureName);var h=Utils.StringTool.format(l.titleTextureName,Utils.ResourceTool.language);c.titleTextureName=Utils.StringTool.addPNG(h),c.zoneBGTableEntityID=l.id.toString(),o.zoneDataArray.push(c);break}}return o},t.prototype.onInfoSwitchTouchTapHandle=function(e){Logger.log("onInfoSwitchTouchTapHandle",this),this._allProxy._gameSettingProxy.lobbyType=(this._view.getLobbyType()+1)%GameEnum.LobbyTypeEnum.Total,this.nextEnable()},t.prototype.onInfoOptionTouchTapHandle=function(e){Logger.log("onInfoOptionTouchTapHandle",this)},t.prototype.onInfoOptionItemTapHandle=function(e){Logger.log("onInfoOptionItemTapHandle",this);var t=e.item;switch(t.id){case GameEnum.OptionTypeEnum.Sound:this._allProxy._soundObjectManagerProxy.soundOn=t.on;break;case GameEnum.OptionTypeEnum.Help:this.sendNotification(GameEvent.HelpViewMediatorEvent.ENABLE);break;case GameEnum.OptionTypeEnum.Home:break;case GameEnum.OptionTypeEnum.Report:}},t.prototype.onAutoZoneItemTapHandle=function(e){if(e.item.enable){var o=ApplicationFacade.getInstance().retrieveMediator(t.NAME);if(o.infoSkinViewData&&-1!=o.infoSkinViewData.playerCredit.indexOf("-"))return void this.onError();if(!this._isGameResourceReady)return this._lobbyAutoSkinViewZoneData=e.item,void this.sendNotification(GameEvent.SceneEvent.SHOW_TRANSITION_SCENE_LOADING);Logger.log("onAutoZoneItemTapHandle",this);var i=e.item;this.onSendCSQuickRoomLogin(i)}},t.prototype.onSendCSQuickRoomLogin=function(e){this._allProxy._gameSettingProxy.zoneType=e.zoneType;var t=new ProtocolEntity.CSQuickRoomLoginEntity;t.iRoomType=e.zoneType,this.sendNotification(GeneratorProtocolCommand.NAME,[ProtocolType.csQuickLogin,t]),this._lobbyAutoSkinViewZoneData=null},t.prototype.onError=function(){var e=ApplicationFacade.getInstance().retrieveProxy(PlayerViewEntityArrayProxy.NAME);e.sendNotification(ParserMessageCommand.NAME,new ParserMessageData(MessageType.disconnectLost))},t.NAME="LobbyViewMediator",t}(BaseViewMediator);__reflect(LobbyViewMediator.prototype,"LobbyViewMediator");var Logger=function(){function e(){}return e.log=function(t,o){e.print(0,t,o)},e.warn=function(t,o){e.print(1,t,o)},e.error=function(t,o){e.print(2,t,o)},e.print=function(e,t,o){if(this.enableInfoLog)if(o)if(o._isLog)switch(e){case 0:egret.log(o._logScope+" "+t.toString());break;case 1:egret.warn("[warn.....]"+o._logScope+" "+t.toString());break;case 2:egret.error("[error.....]"+o._logScope+" "+t.toString())}else switch(e){case 0:break;case 1:egret.warn("[warn.....]"+o._logScope+" "+t.toString());break;case 2:egret.error("[error.....]"+o._logScope+" "+t.toString())}else switch(e){case 0:egret.log(t.toString());break;case 1:egret.warn("[warn.....]"+t.toString());break;case 2:egret.error("[error.....]"+t.toString())}},e.interrupt=function(){e.toString()},e.enableInfoLog=!0,e}();__reflect(Logger.prototype,"Logger");var LogMonitorViewKey=function(){function e(){}return e.GAME_SCENE="GameScene",e.SC_LOGIN="SCLogin",e.SC_LOBBY_INFO="SCLobbyInfo",e.SC_USER_INFO="SCUserInfo",e.SC_PLAYER_ROOM_LOGIN_ARRAY="SCPlayerArray",e.SC_ROOM_LOGIN="SCRoomLogin",e.PLAYER_VIEW_ENTITY_ARRAY="PlayerVEArray",e.BULLET_VIEW_ENTITY_ARRAY="BulletVEArray",e.SOUND_GENERATOR_MAP="SoundGeneratorMap",e.SOUND_OBJECT_MAP="SoundObjectMap",e.EFFECT_VIEW_ENTITY_GENERATOR_MAP="EffectVEGeneratorMap",e.EFFECT_VIEW_ENTITY_OBJECT_MAP="EffectVEObjectMap",e.FISH_VIEW_ENTITY_GENERATOR_MAP="FishVEGeneratorMap",e.FISH_VIEW_ENTITY_OBJECT_MAP="FishVEObjectMap",e.SCORE_VIEW_ENTITY_GENERATOR_MAP="ScoreVEGeneratorMap",e.SCORE_VIEW_ENTITY_OBJECT_MAP="ScoreVEObjectMap",e.COIN_VIEW_ENTITY_GENERATOR_MAP="CoinVEGeneratorMap",e.COIN_VIEW_ENTITY_OBJECT_MAP="CoinVEObjectMap",e.BULLET_VIEW_ENTITY_GENERATOR_MAP="BulletVEGeneratorMap",e.BULLET_VIEW_ENTITY_OBJECT_MAP="BulletVEObjectMap",e.IS_MOBILE="IsMobile",e.LANGUAGE="Language",e.OS="OS",e.RUNTIME_TYPE="RuntimeType",e.MODIFY_FC_INDEX_VALUE="FCIndex",e.MODIFY_FC_LOG="FCLog",e.MODIFY_TURN_ID_BY_LOGIN_VALUE="TurnIDByLogin",e.MODIFY_TURN_ID_BY_CREATE_FC_ARRAY_VALUE="TurnIDByCreate",e.MODIFY_TURN_ID_BY_SYNC_VALUE="TurnIDBySync",e}();__reflect(LogMonitorViewKey.prototype,"LogMonitorViewKey");var LogMonitorViewMediator=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._logScope="[LogMonitorViewMediator]",t._isLog=!1,t}return __extends(t,e),t.prototype.listNotificationInterests=function(){return GameSettingProxy.debug?[GameEvent.ApplicationFacadeEvent.AWAKE_COMPLETE,GameEvent.ResourceProxyEvent.LOAD_COMPLETE_NON_PRELOAD_GROUP,GameEvent.DebuggerEvent.SHOW_LOGMONITOR_VIEW,GameEvent.DebuggerEvent.HIDE_LOGMONITOR_VIEW,GameEvent.DebuggerEvent.SET_ITEM_LOGMONITOR_VIEW,GameEvent.GameDataProxyEvent.MODIFY_COMPLETE_GAME_SCENE_VALUE,GameEvent.ProtocolProxyEvent.MODIFY_COMPLETE_SC_LOGIN_VALUE,GameEvent.ProtocolProxyEvent.MODIFY_COMPLETE_SC_LOBBY_INFO_VALUE,GameEvent.ProtocolProxyEvent.MODIFY_COMPLETE_SC_USER_INFO_VALUE,GameEvent.ProtocolProxyEvent.MODIFY_COMPLETE_SC_PLAYER_ROOM_LOGIN_ARRAY,GameEvent.PlayerViewEntityArrayProxyEvent.MODIFY_COMPLETE_PLAYER_ARRAY,GameEvent.BulletViewEntityArrayProxyEvent.MODIFY_COMPLETE_BULLET_ARRAY,GameEvent.SoundObjectManagerProxyEvent.MODIFY_COMPLETE_GENERATOR_MAP,GameEvent.SoundObjectManagerProxyEvent.MODIFY_COMPLETE_OBJECT_MAP,GameEvent.EffectViewObjectManagerProxyEvent.MODIFY_COMPLETE_GENERATOR_MAP,GameEvent.EffectViewObjectManagerProxyEvent.MODIFY_COMPLETE_OBJECT_MAP,GameEvent.FishViewObjectManagerProxyEvent.MODIFY_COMPLETE_GENERATOR_MAP,GameEvent.FishViewObjectManagerProxyEvent.MODIFY_COMPLETE_OBJECT_MAP,GameEvent.ScoreViewObjectManagerProxyEvent.MODIFY_COMPLETE_GENERATOR_MAP,GameEvent.ScoreViewObjectManagerProxyEvent.MODIFY_COMPLETE_OBJECT_MAP,GameEvent.CoinViewObjectManagerProxyEvent.MODIFY_COMPLETE_GENERATOR_MAP,GameEvent.CoinViewObjectManagerProxyEvent.MODIFY_COMPLETE_OBJECT_MAP,GameEvent.BulletViewObjectManagerProxyEvent.MODIFY_COMPLETE_GENERATOR_MAP,GameEvent.BulletViewObjectManagerProxyEvent.MODIFY_COMPLETE_OBJECT_MAP,GameEvent.SystemProxyEvent.MODIFY_COMPLETE_IS_MOBLIE_VALUE,GameEvent.SystemProxyEvent.MODIFY_COMPLETE_LANGUAGE_VALUE,GameEvent.SystemProxyEvent.MODIFY_COMPLETE_OS_VALUE,GameEvent.SystemProxyEvent.MODIFY_COMPLETE_RUNTIME_TYPE_VALUE,GameEvent.FlowControlProxyEvent.MODIFY_FC_INDEX_VALUE,GameEvent.FlowControlProxyEvent.MODIFY_FC_LOG,GameEvent.FlowControlProxyEvent.MODIFY_TURN_ID_BY_LOGIN_VALUE,GameEvent.FlowControlProxyEvent.MODIFY_TURN_ID_BY_CREATE_FC_ARRAY_VALUE,GameEvent.FlowControlProxyEvent.MODIFY_TURN_ID_BY_SYNC_VALUE]:[]},t.prototype.handleNotification=function(e){var t=e.getBody();switch(e.getName()){case GameEvent.ApplicationFacadeEvent.AWAKE_COMPLETE:this.facadeAwakeComplete();break;case GameEvent.ResourceProxyEvent.LOAD_COMPLETE_NON_PRELOAD_GROUP:t==GameEnum.LoadingCollectionTypeEnum.Lobby&&(this.resourceComplete(),this.init());break;case GameEvent.DebuggerEvent.SHOW_LOGMONITOR_VIEW:this._allMediator._debugSkinViewMediator.selectedIndexTabBar(GameEnum.DebuggerViewTypeEnum.LogMonitor),this.enable();break;case GameEvent.DebuggerEvent.HIDE_LOGMONITOR_VIEW:this.disable();break;case GameEvent.DebuggerEvent.SET_ITEM_LOGMONITOR_VIEW:this._view.setItem(t[0],t[1],t[2]);break;case GameEvent.GameDataProxyEvent.MODIFY_COMPLETE_GAME_SCENE_VALUE:this.sendNotification(GameEvent.DebuggerEvent.SET_ITEM_LOGMONITOR_VIEW,[LogMonitorViewKey.GAME_SCENE,GameEnum.SceneTypeEnum[t]]);break;case GameEvent.ProtocolProxyEvent.MODIFY_COMPLETE_SC_LOGIN_VALUE:this.sendNotification(GameEvent.DebuggerEvent.SET_ITEM_LOGMONITOR_VIEW,[LogMonitorViewKey.SC_LOGIN,t]);break;case GameEvent.ProtocolProxyEvent.MODIFY_COMPLETE_SC_LOBBY_INFO_VALUE:var o=t;this.sendNotification(GameEvent.DebuggerEvent.SET_ITEM_LOGMONITOR_VIEW,[LogMonitorViewKey.SC_LOBBY_INFO,o.length,o]);break;case GameEvent.ProtocolProxyEvent.MODIFY_COMPLETE_SC_USER_INFO_VALUE:var o=t;this.sendNotification(GameEvent.DebuggerEvent.SET_ITEM_LOGMONITOR_VIEW,[LogMonitorViewKey.SC_USER_INFO,o.length,o]);break;case GameEvent.ProtocolProxyEvent.MODIFY_COMPLETE_SC_PLAYER_ROOM_LOGIN_VALUE:this.sendNotification(GameEvent.DebuggerEvent.SET_ITEM_LOGMONITOR_VIEW,[LogMonitorViewKey.SC_ROOM_LOGIN,t]);break;case GameEvent.ProtocolProxyEvent.MODIFY_COMPLETE_SC_PLAYER_ROOM_LOGIN_ARRAY:var o=t;this.sendNotification(GameEvent.DebuggerEvent.SET_ITEM_LOGMONITOR_VIEW,[LogMonitorViewKey.SC_PLAYER_ROOM_LOGIN_ARRAY,o.length,o]);break;case GameEvent.PlayerViewEntityArrayProxyEvent.MODIFY_COMPLETE_PLAYER_ARRAY:var o=t;this.sendNotification(GameEvent.DebuggerEvent.SET_ITEM_LOGMONITOR_VIEW,[LogMonitorViewKey.PLAYER_VIEW_ENTITY_ARRAY,o.length,o]);break;case GameEvent.BulletViewEntityArrayProxyEvent.MODIFY_COMPLETE_BULLET_ARRAY:var o=t;this.sendNotification(GameEvent.DebuggerEvent.SET_ITEM_LOGMONITOR_VIEW,[LogMonitorViewKey.BULLET_VIEW_ENTITY_ARRAY,o.length,o]);break;case GameEvent.SoundObjectManagerProxyEvent.MODIFY_COMPLETE_GENERATOR_MAP:this.sendNotification(GameEvent.DebuggerEvent.SET_ITEM_LOGMONITOR_VIEW,[LogMonitorViewKey.SOUND_GENERATOR_MAP,"",t]);break;case GameEvent.SoundObjectManagerProxyEvent.MODIFY_COMPLETE_OBJECT_MAP:this.sendNotification(GameEvent.DebuggerEvent.SET_ITEM_LOGMONITOR_VIEW,[LogMonitorViewKey.SOUND_OBJECT_MAP,"",t]);break;case GameEvent.EffectViewObjectManagerProxyEvent.MODIFY_COMPLETE_GENERATOR_MAP:this.sendNotification(GameEvent.DebuggerEvent.SET_ITEM_LOGMONITOR_VIEW,[LogMonitorViewKey.EFFECT_VIEW_ENTITY_GENERATOR_MAP,"",t]);break;case GameEvent.EffectViewObjectManagerProxyEvent.MODIFY_COMPLETE_OBJECT_MAP:this.sendNotification(GameEvent.DebuggerEvent.SET_ITEM_LOGMONITOR_VIEW,[LogMonitorViewKey.EFFECT_VIEW_ENTITY_OBJECT_MAP,"",t]);break;case GameEvent.FishViewObjectManagerProxyEvent.MODIFY_COMPLETE_GENERATOR_MAP:this.sendNotification(GameEvent.DebuggerEvent.SET_ITEM_LOGMONITOR_VIEW,[LogMonitorViewKey.FISH_VIEW_ENTITY_GENERATOR_MAP,"",t]);break;case GameEvent.FishViewObjectManagerProxyEvent.MODIFY_COMPLETE_OBJECT_MAP:this.sendNotification(GameEvent.DebuggerEvent.SET_ITEM_LOGMONITOR_VIEW,[LogMonitorViewKey.FISH_VIEW_ENTITY_OBJECT_MAP,"",t]);break;case GameEvent.ScoreViewObjectManagerProxyEvent.MODIFY_COMPLETE_GENERATOR_MAP:this.sendNotification(GameEvent.DebuggerEvent.SET_ITEM_LOGMONITOR_VIEW,[LogMonitorViewKey.SCORE_VIEW_ENTITY_GENERATOR_MAP,"",t]);break;case GameEvent.ScoreViewObjectManagerProxyEvent.MODIFY_COMPLETE_OBJECT_MAP:this.sendNotification(GameEvent.DebuggerEvent.SET_ITEM_LOGMONITOR_VIEW,[LogMonitorViewKey.SCORE_VIEW_ENTITY_OBJECT_MAP,"",t]);break;case GameEvent.CoinViewObjectManagerProxyEvent.MODIFY_COMPLETE_GENERATOR_MAP:this.sendNotification(GameEvent.DebuggerEvent.SET_ITEM_LOGMONITOR_VIEW,[LogMonitorViewKey.COIN_VIEW_ENTITY_GENERATOR_MAP,"",t]);break;case GameEvent.CoinViewObjectManagerProxyEvent.MODIFY_COMPLETE_OBJECT_MAP:this.sendNotification(GameEvent.DebuggerEvent.SET_ITEM_LOGMONITOR_VIEW,[LogMonitorViewKey.COIN_VIEW_ENTITY_OBJECT_MAP,"",t]);break;case GameEvent.BulletViewObjectManagerProxyEvent.MODIFY_COMPLETE_GENERATOR_MAP:this.sendNotification(GameEvent.DebuggerEvent.SET_ITEM_LOGMONITOR_VIEW,[LogMonitorViewKey.BULLET_VIEW_ENTITY_GENERATOR_MAP,"",t]);break;case GameEvent.BulletViewObjectManagerProxyEvent.MODIFY_COMPLETE_OBJECT_MAP:this.sendNotification(GameEvent.DebuggerEvent.SET_ITEM_LOGMONITOR_VIEW,[LogMonitorViewKey.BULLET_VIEW_ENTITY_OBJECT_MAP,"",t]);break;case GameEvent.SystemProxyEvent.MODIFY_COMPLETE_IS_MOBLIE_VALUE:this.sendNotification(GameEvent.DebuggerEvent.SET_ITEM_LOGMONITOR_VIEW,[LogMonitorViewKey.IS_MOBILE,t]);break;case GameEvent.SystemProxyEvent.MODIFY_COMPLETE_LANGUAGE_VALUE:this.sendNotification(GameEvent.DebuggerEvent.SET_ITEM_LOGMONITOR_VIEW,[LogMonitorViewKey.LANGUAGE,t]);break;case GameEvent.SystemProxyEvent.MODIFY_COMPLETE_OS_VALUE:this.sendNotification(GameEvent.DebuggerEvent.SET_ITEM_LOGMONITOR_VIEW,[LogMonitorViewKey.OS,t]);break;case GameEvent.SystemProxyEvent.MODIFY_COMPLETE_RUNTIME_TYPE_VALUE:this.sendNotification(GameEvent.DebuggerEvent.SET_ITEM_LOGMONITOR_VIEW,[LogMonitorViewKey.RUNTIME_TYPE,t]);break;case GameEvent.FlowControlProxyEvent.MODIFY_FC_INDEX_VALUE:this.sendNotification(GameEvent.DebuggerEvent.SET_ITEM_LOGMONITOR_VIEW,[LogMonitorViewKey.MODIFY_FC_INDEX_VALUE,t]);break;case GameEvent.FlowControlProxyEvent.MODIFY_FC_LOG:this.sendNotification(GameEvent.DebuggerEvent.SET_ITEM_LOGMONITOR_VIEW,[LogMonitorViewKey.MODIFY_FC_LOG,t]);break;case GameEvent.FlowControlProxyEvent.MODIFY_TURN_ID_BY_LOGIN_VALUE:this.sendNotification(GameEvent.DebuggerEvent.SET_ITEM_LOGMONITOR_VIEW,[LogMonitorViewKey.MODIFY_TURN_ID_BY_LOGIN_VALUE,t]);break;case GameEvent.FlowControlProxyEvent.MODIFY_TURN_ID_BY_CREATE_FC_ARRAY_VALUE:this.sendNotification(GameEvent.DebuggerEvent.SET_ITEM_LOGMONITOR_VIEW,[LogMonitorViewKey.MODIFY_TURN_ID_BY_CREATE_FC_ARRAY_VALUE,t]);
break;case GameEvent.FlowControlProxyEvent.MODIFY_TURN_ID_BY_SYNC_VALUE:this.sendNotification(GameEvent.DebuggerEvent.SET_ITEM_LOGMONITOR_VIEW,[LogMonitorViewKey.MODIFY_TURN_ID_BY_SYNC_VALUE,t])}},t.prototype.nextAwake=function(){this._view=new DebugListSkinView,this.getViewComponent().addChild(this._view),this._view.name=t.NAME,this._view.visible=!1},t.prototype.nextStart=function(){var e=this;this._view.setItem(t.NAME,void 0,void 0),this._view.itemTapCallback=function(){return e.onItemTapHandle(e._view.itemTapCallback.arguments[0])},this._view.start()},t.prototype.nextInit=function(){this._view.init()},t.prototype.nextReset=function(){},t.prototype.nextEnable=function(){this._view.enable()},t.prototype.nextDisable=function(){this._view.disable()},t.prototype.nextRefresh=function(){this._view.refresh()},t.prototype.onItemTapHandle=function(e){this.sendNotification(GameEvent.DebuggerEvent.HIDE_LOGMONITOR_VIEW),this.sendNotification(GameEvent.DebuggerEvent.TAP_ITEM_LOGMONITOR_VIEW,e.item)},t.NAME="LogMonitorViewMediator",t}(BaseViewMediator);__reflect(LogMonitorViewMediator.prototype,"LogMonitorViewMediator");var LuckyDrawEntity=function(){function e(){this.showOdds=new Array}return e}();__reflect(LuckyDrawEntity.prototype,"LuckyDrawEntity");var Main=function(e){function t(){var t=e.call(this)||this;return t._logScope="[Main]",t._isLog=!1,t._isThemeLoadEnd=!1,t._isPreloadGroupLoadEnd=!1,t._isSCInfoComplete=!1,t._loadinPreloadResListLobby=["preload","preloadBundle_{0}"],t._loadingNonPreloadResListLobby=["bundle_{0}","common","lobby","font","help","tableJson","dragonBones","particle"],t._loadingNonPreloadResListBattle=["animation","battle","fish"],t.awake(),t}return __extends(t,e),t.prototype.awake=function(){egret.ImageLoader.crossOrigin="anonymous",Logger.log("awake",this),ApplicationFacade.getInstance().initialize(this),this._gameSettingProxy=ApplicationFacade.getInstance().retrieveProxy(GameSettingProxy.NAME),this._resourceProxy=ApplicationFacade.getInstance().retrieveProxy(ResourceProxy.NAME),this._webBridgeProxy=ApplicationFacade.getInstance().retrieveProxy(WebBridgeProxy.NAME),this._gameDataProxy=ApplicationFacade.getInstance().retrieveProxy(GameDataProxy.NAME),this._objTicket=this._webBridgeProxy.getTicketObj(),this._objUserInfo=this._webBridgeProxy.getUserInfoObj(),this._objServInfo=this._webBridgeProxy.getServInfoHost(),this._gameSettingProxy.start(this._objUserInfo,this._objTicket,this._objServInfo,window.gameVer),this._webBridgeProxy.getGameDataObj().isDemo?this._gameSettingProxy.demoMode=this._webBridgeProxy.getGameDataObj().isDemo:this._gameSettingProxy.demoMode=!1,Utils.ResourceTool.language=this._gameSettingProxy.language,Utils.StringTool.dollarSign=this._gameSettingProxy.dollarSign,this._objUserInfo.currency==CurrencyName.PP?Utils.StringTool.dollarSign="P":this._objUserInfo.currency==CurrencyName.EU?Utils.StringTool.dollarSign="E":(this._webBridgeProxy.enableUIVersion(!1),Utils.StringTool.dollarSign=""),this._isNonPreloadResListLoadCompleteArray=new Array;for(var e=0;e<GameEnum.LoadingCollectionTypeEnum.Total;e++)this._isNonPreloadResListLoadCompleteArray.push(!1);var t=this._loadinPreloadResListLobby,o=new Array;o[GameEnum.LoadingCollectionTypeEnum.Lobby]=this._loadingNonPreloadResListLobby,o[GameEnum.LoadingCollectionTypeEnum.Battle]=this._loadingNonPreloadResListBattle,this._resourceProxy.start(t,o,this._gameSettingProxy.language),this._protocolProxy=ApplicationFacade.getInstance().retrieveProxy(ProtocolProxy.NAME),this._smartFoxProxy=ApplicationFacade.getInstance().retrieveProxy(SmartFoxProxy.NAME);var i=Utils.GameTool.generateSFSProxyConfig(this._objTicket);this._smartFoxProxy.start(i)},t.prototype.createChildren=function(){Logger.log("createChildren",this),e.prototype.createChildren.call(this),egret.Capabilities.isMobile&&(this.stage.orientation=egret.OrientationMode.LANDSCAPE),egret.lifecycle.addLifecycleListener(function(e){}),egret.lifecycle.onPause=function(){},egret.lifecycle.onResume=function(){};var t=new AssetAdapter;egret.registerImplementation("eui.IAssetAdapter",t),egret.registerImplementation("eui.IThemeAdapter",new ThemeAdapter),RES.addEventListener(RES.ResourceEvent.CONFIG_COMPLETE,this.onConfigComplete,this),RES.loadConfig(this._gameSettingProxy.gameResourcePath+"resource/default.res.json",this._gameSettingProxy.gameResourcePath+"resource/")},t.prototype.onConfigComplete=function(e){Logger.log("onConfigComplete",this),RES.removeEventListener(RES.ResourceEvent.CONFIG_COMPLETE,this.onConfigComplete,this);var t=new eui.Theme(this._gameSettingProxy.gameResourcePath+"resource/default.thm.json",this.stage);t.addEventListener(eui.UIEvent.COMPLETE,this.onThemeLoadComplete,this)},t.prototype.onThemeLoadComplete=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){return Logger.log("onThemeLoadComplete",this),this._isThemeLoadEnd=!0,this.loadPreloadRes(),[2]})})},t.prototype.loadPreloadRes=function(){var e=this;Logger.log("loadPreloadRes",this),this._resourceProxy.loadPreloadGroup(),this._resourceProxy.loadPreloadGroupCompleteCallback=function(){return e.onLoadPreloadGroupCompleteHandle()}},t.prototype.onLoadPreloadGroupCompleteHandle=function(){Logger.log("onLoadPreloadGroupCompleteHandle",this),this.createScene()},t.prototype.createScene=function(){Logger.log("createScene",this),this.init(),mouse.enable(this.stage),mouse.setMouseMoveEnabled(!0)},t.prototype.init=function(){Logger.log("init",this),ApplicationFacade.getInstance().awake(),ApplicationFacade.getInstance().startUp(),this.connect()},t.prototype.connect=function(){var e=this;Logger.log("connect",this),this._smartFoxProxy.connectionSuccessCallback=function(){return e.onConnectionSuccessHandle()},this._smartFoxProxy.connect(),this.loadNonPreloadGroup(GameEnum.LoadingCollectionTypeEnum.Lobby)},t.prototype.onConnectionSuccessHandle=function(){var e=this;Logger.log("onConnectionSuccessHandle",this),this._smartFoxProxy.loginSuccessCallback=function(){return e.onLoginSuccessHandle()},this._smartFoxProxy.login()},t.prototype.onLoginSuccessHandle=function(){Logger.log("onLoginSuccessHandle",this);for(var e=!0,t=0;t<GameEnum.LoadingCollectionTypeEnum.Total;t++)if(!this._isNonPreloadResListLoadCompleteArray[t]){e=!1;break}e?this._smartFoxProxy.gameLogin():this.loadNonPreloadGroup(GameEnum.LoadingCollectionTypeEnum.Lobby)},t.prototype.loadNonPreloadGroup=function(e){var t=this;Logger.log("loadNonPreloadGroup index:"+e,this),this._resourceProxy.loadNonPreloadGroup(e),this._resourceProxy.loadNonPreloadGroupCompleteCallback=function(e){return t.onLoadNonPreloadGroupCompleteHandle(e)}},t.prototype.onLoadNonPreloadGroupCompleteHandle=function(e){switch(Logger.log("onLoadNonPreloadGroupCompleteHandle index:"+e,this),this._isNonPreloadResListLoadCompleteArray[e]=!0,e){case GameEnum.LoadingCollectionTypeEnum.Lobby:this._smartFoxProxy.gameLogin(),this._webBridgeProxy.notifyGameReady(),this.loadNonPreloadGroup(GameEnum.LoadingCollectionTypeEnum.Battle)}},t}(eui.UILayer);__reflect(Main.prototype,"Main",["ILogger"]);var MedalsComponent=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._logScope="[MedalsComponent]",t._isLog=!1,t._isFXComplete=!0,t}return __extends(t,e),t.prototype.startObject=function(e){switch(Logger.log("startObject"+this.hashCode,this),e.id){case 1:this._fx=new MedalsFX;break;case 2:this._fx=new CaiShenFaFaFaMedalsFX;break;case 3:this._fx=new WheelOfFortuneMedalsFX;break;default:Logger.error("startObject id:"+e.id+" is not exist",this)}this.fxStart(this._fx,e)},t.prototype.initObject=function(e){switch(Logger.log("initObject "+this.hashCode,this),this._tableEntity.id){case 1:var t=new MedalsFXData(e.medalsTargetObject,e.win,e.denom,e.fishID,e.odd,e.reverse,e.self);this._fx.init(t);break;case 2:var t=new CaiShenFaFaFaMedalsFXData(e.medalsTargetObject,e.win,e.denom,e.fishID,e.reverse,e.self);this._fx.init(t);break;case 3:var t=new WheelOfFortuneMedalsFXData(e.medalsTargetObject,e.win,e.denom,e.fishID,e.reverse,e.self);this._fx.init(t);break;default:Logger.error("initObject id:"+this._tableEntity.id+" is not exist",this)}Utils.DisplayObjectTool.resetDisplayObject(this,!0)},t.prototype.resetObject=function(){Logger.log("resetObject "+this.hashCode,this),Utils.DisplayObjectTool.resetDisplayObject(this,!1)},t.prototype.playObject=function(){Logger.log("playObject "+this.hashCode,this),this._fx&&(this._fx.play(),this._isFXComplete=!1)},t.prototype.stopObject=function(){Logger.log("stopObject "+this.hashCode,this),this._fx&&(this._fx.stop(),this._isFXComplete=!1),this.onComplete()},t.prototype.completeObject=function(){Logger.log("completeObject "+this.hashCode,this)},t.prototype.onFXComplete=function(e){var t;this._isFXComplete=!0,egret.is(e.target,MedalsFX.NAME)?t=MedalsFX.NAME:egret.is(e.target,CaiShenFaFaFaMedalsFX.NAME)?t=CaiShenFaFaFaMedalsFX.NAME:egret.is(e.target,WheelOfFortuneMedalsFX.NAME)?t=WheelOfFortuneMedalsFX.NAME:Logger.error("onFXComplete "+e.target+" is not exist",this),Logger.log("onFXComplete "+this.hashCode+" "+t,this),this._isFXComplete&&this.onComplete()},t.prototype.fxStart=function(e,t){e.addEventListener(ObjectEvent.COMPLETE,this.onFXComplete,this),this.addChild(e),e.start(t)},t.NAME="MedalsComponent",t}(BaseComponent);__reflect(MedalsComponent.prototype,"MedalsComponent");var MedalsFX=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._logScope="[MedalsFX]",t._isLog=!1,t._winBitmapLabel=new eui.BitmapLabel,t._medalsRedRibbonBGBGImage=new eui.Image,t._medalsBGImage=new eui.Image,t._fishImage=new eui.Image,t}return __extends(t,e),t.prototype.startObject=function(e){Logger.log("startObject"+this.hashCode,this),this._data,this._winBitmapLabel.font=Utils.ResourceTool.getRes(GameName.FontName.GoldCredit),this._medalsRedRibbonBGBGImage.texture=Utils.ResourceTool.getTextureRes(GameName.TextureName.MedalsRedRibbonBG),Utils.DisplayObjectTool.setAnchorOffset(this._medalsRedRibbonBGBGImage),this._medalsBGImage.texture=Utils.ResourceTool.getTextureRes(GameName.TextureName.MedalsBG),Utils.DisplayObjectTool.setAnchorOffset(this._medalsBGImage),this.addChild(this._medalsBGImage),this.addChild(this._fishImage),this.addChild(this._medalsRedRibbonBGBGImage),this.addChild(this._winBitmapLabel)},t.prototype.initObject=function(e){Logger.log("initObject "+this.hashCode,this),this._winBitmapLabel&&Utils.DisplayObjectTool.resetDisplayObject(this._winBitmapLabel,!0),this._medalsBGImage&&Utils.DisplayObjectTool.resetDisplayObject(this._medalsBGImage,!0),this._medalsRedRibbonBGBGImage&&Utils.DisplayObjectTool.resetDisplayObject(this._medalsRedRibbonBGBGImage,!0),this._fishImage&&Utils.DisplayObjectTool.resetDisplayObject(this._fishImage,!0),Utils.DisplayObjectTool.resetDisplayObject(this,!0),e.fishID>=15&&(this._fishImage.texture=Utils.ResourceTool.getTextureRes("GP_Roulette3_"+e.fishID),Utils.DisplayObjectTool.setAnchorOffset(this._fishImage),this._fishImage.anchorOffsetY+=30)},t.prototype.resetObject=function(){Logger.log("resetObject "+this.hashCode,this),this._winBitmapLabel&&Utils.DisplayObjectTool.resetDisplayObject(this._winBitmapLabel,!1),this._medalsBGImage&&Utils.DisplayObjectTool.resetDisplayObject(this._medalsBGImage,!1),this._medalsRedRibbonBGBGImage&&Utils.DisplayObjectTool.resetDisplayObject(this._medalsRedRibbonBGBGImage,!1),this._fishImage&&Utils.DisplayObjectTool.resetDisplayObject(this._fishImage,!0),Utils.DisplayObjectTool.resetDisplayObject(this,!1)},t.prototype.playObject=function(){Logger.log("playObject "+this.hashCode,this);var e=this._data,t=this._winBitmapLabel,o=this._medalsRedRibbonBGBGImage,i=this._medalsBGImage,n=this._fishImage,a=e.targetObject.localToGlobal(0,0),r=a.x,s=a.y,l=e.reverse?-1:1;t.visible=!0,t.text=String(Utils.TranslateTool.win2CashTenDolla(e.win,e.denom)),Utils.DisplayObjectTool.setAnchorOffset(t),e.odd>=30?(n.visible=!0,o.y=50,t.y=50):(n.visible=!1,o.y=0,t.y=0),egret.Tween.removeTweens(t),egret.Tween.get(t,{loop:!0}).to({scaleX:1.2,scaleY:1.2},300).to({scaleX:1,scaleY:1},500),i.visible=!0,egret.Tween.get(i).to({rotation:1800},3500),this.x=r,this.y=s-150*l,this.scaleX=0,this.scaleY=0,this.alpha=1;var c=0;c=e.self?this._tableEntity.waitTimeBySelf:this._tableEntity.waitTimeByOther,egret.Tween.get(this).to({scaleX:1.3,scaleY:1.3},260,egret.Ease.quadIn).to({scaleX:1,scaleY:1},60,egret.Ease.quadOut).wait(c).to({scaleX:1.3,scaleY:1.3,alpha:0},100).call(this.onComplete,this),(this._tableEntity.isSoundByOther||e.self)&&(MedalsViewObject.soundObject&&SoundObjectManagerProxy.getInstance().stop(MedalsViewObject.soundObject),MedalsViewObject.soundObject=SoundObjectManagerProxy.getInstance().play(this._tableEntity.soundID))},t.prototype.stopObject=function(){Logger.log("stopObject "+this.hashCode,this),this.onComplete()},t.prototype.completeObject=function(){Logger.log("completeObject "+this.hashCode,this),egret.Tween.removeTweens(this),egret.Tween.removeTweens(this._winBitmapLabel)},t.NAME="MedalsFX",t}(BaseFX);__reflect(MedalsFX.prototype,"MedalsFX");var MedalsFXData=function(){function e(e,t,o,i,n,a,r){this.targetObject=e,this.win=t,this.denom=o,this.fishID=i,this.odd=n,this.reverse=a,this.self=r}return e}();__reflect(MedalsFXData.prototype,"MedalsFXData");var MedalsViewObject=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._logScope="[MedalsViewObject]",t._isLog=!1,t._component=new MedalsComponent,t}return __extends(t,e),t.prototype.startObject=function(t){Logger.log("startObject "+this.hashCode,this),e.prototype.startObject.call(this,t)},t.prototype.initObject=function(t){Logger.log("initObject "+this.hashCode,this),this.name=this._tableEntity.enumName+"_"+String(this.hashCode),e.prototype.initObject.call(this,t)},t.prototype.resetObject=function(){Logger.log("resetObject "+this.hashCode,this),e.prototype.resetObject.call(this)},t.prototype.playObject=function(){return Logger.log("playObject "+this.hashCode,this),0==this._tableEntity.isShowByOther&&0==this._data.self?void this.onComplete():void e.prototype.playObject.call(this)},t.prototype.stopObject=function(){Logger.log("stopObject "+this.hashCode,this),e.prototype.stopObject.call(this)},t.prototype.completeObject=function(){Logger.log("completeObject "+this.hashCode,this),e.prototype.completeObject.call(this)},t.prototype.getProxy=function(){return this._proxy},t.prototype.getData=function(){return this._data},t.prototype.getTableEntity=function(){return this._tableEntity},t.NAME="MedalsViewObject",t}(BaseCOPObject);__reflect(MedalsViewObject.prototype,"MedalsViewObject");var MedalsViewObjectData=function(){function e(e,t,o,i,n,a,r,s,l){this.tableEntityID=e,this.iPlayerID=t,this.self=o,this.medalsTargetObject=i,this.win=n,this.denom=a,this.fishID=r,this.odd=s,this.reverse=l}return e}();__reflect(MedalsViewObjectData.prototype,"MedalsViewObjectData");var MedalsViewObjectManagerProxy=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._logScope="[MedalsViewObjectManagerProxy]",t._isLog=!1,t._objectMap={},t}return __extends(t,e),t.prototype.onFacadeAwakeComplete=function(){this.facadeComplete()},t.prototype.onPreloadResourceComplete=function(){},t.prototype.onNonPreloadResourceComplete=function(e){e==GameEnum.LoadingCollectionTypeEnum.Battle&&this.resourceComplete()},t.prototype.onSCRoomLoginComplete=function(){this.init()},t.prototype.onSCRoomLogoutComplete=function(){this.reset()},t.prototype.nextAwake=function(){},t.prototype.nextStart=function(){var e=GameEvent.MedalsViewObjectManagerProxyEvent.MODIFY_COMPLETE_GENERATOR_MAP,t=GameEvent.MedalsViewObjectManagerProxyEvent.MODIFY_COMPLETE_OBJECT_MAP,o=TableEntityProxy.getInstance().medalsTableEntityArray;this.startData(e,t,o);var i=ApplicationFacade.getInstance().retrieveMediator(BattleMedalArrayViewMediator.NAME);this._layer=i.getSkinView()},t.prototype.nextInit=function(){},t.prototype.nextReset=function(){},t.prototype.startObject=function(e){var t=e.tableEntityID,o=TableEntityProxy.getInstance().getMedalsTableEntity(t),i=this._generatorMap[t],n=i.getObject(MedalsViewObject);return this.addChild(n),0==n.isStartComplete()&&(n.opSetProtocol(i.getDistributor()),n.start(o,this)),n},t.prototype.initObject=function(e,t){e.init(t)},t.prototype.playObject=function(e){e.play()},t.prototype.stopObject=function(e){e.stop()},t.prototype.onObjectCompleteHandle=function(e){},t.prototype.getObject=function(e){var t=this._objectMap;for(var o in t){var i=t[o];if(i.hashCode==e)return i}return null},t.prototype.getMap=function(){return this._objectMap},t.prototype.addChild=function(e){this._layer.addChild(e)},t.prototype.removeChild=function(e){this._layer.removeChild(e)},t.NAME="MedalsViewObjectManagerProxy",t}(BaseObjectManagerProxy);__reflect(MedalsViewObjectManagerProxy.prototype,"MedalsViewObjectManagerProxy");var MedalsViewObjectManagerProxyAdapterMediator=function(e){function t(t,o){var i=e.call(this,t,o)||this;return i._logScope="[MedalsViewObjectManagerProxyAdapterMediator]",i._isLog=!1,i}return __extends(t,e),t.prototype.listNotificationInterests=function(){return[GameEvent.ApplicationFacadeEvent.AWAKE_COMPLETE,GameEvent.ProtocolProxyEvent.MODIFY_COMPLETE_SC_SYNC_VALUE]},t.prototype.handleNotification=function(e){var t=e.getBody();switch(e.getName()){case GameEvent.ApplicationFacadeEvent.AWAKE_COMPLETE:this.retrieveAllProxyAndMediator();break;case GameEvent.ProtocolProxyEvent.MODIFY_COMPLETE_SC_SYNC_VALUE:this.parserSCSyncEntity(t)}},t.prototype.parserSCSyncEntity=function(e){this.handlePlayMedals(e),this.handlePlayCaiShenFaFaFaMedals(e),this.handlePlayWheelOfFortuneMedals(e)},t.prototype.handlePlayMedals=function(e){if(e.spinResult&&!(e.spinResult.mechanismResult.hitResult.totalWin<=0)){var t=this._allProxy._fishViewObjectManagerProxy.getObjectBySN(e.targetSN);if(t&&!(t.getTableEntity().medalsID<=0)){var o=this._allProxy._playerViewEntityArrayProxy.getPlayerViewEntityByPlayerID(e.playerId);if(o){var i=this._allProxy._protocolProxy.scRoomLogin.iDenom,n=new MedalsViewObjectData(t.getTableEntity().medalsID,o.id,o.isSelf,o.view.medalsGroup,e.spinResult.mechanismResult.hitResult.totalWin,i,e.spinRequest.targetId,e.spinResult.mechanismResult.odd,Utils.GameTool.isReverseByLabelAndBulletRotation(o.seat,GameDataProxy.getInstance().seatID));this._allProxy._medalsViewObjectManagerProxy.play(n),n=null}}}},t.prototype.handlePlayCaiShenFaFaFaMedals=function(e){if(e.spinResult){var t=Utils.GameTool.getCaiShenFaFaFaDataIndex(e.spinResult.mechanismResult);if(t>=0){var o=this._allProxy._playerViewEntityArrayProxy.getPlayerViewEntityByPlayerID(e.playerId);if(!o)return;var i=(e.spinResult.mechanismResult.specialFeatureResults[t].awardOddsCount,e.spinResult.mechanismResult.specialFeatureResults[t].showOdds,e.spinResult.mechanismResult.specialFeatureResults[t].totalWin);if(!o.isSelf){var n=this._allProxy._protocolProxy.scRoomLogin.iDenom,a=new MedalsViewObjectData(2,o.id,o.isSelf,o.view.medalsGroup,i,n,e.spinRequest.targetId,e.spinResult.mechanismResult.odd,Utils.GameTool.isReverseByLabelAndBulletRotation(o.seat,GameDataProxy.getInstance().seatID));this._allProxy._medalsViewObjectManagerProxy.play(a),a=null}}}},t.prototype.handlePlayWheelOfFortuneMedals=function(e){if(e.spinResult){var t=Utils.GameTool.getWheelOfFortuneDataIndex(e.spinResult.mechanismResult);if(t>=0){var o=this._allProxy._playerViewEntityArrayProxy.getPlayerViewEntityByPlayerID(e.playerId);if(!o)return;var i=(e.spinResult.mechanismResult.specialFeatureResults[t].awardOddsCount,e.spinResult.mechanismResult.specialFeatureResults[t].showOdds,e.spinResult.mechanismResult.specialFeatureResults[t].totalWin);if(!o.isSelf){var n=this._allProxy._protocolProxy.scRoomLogin.iDenom,a=new MedalsViewObjectData(3,o.id,o.isSelf,o.view.medalsGroup,i,n,e.spinRequest.targetId,e.spinResult.mechanismResult.odd,Utils.GameTool.isReverseByLabelAndBulletRotation(o.seat,GameDataProxy.getInstance().seatID));this._allProxy._medalsViewObjectManagerProxy.play(a)}}}},t.NAME="MedalsViewObjectManagerProxyAdapterMediator",t}(BaseAdapterMediator);__reflect(MedalsViewObjectManagerProxyAdapterMediator.prototype,"MedalsViewObjectManagerProxyAdapterMediator");var MovieClipFX=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._logScope="[MovieClipFX]",t._isLog=!1,t}return __extends(t,e),t.prototype.startObject=function(e){Logger.log("startObject "+this.hashCode,this);var t=Utils.ResourceTool.getMovieClip(e.jsonName,e.clipName);t.blendMode=e.blendType,this.addChild(t),this._object=t},t.prototype.initObject=function(e){Logger.log("initObject "+this.hashCode,this),this._object&&Utils.DisplayObjectTool.resetDisplayObject(this._object,!0),Utils.DisplayObjectTool.resetDisplayObject(this,!0)},t.prototype.resetObject=function(){Logger.log("resetObject "+this.hashCode,this),this._object&&Utils.DisplayObjectTool.resetDisplayObject(this._object,!1),Utils.DisplayObjectTool.resetDisplayObject(this,!1)},t.prototype.playObject=function(){var e=this;Logger.log("playObject "+this.hashCode,this);var t=this._object,o=this._data,i=this._tableEntity;this.scaleX=i.scale,this.scaleY=i.scale,this._setTimeout=egret.setTimeout(function(){o.loop?t.gotoAndPlay(0,-1):t.gotoAndPlay(0,1),e._object.$frameLabelStart==e._object.$frameLabelEnd&&null!=e._object.currentLabel||1==e._object.totalFrames?e.onComplete():e._object.addEventListener(egret.MovieClipEvent.COMPLETE,e.onComplete,e)},this,o.waitTime)},t.prototype.stopObject=function(){Logger.log("stopObject "+this.hashCode,this),egret.clearTimeout(this._setTimeout),this.onComplete()},t.prototype.completeObject=function(){Logger.log("completeObject "+this.hashCode,this);var e=this._object;e.removeEventListener(egret.MovieClipEvent.COMPLETE,this.onComplete,this),e.stop},t.NAME="MovieClipFX",t}(BaseFX);__reflect(MovieClipFX.prototype,"MovieClipFX");var MovieClipFXData=function(){function e(){}return e}();__reflect(MovieClipFXData.prototype,"MovieClipFXData");var NetworkSignSkinView=function(e){function t(){var t=e.call(this)||this;return t._logScope="[NetworkSignSkinView]",t._isLog=!1,t._networkSign=new egret.MovieClip,t.name="NetworkSignSkinView",t.currentState=Utils.ResourceTool.language,t}return __extends(t,e),t.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),this.awake()},t.prototype.awake=function(){Logger.log("awake",this),this._networkSign=new egret.MovieClip},t.prototype.start=function(){Logger.log("start",this)},t.prototype.init=function(){Logger.log("init",this),this.x=.5*GameSettingProxy.screenWidth-30,this.y=18;var e=new egret.Timer(1e3,0);e.addEventListener(egret.TimerEvent.TIMER,this.timerFunc,this);var t=Utils.ResourceTool.getMovieClip(GameName.JsonName.SS_Lobby,GameName.MCName.NetWorkSignal);t.visible=!0,t.name="networkSignal",t.gotoAndStop(t.totalFrames-1),this.timer=e,this._networkSign=t,this.addChild(this._networkSign)},t.prototype.reset=function(){Logger.log("reset",this)},t.prototype.enable=function(){Logger.log("enable",this),this.timer.start(),this.visible=!0},t.prototype.disable=function(){Logger.log("disable",this),this.visible=!1},t.prototype.refresh=function(e){Logger.log("refresh",this),this.lagValue=e},t.prototype.timerFunc=function(){var e=this.lagValue;if(e&&0!=e){var t=0;t=400>e?3:600>e?2:e>800?1:0,this._networkSign.gotoAndStop(t),this._networkSign.visible=!0}},t}(eui.Component);__reflect(NetworkSignSkinView.prototype,"NetworkSignSkinView",["IView"]);var NetworkSignViewMediator=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._logScope="[NetworkSignViewMediator]",t._isLog=!1,t}return __extends(t,e),t.prototype.listNotificationInterests=function(){return[GameEvent.ApplicationFacadeEvent.AWAKE_COMPLETE,GameEvent.SmartFoxProxyEvent.PING_PONG,GameEvent.SceneEvent.HIDE_BATTLE_SCENE,GameEvent.GuideViewMediatorEvent.ENABLE]},t.prototype.handleNotification=function(e){switch(e.getBody(),e.getName()){case GameEvent.ApplicationFacadeEvent.AWAKE_COMPLETE:this.facadeAwakeComplete(),this.resourceComplete(),this.init();break;case GameEvent.SmartFoxProxyEvent.PING_PONG:this.refresh(e.getBody());break;case GameEvent.GuideViewMediatorEvent.ENABLE:this.enable();break;case GameEvent.SceneEvent.HIDE_BATTLE_SCENE:this.disable()}},t.prototype.nextAwake=function(){this._view=new NetworkSignSkinView,this.getViewComponent().addChild(this._view),this._view.visible=!1},t.prototype.nextStart=function(){this._view.start()},t.prototype.nextInit=function(){this._view.init()},t.prototype.nextReset=function(){this._view.reset()},t.prototype.nextEnable=function(){this._view.enable()},t.prototype.nextDisable=function(){this._view.disable()},t.prototype.nextRefresh=function(e){this._view.refresh(e)},t.NAME="NetworkSignViewMediator",t}(BaseViewMediator);__reflect(NetworkSignViewMediator.prototype,"NetworkSignViewMediator");var NumberLine=function(){function e(){this.max=0,this.min=0}return e.getIsOverlapo=function(e,t){var o;return o=e.min<t.min?t.min-e.max:e.min-t.max,0>o},e}();__reflect(NumberLine.prototype,"NumberLine");var ObjectEvent=function(e){function t(t,o,i){return void 0===o&&(o=!1),void 0===i&&(i=!1),e.call(this,t,o,i)||this}return __extends(t,e),t.COMPLETE="Complete",t}(egret.Event);__reflect(ObjectEvent.prototype,"ObjectEvent");var OptionItemData=function(){function e(){this.on=!0}return e}();__reflect(OptionItemData.prototype,"OptionItemData");var OptionMenuBattleSkinView=function(e){function t(){var t=e.call(this)||this;return t._logScope="[OptionMenuBattleSkinView]",t._isLog=!1,t._show=!1,t._moving=!1,t.name="OptionMenuBattleSkinView",t.currentState=Utils.ResourceTool.language,t}return __extends(t,e),t.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),this.awake()},t.prototype.awake=function(){Logger.log("awake",this)},t.prototype.start=function(){Logger.log("start",this)},t.prototype.init=function(e){Logger.log("init",this),this._arrayCollection=new eui.ArrayCollection(e.optionDataArray),this.buttonListBGImage.height=100*e.optionDataArray.length,this.buttonList.dataProvider=new eui.ArrayCollection(e.optionDataArray),this.buttonList.addEventListener(eui.ItemTapEvent.ITEM_TAP,this.onItemTapHandle,this),this.optionButton.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onOptionTouchTapHandle,this)},t.prototype.reset=function(){Logger.log("reset",this)},t.prototype.enable=function(){Logger.log("enable",this),this.visible=!0,this.showMenu(!1)},t.prototype.disable=function(){Logger.log("enable",this),this.visible=!1},t.prototype.refresh=function(){Logger.log("refresh",this)},t.prototype.onItemTapHandle=function(e){Logger.log("onItemTapHandle",this);var t=e.item;switch(t.id){case GameEnum.OptionTypeEnum.Sound:t.on=!t.on,t.on?(t.bgImage=t.bgImageOn,SoundObjectManagerProxy.getInstance().play(GameEnum.SoundTableEnum.SE_ButtonPress_01)):(t.bgImage=t.bgImageOff,SoundObjectManagerProxy.getInstance().play(GameEnum.SoundTableEnum.SE_ButtonPress_02));break;case GameEnum.OptionTypeEnum.Help:SoundObjectManagerProxy.getInstance().play(GameEnum.SoundTableEnum.SE_ButtonPress_01),this.showMenu(!1);break;case GameEnum.OptionTypeEnum.Home:SoundObjectManagerProxy.getInstance().play(GameEnum.SoundTableEnum.SE_ButtonPress_01),this.showMenu(!1);break;case GameEnum.OptionTypeEnum.Report:SoundObjectManagerProxy.getInstance().play(GameEnum.SoundTableEnum.SE_ButtonPress_01),this.showMenu(!1)}void 0!==this.itemTapCallback&&this.itemTapCallback(e)},t.prototype.onOptionTouchTapHandle=function(e){Logger.log("onOptionTouchTapHandle",this),this._show?SoundObjectManagerProxy.getInstance().play(GameEnum.SoundTableEnum.SE_MenuPress_01):SoundObjectManagerProxy.getInstance().play(GameEnum.SoundTableEnum.SE_MenuPress_02),this.showMenu(!this._show)},t.prototype.showMenu=function(e){if(Logger.log("showMenu visible:"+e,this),!this._moving){this._show=e,this._moving=!0,this.touchEnabled=this.touchChildren=!1,egret.Tween.removeTweens(this);var t=250,o=0;e?(o=this.buttonMaskGroup.width,this.optionButton.currentState="disabled"):(o=0,this.optionButton.currentState="up"),egret.Tween.get(this).to({x:o},t,egret.Ease.quadOut).call(this.onMenuMoveComplete,this,[this,e])}},t.prototype.onMenuMoveComplete=function(e,t){this._moving=!1,this.touchEnabled=this.touchChildren=!0,egret.Tween.removeTweens(e)},t.prototype.resetViewPos=function(){this.touchEnabled=this.touchChildren=!0,egret.Tween.removeTweens(this),this._moving=this._show=!1,this.x=0},t}(eui.Component);__reflect(OptionMenuBattleSkinView.prototype,"OptionMenuBattleSkinView",["IView"]);var OptionMenuBattleSkinViewData=function(){function e(){}return e}();__reflect(OptionMenuBattleSkinViewData.prototype,"OptionMenuBattleSkinViewData");var OptionMenuLobbySkinView=function(e){function t(){var t=e.call(this)||this;return t._logScope="[OptionMenuLobbySkinView]",t._isLog=!1,t._show=!1,t._moving=!1,t.name="OptionMenuLobbySkinView",t.currentState=Utils.ResourceTool.language,t}return __extends(t,e),t.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),this.awake()},t.prototype.awake=function(){Logger.log("awake",this)},t.prototype.start=function(){Logger.log("start",this)},t.prototype.init=function(e){Logger.log("init",this),this._arrayCollection=new eui.ArrayCollection(e.optionDataArray),this.buttonListBGImage.height=72+105*e.optionDataArray.length+30,this.buttonList.dataProvider=this._arrayCollection,this.buttonList.addEventListener(eui.ItemTapEvent.ITEM_TAP,this.onItemTapHandle,this),this.optionButton.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onOptionTouchTapHandle,this)},t.prototype.reset=function(){Logger.log("reset",this)},t.prototype.enable=function(){Logger.log("enable",this),this.visible=!0,this.showMenu(!1,0)},t.prototype.disable=function(){Logger.log("enable",this),this.visible=!1},t.prototype.refresh=function(){Logger.log("refresh",this),this._arrayCollection.refresh()},t.prototype.onItemTapHandle=function(e){Logger.log("onItemTapHandle",this);var t=e.item;switch(t.id){case GameEnum.OptionTypeEnum.Sound:t.on=!t.on,t.on?(t.bgImage=t.bgImageOn,SoundObjectManagerProxy.getInstance().play(GameEnum.SoundTableEnum.SE_ButtonPress_01)):(t.bgImage=t.bgImageOff,SoundObjectManagerProxy.getInstance().play(GameEnum.SoundTableEnum.SE_ButtonPress_02));break;case GameEnum.OptionTypeEnum.Help:this.showMenu(!1);break;case GameEnum.OptionTypeEnum.Home:SoundObjectManagerProxy.getInstance().play(GameEnum.SoundTableEnum.SE_ButtonPress_01),this.showMenu(!1);break;case GameEnum.OptionTypeEnum.Report:SoundObjectManagerProxy.getInstance().play(GameEnum.SoundTableEnum.SE_ButtonPress_01),this.showMenu(!1)}void 0!==this.itemTapCallback&&this.itemTapCallback(e)},t.prototype.onOptionTouchTapHandle=function(e){Logger.log("onOptionTouchTapHandle",this),Utils.ButtonTool.buttonEffect(e.currentTarget),this._show?SoundObjectManagerProxy.getInstance().play(GameEnum.SoundTableEnum.SE_MenuPress_01):SoundObjectManagerProxy.getInstance().play(GameEnum.SoundTableEnum.SE_MenuPress_02),this.showMenu(!this._show)},t.prototype.showMenu=function(e,t){if(void 0===t&&(t=250),Logger.log("showMenu visible:"+e,this),!this._moving){this._show=e,this._moving=!0,this.touchEnabled=this.touchChildren=!1;var o=0,i=0;e?(o=0,i=this.buttonList.height+50):(o=Math.max(this.buttonList.height,this.buttonListBGImage.height),i=0),egret.Tween.removeTweens(this.buttonGroup),egret.Tween.get(this.buttonGroup).to({y:o},t,egret.Ease.quadOut).call(this.onMenuMoveComplete,this,[this.buttonGroup,e]),egret.Tween.removeTweens(this.buttonListBGImage),this.buttonListBGImage.height=0,egret.Tween.get(this.buttonListBGImage).to({height:i},t,egret.Ease.quadOut)}},t.prototype.onMenuMoveComplete=function(e,t){this._moving=!1,this.touchEnabled=this.touchChildren=!0,egret.Tween.removeTweens(e)},t.prototype.createEventBtn=function(){var e=Utils.ResourceTool.getArmatureByDragonBones("UI_PromoteIcon","armatureName"),t=e.getDisplay();t.x=-50,t.y=537,t.animation.play("animation",0),this.addChild(t),t.touchEnabled=!0,t.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onEventBtnTapHandle,this)},t.prototype.onEventBtnTapHandle=function(e){this.eventBtnTapCallback(e)
},t}(eui.Component);__reflect(OptionMenuLobbySkinView.prototype,"OptionMenuLobbySkinView",["IView"]);var OptionMenuLobbySkinViewData=function(){function e(){}return e}();__reflect(OptionMenuLobbySkinViewData.prototype,"OptionMenuLobbySkinViewData");var OptionMenuSkinView=function(e){function t(){var t=e.call(this)||this;return t._logScope="[OptionMenuSkinView]",t._isLog=!1,t.name="OptionMenuSkinView",t.currentState=Utils.ResourceTool.language,t}return __extends(t,e),t.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),this.awake()},t.prototype.awake=function(){Logger.log("awake",this)},t.prototype.start=function(){Logger.log("start",this),this.lobbySkinView.start(),this.battleSkinView.start()},t.prototype.init=function(e){Logger.log("init",this),this._data=e,this.lobbySkinView.init(e.lobbyData),this.battleSkinView.init(e.battleData)},t.prototype.reset=function(){Logger.log("reset",this),this.lobbySkinView.reset(),this.battleSkinView.reset()},t.prototype.enable=function(e){Logger.log("enable",this),this.visible=!0,e==GameEnum.SceneTypeEnum.Lobby?(this.lobbySkinView.enable(),this.battleSkinView.disable()):e==GameEnum.SceneTypeEnum.Battle?(this.lobbySkinView.disable(),this.battleSkinView.enable()):(this.lobbySkinView.disable(),this.battleSkinView.disable())},t.prototype.disable=function(){Logger.log("enable",this),this.visible=!1,this.lobbySkinView.disable(),this.battleSkinView.disable()},t.prototype.refresh=function(){Logger.log("refresh",this),this.lobbySkinView.refresh(),this.battleSkinView.refresh()},t.prototype.onItemTapHandle=function(e){Logger.log("onItemTapHandle",this),this.itemTapCallback&&this.itemTapCallback(e)},t}(eui.Component);__reflect(OptionMenuSkinView.prototype,"OptionMenuSkinView",["IView"]);var OptionMenuSkinViewData=function(){function e(){}return e}();__reflect(OptionMenuSkinViewData.prototype,"OptionMenuSkinViewData");var OptionMenuViewMediator=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._logScope="[OptionMenuViewMediator]",t._isLog=!1,t.data=new OptionMenuSkinViewData,t.autoHideDelayTime=500,t.balanceChanged=!1,t.loadLobbyScene=!1,t.tempLobbySceneData=null,t}return __extends(t,e),t.prototype.listNotificationInterests=function(){return[GameEvent.ApplicationFacadeEvent.AWAKE_COMPLETE,GameEvent.ResourceProxyEvent.LOAD_COMPLETE_NON_PRELOAD_GROUP,GameEvent.SceneEvent.LOAD_LOBBY_SCENE,GameEvent.SceneEvent.LOAD_TRANSITION_SCENE,GameEvent.OptionMenuViewMediatorEvent.ENABLE,GameEvent.OptionMenuViewMediatorEvent.DISABLE,GameEvent.SceneEvent.LOBBY_TOUCH_BEGIN,GameEvent.SceneEvent.BATTLE_TOUCH_BEGIN,GameEvent.SoundObjectManagerProxyEvent.MODIFY_COMPLETE_SOUND_ON_VALUE,GameEvent.ProtocolProxyEvent.MODIFY_COMPLETE_CS_FIRE_VALUE,GameEvent.BulletViewEntityArrayProxyEvent.MODIFY_COMPLETE_BULLET_ARRAY,GameEvent.BattleCaiShenFaFaFaViewMediatorEvent.ENABLE_COMPLETE,GameEvent.BattleCaiShenFaFaFaViewMediatorEvent.DISABLE_COMPLETE,GameEvent.BattleWheelOfFortuneViewMediatorEvent.ENABLE_COMPLETE,GameEvent.BattleWheelOfFortuneViewMediatorEvent.DISABLE_COMPLETE,GameEvent.GameDataProxyEvent.ON_SET_EVENT_BTN]},t.prototype.handleNotification=function(e){var t=e.getBody();switch(e.getName()){case GameEvent.ApplicationFacadeEvent.AWAKE_COMPLETE:this.facadeAwakeComplete();break;case GameEvent.ResourceProxyEvent.LOAD_COMPLETE_NON_PRELOAD_GROUP:t==GameEnum.LoadingCollectionTypeEnum.Lobby&&(this.resourceComplete(),this.init());break;case GameEvent.SceneEvent.LOAD_LOBBY_SCENE:this.loadLobbyScene=!0,this.tempLobbySceneData=t,this.nextStep();break;case GameEvent.SceneEvent.LOAD_TRANSITION_SCENE:this.disable();break;case GameEvent.OptionMenuViewMediatorEvent.ENABLE:this.loadLobbyScene=!0,this.tempLobbySceneData=[t],this.nextStep();break;case GameEvent.OptionMenuViewMediatorEvent.DISABLE:this.disable();break;case GameEvent.SceneEvent.LOBBY_TOUCH_BEGIN:this.onViewTouchBeginHandle(e.getBody());break;case GameEvent.SceneEvent.BATTLE_TOUCH_BEGIN:this.onViewTouchBeginHandle(e.getBody());break;case GameEvent.SoundObjectManagerProxyEvent.MODIFY_COMPLETE_SOUND_ON_VALUE:if(!this.data.lobbyData||!this.data.battleData)return;this.updateSoundButtonState(this.data.lobbyData.optionDataArray,t),this.updateSoundButtonState(this.data.battleData.optionDataArray,t),this.refresh();break;case GameEvent.ProtocolProxyEvent.MODIFY_COMPLETE_CS_FIRE_VALUE:this.onPlayerFire();break;case GameEvent.BattleCaiShenFaFaFaViewMediatorEvent.ENABLE_COMPLETE:t.isSelf&&this.onPlayerFire();break;case GameEvent.BattleCaiShenFaFaFaViewMediatorEvent.DISABLE_COMPLETE:this.onBulletHit();break;case GameEvent.BattleWheelOfFortuneViewMediatorEvent.ENABLE_COMPLETE:t.isSelf&&this.onPlayerFire();break;case GameEvent.BattleWheelOfFortuneViewMediatorEvent.DISABLE_COMPLETE:this.onBulletHit();break;case GameEvent.BulletViewEntityArrayProxyEvent.MODIFY_COMPLETE_BULLET_ARRAY:e.getType()==(!0).toString()&&this.onBulletHit();break;case GameEvent.GameDataProxyEvent.ON_SET_EVENT_BTN:this.onSetEventBtn()}},t.prototype.nextAwake=function(){this._view=new OptionMenuSkinView,this.getViewComponent().addChild(this._view),this._view.visible=!1},t.prototype.nextStart=function(){var e=this;this._view.lobbySkinView.itemTapCallback=function(t){return e.onItemTapHandle(t)},this._view.battleSkinView.itemTapCallback=function(t){return e.onItemTapHandle(t)},this._view.start()},t.prototype.nextInit=function(){var e=new OptionMenuSkinViewData;e.lobbyData=this.createLobbyData(),e.battleData=this.createBattleData(),this.data=e,this._view.init(e),this.timer=new egret.Timer(this.autoHideDelayTime,1),this.timer.addEventListener(egret.TimerEvent.TIMER,this.onTimerEvent,this)},t.prototype.nextReset=function(){this._view.reset()},t.prototype.nextEnable=function(e){this._view.enable(e)},t.prototype.nextDisable=function(){this._view.disable()},t.prototype.nextRefresh=function(e){this._view.refresh()},t.prototype.createLobbyData=function(){var e=new OptionMenuLobbySkinViewData;if(e.optionDataArray=new Array,this._allProxy._webBridgeProxy.isShowHome()){var t=new OptionItemData;t.bgImage=Utils.StringTool.addPNG(GameName.TextureName.LobbyHome),t.bgImageOn=Utils.StringTool.addPNG(GameName.TextureName.LobbyHome),t.bgImageOff=Utils.StringTool.addPNG(GameName.TextureName.LobbyHome),t.id=GameEnum.OptionTypeEnum.Home,e.optionDataArray.push(t)}var o=new OptionItemData;if(o.on=this._allProxy._soundObjectManagerProxy.soundOn,o.on?o.bgImage=Utils.StringTool.addPNG(GameName.TextureName.LobbySoundOn):o.bgImage=Utils.StringTool.addPNG(GameName.TextureName.LobbySoundOff),o.bgImageOn=Utils.StringTool.addPNG(GameName.TextureName.LobbySoundOn),o.bgImageOff=Utils.StringTool.addPNG(GameName.TextureName.LobbySoundOff),o.id=GameEnum.OptionTypeEnum.Sound,e.optionDataArray.push(o),this._allProxy._webBridgeProxy.isShowReport()){var i=new OptionItemData;i.bgImage=Utils.StringTool.addPNG(GameName.TextureName.LobbyReport),i.bgImageOn=Utils.StringTool.addPNG(GameName.TextureName.LobbyReport),i.bgImageOff=Utils.StringTool.addPNG(GameName.TextureName.LobbyReport),i.id=GameEnum.OptionTypeEnum.Report,e.optionDataArray.push(i)}var n=new OptionItemData;return n.bgImage=Utils.StringTool.addPNG(GameName.TextureName.LobbyHelp),n.bgImageOn=Utils.StringTool.addPNG(GameName.TextureName.LobbyHelp),n.bgImageOff=Utils.StringTool.addPNG(GameName.TextureName.LobbyHelp),n.id=GameEnum.OptionTypeEnum.Help,e.optionDataArray.push(n),e},t.prototype.createBattleData=function(){var e=new OptionMenuBattleSkinViewData;e.optionDataArray=new Array;var t=new OptionItemData;t.on=this._allProxy._soundObjectManagerProxy.soundOn,t.on?t.bgImage=Utils.StringTool.addPNG(GameName.TextureName.LobbySoundOn):t.bgImage=Utils.StringTool.addPNG(GameName.TextureName.LobbySoundOff),t.bgImage=Utils.StringTool.addPNG(GameName.TextureName.BattleSoundOn),t.bgImageOn=Utils.StringTool.addPNG(GameName.TextureName.BattleSoundOn),t.bgImageOff=Utils.StringTool.addPNG(GameName.TextureName.BattleSoundOff),t.id=GameEnum.OptionTypeEnum.Sound,e.optionDataArray.push(t);var o=new OptionItemData;o.bgImage=Utils.StringTool.addPNG(GameName.TextureName.BattleHelp),o.bgImageOn=Utils.StringTool.addPNG(GameName.TextureName.BattleHelp),o.bgImageOff=Utils.StringTool.addPNG(GameName.TextureName.BattleHelp),o.id=GameEnum.OptionTypeEnum.Help,e.optionDataArray.push(o);var i=new OptionItemData;return i.bgImage=Utils.StringTool.addPNG(GameName.TextureName.BattleHome),i.bgImageOn=Utils.StringTool.addPNG(GameName.TextureName.BattleHome),o.bgImageOff=Utils.StringTool.addPNG(GameName.TextureName.BattleHome),i.id=GameEnum.OptionTypeEnum.Home,e.optionDataArray.push(i),e},t.prototype.onItemTapHandle=function(e){Logger.log("onItemTapHandle",this);var t=e.item;switch(t.id){case GameEnum.OptionTypeEnum.Sound:this._allProxy._soundObjectManagerProxy.soundOn=t.on;break;case GameEnum.OptionTypeEnum.Help:this.sendNotification(GameEvent.HelpViewMediatorEvent.ENABLE);break;case GameEnum.OptionTypeEnum.Home:if(this._allProxy._gameDataProxy.gameSceneByEnable==GameEnum.SceneTypeEnum.Lobby)this._allProxy._webBridgeProxy.gotoGameHall();else if(this._allProxy._gameDataProxy.gameSceneByEnable==GameEnum.SceneTypeEnum.Battle){var o=new ProtocolEntity.CSRoomLogoutEntity;o.iPlayerID=this._allProxy._gameDataProxy.playerID,this.sendNotification(GeneratorProtocolCommand.NAME,[ProtocolType.csRoomLogout,o])}else Logger.error("onItemTapHandle error");break;case GameEnum.OptionTypeEnum.Report:this._allProxy._webBridgeProxy.gotoReport()}},t.prototype.onViewTouchBeginHandle=function(e){Logger.log("onViewTouchBeginHandle",this),this.hideLobbyMenu(e),this.hideBattleMenu(e)},t.prototype.hideLobbyMenu=function(e){var t=this._view.lobbySkinView;if(t.buttonGroup.visible&&e.target!=t.optionButton){for(var o=0;o<t.buttonList.numChildren;o++)if(e.target.parent&&e.target.parent.parent&&e.target.parent.parent==t.buttonList.getChildAt(o))return;t.showMenu(!1)}},t.prototype.hideBattleMenu=function(e){var t=this._view.battleSkinView;if(t.buttonGroup.visible&&e.target!=t.optionButton){for(var o=0;o<t.buttonList.numChildren;o++)if(e.target.parent&&e.target.parent.parent&&e.target.parent.parent==t.buttonList.getChildAt(o))return;t.showMenu(!1)}},t.prototype.updateSoundButtonState=function(e,t){for(var o=0;o<e.length;o++){var i=e[o];i.id==GameEnum.OptionTypeEnum.Sound&&(i.on=t,i.on?i.bgImage=i.bgImageOn:i.bgImage=i.bgImageOff)}},t.prototype.onPlayerFire=function(){this._view.visible=!1,this.stopTimer()},t.prototype.onBulletHit=function(){if(this.playerIsIdle()){if(this.timer.start(),this._allProxy._gameDataProxy.isUpdateTicketRequest){var e=new ProtocolEntity.CSRoomLogoutEntity;e.iPlayerID=this._allProxy._gameDataProxy.playerID,this.sendNotification(GeneratorProtocolCommand.NAME,[ProtocolType.csRoomLogout,e])}}else this.stopTimer()},t.prototype.stopTimer=function(){this.timer.reset()},t.prototype.onTimerEvent=function(e){this._view.battleSkinView.resetViewPos(),this._view.visible=!0},t.prototype.nextStep=function(){(this.tempLobbySceneData&&this.loadLobbyScene||this.tempLobbySceneData&&this.tempLobbySceneData[0]==GameEnum.SceneTypeEnum.Lobby&&this.tempLobbySceneData[1]==GameEnum.SceneTypeEnum.Loading)&&(this.balanceChanged=this.loadLobbyScene=!1,this.enable(this.tempLobbySceneData[0]),this.tempLobbySceneData=null)},t.prototype.playerIsIdle=function(){return this._allProxy._gameDataProxy.playerIsIdle?!0:!1},t.prototype.onSetEventBtn=function(){var e=this;this._view.lobbySkinView.createEventBtn(),this._view.lobbySkinView.eventBtnTapCallback=function(t){return e.eventBtnTapCallback(t)}},t.prototype.eventBtnTapCallback=function(e){e&&this._allProxy._webBridgeProxy.openFrame(1,this._allProxy._gameDataProxy.gameAchievementData.btn_url)},t.NAME="OptionMenuViewMediator",t}(BaseViewMediator);__reflect(OptionMenuViewMediator.prototype,"OptionMenuViewMediator");var ParserMessageCommand=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._logScope="[ParserMessageCommand]",t._isLog=!1,t}return __extends(t,e),t.prototype.execute=function(e){var o=e.getBody();o.getStatus!=MessageType.fullSeat&&o.getStatus!=MessageType.canNotLoginRoomWithNoMoney&&(this.facade.removeCommand(t.NAME),this.sendNotification(GameEvent.ProtocolProxyEvent.DISCONNECT_SMARTFOX));var i=new RetrieveAllProxy;i.retrieveAllProxy(),Logger.error("Status: "+MessageType[o.getStatus]);var n=o.getStatus;switch(o.getStatus){case MessageType.connectionFail:n=CodeNumber.connectionFail;break;case MessageType.disconnectLost:n=CodeNumber.disconnectLost;break;case MessageType.loginError:n=CodeNumber.loginError;break;case MessageType.loginFail:n=CodeNumber.loginFail;break;case MessageType.roomJoinError:n=CodeNumber.roomJoinError;break;case MessageType.fullSeat:n=CodeNumber.fullSeat,this.sendNotification(GameEvent.SceneEvent.FORCE_HIDE_TRANSITION);break;case MessageType.idleRemind:n=CodeNumber.idleRemind;break;case MessageType.accountStatus:break;case MessageType.netLag:n=CodeNumber.netLag;break;case MessageType.gameLag:n=CodeNumber.gameLag;break;case MessageType.missResult:n=CodeNumber.missResult;break;case MessageType.errorCode:switch(Logger.error("Status: "+ServerErrorCode[o.getValue]),o.getValue){case ServerErrorCode.loginError:n=CodeNumber.serverErrorCodeLoginError;break;case ServerErrorCode.logoutError:n=CodeNumber.serverErrorCodeLogoutError;break;case ServerErrorCode.disconnectError:n=CodeNumber.serverErrorCodeDisconnectError;break;case ServerErrorCode.fcInfoIndexError:n=CodeNumber.serverErrorCodeFcInfoIndexError;break;case ServerErrorCode.fireError:n=CodeNumber.serverErrorCodeFireError;break;case ServerErrorCode.fireDragonDataError:n=CodeNumber.serverErrorCodeFireDragonDataError;break;case ServerErrorCode.hitDataError:n=CodeNumber.serverErrorCodeHitDataError;break;case ServerErrorCode.hitAccountError:n=CodeNumber.serverErrorCodeHitAccountError;break;case ServerErrorCode.withdrawError:n=CodeNumber.serverErrorCodeWithdrawError}break;case MessageType.canNotLoginRoomWithNoMoney:n=CodeNumber.canNotLoginRoomWithNoMoney;break;case MessageType.insufficientBalance:n=CodeNumber.insufficientBalance;break;case MessageType.gameLoginError:n=o.getValue+200;break;case MessageType.failed:n=CodeNumber.Failed}o.getStatus==MessageType.accountStatus?i._webBridgeProxy.showErrorMsgByCode(o.getValue,o.getValue2):i._webBridgeProxy.showErrorMsgByCode(n)},t.NAME="ParserMessageCommand",t}(puremvc.SimpleCommand);__reflect(ParserMessageCommand.prototype,"ParserMessageCommand",["ILogger"]);var ParserMessageData=function(){function e(e,t,o){this._status=e,this._value=t,this._value2=o}return Object.defineProperty(e.prototype,"getStatus",{get:function(){return this._status},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"getValue",{get:function(){return this._value},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"getValue2",{get:function(){return this._value2},enumerable:!0,configurable:!0}),e}();__reflect(ParserMessageData.prototype,"ParserMessageData");var ParserProtocolCommand=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._logScope="[ParserProtocolCommand]",t._isLog=!1,t._currectFishSN=1,t}return __extends(t,e),t.prototype.execute=function(e){this._protocolProxy=this.facade.retrieveProxy(ProtocolProxy.NAME),this._gameDataProxy=this.facade.retrieveProxy(GameDataProxy.NAME),this._smartFoxProxy=this.facade.retrieveProxy(SmartFoxProxy.NAME);var t=e.getBody();this.parserData(t[0],t[1])},t.prototype.parserData=function(e,t){switch(e!=ProtocolType.scSync&&Logger.log("parserData even:"+ProtocolType[e],this),e){case ProtocolType.scLogin:this._protocolProxy.scLogin=t;break;case ProtocolType.scErrorCode:this._protocolProxy.scErrorCode=new ProtocolEntity.SCErrorCodeEntity(t);break;case ProtocolType.scLobbyJoin:var o=new ProtocolEntity.SCLobbyJoinEntity;o.id=t.id,o.name=t.name,o.groupId=t.groupId,o.roomListFromGroup=this._smartFoxProxy._sfs.getRoomListFromGroup(t.name),this._protocolProxy.scLobbyJoin=o;break;case ProtocolType.scLobbyInfo:this._protocolProxy.scLobbyInfo=new ProtocolEntity.SCLobbyInfoEntity(t);break;case ProtocolType.scUserInfo:this._protocolProxy.scUserInfo=new ProtocolEntity.SCUserInfoEntity(t);break;case ProtocolType.scRoomJoin:this._protocolProxy.scRoomJoin=t;break;case ProtocolType.scRoomLogin:this._protocolProxy.scRoomLogin=this.parserSCRoomLogin(t);break;case ProtocolType.scRoomLogout:this._protocolProxy.scRoomLogout=new ProtocolEntity.SCRoomLogoutEntity(t);break;case ProtocolType.scPlayerRoomLogin:this._protocolProxy.scPlayerRoomLogin=new ProtocolEntity.SCPlayerRoomLoginEntity(t);break;case ProtocolType.scPlayerRoomLogout:this._protocolProxy.scPlayerRoomLogout=new ProtocolEntity.SCPlayerRoomLogoutEntity(t);break;case ProtocolType.scTurn:if(this._gameDataProxy.gameSceneByShow!=GameEnum.SceneTypeEnum.Battle)return;this._protocolProxy.scTurn=new ProtocolEntity.SCTurnEntity(t);break;case ProtocolType.award:if(this._gameDataProxy.gameSceneByShow!=GameEnum.SceneTypeEnum.Battle)return;this._protocolProxy.broadcast=this.parseSCBroadcast(t);break;case ProtocolType.scFire:if(this._gameDataProxy.gameSceneByShow!=GameEnum.SceneTypeEnum.Battle)return;this.parseSCFire(t);break;case ProtocolType.scSync:if(this._gameDataProxy.gameSceneByShow!=GameEnum.SceneTypeEnum.Battle)return;this.parseSCSync(t);break;case ProtocolType.changeBalance:this._protocolProxy.scChangeBalance=new ProtocolEntity.SCChangeBalanceEntity(t);break;case ProtocolType.maintenanceAnnounce:this._protocolProxy.maintenanceAnnounce=t;break;case ProtocolType.SCQuickLoginError:this._protocolProxy.scQuickLoginError=new ProtocolEntity.SCQuickLoginErrorEntity(t);break;default:Logger.error(this._logScope+" "+e+" is not exist")}},t.prototype.parserSCRoomLogin=function(e){var t,o=new ProtocolEntity.SCRoomLoginEntity(e),i=new Array(!1,!1,!1,!1),n=new Array(-1,-1,-1,-1),a=new Array(-1,-1,-1,-1);if(o.sRoomView){var r=JSON.parse(o.sRoomView);for(var s in r)t=Number(s),i[t]=!0,n[t]=r[s].id,a[t]=r[s].cb;o.bInRoom=i,o.iID=n,o.lCent=a}return o},t.prototype.parseSCBroadcast=function(e){for(var t=JSON.parse(e.getUtfString("entity")),o=new Array,i=0;i<t.length;i++){var n=t[i];n.win=Utils.TranslateTool.cent2TenDollar(n.win),o.push(n)}return o},t.prototype.parseSCFire=function(e){for(var t=JSON.parse(e.getUtfString("entity")),o=0;o<t.length;o++){var i=t[o];i.iPlayerID!=this._protocolProxy.scLogin.id&&(this._protocolProxy.scFire=i)}},t.prototype.parseSCSync=function(e){for(var t=JSON.parse(e.getUtfString("entity")),o=0;o<t.length;o++){var i=t[o];this._protocolProxy.scSync=i}},t.NAME="ParserProtocolCommand",t}(puremvc.SimpleCommand);__reflect(ParserProtocolCommand.prototype,"ParserProtocolCommand",["ILogger"]);var ParticleFX=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._logScope="[ParticleFX]",t._isLog=!1,t}return __extends(t,e),t.prototype.startObject=function(e){Logger.log("startObject "+this.hashCode,this);var t=Utils.ResourceTool.getParticleSystem(e.jsonName),o=Utils.ResourceTool.getRes(e.jsonName+"_json");e.lifeTime-e.fadeInTime-e.fadeOutTime<0&&Logger.error("startObject (tableEntity.lifeTime - tableEntity.fadeInTime - tableEntity.fadeOutTime) < 0 ",this),this.addChild(t),this._object=t,this._jsonConfig=o},t.prototype.initObject=function(e){Logger.log("initObject "+this.hashCode,this),this._object&&Utils.DisplayObjectTool.resetDisplayObject(this._object,!0),Utils.DisplayObjectTool.resetDisplayObject(this,!0)},t.prototype.resetObject=function(){Logger.log("resetObject "+this.hashCode,this),this._object&&Utils.DisplayObjectTool.resetDisplayObject(this._object,!1),Utils.DisplayObjectTool.resetDisplayObject(this,!1)},t.prototype.playObject=function(){var e=this;Logger.log("playObject "+this.hashCode,this);var t=this._data,o=this._object,i=this._tableEntity;this.scaleX=i.scale,this.scaleY=i.scale,this.alpha=0,this._setTimeout=egret.setTimeout(function(){o.start(),egret.Tween.get(e).to({alpha:1},i.fadeInTime).wait(i.lifeTime-i.fadeInTime-i.fadeOutTime).to({alpha:0},i.fadeOutTime).call(e.onComplete),o.addEventListener(egret.Event.COMPLETE,e.onComplete,e)},this,t.waitTime)},t.prototype.stopObject=function(){Logger.log("stopObject "+this.hashCode,this),egret.clearTimeout(this._setTimeout),this.onComplete()},t.prototype.completeObject=function(){Logger.log("completeObject "+this.hashCode,this);var e=this._object;e.removeEventListener(egret.MovieClipEvent.COMPLETE,this.onComplete,this),e.stop(!0)},t.NAME="ParticleFX",t}(BaseFX);__reflect(ParticleFX.prototype,"ParticleFX");var ParticleFXData=function(){function e(){}return e}();__reflect(ParticleFXData.prototype,"ParticleFXData");var DebugPlatform=function(){function e(){}return e.prototype.getUserInfo=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){return[2,{nickName:"username"}]})})},e.prototype.login=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){return[2]})})},e}();__reflect(DebugPlatform.prototype,"DebugPlatform",["Platform"]),window.platform||(window.platform=new DebugPlatform);var PlayerViewEntity=function(){function e(){this._logScope="[PlayerViewEntity]",this._isLog=!1,this._luckyDrawEntityArray=[],this.bulletType=GameEnum.FortTableEnum.Normal,this.bulletUpperLimitCount=10,this.bulletUsedCount=0,this._betArrayIndex=0,this._queueTotalWin=[]}return e.prototype.getCreditByPreCharge=function(){var e=0,t="";for(var o in this.csFireArray){var i=this.csFireArray[o];if(this._isLog){var n=Utils.TranslateTool.bet2CashTenDolla(i.iBet,this.denom),a=Utils.TranslateTool.tenDollar2Cent(n);t+="- "+String(a)}i.iBulletType==GameEnum.FortTableEnum.Normal&&(e+=i.iBet)}for(var o in this._queueTotalWin)e+=this._queueTotalWin[o];var r=Utils.TranslateTool.bet2CashTenDolla(e,this.denom),s=Utils.TranslateTool.tenDollar2Cent(r),l=this.credit-s;return Logger.log("getCreditByPreCharge credit:"+l+" = "+this.credit+" "+t,this),l},e.prototype.getCreditCashByPreCharge=function(){return Utils.TranslateTool.cent2TenDollar(this.getCreditByPreCharge())},e.prototype.getBetCash=function(){return Utils.TranslateTool.bet2CashTenDolla(this.bet,this.denom)},e.prototype.nextBet=function(){return this.betArrayIndex=this.betArrayIndex+1,this.betArray[this.betArrayIndex]},e.prototype.previousBet=function(){return this.betArrayIndex=this.betArrayIndex-1,this.betArray[this.betArrayIndex]},Object.defineProperty(e.prototype,"betArrayIndex",{get:function(){return this._betArrayIndex},set:function(e){e>=this.betArray.length?e=0:-1>=e&&(e=this.betArray.length-1),this._betArrayIndex=e,this.bet=this.betArray[this.betArrayIndex]},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"luckyDrawEntityArray",{get:function(){return this._luckyDrawEntityArray},set:function(e){this._luckyDrawEntityArray=e},enumerable:!0,configurable:!0}),e.prototype.addQueueTotalWin=function(e){this._queueTotalWin.push(e)},e.prototype.removeQueueTotalWin=function(e){for(var t in this._queueTotalWin)if(this._queueTotalWin[t]==e){this._queueTotalWin.splice(Number(t),1);break}},e.betLevelDivide=3,e}();__reflect(PlayerViewEntity.prototype,"PlayerViewEntity",["ILogger"]);var PlayerViewEntityArrayProxy=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._logScope="[PlayerViewEntityArrayProxy]",t._isLog=!1,t}return __extends(t,e),t.getInstance=function(){return null==this._instance&&(this._instance=ApplicationFacade.getInstance().retrieveProxy(t.NAME)),this._instance},t.prototype.onFacadeAwakeComplete=function(){this.retrieveProxy()},t.prototype.onPreloadResourceComplete=function(){},t.prototype.onNonPreloadResourceComplete=function(e){e==GameEnum.LoadingCollectionTypeEnum.Lobby&&this.start()},t.prototype.onSCRoomLoginComplete=function(){this.reset(),this.init()},t.prototype.onSCRoomLogoutComplete=function(){this.reset()},t.prototype.awake=function(){this._playerViewEntityArray=new Array},t.prototype.start=function(){},t.prototype.init=function(){},t.prototype.reset=function(){this.clearArray(),this._scRoomLogin=null},t.prototype.getPlayerViewEntityArray=function(){return this._playerViewEntityArray},t.prototype.getPlayerViewEntityBySelf=function(){var e=this._allProxy._gameDataProxy.playerID;return this.getPlayerViewEntityByPlayerID(e)},t.prototype.getPlayerViewEntityByPlayerID=function(e){var t=this._playerViewEntityArray;for(var o in t){var i=t[o];if(i.id==e)return i}return null},t.prototype.getPlayerViewEntityBySeat=function(e){var t=this._playerViewEntityArray;for(var o in t){var i=t[o];if(i.seat==e)return i}return null},t.prototype.parserSCRoomLogin=function(e){this._playerViewEntityArray.length=0,Logger.log("parserSCRoomLogin",this),this._scRoomLogin=e;for(var t=0;t<e.iID.length;t++)e.iID[t]>=0&&this.addPlayer(e.iID[t],t,e.lCent[t])},t.prototype.parserSCPlayerRoomLogin=function(e){Logger.log("parserSCPlayerRoomLogin",this),this.checkSelfPlayerID(e.iPlayerID)||this.addPlayer(e.iPlayerID,e.iLocation,e.llPlayerCent)},t.prototype.parserSCRoomLogout=function(e){Logger.log("parserSCRoomLogout",this),this.clearArray()},t.prototype.parserSCPlayerRoomLogout=function(e){Logger.log("parserSCPlayerRoomLogout",this),this.checkSelfPlayerID(e.iPlayerID)||(this.removePlayer(e.iPlayerID),this.sendNotification(GameEvent.PlayerViewEntityArrayProxyEvent.MODIFY_COMPLETE_PLAYER_ARRAY,e))},t.prototype.parserCSFire=function(e){Logger.log("parserCSFire",this),this.checkSelfPlayerID(e.iPlayerID)||Logger.error(this._logScope+" csFire, iPlayerID:"+e.iPlayerID+" is not self"),this.addCSFire(e.iPlayerID,e),this.updateCredit(e.iPlayerID),this.fireBullet(e)},t.prototype.parserSCFire=function(e){Logger.log("parserSCFire",this);var t=this.getPlayerViewEntityByPlayerID(e.iPlayerID);if(this.updateBet(e.iPlayerID,e.iBet),this.updateCredit(e.iPlayerID),t){if(this.checkSelfPlayerID(e.iPlayerID))t.bulletType==GameEnum.FortTableEnum.AutomaticBazooka&&t.view.setBulletCount(t.bulletUpperLimitCountBySpecial-t.bulletUsedCountBySpecial);else if(e.iBulletType==GameEnum.FortTableEnum.AutomaticBazooka){var o=Utils.BulletTool.GetBulletCountByBulletID(e.iBulletID.toString())-1;t.bulletType!=e.iBulletType?(t.bulletType=e.iBulletType,t.view.setFort(e.iBulletType,o,!1)):t.view.setBulletCount(o)}else e.iBulletType==GameEnum.FortTableEnum.MegaDrill&&t.bulletType!=e.iBulletType&&(t.bulletType=e.iBulletType,t.view.setFort(e.iBulletType,0,!1));this.fireBullet(e)}},t.prototype.parserCSHit=function(e){Logger.log("parserCSHit",this),this.checkSelfPlayerID(e.iPlayerID)||Logger.error(this._logScope+" csHit, iPlayerID:"+e.iPlayerID+" is not self")},t.prototype.parserSCSyncEntity=function(e){this.handleRefreshData(e)},t.prototype.handleRefreshData=function(e){var t=e,o=this.getPlayerViewEntityByPlayerID(t.playerId);o&&-1!=t.playerId&&(this.checkSelfPlayerID(t.playerId)&&(!Utils.BulletTool.IsMegaDrillBullet(t.bulletId)||Utils.BulletTool.IsFirstMegaDrillBullet(t.bulletId))&&this.removeCSFire(t.playerId,t),this.parseLuckyDrawData(t),this.updateCredit(t.playerId,t.creditBalance),this.updateFort(t))},t.prototype.updateCredit=function(e,t){void 0===t&&(t=-1),Logger.log("updateCredit",this);var o=this.getPlayerViewEntityByPlayerID(e);o&&(t>=0&&(o.credit=t),this.sendNotification(GameEvent.PlayerViewEntityArrayProxyEvent.MODIFY_COMPLETE_PLAYER_ARRAY,this._playerViewEntityArray),this.sendNotification(GameEvent.PlayerViewEntityArrayProxyEvent.MODIFY_COMPLETE_CREDIT_VALUE,[o.seat,o.getCreditByPreCharge()]))},t.prototype.updateBet=function(e,t){Logger.log("updateBet",this);var o,i=this.getPlayerViewEntityByPlayerID(e);return i?(void 0==t?o=i.bet:(i.bet=t,o=t),this.sendNotification(GameEvent.PlayerViewEntityArrayProxyEvent.MODIFY_COMPLETE_PLAYER_ARRAY,this._playerViewEntityArray),void this.sendNotification(GameEvent.PlayerViewEntityArrayProxyEvent.MODIFY_COMPLETE_BET_VALUE,[i.seat,i.bulletType,o])):void 0},t.prototype.updateFort=function(e){if(Logger.log("updateFort",this),e.spinResult&&(Utils.BulletTool.IsSpecialBullet(e.bulletId)||!(e.spinResult.mechanismResult.hitResult.totalWin<=0))){var t=this.getPlayerViewEntityByPlayerID(e.playerId);if(t){var o=0,i=!0,n=!1;if(t.bulletType==GameEnum.FortTableEnum.Normal)switch(e.spinRequest.targetId){case GameEnum.FishTableEnum.S_201:t.bulletType=GameEnum.FortTableEnum.MegaDrill,t.bet=e.spinRequest.credit,t.view.setBet(t.bet),t.bulletUpperLimitCountBySpecial=Utils.SCSyncTools.getAwardBulletCount(e),t.bulletUsedCountBySpecial=0,o=t.bulletUpperLimitCountBySpecial;break;case GameEnum.FishTableEnum.S_200:t.bulletType=GameEnum.FortTableEnum.AutomaticBazooka,t.bet=e.spinRequest.credit,t.view.setBet(t.bet),t.bulletUpperLimitCountBySpecial=Utils.SCSyncTools.getAwardBulletCount(e),t.bulletUsedCountBySpecial=0,o=t.bulletUpperLimitCountBySpecial}else Utils.BulletTool.IsMegaDrillBullet(e.bulletId)?e.spinResult.mechanismResult.specialFeatureResults.length>1&&0==e.spinResult.mechanismResult.specialFeatureResults[0].remainTargetBulletCount&&(t.bulletType=GameEnum.FortTableEnum.Normal,t.bulletUpperLimitCount=10,t.bulletUsedCount=0,o=t.bulletUpperLimitCount):e.spinRequest.targetId!=GameEnum.FishTableEnum.S_200?e.spinResult.mechanismResult.specialFeatureResults.length>1&&0==e.spinResult.mechanismResult.specialFeatureResults[0].remainTargetBulletCount&&(t.bulletType=GameEnum.FortTableEnum.Normal,t.bulletUpperLimitCount=10,t.bulletUsedCount=0,o=t.bulletUpperLimitCount):Utils.SCSyncTools.getAwardBulletCount(e)>0?(this.checkIsSelfByPlayerID(e.playerId)?(t.bulletUpperLimitCountBySpecial+=Utils.SCSyncTools.getAwardBulletCount(e),o=t.bulletUpperLimitCountBySpecial-t.bulletUsedCountBySpecial,n=!1):o=e.spinResult.mechanismResult.specialFeatureResults[0].remainTargetBulletCount+Utils.SCSyncTools.getAwardBulletCount(e),i=!1):e.spinResult.mechanismResult.specialFeatureResults.length>1&&0==e.spinResult.mechanismResult.specialFeatureResults[0].remainTargetBulletCount&&(t.bulletType=GameEnum.FortTableEnum.Normal,t.bulletUpperLimitCount=10,t.bulletUsedCount=0,o=t.bulletUpperLimitCount);o>0&&this.sendNotification(GameEvent.PlayerViewEntityArrayProxyEvent.MODIFY_COMPLETE_FORT,{seatID:t.seat,bulletType:t.bulletType,bulletCount:o,animation:i,isRetrigger:n}),t.bulletType==GameEnum.FortTableEnum.Normal&&this.checkLuckyDrawEntity()}}},t.prototype.fireBullet=function(e){Logger.log("fireBullet",this);var t=this.getPlayerViewEntityByPlayerID(e.iPlayerID);if(null!=t){var o=Utils.TranslateTool.weaponInfo2Rotation(e.iRotation);this.sendNotification(GameEvent.PlayerViewEntityArrayProxyEvent.FIRE_BULLET,[t.seat,o])}},t.prototype.addPlayer=function(e,t,o){Logger.log("addPlayer playerID:"+e,this),this.checkPlayerIDOrseatIsExist(e,t)&&Logger.error(this._logScope+" addPlayer, iLocation:"+t+", iPlayerID:"+e+" duplicate");var i=this._playerViewEntityArray,n=this.newPlayerViewEntity(e,t,o),a=GameEvent.PlayerViewEntityArrayProxyEvent.ADD_COMPLETE_PLAYER,r=n;this.addObjToFromArray(i,n,a,r),i.length>GameSettingProxy.getInstance().maxPlayerCountInRoom&&Logger.error(this._logScope+" addPlayer, array.length:"+i.length+" > "+GameSettingProxy.getInstance().maxPlayerCountInRoom)},t.prototype.removePlayer=function(e){Logger.log("removePlayer playerID:"+e,this);var t=this._playerViewEntityArray,o=this.getPlayerViewEntityByPlayerID(e),i=this.checkPlayer,n=GameEvent.PlayerViewEntityArrayProxyEvent.REMOVE_COMPLETE_PLAYER,a=o;this.removeObjFromArray(t,o,i,n,a)||Logger.error(this._logScope+" removePlayer, playerViewEntityArray, playerID:"+e+" is not exist")},t.prototype.clearArray=function(){Logger.log("clearPlayerArray",this);var e=this._playerViewEntityArray;e.length=0,this.sendNotification(GameEvent.PlayerViewEntityArrayProxyEvent.CLEAR_COMPLETE_PLAYER_ARRAY,e),this.sendNotification(GameEvent.PlayerViewEntityArrayProxyEvent.MODIFY_COMPLETE_PLAYER_ARRAY,e)},t.prototype.addCSFire=function(e,t){Logger.log("addCSFire",this);var o=this.getPlayerViewEntityByPlayerID(e).csFireArray,i=t,n=null,a=null;this.addObjToFromArray(o,i,n,a)},t.prototype.removeCSFire=function(e,t){Logger.log("removeCSFire",this);var o=this.getPlayerViewEntityByPlayerID(e).csFireArray,i=t,n=this.checkCSFire,a=null,r=null;this.removeObjFromArray(o,i,n,a,r)||Logger.error(this._logScope+" removeCSFire, csFireArray iBulletID:"+t.bulletId+" is not exist")
},t.prototype.checkPlayer=function(e,t){return e.id==t.id},t.prototype.checkSelfPlayerID=function(e){return e==this._allProxy._gameDataProxy.playerID},t.prototype.checkPlayerIDOrseatIsExist=function(e,t){var o=this._playerViewEntityArray;for(var i in o){var n=o[i];if(n.seat==t||n.id==e)return!0}return!1},t.prototype.checkCSFire=function(e,t){return e.iBulletID==t.bulletId},t.prototype.checkSyncResultData=function(e,t){return e.bulletId==t.bulletId},t.prototype.addObjToFromArray=function(e,t,o,i){e.push(t),o&&""!=o&&this.sendNotification(o,i)},t.prototype.removeObjFromArray=function(e,t,o,i,n){for(var a in e){var r=e[a];if(o(r,t))return e.splice(a,1),this.sendNotification(GameEvent.PlayerViewEntityArrayProxyEvent.MODIFY_COMPLETE_PLAYER_ARRAY,this._playerViewEntityArray),i&&""!=i&&this.sendNotification(i,n),!0}return!1},t.prototype.newPlayerViewEntity=function(e,t,o){var i=new PlayerViewEntity;return i.id=e,i.seat=t,i.credit=o,i.bet=this._scRoomLogin.iMinBet,i.denom=this._scRoomLogin.iDenom,i.minBet=this._scRoomLogin.iMinBet,i.maxBet=this._scRoomLogin.iMaxBet,i.isSelf=this.checkSelfPlayerID(e),i.csFireArray=new Array,i.betArray=Utils.GameTool.getBetArray(this._scRoomLogin.iMinBet,this._scRoomLogin.iMaxBet),i.betLevelArray=Utils.GameTool.getBetLevelArray(PlayerViewEntity.betLevelDivide,i.betArray),i},t.prototype.checkIsSelfByPlayerID=function(e){var t=this._allProxy._gameDataProxy.playerID;return t==e},t.prototype.checkIsSelfBySeatID=function(e){var t=this.getPlayerViewEntityBySelf();return t.seat==e},t.prototype.parseLuckyDrawData=function(e){if(e.spinResult&&Utils.GameTool.getLuckyDrawDataIndex(e.spinResult.mechanismResult)>=0){var t=this.getPlayerViewEntityByPlayerID(e.playerId);if(!t)return;for(var o=0;o<e.spinResult.mechanismResult.specialFeatureResults.length;o++)if(Utils.GameTool.resultWithLuckyDrawData(e.spinResult.mechanismResult,o)){var i=new LuckyDrawEntity;i.luckyDrawType=e.spinResult.mechanismResult.specialFeatureResults[o].specialFeatureType,i.awardOddsCount=e.spinResult.mechanismResult.specialFeatureResults[o].awardOddsCount,i.totalWin=e.spinResult.mechanismResult.specialFeatureResults[o].totalWin,i.bet=e.spinRequest.bulletInfo.credit,i.selectIndex=0;for(var n=e.spinResult.mechanismResult.specialFeatureResults[o].showOdds,a=0;a<n.length;a++)i.showOdds.push(Utils.MathTool.multiply(n[a],Utils.TranslateTool.cent2TenDollar(e.spinRequest.bulletInfo.credit)));if(null==i.totalWin||void 0==i.totalWin||-1!=i.showOdds.indexOf(0)){var r=new kibana.logData;r.logType="fish_parseLuckyDrawData_error",r.totalWin=i.totalWin,r.jsonData=JSON.stringify(e.spinResult.mechanismResult.specialFeatureResults[o]),kibana.m.send(r)}if(t.luckyDrawEntityArray.push(i),this._allProxy._playerViewEntityArrayProxy.checkIsSelfByPlayerID(e.playerId)){if(t.addQueueTotalWin(i.totalWin),t.bulletType!=GameEnum.FortTableEnum.MegaDrill&&this._allProxy._gameDataProxy.playerNowStatus==GameName.SpecialFeatureName.NORMAL){var s=ApplicationFacade.getInstance().retrieveProxy(GameDataProxy.NAME);s.gameSceneByShow==GameEnum.SceneTypeEnum.Battle&&this.sendLuckyDrawEnable(t)}}else this.sendLuckyDrawEnable(t)}}},t.prototype.checkLuckyDrawEntity=function(){var e=this.getPlayerViewEntityBySelf();if(e&&e.luckyDrawEntityArray.length>0&&e.bulletType!=GameEnum.FortTableEnum.MegaDrill&&this._allProxy._gameDataProxy.playerNowStatus==GameName.SpecialFeatureName.NORMAL){var t=ApplicationFacade.getInstance().retrieveProxy(GameDataProxy.NAME);t.gameSceneByShow==GameEnum.SceneTypeEnum.Battle&&this.sendLuckyDrawEnable(e)}},t.prototype.checkLuckyDraw=function(){this.checkLuckyDrawEntity()},t.prototype.sendLuckyDrawEnable=function(e){e.luckyDrawEntityArray[0].luckyDrawType==GameName.SpecialFeatureName.SF_03?this.sendNotification(GameEvent.BattleCaiShenFaFaFaViewMediatorEvent.ENABLE,e):e.luckyDrawEntityArray[0].luckyDrawType==GameName.SpecialFeatureName.SF_02&&this.sendNotification(GameEvent.BattleWheelOfFortuneViewMediatorEvent.ENABLE,e)},t.NAME="PlayerViewEntityArrayProxy",t}(BaseProxy);__reflect(PlayerViewEntityArrayProxy.prototype,"PlayerViewEntityArrayProxy");var PlayerViewEntityProxyAdapterMediator=function(e){function t(t,o){var i=e.call(this,t,o)||this;return i._logScope="[PlayerViewEntityProxyAdapterMediator]",i._isLog=!1,i}return __extends(t,e),t.prototype.listNotificationInterests=function(){return[GameEvent.ApplicationFacadeEvent.AWAKE_COMPLETE,GameEvent.ProtocolProxyEvent.MODIFY_COMPLETE_SC_ROOM_LOGIN_VALUE,GameEvent.ProtocolProxyEvent.MODIFY_COMPLETE_SC_ROOM_LOGOUT_VALUE,GameEvent.ProtocolProxyEvent.MODIFY_COMPLETE_SC_PLAYER_ROOM_LOGIN_VALUE,GameEvent.ProtocolProxyEvent.MODIFY_COMPLETE_SC_PLAYER_ROOM_LOGOUT_VALUE,GameEvent.ProtocolProxyEvent.MODIFY_COMPLETE_CS_FIRE_VALUE,GameEvent.ProtocolProxyEvent.MODIFY_COMPLETE_SC_FIRE_VALUE,GameEvent.ProtocolProxyEvent.MODIFY_COMPLETE_CS_HIT_VALUE,GameEvent.ProtocolProxyEvent.MODIFY_COMPLETE_SC_SYNC_VALUE,GameEvent.BattleCaiShenFaFaFaViewMediatorEvent.DISABLE_COMPLETE,GameEvent.BattleWheelOfFortuneViewMediatorEvent.DISABLE_COMPLETE]},t.prototype.handleNotification=function(e){var t=e.getBody(),o=this._allProxy._playerViewEntityArrayProxy;switch(e.getName()){case GameEvent.ApplicationFacadeEvent.AWAKE_COMPLETE:this.retrieveAllProxyAndMediator();break;case GameEvent.ProtocolProxyEvent.MODIFY_COMPLETE_SC_ROOM_LOGIN_VALUE:o.parserSCRoomLogin(t);break;case GameEvent.ProtocolProxyEvent.MODIFY_COMPLETE_SC_ROOM_LOGOUT_VALUE:o.parserSCRoomLogout(t);break;case GameEvent.ProtocolProxyEvent.MODIFY_COMPLETE_SC_PLAYER_ROOM_LOGIN_VALUE:o.parserSCPlayerRoomLogin(t);break;case GameEvent.ProtocolProxyEvent.MODIFY_COMPLETE_SC_PLAYER_ROOM_LOGOUT_VALUE:o.parserSCPlayerRoomLogout(t);break;case GameEvent.ProtocolProxyEvent.MODIFY_COMPLETE_CS_FIRE_VALUE:o.parserCSFire(t);break;case GameEvent.ProtocolProxyEvent.MODIFY_COMPLETE_SC_FIRE_VALUE:o.parserSCFire(t);break;case GameEvent.ProtocolProxyEvent.MODIFY_COMPLETE_CS_HIT_VALUE:o.parserCSHit(t);break;case GameEvent.ProtocolProxyEvent.MODIFY_COMPLETE_SC_SYNC_VALUE:o.parserSCSyncEntity(t);break;case GameEvent.BattleWheelOfFortuneViewMediatorEvent.DISABLE_COMPLETE:case GameEvent.BattleCaiShenFaFaFaViewMediatorEvent.DISABLE_COMPLETE:this._allProxy._gameDataProxy.playerNowStatus=GameName.SpecialFeatureName.NORMAL,egret.setTimeout(function(){o.checkLuckyDraw()},this,10)}},t.NAME="PlayerViewEntityProxyAdapterMediator",t}(BaseAdapterMediator);__reflect(PlayerViewEntityProxyAdapterMediator.prototype,"PlayerViewEntityProxyAdapterMediator");var ProtocolProxy=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._logScope="[ProtocolProxy]",t._isLog=!1,t._scPlayerRoomLoginArrayArray=new Array,t._csQuickLogin=new Object,t._isQuickLogin=!1,t._scFcInfoPackageCounter=0,t}return __extends(t,e),t.prototype.onFacadeAwakeComplete=function(){this.retrieveProxy()},t.prototype.onPreloadResourceComplete=function(){this.start()},t.prototype.onNonPreloadResourceComplete=function(e){},t.prototype.onSCRoomLoginComplete=function(){},t.prototype.onSCRoomLogoutComplete=function(){},t.prototype.awake=function(){},t.prototype.start=function(){},t.prototype.init=function(){},t.prototype.reset=function(){},Object.defineProperty(t.prototype,"scLogin",{get:function(){return this._scLoginEntity},set:function(e){Logger.log("scLogin,",this),this._scLoginEntity=e,this.sendNotification(GameEvent.ProtocolProxyEvent.MODIFY_COMPLETE_SC_LOGIN_VALUE,e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"scErrorCode",{get:function(){return this._scErrorCodeEntity},set:function(e){Logger.log("scErrorCode,",this),this._scErrorCodeEntity=e,this.sendNotification(ParserMessageCommand.NAME,new ParserMessageData(this._scErrorCodeEntity.iErrorCode))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"scLobbyJoin",{get:function(){return this._scLobbyJoinEntity},set:function(e){Logger.log("scLobbyJoin"+this.log(e),this),this._scLobbyJoinEntity=e,this.sendNotification(GameEvent.ProtocolProxyEvent.MODIFY_COMPLETE_SC_LOBBY_JOIN_VALUE,e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"scLobbyInfo",{get:function(){return this._scLobbyInfoEntity},set:function(e){Logger.log("scLobbyInfo"+this.log(e),this),this._scLobbyInfoEntity=e,this.sendNotification(GameEvent.ProtocolProxyEvent.MODIFY_COMPLETE_SC_LOBBY_INFO_VALUE,e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"scUserInfo",{get:function(){return this._scUserInfoEntity},set:function(e){Logger.log("scUserInfo"+this.log(e),this),this._scUserInfoEntity=e,this.sendNotification(GameEvent.ProtocolProxyEvent.MODIFY_COMPLETE_SC_USER_INFO_VALUE,e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"csQuickLogin",{get:function(){return this._csQuickLogin},set:function(e){Logger.log("csQuickLogin"+this.log(e),this),this._csQuickLogin=e,this._isQuickLogin=!0,this.sendNotification(GameEvent.ProtocolProxyEvent.MODIFY_COMPLETE_CS_QUICK_LOGIN_VALUE,this._csQuickLogin)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"scQuickLoginError",{get:function(){return this._scQuickLoginError},set:function(e){Logger.log("scQuickLoginError"+this.log(e),this),this._scQuickLoginError=e,this.sendNotification(GameEvent.ProtocolProxyEvent.MODIFY_COMPLETE_SC_QUICK_LOGIN_VALUE,this._scQuickLoginError)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"scRoomJoin",{get:function(){return this._scRoomJoinEntity},set:function(e){Logger.log("scRoomJoin"+this.log(e),this),this._allProxy._gameDataProxy.resetBulletIDArray(),this._scRoomJoinEntity=e,this.sendNotification(GameEvent.ProtocolProxyEvent.MODIFY_COMPLETE_SC_ROOM_JOIN_VALUE,e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"scRoomLogin",{get:function(){return this._scRoomLoginEntity},set:function(e){if(this.clearSCPlayerRoomLoginArray(),Logger.log("scRoomLogin"+this.log(e),this),this._scRoomLoginEntity=e,e.bLogInSuccess){for(var t=0;t<e.iID.length;t++)if(e.iID[t]>=0){var o=new ProtocolEntity.SCPlayerRoomLoginEntity;o.iLocation=t,o.iPlayerID=e.iID[t],o.llPlayerCent=e.lCent[t],this.addToSCPlayerRoomLoginArray(o)}this.sendNotification(GameEvent.ProtocolProxyEvent.MODIFY_COMPLETE_SC_ROOM_LOGIN_VALUE,e)}else this.sendNotification(ParserMessageCommand.NAME,new ParserMessageData(MessageType.loginFail))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"csRoomLogout",{get:function(){return this._csRoomLogoutEntity},set:function(e){Logger.log("csRoomLogOut"+this.log(e),this),this._csRoomLogoutEntity=e,this.sendNotification(GameEvent.ProtocolProxyEvent.MODIFY_COMPLETE_CS_ROOM_LOGOUT_VALUE,e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"scRoomLogout",{get:function(){return this._scRoomLogoutEntity},set:function(e){Logger.log("scRoomLogout"+this.log(e),this),this._scRoomLogoutEntity=e,this.clearRoomData(),this.sendNotification(GameEvent.ProtocolProxyEvent.MODIFY_COMPLETE_SC_ROOM_LOGOUT_VALUE,e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"scPlayerRoomLogin",{get:function(){return this._scPlayerRoomLoginEntity},set:function(e){Logger.log("scPlayerRoomLogin"+this.log(e),this),this._scPlayerRoomLoginEntity=e,this.checkSelfPlayerID(e.iPlayerID)||this.addToSCPlayerRoomLoginArray(e),this.sendNotification(GameEvent.ProtocolProxyEvent.MODIFY_COMPLETE_SC_PLAYER_ROOM_LOGIN_VALUE,e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"scPlayerRoomLogout",{get:function(){return this._scPlayerRoomLogoutEntity},set:function(e){Logger.log("scPlayerRoomLogout"+this.log(e),this),this._scPlayerRoomLogoutEntity=e,this.checkSelfPlayerID(e.iPlayerID)||this.removeFromSCPlayerRoomLoginArray(e),this.sendNotification(GameEvent.ProtocolProxyEvent.MODIFY_COMPLETE_SC_PLAYER_ROOM_LOGOUT_VALUE,e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"scTurn",{get:function(){return this._scTurnEntity},set:function(e){Logger.log("scTurn"+this.log(e),this),this._scTurnEntity=e,this.sendNotification(GameEvent.ProtocolProxyEvent.MODIFY_COMPLETE_SC_TURN_VALUE,e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"csFire",{get:function(){return this._csFireEntity},set:function(e){this.checkSelfPlayerID(e.iPlayerID)||Logger.error("csFire, iPlayerID:"+e.iPlayerID+" is not self",this);var t=this._allProxy._playerViewEntityArrayProxy.getPlayerViewEntityBySelf(),o=t.getCreditByPreCharge(),i=this._allProxy._protocolProxy.scRoomLogin.iDenom,n=Utils.TranslateTool.bet2CashCent(e.iBet,i);if(0>o-n)return void(this._csFireEntity=null);var a=[],r=this._allProxy._gameDataProxy.bulletIDArray,s=this._allProxy._bulletViewEntityArrayProxy.getBulletViewEntityArrayBySelf();if(e.iBulletType==GameEnum.FortTableEnum.Normal){if(0==r.length)return void(this._csFireEntity=null);if(s.length>=10)return void(this._csFireEntity=null);for(var l=0,c=s;l<c.length;l++){var h=c[l];if(a.push(h.iBulletID),h.iBulletID%10===r[0])return void(this._csFireEntity=null)}e.iBulletID=Utils.BulletTool.GetBulletID(this._allProxy._gameDataProxy.seatID,e.iBulletType,this._allProxy._gameDataProxy.bulletIDArray.shift())}else if(e.iBulletID=Utils.BulletTool.GetBulletID(this._allProxy._gameDataProxy.seatID,e.iBulletType,t.bulletUpperLimitCountBySpecial-t.bulletUsedCountBySpecial),e.iBulletType==GameEnum.FortTableEnum.AutomaticBazooka){if(t.bulletUpperLimitCountBySpecial==t.bulletUsedCountBySpecial)return void(this._csFireEntity=null);t.bulletUsedCountBySpecial++}Logger.log("csFire"+this.log(e)+", entity:["+a+"]",this),this._csFireEntity=e,this.sendNotification(GameEvent.ProtocolProxyEvent.MODIFY_COMPLETE_CS_FIRE_VALUE,e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"scFire",{get:function(){return this._scFireEntity},set:function(e){if(Logger.log("scFire"+this.log(e),this),this._scFireEntity=e,this.checkSelfPlayerID(e.iPlayerID));else if(-1!=e.iTargetSN){var t=this._allProxy._playerViewEntityArrayProxy.getPlayerViewEntityByPlayerID(e.iPlayerID),o=this._allProxy._fishViewObjectManagerProxy.getObjectBySN(e.iTargetSN);if(o&&t){var i=void 0;i=Utils.GameTool.isReverseByLayer(Utils.BulletTool.GetSeatIDByBulletID(e.iBulletID))?t.view.RotateWithMouse(GameSettingProxy.screenWidth-o.x,GameSettingProxy.screenHeight-o.y,Utils.GameTool.isReverseByLayer(Utils.BulletTool.GetSeatIDByBulletID(e.iBulletID))):t.view.RotateWithMouse(o.x,o.y,Utils.GameTool.isReverseByLayer(Utils.BulletTool.GetSeatIDByBulletID(e.iBulletID))),e.iRotation=Utils.TranslateTool.rotation2WeaponInfo(i)}}this.sendNotification(GameEvent.ProtocolProxyEvent.MODIFY_COMPLETE_SC_FIRE_VALUE,e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"csHit",{get:function(){return this._csHitEntity},set:function(e){Logger.log("csHit"+this.log(e),this),this.checkSelfPlayerID(e.iPlayerID)||Logger.error(this._logScope+" csHit, iPlayerID:"+e.iPlayerID+" is not self"),this._csHitEntity=e,this.sendNotification(GameEvent.ProtocolProxyEvent.MODIFY_COMPLETE_CS_HIT_VALUE,e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"scSync",{get:function(){return this._scSyncEntity},set:function(e){if(Logger.log("scSync"+this.log(e),this),this._scSyncEntity=e,this.checkSelfPlayerID(e.playerId)&&!Utils.BulletTool.IsSpecialBullet(e.bulletId)){var t=Utils.BulletTool.GetBulletSeqNo(Utils.GameTool.addZero(e.bulletId,6));this._allProxy._gameDataProxy.bulletIDArray.push(t)}this.sendNotification(GameEvent.ProtocolProxyEvent.MODIFY_COMPLETE_SC_SYNC_VALUE,e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"scChangeBalance",{get:function(){return this._changeBalanceEntity},set:function(e){Logger.log("changeBalance"+this.log(e),this),this._changeBalanceEntity=e,this.sendNotification(GameEvent.ProtocolProxyEvent.MODIFY_COMPLETE_CHANGE_BALANCE,e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"broadcast",{get:function(){return this._broadcastDataArray},set:function(e){Logger.log("broadcast"+this.log(e),this),this._broadcastDataArray=e,this.sendNotification(GameEvent.ProtocolProxyEvent.MODIFY_COMPLETE_BROADCAST,e)},enumerable:!0,configurable:!0}),t.prototype.getSCPlayerRoomLogin=function(e){var t=this._scPlayerRoomLoginArrayArray;for(var o in t){var i=t[o];if(i.iPlayerID==e)return i}return null},t.prototype.addToSCPlayerRoomLoginArray=function(e){var t=this._scPlayerRoomLoginArrayArray;t.push(e),this.sendNotification(GameEvent.ProtocolProxyEvent.MODIFY_COMPLETE_SC_PLAYER_ROOM_LOGIN_ARRAY,t)},t.prototype.removeFromSCPlayerRoomLoginArray=function(e){var t=this._scPlayerRoomLoginArrayArray,o=this.checkEqualSCPlayerRoomLogin,i=GameEvent.ProtocolProxyEvent.MODIFY_COMPLETE_SC_PLAYER_ROOM_LOGIN_ARRAY,n=t;this.removeObjFromArray(t,e,o,i,n)||Logger.error(this._logScope+" removeFromPlayerArray, _scPlayerRoomLoginArrayArray iPlayerID:"+e.iPlayerID+" is not exist")},t.prototype.clearSCPlayerRoomLoginArray=function(){var e=this._scPlayerRoomLoginArrayArray;e.length=0,this.sendNotification(GameEvent.ProtocolProxyEvent.MODIFY_COMPLETE_SC_PLAYER_ROOM_LOGIN_ARRAY,e)},t.prototype.checkEqualSCPlayerRoomLogin=function(e,t){return e.iPlayerID==t.iPlayerID&&e.iLocation==t.iLocation?!0:!1},t.prototype.clearRoomData=function(){this._scRoomJoinEntity=null,this._scRoomLoginEntity=null,this._csRoomLogoutEntity=null,this._scRoomLogoutEntity=null,this._scPlayerRoomLoginEntity=null,this._scPlayerRoomLogoutEntity=null,this._scFcInfoPackageCounter=0,this.clearSCPlayerRoomLoginArray(),this._csFireEntity=null,this._scFireEntity=null,this._csHitEntity=null,this._scSyncEntity=null,this._csQuickLogin=null,this._scQuickLoginError=null},t.prototype.log=function(e){var t="";for(var o in e)e.hasOwnProperty(o)&&(t+=", "+o+":"+e[o]);return t},t.prototype.checkSelfPlayerID=function(e){return e==this._scLoginEntity.id},t.prototype.getSelfPlayerID=function(){return this._scLoginEntity.id},t.prototype.removeObjFromArray=function(e,t,o,i,n){for(var a in e){var r=e[a];if(o(r,t))return e.splice(a,1),this.sendNotification(i,n),!0}return!1},Object.defineProperty(t.prototype,"maintenanceAnnounce",{get:function(){return null},set:function(e){if(this._allProxy._gameDataProxy.isUpdateTicketRequest=!0,this._allProxy._gameDataProxy.reconnectInScene=this._allProxy._gameDataProxy.gameSceneByShow,SoundObjectManagerProxy.getInstance().inTransition&&(this._allProxy._gameDataProxy.reconnectInScene=GameEnum.SceneTypeEnum.Transition),this._allProxy._gameDataProxy.gameSceneByShow==GameEnum.SceneTypeEnum.Lobby)this._allProxy._gameDataProxy.reconnectInScene=GameEnum.SceneTypeEnum.Lobby,console.log("maintenanceAnnounce"),this.sendNotification(GSReconnectCommand.NAME);else if(this._allProxy._gameDataProxy.gameSceneByShow==GameEnum.SceneTypeEnum.Battle&&this._allProxy._gameDataProxy.playerIsIdle){var t=new ProtocolEntity.CSRoomLogoutEntity;t.iPlayerID=this._allProxy._gameDataProxy.playerID,this.sendNotification(GeneratorProtocolCommand.NAME,[ProtocolType.csRoomLogout,t])}},enumerable:!0,configurable:!0}),t.NAME="ProtocolProxy",t}(BaseProxy);__reflect(ProtocolProxy.prototype,"ProtocolProxy");var ProxyAdapterMediator=function(e){function t(t,o){var i=e.call(this,t,o)||this;return i._logScope="[ProxyAdapterMediator]",i._isLog=!1,i}return __extends(t,e),t.prototype.listNotificationInterests=function(){return[GameEvent.ApplicationFacadeEvent.AWAKE_COMPLETE,GameEvent.ApplicationFacadeEvent.START_UP_COMPLETE,GameEvent.ResourceProxyEvent.LOAD_COMPLETE_PRELOAD_GROUP,GameEvent.ResourceProxyEvent.LOAD_COMPLETE_NON_PRELOAD_GROUP,GameEvent.ProtocolProxyEvent.MODIFY_COMPLETE_SC_LOBBY_JOIN_VALUE,GameEvent.ProtocolProxyEvent.MODIFY_COMPLETE_SC_ROOM_LOGIN_VALUE,GameEvent.ProtocolProxyEvent.MODIFY_COMPLETE_SC_ROOM_LOGOUT_VALUE,GameEvent.ProtocolProxyEvent.MODIFY_COMPLETE_SC_QUICK_LOGIN_VALUE]},t.prototype.handleNotification=function(e){var t=e.getBody();switch(e.getName()){case GameEvent.ApplicationFacadeEvent.AWAKE_COMPLETE:for(var o in this.facade.model.proxyMap){var i=this.facade.model.proxyMap[o];i.onFacadeAwakeComplete(t)}break;case GameEvent.ResourceProxyEvent.LOAD_COMPLETE_PRELOAD_GROUP:for(var o in this.facade.model.proxyMap){var i=this.facade.model.proxyMap[o];i.onPreloadResourceComplete()}break;case GameEvent.ResourceProxyEvent.LOAD_COMPLETE_NON_PRELOAD_GROUP:for(var o in this.facade.model.proxyMap){var i=this.facade.model.proxyMap[o];i.onNonPreloadResourceComplete(t)}break;case GameEvent.ProtocolProxyEvent.MODIFY_COMPLETE_SC_ROOM_LOGIN_VALUE:for(var o in this.facade.model.proxyMap){var i=this.facade.model.proxyMap[o];i.onSCRoomLoginComplete(t)}break;case GameEvent.ProtocolProxyEvent.MODIFY_COMPLETE_SC_ROOM_LOGOUT_VALUE:for(var o in this.facade.model.proxyMap){var i=this.facade.model.proxyMap[o];i.onSCRoomLogoutComplete(t)}break;case GameEvent.ProtocolProxyEvent.MODIFY_COMPLETE_SC_QUICK_LOGIN_VALUE:var n=t;7108==n.iErrorCode?this.sendNotification(ParserMessageCommand.NAME,new ParserMessageData(MessageType.roomJoinError)):7109==n.iErrorCode?this.sendNotification(ParserMessageCommand.NAME,new ParserMessageData(MessageType.fullSeat)):this.sendNotification(ParserMessageCommand.NAME,new ParserMessageData(MessageType.failed))}},t.NAME="ProxyAdapterMediator",t}(puremvc.Mediator);__reflect(ProxyAdapterMediator.prototype,"ProxyAdapterMediator",["ILogger"]);var RandomCoinFX=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._logScope="[RandomCoinFX]",t._isLog=!1,t.temporaryBeginPoint=new egret.Point,t.temporaryEndPoint=new egret.Point,t}return __extends(t,e),t.prototype.startObject=function(e){Logger.log("startObject"+this.hashCode,this);var t=Utils.ResourceTool.getMovieClip(e.jsonName,e.clipName);this.addChild(t),this._coinMC=t},t.prototype.initObject=function(e){Logger.log("initObject "+this.hashCode,this),this._coinMC&&Utils.DisplayObjectTool.resetDisplayObject(this._coinMC,!0),Utils.DisplayObjectTool.resetDisplayObject(this,!0)},t.prototype.resetObject=function(){Logger.log("resetObject "+this.hashCode,this),this._coinMC&&Utils.DisplayObjectTool.resetDisplayObject(this._coinMC,!1),Utils.DisplayObjectTool.resetDisplayObject(this,!1)},t.prototype.playObject=function(){var e=this;Logger.log("playObject "+this.hashCode,this);var t=(this._coinMC,this._data);egret.setTimeout(function(){e.coinMoveFromFish()},this,10*t.index)},t.prototype.stopObject=function(){Logger.log("stopObject "+this.hashCode,this),this.onComplete()},t.prototype.completeObject=function(){Logger.log("completeObject "+this.hashCode,this),egret.clearTimeout(this.setTimeout),egret.Tween.removeTweens(this)},t.prototype.coinMoveFromFish=function(){var e=this._coinMC,t=this._data;e.x=t.beginTargetObject.x,e.y=t.beginTargetObject.y,e.scaleX=1,e.scaleY=1,e.alpha=.8,e.visible=!0,e.parent.addChildAt(e,0),e.gotoAndPlay(Utils.MathTool.randomRange(0,e.totalFrames-1),-1);var o=200,i=(new egret.Point,new egret.Point,Utils.MathTool.randomRange(100,GameSettingProxy.screenWidth-100)),n=Utils.MathTool.randomRange(150,GameSettingProxy.screenHeight-150);egret.Tween.get(e).to({x:i,y:n},o,egret.Ease.circOut).wait(250+10*t.index).call(this.coinMoveFormEndPoint,this)},t.prototype.coinMoveFormEndPoint=function(){var e=this._coinMC,t=this._data,o=new egret.Point(e.x,e.y),i=t.endTargetObject.localToGlobal(),n=egret.Point.distance(o,i)/500*1e3;egret.Tween.get(e).to({y:i.y},n/2,egret.Ease.cubicInOut),egret.Tween.get(e).to({x:i.x},n/2,egret.Ease.quadOut).set({visible:!1}).wait(100*t.index).call(this.coinMoveFormCredit,this)},t.prototype.coinMoveFormCredit=function(){var e=this._coinMC,t=this._data;if(t.index%2>0||!t.self)this.onComplete();else{var o=t.creditTargetObject.localToGlobal();e.x=o.x,e.y=o.y,e.scaleX=.7,e.scaleY=.7,e.alpha=.5,e.visible=!0,e.gotoAndPlay(Math.floor(e.totalFrames/1),-1),egret.Tween.get(e).to({y:o.y-50,alpha:.9},300,egret.Ease.quadOut).to({y:o.y-30,alpha:.5},120).call(this.onComplete,this);var i=new EffectViewObjectData(8,t.self,0,t.creditTargetObject,t.creditTargetObject,null,null);EffectViewObjectManagerProxy.getInstance().play(i),i=null}},t.prototype.playAnimation=function(e){var t=this._coinMC;e?t.gotoAndPlay(0,-1):t.gotoAndStop(0)},t.NAME="RandomCoinFX",t}(BaseFX);__reflect(RandomCoinFX.prototype,"RandomCoinFX");var RandomCoinFXData=function(){function e(e,t,o,i,n,a,r){this.beginTargetObject=e,this.endTargetObject=t,this.creditTargetObject=o,this.index=i,this.totalCount=n,this.win=a,this.self=r}return e}();__reflect(RandomCoinFXData.prototype,"RandomCoinFXData");var RegistBattleSceneMediatorsCommand=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.execute=function(e){var t=e.getBody();this.facade.registerMediator(new BattleViewMediator(BattleViewMediator.NAME,t)),this.facade.registerMediator(new BattleFishArrayViewMediator(BattleFishArrayViewMediator.NAME,t)),this.facade.registerMediator(new BattleBulletArrayViewMediator(BattleBulletArrayViewMediator.NAME,t)),this.facade.registerMediator(new BattlePlayerArrayViewMediator(BattlePlayerArrayViewMediator.NAME,t)),this.facade.registerMediator(new BattleCoinArrayViewMediator(BattleCoinArrayViewMediator.NAME,t)),this.facade.registerMediator(new BattleEffectArrayViewMediator(BattleEffectArrayViewMediator.NAME,t)),this.facade.registerMediator(new BattleSpecialEffectArrayViewMediator(BattleSpecialEffectArrayViewMediator.NAME,t)),this.facade.registerMediator(new BattleMedalArrayViewMediator(BattleMedalArrayViewMediator.NAME,t)),this.facade.registerMediator(new BattleScoreArrayViewMediator(BattleScoreArrayViewMediator.NAME,t)),this.facade.registerMediator(new BattleSpecialButtonViewMediator(BattleSpecialButtonViewMediator.NAME,t)),this.facade.registerMediator(new BattleInfoViewMediator(BattleInfoViewMediator.NAME,t)),this.facade.registerMediator(new NetworkSignViewMediator(NetworkSignViewMediator.NAME,t)),this.facade.registerMediator(new BattleBroadcastViewMediator(BattleBroadcastViewMediator.NAME,t)),this.facade.registerMediator(new BattleCaiShenFaFaFaViewMediator(BattleCaiShenFaFaFaViewMediator.NAME,t)),this.facade.registerMediator(new BattleWheelOfFortuneViewMediator(BattleWheelOfFortuneViewMediator.NAME,t)),this.sendNotification(GameEvent.SceneEvent.REGIST_BATTLE_SCENE_MEDIATORS_COMPLETE)},t.NAME="RegistBattleSceneMediatorsCommand",t}(puremvc.SimpleCommand);__reflect(RegistBattleSceneMediatorsCommand.prototype,"RegistBattleSceneMediatorsCommand");var RegistDebuggerViewStackMediatorsCommand=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.execute=function(e){var t=e.getBody();this.facade.registerMediator(new GoldfingerViewMediator(GoldfingerViewMediator.NAME,t)),this.facade.registerMediator(new ControlPanelViewMediator(ControlPanelViewMediator.NAME,t)),this.facade.registerMediator(new LogMonitorViewMediator(LogMonitorViewMediator.NAME,t)),this.facade.registerMediator(new GroupListViewMediator(GroupListViewMediator.NAME,t)),this.sendNotification(GameEvent.DebuggerEvent.REGIST_DEBUGGER_VIEW_STACK_MEDIATORS_COMPLETE)},t.NAME="RegistDebuggerViewStackMediatorsCommand",t}(puremvc.SimpleCommand);__reflect(RegistDebuggerViewStackMediatorsCommand.prototype,"RegistDebuggerViewStackMediatorsCommand");var RegistLoadingSceneMediatorsCommand=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.execute=function(e){var t=e.getBody();this.facade.registerMediator(new LoadingViewMediator(LoadingViewMediator.NAME,t)),this.sendNotification(GameEvent.SceneEvent.REGIST_LOADING_SCENE_MEDIATORS_COMPLETE)},t.NAME="RegistLoadingSceneMediatorsCommand",t}(puremvc.SimpleCommand);__reflect(RegistLoadingSceneMediatorsCommand.prototype,"RegistLoadingSceneMediatorsCommand");var RegistLobbySceneMediatorsCommand=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.execute=function(e){var t=e.getBody();this.facade.registerMediator(new LobbyViewMediator(LobbyViewMediator.NAME,t)),this.sendNotification(GameEvent.SceneEvent.REGIST_LOBBY_SCENE_MEDIATORS_COMPLETE)},t.NAME="RegistLobbySceneMediatorsCommand",t}(puremvc.SimpleCommand);__reflect(RegistLobbySceneMediatorsCommand.prototype,"RegistLobbySceneMediatorsCommand");var RegistSceneViewStackMediatorsCommand=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.execute=function(e){var t=e.getBody();this.facade.registerMediator(new LoadingSceneMediator(LoadingSceneMediator.NAME,t)),this.facade.registerMediator(new LobbySceneMediator(LobbySceneMediator.NAME,t)),this.facade.registerMediator(new BattleSceneMediator(BattleSceneMediator.NAME,t)),this.facade.registerMediator(new TransitionSceneMediator(TransitionSceneMediator.NAME,t)),this.sendNotification(GameEvent.SceneEvent.REGIST_SCENE_VIEW_STACK_MEDIATORS_COMPLETE)},t.NAME="RegistSceneViewStackMediatorsCommand",t}(puremvc.SimpleCommand);__reflect(RegistSceneViewStackMediatorsCommand.prototype,"RegistSceneViewStackMediatorsCommand");var RegistTransitionSceneMediatorsCommand=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.execute=function(e){var t=e.getBody();this.facade.registerMediator(new TransitionViewMediator(TransitionViewMediator.NAME,t)),this.sendNotification(GameEvent.SceneEvent.REGIST_TRANSITION_SCENE_MEDIATORS_COMPLETE)},t.NAME="RegistTransitionSceneMediatorsCommand",t}(puremvc.SimpleCommand);__reflect(RegistTransitionSceneMediatorsCommand.prototype,"RegistTransitionSceneMediatorsCommand");var ResourceProxy=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._logScope="[ResourceProxy]",t._isLog=!1,t}return __extends(t,e),t.prototype.onFacadeAwakeComplete=function(){this.retrieveProxy()},t.prototype.onPreloadResourceComplete=function(){},t.prototype.onNonPreloadResourceComplete=function(e){},t.prototype.onSCRoomLoginComplete=function(){},t.prototype.onSCRoomLogoutComplete=function(){},t.prototype.awake=function(){},t.prototype.start=function(e,t,o){Logger.log("start",this),this._language=o,this._preloadGroupList=e,this._nonPreloadGroupListArray=t,this._preloadGroupTotalCount=0,this._preloadGroupCurrCount=0,this._nonPreloadGroupTotalCountArray=new Array,this._nonPreloadGroupCurrCountArray=new Array;for(var i in t)this._nonPreloadGroupTotalCountArray[i]=0,this._nonPreloadGroupCurrCountArray[i]=0;this._webBridgeProxy=this.facade.retrieveProxy(WebBridgeProxy.NAME)},t.prototype.init=function(){},t.prototype.reset=function(){},t.prototype.addEvent=function(){RES.addEventListener(RES.ResourceEvent.GROUP_COMPLETE,this.onResourceLoadComplete,this),RES.addEventListener(RES.ResourceEvent.GROUP_LOAD_ERROR,this.onResourceLoadError,this),RES.addEventListener(RES.ResourceEvent.GROUP_PROGRESS,this.onResourceProgress,this),RES.addEventListener(RES.ResourceEvent.ITEM_LOAD_ERROR,this.onItemLoadError,this)},t.prototype.removeEvent=function(){RES.removeEventListener(RES.ResourceEvent.GROUP_COMPLETE,this.onResourceLoadComplete,this),RES.removeEventListener(RES.ResourceEvent.GROUP_LOAD_ERROR,this.onResourceLoadError,this),RES.removeEventListener(RES.ResourceEvent.GROUP_PROGRESS,this.onResourceProgress,this),RES.removeEventListener(RES.ResourceEvent.ITEM_LOAD_ERROR,this.onItemLoadError,this)},t.prototype.getNonPreloadGroupTotalCount=function(e){return this._nonPreloadGroupTotalCountArray[e]},t.prototype.getNonPreloadGroupCurrCount=function(e){return this._nonPreloadGroupCurrCountArray[e]},t.prototype.loadPreloadGroup=function(){Logger.log("loadPreloadGroup",this),this.addEvent(),this._preloadGroupTotalCount=this._preloadGroupList.length,this._preloadGroupCurrCount=0;for(var e=this._preloadGroupList,t=0;t<e.length;t++){var o=Utils.StringTool.format(e[t],[this._language]);RES.loadGroup(o)}},t.prototype.loadNonPreloadGroup=function(e){Logger.log("loadNonPreloadGroup index:"+e,this);for(var t=0,o=this._nonPreloadGroupListArray[e],i=0;i<o.length;i++){var n=Utils.StringTool.format(o[i],[this._language]),a=RES.getGroupByName(n).length;t+=a,Logger.log("loadNonPreloadGroup groupName:"+n+" length:"+a,this)}this._nonPreloadGroupCurrCountArray[e]=0,this._nonPreloadGroupTotalCountArray[e]=t,Logger.log("loadNonPreloadGroup index:"+e+" totalCount:"+t,this);
for(var i=0;i<o.length;i++){var n=Utils.StringTool.format(o[i],[this._language]);RES.loadGroup(n)}},t.prototype.onResourceLoadComplete=function(e){if(Logger.log("onResourceLoadComplete groupName:"+e.groupName,this),e.groupName.match("preload")){this._preloadGroupCurrCount++;for(var t in this._preloadGroupList){var o=this._preloadGroupList[t].split("_"),i=e.groupName.split("_");i[0]==o[0]&&this._preloadGroupTotalCount==this._preloadGroupCurrCount&&(this.sendNotification(GameEvent.ResourceProxyEvent.LOAD_COMPLETE_PRELOAD_GROUP),this.loadPreloadGroupCompleteCallback&&this.loadPreloadGroupCompleteCallback())}}else for(var t in this._nonPreloadGroupListArray)for(var n in this._nonPreloadGroupListArray[t]){var o=this._nonPreloadGroupListArray[t][n].split("_"),i=e.groupName.split("_");if(i[0]==o[0]&&(Logger.log("onResourceLoadComplete groupName:"+e.groupName+" CurrCount:"+this._nonPreloadGroupCurrCountArray[t],this),this._nonPreloadGroupCurrCountArray[t]==this._nonPreloadGroupTotalCountArray[t])){var a=Number(t);this.sendNotification(GameEvent.ResourceProxyEvent.LOAD_COMPLETE_NON_PRELOAD_GROUP,a),this.loadNonPreloadGroupCompleteCallback&&this.loadNonPreloadGroupCompleteCallback(a)}}},t.prototype.onResourceLoadError=function(e){console.warn("Group:"+e.groupName+" has failed to load"),this.onResourceLoadComplete(e)},t.prototype.onResourceProgress=function(e){if("preload"!=e.groupName)for(var t in this._nonPreloadGroupListArray)for(var o in this._nonPreloadGroupListArray[t]){var i=this._nonPreloadGroupListArray[t][o].split("_"),n=e.groupName.split("_");if(n[0]==i[0]){var a=Number(t);this._nonPreloadGroupCurrCountArray[a]++;var r=this._nonPreloadGroupCurrCountArray[t],s=this._nonPreloadGroupTotalCountArray[t];this.sendNotification(GameEvent.ResourceProxyEvent.LOAD_PROGRESS_NON_PRELOAD_GROUP,[a,r,s])}}},t.prototype.onItemLoadError=function(e){if(e.resItem.url==e.resItem.name){if(GameSettingProxy.debug){var t="Url : "+e.resItem.url+" has failed to load.";Logger.error(t),alert(t)}}else{this.removeEvent();var o=new kibana.logData;o.logType="fish_onItemLoadError",o.errorCode=220,o.fileURL=e.resItem.url,kibana.m.send(o),this._webBridgeProxy.showErrorMsgByCode(o.errorCode)}},t.NAME="ResourceProxy",t}(BaseProxy);__reflect(ResourceProxy.prototype,"ResourceProxy");var RetrieveAllMediator=function(){function e(){}return e.prototype.retrieveAllMediator=function(){var e=ApplicationFacade.getInstance();this._controlPanelViewMediator=e.retrieveMediator(ControlPanelViewMediator.NAME),this._debugSkinViewMediator=e.retrieveMediator(DebugSkinViewMediator.NAME),this._goldfingerViewMediator=e.retrieveMediator(GoldfingerViewMediator.NAME),this._groupListViewMediator=e.retrieveMediator(GroupListViewMediator.NAME),this._logMonitorViewMediator=e.retrieveMediator(LogMonitorViewMediator.NAME),this._battleBulletArrayViewMediator=e.retrieveMediator(BattleBulletArrayViewMediator.NAME),this._battleCoinArrayViewMediator=e.retrieveMediator(BattleCoinArrayViewMediator.NAME),this._battleEffectArrayViewMediator=e.retrieveMediator(BattleEffectArrayViewMediator.NAME),this._battleFishArrayViewMediator=e.retrieveMediator(BattleFishArrayViewMediator.NAME),this._battleGuideViewMediator=e.retrieveMediator(GuideViewMediator.NAME),this._battleInfoViewMediator=e.retrieveMediator(BattleInfoViewMediator.NAME),this._battleMedalArrayViewMediator=e.retrieveMediator(BattleMedalArrayViewMediator.NAME),this._battlePlayerArrayViewMediator=e.retrieveMediator(BattlePlayerArrayViewMediator.NAME),this._battleScoreArrayViewMediator=e.retrieveMediator(BattleScoreArrayViewMediator.NAME),this._battleSpecialEffectArrayViewMediator=e.retrieveMediator(BattleSpecialEffectArrayViewMediator.NAME),this._battleViewMediator=e.retrieveMediator(BattleViewMediator.NAME),this._helpViewMediator=e.retrieveMediator(HelpViewMediator.NAME),this._loadingViewMediator=e.retrieveMediator(LoadingViewMediator.NAME),this._lobbyViewMediator=e.retrieveMediator(LobbyViewMediator.NAME),this._networkSignViewMediator=e.retrieveMediator(NetworkSignViewMediator.NAME),this._optionMenuViewMediator=e.retrieveMediator(OptionMenuViewMediator.NAME),this._transitionViewMediator=e.retrieveMediator(TransitionViewMediator.NAME)},e}();__reflect(RetrieveAllMediator.prototype,"RetrieveAllMediator");var RetrieveAllProxy=function(){function e(){}return e.prototype.retrieveAllProxy=function(){var e=ApplicationFacade.getInstance();this._bulletViewObjectManagerProxy=e.retrieveProxy(BulletViewObjectManagerProxy.NAME),this._coinViewObjectManagerProxy=e.retrieveProxy(CoinViewObjectManagerProxy.NAME),this._effectViewObjectManagerProxy=e.retrieveProxy(EffectViewObjectManagerProxy.NAME),this._fishViewObjectManagerProxy=e.retrieveProxy(FishViewObjectManagerProxy.NAME),this._scoreViewObjectManagerProxy=e.retrieveProxy(ScoreViewObjectManagerProxy.NAME),this._medalsViewObjectManagerProxy=e.retrieveProxy(MedalsViewObjectManagerProxy.NAME),this._soundObjectManagerProxy=e.retrieveProxy(SoundObjectManagerProxy.NAME),this._specialEffectViewObjectManagerProxy=e.retrieveProxy(SpecialEffectViewObjectManagerProxy.NAME),this._bulletViewEntityArrayProxy=e.retrieveProxy(BulletViewEntityArrayProxy.NAME),this._colliderProxy=e.retrieveProxy(ColliderProxy.NAME),this._flowControlProxy=e.retrieveProxy(FlowControlProxy.NAME),this._gameDataProxy=e.retrieveProxy(GameDataProxy.NAME),this._gameSettingProxy=e.retrieveProxy(GameSettingProxy.NAME),this._playerViewEntityArrayProxy=e.retrieveProxy(PlayerViewEntityArrayProxy.NAME),this._protocolProxy=e.retrieveProxy(ProtocolProxy.NAME),this._resourceProxy=e.retrieveProxy(ResourceProxy.NAME),this._smartFoxProxy=e.retrieveProxy(SmartFoxProxy.NAME),this._systemProxy=e.retrieveProxy(SystemProxy.NAME),this._tableEntityProxy=e.retrieveProxy(TableEntityProxy.NAME),this._webBridgeProxy=e.retrieveProxy(WebBridgeProxy.NAME)},e}();__reflect(RetrieveAllProxy.prototype,"RetrieveAllProxy");var SceneViewStackMediator=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._logScope="[SceneViewStackMediator]",t._isLog=!1,t}return __extends(t,e),t.prototype.listNotificationInterests=function(){return[]},t.prototype.handleNotification=function(e){e.getBody()},t.prototype.awake=function(){Logger.log("awake",this),this._view=new eui.ViewStack,this.getViewComponent().addChild(this._view),this._view.name=t.NAME,this.sendNotification(RegistSceneViewStackMediatorsCommand.NAME,this._view)},t.prototype.getIndexViewStack=function(e){var t=this._view.getChildByName(e),o=this._view.getChildIndex(t);return o},t.NAME="SceneViewStackMediator",t}(BaseSceneMediator);__reflect(SceneViewStackMediator.prototype,"SceneViewStackMediator");var ScoreComponent=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._logScope="[ScoreComponent]",t._isLog=!1,t._isFXComplete=!0,t}return __extends(t,e),t.prototype.startObject=function(e){switch(Logger.log("startObject"+this.hashCode,this),e.id){case 1:this._fx=new ScoreFX;break;default:Logger.error("startObject id:"+e.id+" is not exist",this)}this.fxStart(this._fx,e)},t.prototype.initObject=function(e){switch(Logger.log("initObject "+this.hashCode,this),this._tableEntity.id){case 1:var t=new ScoreFXData(e.scoreTargetObject,e.win,e.denom,e.self);this._fx.init(t);break;default:Logger.error("initObject id:"+this._tableEntity.id+" is not exist",this)}Utils.DisplayObjectTool.resetDisplayObject(this,!0)},t.prototype.resetObject=function(){Logger.log("resetObject "+this.hashCode,this),Utils.DisplayObjectTool.resetDisplayObject(this,!1)},t.prototype.playObject=function(){Logger.log("playObject "+this.hashCode,this),this._fx&&(this._fx.play(),this._isFXComplete=!1)},t.prototype.stopObject=function(){Logger.log("stopObject "+this.hashCode,this),this._fx&&(this._fx.stop(),this._isFXComplete=!1),this.onComplete()},t.prototype.completeObject=function(){Logger.log("completeObject "+this.hashCode,this)},t.prototype.onFXComplete=function(e){var t;this._isFXComplete=!0,egret.is(e.target,ScoreFX.NAME)?t=ScoreFX.NAME:Logger.error("onFXComplete "+e.target+" is not exist",this),Logger.log("onFXComplete "+this.hashCode+" "+t,this),this._isFXComplete&&this.onComplete()},t.prototype.fxStart=function(e,t){e.addEventListener(ObjectEvent.COMPLETE,this.onFXComplete,this),this.addChild(e),e.start(t)},t.NAME="ScoreComponent",t}(BaseComponent);__reflect(ScoreComponent.prototype,"ScoreComponent");var ScoreFX=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._logScope="[ScoreFX]",t._isLog=!1,t}return __extends(t,e),t.prototype.startObject=function(e){Logger.log("startObject"+this.hashCode,this);var t=new eui.BitmapLabel;this.addChild(t),this._scoreBitmapLabel=t},t.prototype.initObject=function(e){Logger.log("initObject "+this.hashCode,this),this._scoreBitmapLabel&&Utils.DisplayObjectTool.resetDisplayObject(this._scoreBitmapLabel,!0),Utils.DisplayObjectTool.resetDisplayObject(this,!0)},t.prototype.resetObject=function(){Logger.log("resetObject "+this.hashCode,this),this._scoreBitmapLabel&&Utils.DisplayObjectTool.resetDisplayObject(this._scoreBitmapLabel,!1),Utils.DisplayObjectTool.resetDisplayObject(this,!1)},t.prototype.playObject=function(){Logger.log("playObject "+this.hashCode,this);var e=this._scoreBitmapLabel,t=this._data,o=1e3,i=-50,n=t.targetObject.localToGlobal(0,0),a=n.x,r=n.y-i,s=n.y+i;t.self?(e.font=Utils.ResourceTool.getRes(GameName.FontName.GoldCredit),e.scaleX=1,e.scaleY=1):(e.font=Utils.ResourceTool.getRes(GameName.FontName.SilverCredit),e.scaleX=.8,e.scaleY=.8),e.visible=!0,e.text=Utils.TranslateTool.win2CashTenDolla(t.win,t.denom).toString(),Utils.DisplayObjectTool.setAnchorOffset(e),egret.Tween.get(this).set({x:a,y:r}).to({y:n.y},o,egret.Ease.elasticOut).to({y:s,alpha:0},o/2).call(this.onComplete,this)},t.prototype.stopObject=function(){Logger.log("stopObject "+this.hashCode,this),this.onComplete()},t.prototype.completeObject=function(){Logger.log("completeObject "+this.hashCode,this),egret.Tween.removeTweens(this)},t.NAME="ScoreFX",t}(BaseFX);__reflect(ScoreFX.prototype,"ScoreFX");var ScoreFXData=function(){function e(e,t,o,i){this.targetObject=e,this.win=t,this.denom=o,this.self=i}return e}();__reflect(ScoreFXData.prototype,"ScoreFXData");var ScoreViewObject=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._logScope="[ScoreViewObject]",t._isLog=!1,t._component=new ScoreComponent,t}return __extends(t,e),t.prototype.startObject=function(t){Logger.log("startObject "+this.hashCode,this),e.prototype.startObject.call(this,t)},t.prototype.initObject=function(t){Logger.log("initObject "+this.hashCode,this),this.name=this._tableEntity.enumName+"_"+String(this.hashCode),e.prototype.initObject.call(this,t)},t.prototype.resetObject=function(){Logger.log("resetObject "+this.hashCode,this),e.prototype.resetObject.call(this)},t.prototype.playObject=function(){Logger.log("playObject "+this.hashCode,this),e.prototype.playObject.call(this)},t.prototype.stopObject=function(){Logger.log("stopObject "+this.hashCode,this),e.prototype.stopObject.call(this)},t.prototype.completeObject=function(){Logger.log("completeObject "+this.hashCode,this),e.prototype.completeObject.call(this)},t.prototype.getProxy=function(){return this._proxy},t.prototype.getData=function(){return this._data},t.prototype.getTableEntity=function(){return this._tableEntity},t.NAME="ScoreViewObject",t}(BaseCOPObject);__reflect(ScoreViewObject.prototype,"ScoreViewObject");var ScoreViewObjectData=function(){function e(e,t,o,i,n,a,r,s){this.tableEntityID=e,this.iPlayerID=t,this.self=o,this.scoreTargetObject=i,this.win=n,this.denom=a,this.fishID=r,this.odd=s}return e}();__reflect(ScoreViewObjectData.prototype,"ScoreViewObjectData");var ScoreViewObjectManagerProxy=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._logScope="[ScoreViewObjectManagerProxy]",t._isLog=!1,t._objectMap={},t}return __extends(t,e),t.prototype.onFacadeAwakeComplete=function(){this.facadeComplete()},t.prototype.onPreloadResourceComplete=function(){},t.prototype.onNonPreloadResourceComplete=function(e){e==GameEnum.LoadingCollectionTypeEnum.Battle&&this.resourceComplete()},t.prototype.onSCRoomLoginComplete=function(){this.init()},t.prototype.onSCRoomLogoutComplete=function(){this.reset()},t.prototype.nextAwake=function(){},t.prototype.nextStart=function(){var e=GameEvent.ScoreViewObjectManagerProxyEvent.MODIFY_COMPLETE_GENERATOR_MAP,t=GameEvent.ScoreViewObjectManagerProxyEvent.MODIFY_COMPLETE_OBJECT_MAP,o=TableEntityProxy.getInstance().scoreTableEntityArray;this.startData(e,t,o);var i=ApplicationFacade.getInstance().retrieveMediator(BattleScoreArrayViewMediator.NAME);this._layer=i.getSkinView()},t.prototype.nextInit=function(){},t.prototype.nextReset=function(){},t.prototype.startObject=function(e){var t=e.tableEntityID,o=TableEntityProxy.getInstance().getScoreTableEntity(t),i=this._generatorMap[t],n=i.getObject(ScoreViewObject);return this.addChild(n,e.self),0==n.isStartComplete()&&(n.opSetProtocol(i.getDistributor()),n.start(o,this)),n},t.prototype.initObject=function(e,t){e.init(t)},t.prototype.playObject=function(e){e.play()},t.prototype.stopObject=function(e){e.stop()},t.prototype.onObjectCompleteHandle=function(e){},t.prototype.getObject=function(e){var t=this._objectMap;for(var o in t){var i=t[o];if(i.hashCode==e)return i}return null},t.prototype.getMap=function(){return this._objectMap},t.prototype.addChild=function(e,t){t?this._layer.addChild(e):this._layer.addChildAt(e,0)},t.prototype.removeChild=function(e){this._layer.removeChild(e)},t.NAME="ScoreViewObjectManagerProxy",t}(BaseObjectManagerProxy);__reflect(ScoreViewObjectManagerProxy.prototype,"ScoreViewObjectManagerProxy");var ScoreViewObjectManagerProxyAdapterMediator=function(e){function t(t,o){var i=e.call(this,t,o)||this;return i._logScope="[ScoreViewObjectManagerProxyAdapterMediator]",i._isLog=!1,i}return __extends(t,e),t.prototype.listNotificationInterests=function(){return[GameEvent.ApplicationFacadeEvent.AWAKE_COMPLETE,GameEvent.ProtocolProxyEvent.MODIFY_COMPLETE_SC_SYNC_VALUE]},t.prototype.handleNotification=function(e){var t=e.getBody();switch(e.getName()){case GameEvent.ApplicationFacadeEvent.AWAKE_COMPLETE:this.retrieveAllProxyAndMediator();break;case GameEvent.ProtocolProxyEvent.MODIFY_COMPLETE_SC_SYNC_VALUE:this.parserSCSyncEntity(t)}},t.prototype.parserSCSyncEntity=function(e){this.handlePlayScore(e)},t.prototype.handlePlayScore=function(e){var t=e;if(t.spinResult&&!(t.spinResult.mechanismResult.hitResult.totalWin<=0)){var o=this._allProxy._fishViewObjectManagerProxy.getObjectBySN(t.targetSN);if(o){var i=this._allProxy._playerViewEntityArrayProxy.getPlayerViewEntityByPlayerID(t.playerId);if(i){var n=this._allProxy._protocolProxy.scRoomLogin.iDenom,a=new ScoreViewObjectData(o.getTableEntity().scoreID,i.id,i.isSelf,o,t.spinResult.mechanismResult.hitResult.totalWin,n,t.spinRequest.targetId,t.spinResult.mechanismResult.odd);this._allProxy._scoreViewObjectManagerProxy.play(a),a=null}}}},t.NAME="ScoreViewObjectManagerProxyAdapterMediator",t}(BaseAdapterMediator);__reflect(ScoreViewObjectManagerProxyAdapterMediator.prototype,"ScoreViewObjectManagerProxyAdapterMediator");var ShaderFX=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._logScope="[ShaderFX]",t._isLog=!1,t}return __extends(t,e),t.prototype.startObject=function(e){Logger.log("startObject "+this.hashCode,this);var t;switch(e.id){case 1:t=this.createWaterWavesFilter();break;case 2:t=this.createLightShadowFilter()}this._filter=t},t.prototype.initObject=function(e){Logger.log("initObject "+this.hashCode,this),Utils.DisplayObjectTool.resetDisplayObject(this,!0)},t.prototype.resetObject=function(){Logger.log("resetObject "+this.hashCode,this),Utils.DisplayObjectTool.resetDisplayObject(this,!1)},t.prototype.playObject=function(){var e=this;Logger.log("playObject "+this.hashCode,this);var t=this._data,o=this._tableEntity;this._setTimeout=egret.setTimeout(function(){switch(o.id){case 1:e.playWaterWavesFilter();break;case 2:e.playLightShadowFilter()}t.targetObject.filters=[e._filter],e.addEventListener(egret.Event.ENTER_FRAME,e.onUpdate,e)},this,t.waitTime)},t.prototype.stopObject=function(){Logger.log("stopObject "+this.hashCode,this),egret.clearTimeout(this._setTimeout),this.onComplete()},t.prototype.completeObject=function(){Logger.log("completeObject "+this.hashCode,this),this._data,this._data.targetObject&&(this._data.targetObject.filters=null),this.removeEventListener(egret.Event.ENTER_FRAME,this.onUpdate,this)},t.prototype.onUpdate=function(e){var t=this._tableEntity.id;switch(t){case 1:this.updateWaterWavesFilter();break;case 2:this.updateLightShadowFilter();break;default:Logger.error("disposeObject ShaderFXTableEntity id:"+t+" is not exist")}},t.prototype.createWaterWavesFilter=function(){var e="attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\nattribute vec2 aColor;\nuniform vec2 projectionVector;\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\nconst vec2 center = vec2(-1.0, 1.0);\nvoid main(void) {\n   gl_Position = vec4( (aVertexPosition / projectionVector) + center , 0.0, 1.0);\n   vTextureCoord = aTextureCoord;\n   vColor = vec4(aColor.x, aColor.x, aColor.x, aColor.x);\n}",t=["precision lowp float;\nvarying vec2 vTextureCoord;","varying vec4 vColor;\n","uniform sampler2D uSampler;","uniform vec2 center;","uniform vec3 params;","uniform float time;","void main()","{","vec2 uv = vTextureCoord.xy;","vec2 texCoord = uv;","float dist = distance(uv, center);","if ( (dist <= (time + params.z)) && (dist >= (time - params.z)) )","{","float diff = (dist - time);","float powDiff = 1.0 - pow(abs(diff*params.x), params.y);","float diffTime = diff  * powDiff;","vec2 diffUV = normalize(uv - center);","texCoord = uv + (diffUV * diffTime);","}","gl_FragColor = texture2D(uSampler, texCoord);","}"].join("\n"),o=new egret.CustomFilter(e,t,{center:{x:.5,y:.5},params:{x:10,y:.8,z:.1},time:0});return o},t.prototype.playWaterWavesFilter=function(){this._filter.uniforms.time=0},t.prototype.updateWaterWavesFilter=function(){var e=this._filter;e.uniforms.time+=.03,e.uniforms.time>1&&this.onComplete()},t.prototype.createLightShadowFilter=function(){var e="attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\nattribute vec2 aColor;\nuniform vec2 projectionVector;\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\nconst vec2 center = vec2(-1.0, 1.0);\nvoid main(void) {\n   gl_Position = vec4( (aVertexPosition / projectionVector) + center , 0.0, 1.0);\n   vTextureCoord = aTextureCoord;\n   vColor = vec4(aColor.x, aColor.x, aColor.x, aColor.x);\n}",t="precision lowp float;\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\nuniform sampler2D uSampler;\nuniform float customUniform;\nvoid main(void) {\nvec2 uvs = vTextureCoord.xy;\nvec4 fg = texture2D(uSampler, vTextureCoord);\nfg.rgb += sin(customUniform + uvs.x * 2. + uvs.y * 2.) * 0.2;\ngl_FragColor = fg * vColor;\n}",o=new egret.CustomFilter(e,t,{customUniform:0});return o},t.prototype.playLightShadowFilter=function(){var e=this._filter;e.uniforms.customUniform=0},t.prototype.updateLightShadowFilter=function(){var e=this._filter;e.uniforms.customUniform+=.1,e.uniforms.customUniform>2*Math.PI&&this.onComplete()},t.NAME="ShaderFX",t}(BaseFX);__reflect(ShaderFX.prototype,"ShaderFX");var ShaderFXData=function(){function e(){}return e}();__reflect(ShaderFXData.prototype,"ShaderFXData");var ShakeFX=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._logScope="[ShakeFX]",t._isLog=!1,t}return __extends(t,e),t.prototype.startObject=function(e){Logger.log("startObject "+this.hashCode,this)},t.prototype.initObject=function(e){Logger.log("initObject "+this.hashCode,this),Utils.DisplayObjectTool.resetDisplayObject(this,!0)},t.prototype.resetObject=function(){Logger.log("resetObject "+this.hashCode,this),Utils.DisplayObjectTool.resetDisplayObject(this,!1)},t.prototype.playObject=function(){var e=this;Logger.log("playObject "+this.hashCode,this);var t=this._data,o=this._tableEntity;this._setTimeout=egret.setTimeout(function(){switch(o.id){case 1:var i=t.targetObject;e._originalX=i.x,e._originalY=i.y,e.playByMove(0);break;case 2:var i=t.targetObject;e._originalX=i.scaleX,e._originalY=i.scaleY,i.alpha=.5,e.playByScale(0)}},this,t.waitTime)},t.prototype.stopObject=function(){Logger.log("stopObject "+this.hashCode,this),egret.clearTimeout(this._setTimeout),this.onComplete()},t.prototype.completeObject=function(){Logger.log("completeObject "+this.hashCode,this);var e=this._data,t=this._tableEntity;switch(t.id){case 1:var o=e.targetObject;o.x=this._originalX,o.y=this._originalY,o.alpha=1,egret.Tween.removeTweens(e.targetObject);break;case 2:var o=e.targetObject;o.scaleX=this._originalX,o.scaleY=this._originalY,o.alpha=1,egret.Tween.removeTweens(e.targetObject)}},t.prototype.playByMove=function(e){Logger.log("playByMove "+this.hashCode,this);var t=this._data,o=this._tableEntity,i=(t.targetObject,o.range,o.onceTime),n=o.repeat;if(egret.Tween.removeTweens,n>=e){e++;var a=this.getMoveValue(e),r=this.getMoveValue(e);egret.Tween.get(t.targetObject).set({x:this._originalX,y:this._originalY}).to({x:this._originalX+a,y:this._originalY+r},i/4).to({x:this._originalX-a,y:this._originalY-r},i/2).to({x:this._originalX,y:this._originalY},i/4).call(this.playByMove,this,[e])}else this.onComplete()},t.prototype.playByScale=function(e){Logger.log("playByScale "+this.hashCode,this);var t=this._data,o=this._tableEntity,i=(t.targetObject,o.range,o.onceTime),n=o.repeat;if(n>e){e++;var a=this.getScaleValue(e);egret.Tween.get(t.targetObject).to({scaleX:this._originalX-a,scaleY:this._originalY-a},i/4).to({scaleX:this._originalX+a,scaleY:this._originalY+a},i/2).to({scaleX:this._originalX,scaleY:this._originalY},i/4).call(this.playByScale,this,[e])}else this.onComplete()},t.prototype.getMoveValue=function(e){var t=Math.pow(1/e,2),o=this._tableEntity.range,i=Utils.MathTool.randomRange(-1*o,o),n=o*t,a=n;return i>0?a:a=-1*n,a},t.prototype.getScaleValue=function(e){var t=Math.pow(1/e,2),o=this._tableEntity.range,i=o*t;return i},t.NAME="ShakeFX",t}(BaseFX);__reflect(ShakeFX.prototype,"ShakeFX");var ShakeFXData=function(){function e(){}return e}();__reflect(ShakeFXData.prototype,"ShakeFXData");var ShowGameSceneCommand=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._logScope="[ShowGameSceneCommand]",t._isLog=!1,t}return __extends(t,e),t.prototype.execute=function(e){var t=e.getBody(),o=this.facade.retrieveProxy(GameDataProxy.NAME);o.gameSceneByShow!=t&&(this.showGameScene(t,o.gameSceneByShow),o.gameSceneByShow=t)},t.prototype.showGameScene=function(e,t){Logger.log("showGameScene showScene:"+GameEnum.SceneTypeEnum[e]+", hideScene:"+GameEnum.SceneTypeEnum[t],this);for(var o in GameEvent.SceneEvent)GameEvent.SceneEventNamingRules.checkIsExistInShowEvent(o,GameEnum.SceneTypeEnum[e])&&GameEvent.SceneEventNamingRules.checkShowFormat(o)&&this.sendNotification(GameEvent.SceneEvent[o],[e,t]),GameEvent.SceneEventNamingRules.checkIsExistInHideEvent(o,GameEnum.SceneTypeEnum[t])&&GameEvent.SceneEventNamingRules.checkHideFormat(o)&&this.sendNotification(GameEvent.SceneEvent[o],[e,t])},t.NAME="ShowGameSceneCommand",t}(puremvc.SimpleCommand);__reflect(ShowGameSceneCommand.prototype,"ShowGameSceneCommand",["ILogger"]);var SmartFoxProxy=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._logScope="[SmartFoxProxy]",t._isLog=!1,t._keepAliveDelay=1e4,t}return __extends(t,e),t.prototype.onFacadeAwakeComplete=function(){this.retrieveProxy()},t.prototype.onPreloadResourceComplete=function(){},t.prototype.onNonPreloadResourceComplete=function(e){},t.prototype.onSCRoomLoginComplete=function(){},t.prototype.onSCRoomLogoutComplete=function(){},t.prototype.awake=function(){},t.prototype.start=function(e){Logger.log("start",this),this._sfsConfig=e,this._sfs=new SFS2X.SmartFox(this._sfsConfig),this._sfs.logger.level=SFS2X.LogLevel.ERROR},t.prototype.init=function(){},t.prototype.reset=function(){},t.prototype.addEvents=function(){Logger.log("addEvents",this),this._sfs.addEventListener(SFS2X.SFSEvent.CONNECTION,this.onConnection,this),this._sfs.addEventListener(SFS2X.SFSEvent.CONNECTION_LOST,this.onConnectionLost,this),this._sfs.addEventListener(SFS2X.SFSEvent.LOGIN,this.onLogin,this),this._sfs.addEventListener(SFS2X.SFSEvent.LOGIN_ERROR,this.onLoginError,this),this._sfs.addEventListener(SFS2X.SFSEvent.EXTENSION_RESPONSE,this.onExtensionResponse,this),this._sfs.addEventListener(SFS2X.SFSEvent.ROOM_JOIN,this.onLobbyORRoomJoin,this),this._sfs.addEventListener(SFS2X.SFSEvent.ROOM_JOIN_ERROR,this.onRoomJoinError,this),this._sfs.addEventListener(SFS2X.SFSEvent.PUBLIC_MESSAGE,this.onPublicMessage,this),this._sfs.addEventListener(SFS2X.SFSEvent.PING_PONG,this.onPingPong,this)},t.prototype.removeEvents=function(){Logger.log("removeEvents",this),this._sfs.removeEventListener(SFS2X.SFSEvent.CONNECTION,this.onConnection),this._sfs.removeEventListener(SFS2X.SFSEvent.CONNECTION_LOST,this.onConnectionLost),this._sfs.removeEventListener(SFS2X.SFSEvent.LOGIN_ERROR,this.onLoginError),this._sfs.removeEventListener(SFS2X.SFSEvent.EXTENSION_RESPONSE,this.onExtensionResponse),this._sfs.removeEventListener(SFS2X.SFSEvent.LOGIN,this.onLogin),this._sfs.removeEventListener(SFS2X.SFSEvent.ROOM_JOIN,this.onLobbyORRoomJoin),this._sfs.removeEventListener(SFS2X.SFSEvent.ROOM_JOIN_ERROR,this.onRoomJoinError),this._sfs.removeEventListener(SFS2X.SFSEvent.PUBLIC_MESSAGE,this.onPublicMessage),this._sfs.removeEventListener(SFS2X.SFSEvent.PING_PONG,this.onPingPong)},t.prototype.connect=function(){Logger.log("connect",this),this.addEvents(),this._sfs.connect(),console.log("[INFO] SmartFox connect")},t.prototype.disconnect=function(){Logger.log("disconnect",this),this._sfs.disconnect(),console.log("[INFO] SmartFox disconnect")},t.prototype.initReconnect=function(e){Logger.log("initReconnect",this),this.sfsConfig=e,this.disconnect()},t.prototype.login=function(){Logger.log("login",this),this._sfs.send(new SFS2X.LoginRequest(this._sfsConfig.userName,this._sfsConfig.password,null,this._sfsConfig.zone))},t.prototype.gameLogin=function(){Logger.log("gameLogin",this);var e=new SFS2X.SFSObject;e.putUtfString("uid",this.sfsConfig.uid),e.putInt("gameType",this.sfsConfig.gameType),e.putInt("machineType",this.sfsConfig.machineType),e.putUtfString("bankId",""),e.putDouble("startBalance",0),e.putBool("debug",this.sfsConfig.debug),e.putUtfString("gameUid",this.sfsConfig.gameUid?this.sfsConfig.gameUid:this.sfsConfig.uid),e.putUtfString("gamePass",this.sfsConfig.gamePass?this.sfsConfig.gamePass:this.sfsConfig.password),e.putUtfString("userName",this.sfsConfig.userName),e.putUtfString("sessionID0",this.sfsConfig.sessionID0?this.sfsConfig.sessionID0:""),e.putUtfString("sessionID1",this.sfsConfig.sessionID1?this.sfsConfig.sessionID1:""),e.putUtfString("sessionID2",this.sfsConfig.sessionID2?this.sfsConfig.sessionID2:""),e.putUtfString("sessionID3",this.sfsConfig.sessionID3?this.sfsConfig.sessionID3:""),e.putUtfString("sessionID4",this.sfsConfig.sessionID4?this.sfsConfig.sessionID4:""),e.putBool("useSSL",this.sfsConfig.useSSL),e.putUtfString("password",this.sfsConfig.password),e.putUtfString("clientType",this.sfsConfig.clientType),e.putUtfString("t",this.sfsConfig.t),e.putUtfString("gameLoginName",this.sfsConfig.gameLoginName),e.putUtfString("zone",this.sfsConfig.zone),e.putInt("port",this.sfsConfig.port),e.putUtfString("host",this.sfsConfig.host),e.putUtfString("zoneName",this.sfsConfig.zoneName),this._sfs.send(new SFS2X.ExtensionRequest(this._sfsConfig.gameLoginName,e))},t.prototype.sendExtensionRequest=function(e,t){var o=ProtocolType[e],i=Protocol_App[o];switch(Logger.log("sendExtensionRequest cmd: "+e+" => "+i+", room:"+this._room+"}",this),this._sfs.send(new SFS2X.ExtensionRequest(i,t,this._room)),o){case Protocol_App.EV_GS_LOGOUT:break;case Protocol_App.EV_GS_FIRE:break;case Protocol_App.EV_GS_HIT:break;case Protocol_App.EV_GS_QUICK_LOGIN:}},t.prototype.sendPublicMessageRequest=function(e,t){var o=ProtocolType[e],i=Protocol_App[o];Logger.log("sendPublicMessageRequest cmd: "+e+" => "+i+", room:"+this._room+"}",this),this._sfs.send(new SFS2X.PublicMessageRequest(i,t,this._room))},t.prototype.log=function(e){var t="";for(var o in e)e.hasOwnProperty(o)&&(t+=", "+o+":"+e[o]);return t},t.prototype.sendJoinRoomRequest=function(e){Logger.log("sendJoinRoomRequest roomID:"+e,this),this._sfs.send(new SFS2X.JoinRoomRequest(e))},t.prototype.onConnection=function(e){e.success?(Logger.log("onConnection",this),GameDataProxy.getInstance().isReconnectRequest=!1,this.connectionSuccessCallback()):(Logger.log("onConnection Fail",this),this.sendNotification(ParserMessageCommand.NAME,new ParserMessageData(MessageType.connectionFail)))},t.prototype.onConnectionLost=function(e){Logger.log("onConnectionLost",this),this.removeEvents(),"manual"==e.reason?GameDataProxy.getInstance().isReconnectRequest&&(this.start(this.sfsConfig),egret.setTimeout(this.connect,this,1e3)):this.sendNotification(ParserMessageCommand.NAME,new ParserMessageData(MessageType.disconnectLost))},t.prototype.onLogin=function(e){Logger.log("onLogin",this),this.loginSuccessCallback(),this.sendNotification(ParserProtocolCommand.NAME,[ProtocolType.scLogin,this._sfs.mySelf])},t.prototype.onLoginError=function(e){Logger.error(this._logScope+" onLoginError"),this._sfs.enableLagMonitor(!1),this.sendNotification(ParserMessageCommand.NAME,new ParserMessageData(MessageType.loginError))},t.prototype.onLobbyORRoomJoin=function(e){if(this._room=e.room,e.room.name==this._sfsConfig.machineType+"_"+this._allProxy._gameSettingProxy.userInfo.currencySystemName){if(Logger.log("onLobbyORRoomJoin LobbyJoin name:"+e.room.name,this),this._allProxy._gameDataProxy.isUpdateTicketRequest){if(this._allProxy._gameDataProxy.reconnectInScene==GameEnum.SceneTypeEnum.Battle)return void(SoundObjectManagerProxy.getInstance().inTransition=!1);if(this._allProxy._gameDataProxy.reconnectInScene==GameEnum.SceneTypeEnum.Transition)return SoundObjectManagerProxy.getInstance().inTransition=!1,void this.sendNotification(GSReconnectCommand.NAME)}this._allProxy._gameDataProxy.isCloseMaintanceDialogRequest&&(this._allProxy._webBridgeProxy.sendCloseAllErrorDialog(),this._allProxy._gameDataProxy.reconnectInScene=-1),this.sendNotification(ParserProtocolCommand.NAME,[ProtocolType.scLobbyJoin,e.room])}else Logger.log("onLobbyORRoomJoin RoomJoin name:"+e.room.name,this),this._lastSyncTime=-1,this.sendNotification(ParserProtocolCommand.NAME,[ProtocolType.scRoomJoin,e.room])},t.prototype.onRoomJoinError=function(e){this.sendNotification(ParserMessageCommand.NAME,new ParserMessageData(MessageType.roomJoinError))},t.prototype.onExtensionResponse=function(e){if(Logger.log("onExtensionResponse even 1:"+e.cmd,this),e.cmd==GameEvent.SFSExtEvent.SFS_EVENT_IDLE_REMIND)this.sendNotification(ParserMessageCommand.NAME,new ParserMessageData(MessageType.idleRemind));else if(e.cmd==GameEvent.SFSExtEvent.SFS_ACCOUNT_STATUS){var t=e.params,o=t.getInt("status_code")+101,i=t.getInt("err_msg");this.sendNotification(ParserMessageCommand.NAME,new ParserMessageData(MessageType.accountStatus,o,i))}else if(e.cmd==GameEvent.SFSExtEvent.SFS_EVENT_CHANGE_BALANCE){var n=ProtocolType.changeBalance;this.sendNotification(ParserProtocolCommand.NAME,[n,e.params])}else if(e.cmd==GameEvent.SFSExtEvent.SFS_EVENT_LOGIN){var t=e.params,a=new ProtocolEntity.SCGameLoginEntity(t);a.data?(this._sfs.enableLagMonitor(!0),this.enableKeepAlive()):this.sendNotification(ParserMessageCommand.NAME,new ParserMessageData(MessageType.gameLoginError,a.code))}else if(e.cmd==GameEvent.SFSExtEvent.SFS_KEEP_ALIVE_RESPONSE);else{var n=Protocol_App[e.cmd];Logger.log("onExtensionResponse even 2:"+ProtocolType[n],this),this.sendNotification(ParserProtocolCommand.NAME,[n,e.params])}},t.prototype.onPublicMessage=function(e){var t=Protocol_App[e.message];"EV_SG_TURN"!=e.message?Logger.log("onPublicMessage even:"+ProtocolType[t],this):this._lastSyncTime=this.getTime(),this.sendNotification(ParserProtocolCommand.NAME,[t,e.data])
},t.prototype.onPingPong=function(e){this.sendNotification(GameEvent.SmartFoxProxyEvent.PING_PONG,e.lagValue)},t.prototype.enableKeepAlive=function(){null==this._keepAliveTimer&&(this._keepAliveTimer=new egret.Timer(this._keepAliveDelay,0),this._keepAliveTimer.addEventListener(egret.TimerEvent.TIMER,this.onTimerProgressKeepAlive,this)),this._keepAliveTimer.start()},t.prototype.onTimerProgressKeepAlive=function(){this._sfs.send(new SFS2X.ExtensionRequest("GEN_HEARTBEAT",new SFS2X.SFSObject))},Object.defineProperty(t.prototype,"sfsConfig",{get:function(){return this._sfsConfig},set:function(e){this._sfsConfig=e},enumerable:!0,configurable:!0}),t.prototype.onEnterFrame=function(){if(-1!=this._lastSyncTime){var e=this._lastSyncTime-this._lastRenderTime;e>GameSettingProxy.lagTimeThreshold?window.location.reload():this._lastRenderTime=this.getTime()}},t.prototype.getTime=function(){return(new Date).getTime()},t.NAME="SmartFoxProxy",t}(BaseProxy);__reflect(SmartFoxProxy.prototype,"SmartFoxProxy");var SmartfoxProxyAdapterMediator=function(e){function t(t,o){var i=e.call(this,t,o)||this;return i._logScope="[SmartfoxAdapterMediator]",i._isLog=!1,i}return __extends(t,e),t.prototype.listNotificationInterests=function(){return[GameEvent.ApplicationFacadeEvent.AWAKE_COMPLETE,GameEvent.ProtocolProxyEvent.DISCONNECT_SMARTFOX,GameEvent.ProtocolProxyEvent.MODIFY_COMPLETE_CS_ROOM_LOGOUT_VALUE,GameEvent.ProtocolProxyEvent.MODIFY_COMPLETE_CS_FIRE_VALUE,GameEvent.ProtocolProxyEvent.MODIFY_COMPLETE_CS_HIT_VALUE,GameEvent.BattleSceneEvent.ENTER_FRAME,GameEvent.ProtocolProxyEvent.MODIFY_COMPLETE_CS_QUICK_LOGIN_VALUE]},t.prototype.handleNotification=function(e){Logger.log("handleNotification:"+e,this);var t=e.getBody(),o=this._allProxy._smartFoxProxy;switch(e.getName()){case GameEvent.ApplicationFacadeEvent.AWAKE_COMPLETE:this.retrieveAllProxyAndMediator();break;case GameEvent.ProtocolProxyEvent.DISCONNECT_SMARTFOX:o.disconnect();break;case GameEvent.ProtocolProxyEvent.MODIFY_COMPLETE_CS_ROOM_LOGOUT_VALUE:o.sendExtensionRequest(ProtocolType[ProtocolType.csRoomLogout],t.getRequest());break;case GameEvent.ProtocolProxyEvent.MODIFY_COMPLETE_CS_FIRE_VALUE:o.sendExtensionRequest(ProtocolType[ProtocolType.csFire],t.getRequest());break;case GameEvent.ProtocolProxyEvent.MODIFY_COMPLETE_CS_HIT_VALUE:o.sendExtensionRequest(ProtocolType[ProtocolType.csHit],t.getRequest());break;case GameEvent.BattleSceneEvent.ENTER_FRAME:o.onEnterFrame();break;case GameEvent.ProtocolProxyEvent.MODIFY_COMPLETE_CS_QUICK_LOGIN_VALUE:o.sendExtensionRequest(ProtocolType[ProtocolType.csQuickLogin],t.getRequest())}},t.NAME="SmartfoxProxyAdapterMediator",t}(BaseAdapterMediator);__reflect(SmartfoxProxyAdapterMediator.prototype,"SmartfoxProxyAdapterMediator");var SoundObject=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._logScope="[SoundObject]",t._isLog=!1,t._sourceVolume=1,t}return __extends(t,e),t.prototype.startObject=function(t){var o=this;Logger.log("startObject "+this.hashCode,this);var i,n=this._proxy.getPath(t.id);i=this._tableEntity.type==GameEnum.SoundTypeEnum.BGM?new Howl({src:[n],volume:0,muted:!0}):new Howl({src:[n],volume:0,muted:!0,onend:function(e){return o.onComplete()}}),this._component=i,this.name=this._tableEntity.enumName+"_"+String(this.hashCode),e.prototype.startObject.call(this,t)},t.prototype.initObject=function(t){Logger.log("initObject "+this.hashCode,this),e.prototype.initObject.call(this,t)},t.prototype.resetObject=function(){Logger.log("resetObject "+this.hashCode,this),e.prototype.resetObject.call(this)},t.prototype.playObject=function(){Logger.log("playObject "+this.hashCode,this),this._component.mute(!0),this._howlPlayID=this._component.play(),this._component.loop(this._tableEntity.loop),this._sourceVolume=1,this.refreshVolume(),e.prototype.playObject.call(this)},t.prototype.stopObject=function(){Logger.log("stopObject "+this.hashCode,this),e.prototype.stopObject.call(this)},t.prototype.completeObject=function(){Logger.log("completeObject "+this.hashCode,this),this._component.stop(),this._component.mute(!0),e.prototype.completeObject.call(this)},t.prototype.getProxy=function(){return this._proxy},t.prototype.getData=function(){return this._data},t.prototype.getTableEntity=function(){return this._tableEntity},t.prototype.pause=function(){Logger.log("pause "+this.hashCode+"  name:"+this._tableEntity.name+", sourceVolume:"+this._tableEntity.volume+", playingVolume:"+this._playingVolume,this),this._component.pause()},t.prototype.replay=function(){Logger.log("pause "+this.hashCode+"  name:"+this._tableEntity.name+", sourceVolume:"+this._tableEntity.volume+", playingVolume:"+this._playingVolume,this),this._component.onpause&&this._component.play()},t.prototype.refreshVolume=function(){if(this._tableEntity.type==GameEnum.SoundTypeEnum.BGM){var e=this.getProxy().bgmVolume;this.getProxy().bgmOn?(this._playingVolume=e*this._sourceVolume*this._tableEntity.volume,this._component.mute(!1)):(this._playingVolume=0,this._component.mute(!0))}else{var e=this.getProxy().seVolume;this.getProxy().seOn&&!this.getProxy().inTransition?(this._playingVolume=e*this._sourceVolume*this._tableEntity.volume,this._component.mute(!1)):(this._playingVolume=0,this._component.mute(!0))}this._component.volume(this._playingVolume)},Object.defineProperty(t.prototype,"sourceVolume",{get:function(){return this._sourceVolume},set:function(e){this._sourceVolume=e,this.refreshVolume()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"howlPlayID",{get:function(){return this._howlPlayID},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"type",{get:function(){return this._tableEntity.type},enumerable:!0,configurable:!0}),t.NAME="SoundObject",t}(BaseOPObject);__reflect(SoundObject.prototype,"SoundObject");var SoundObjectManagerProxy=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._logScope="[SoundObjectManagerProxy]",t._isLog=!1,t._objectMap={},t._pathFormat="resource/assets/sound/{0}.mp3",t._soundVolume=1,t._soundOn=!1,t._bgmVolume=1,t._bgmOn=!1,t._seVolume=1,t._seOn=!1,t._inTransition=!1,t._bgmOrderMap={},t}return __extends(t,e),t.getInstance=function(){return null==this._instance&&(this._instance=ApplicationFacade.getInstance().retrieveProxy(t.NAME)),this._instance},t.prototype.onFacadeAwakeComplete=function(){this.facadeComplete()},t.prototype.onPreloadResourceComplete=function(){this.resourceComplete(),this.reset(),this.init()},t.prototype.onNonPreloadResourceComplete=function(e){},t.prototype.onSCRoomLoginComplete=function(){},t.prototype.onSCRoomLogoutComplete=function(){},t.prototype.nextAwake=function(){},t.prototype.nextStart=function(){Howler.iOSAutoEnable=!0,this.soundOn=!0;var e=GameEvent.SoundObjectManagerProxyEvent.MODIFY_COMPLETE_GENERATOR_MAP,t=GameEvent.SoundObjectManagerProxyEvent.MODIFY_COMPLETE_OBJECT_MAP,o=TableEntityProxy.getInstance().soundTableEntityArray;this.startData(e,t,o)},t.prototype.nextInit=function(){},t.prototype.nextReset=function(){},t.prototype.startObject=function(e){Logger.log("startObject id:"+e,this);var t=e,o=TableEntityProxy.getInstance().getSoundTableEntity(t),i=this._generatorMap[t],n=i.getObject(SoundObject);return 0==n.isStartComplete()&&(n.opSetProtocol(i.getDistributor()),n.start(o,this)),n},t.prototype.initObject=function(e,t){e.init(t)},t.prototype.playObject=function(e){e.type==GameEnum.SoundTypeEnum.BGM?this.playBGMByNewFadeInOldFadeOut(e):e.play()},t.prototype.stopObject=function(e){e.type==GameEnum.SoundTypeEnum.BGM?this.stopBGMByNewFadeOutOldFadeIn(e):e.stop()},t.prototype.onObjectCompleteHandle=function(e){},t.prototype.getMap=function(){return this._objectMap},Object.defineProperty(t.prototype,"soundVolume",{get:function(){return this._soundVolume},set:function(e){this._soundVolume=e,this.bgmVolume=e,this.seVolume=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"soundOn",{get:function(){return this._soundOn},set:function(e){Howler.mute(!e),this._soundOn=e,this.bgmOn=e,this.seOn=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"bgmVolume",{get:function(){return this._bgmVolume},set:function(e){this.setSoundVolume(GameEnum.SoundTypeEnum.BGM,e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"seVolume",{get:function(){return this._seVolume},set:function(e){this.setSoundVolume(GameEnum.SoundTypeEnum.SE,e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"bgmOn",{get:function(){return this._bgmOn},set:function(e){this.setSoundON(GameEnum.SoundTypeEnum.BGM,e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"seOn",{get:function(){return this._seOn},set:function(e){this.setSoundON(GameEnum.SoundTypeEnum.SE,e)},enumerable:!0,configurable:!0}),t.prototype.setSoundVolume=function(e,t){t=Math.min(t,1),t=Math.max(t,0),this.setVolume(e,t),this.refreshVolume(e),this.sendNotification(this.getVolumeNotify(e),t)},t.prototype.setSoundON=function(e,t){this.setOn(e,t),this.refreshVolume(e),this.sendNotification(this.getONNotify(e),t)},t.prototype.refreshVolume=function(e){var t=this._objectMap;for(var o in t){var i=t[o];i.type==e&&i.refreshVolume()}},t.prototype.stopAllBySoundType=function(e){var t=this._objectMap;for(var o in t){var i=t[o];i.type==e&&this.stop(i)}},t.prototype.setVolume=function(e,t){return e==GameEnum.SoundTypeEnum.BGM?this._bgmVolume=t:this._seVolume=t,t},t.prototype.getVolume=function(e){var t;return t=e==GameEnum.SoundTypeEnum.BGM?this._bgmVolume:this._seVolume},t.prototype.setOn=function(e,t){return e==GameEnum.SoundTypeEnum.BGM?this._bgmOn=t:this._seOn=t,t},t.prototype.getOn=function(e){var t;return t=e==GameEnum.SoundTypeEnum.BGM?this._bgmOn:this._seOn},t.prototype.getVolumeNotify=function(e){var t;return t=GameEvent.SoundObjectManagerProxyEvent.MODIFY_COMPLETE_SOUND_VOLUME_VALUE},t.prototype.getONNotify=function(e){var t;return t=GameEvent.SoundObjectManagerProxyEvent.MODIFY_COMPLETE_SOUND_ON_VALUE},t.prototype.getPath=function(e){Logger.log("getPath id:"+e,this);var t=this._allProxy._gameSettingProxy.userInfo.lang,o=this._allProxy._gameSettingProxy.gameResourcePath,i=TableEntityProxy.getInstance().getSoundTableEntity(e),n=Utils.StringTool.format(i.name,t),a=Utils.StringTool.format(o+this._pathFormat,n);return a},Object.defineProperty(t.prototype,"inTransition",{get:function(){return this._inTransition},set:function(e){this._inTransition=e},enumerable:!0,configurable:!0}),t.prototype.playBGMByNewFadeInOldFadeOut=function(e){Logger.log("playBGMByNewFadeInOldFadeOut soundID:"+e.getData(),this);var t=e,o=(t.getData(),t.getTableEntity().order),i=this._bgmOrderMap;if(null!=i[o]){var n=i[o];egret.Tween.removeTweens(n),egret.Tween.get(n).to({sourceVolume:0},100).call(function(){n.stop()},this)}i[o]=t;var a,r,s=-1;for(var l in i){var c=i[l];if(null!=c){var h=c.getData(),u=c.getTableEntity().order;u>s&&(a=c,r=h,s=u,Logger.log("playBGMByNewFadeInOldFadeOut fadeOut soundID:"+h,this),egret.Tween.removeTweens(c),egret.Tween.get(c).to({sourceVolume:0},100))}}Logger.log("playBGMByNewFadeInOldFadeOut fadeIn soundID:"+r,this),egret.Tween.removeTweens(a),egret.Tween.get(a).to({sourceVolume:1},100),e.play()},t.prototype.stopBGMByNewFadeOutOldFadeIn=function(e){Logger.log("stopBGMByNewFadeOutOldFadeIn sound ID:"+e.getData(),this);var t=e,o=t.getData(),i=t.getTableEntity().order;Logger.log("stopBGMByNewFadeOutOldFadeIn fadeOut sound ID:"+o,this),egret.Tween.removeTweens(t),egret.Tween.get(t).to({sourceVolume:0},100).call(function(){t.stop()},this);var n=this._bgmOrderMap;n[i]=null;var a,r,s=-1;for(var l in n){var c=n[l];if(null!=c){var h=c.getData(),u=c.getTableEntity().order;u>s&&c!=t&&(a=c,r=h,s=u)}}a&&(Logger.log("stopBGMByNewFadeOutOldFadeIn fadeIn sound ID:"+r,this),egret.Tween.removeTweens(a),egret.Tween.get(a).to({sourceVolume:1},100))},t.NAME="SoundObjectManagerProxy",t}(BaseObjectManagerProxy);__reflect(SoundObjectManagerProxy.prototype,"SoundObjectManagerProxy");var SoundObjectManagerProxyAdapterMediator=function(e){function t(t,o){var i=e.call(this,t,o)||this;return i._logScope="[SoundObjectManagerProxyAdapterMediator]",i._isLog=!1,i}return __extends(t,e),t.prototype.listNotificationInterests=function(){return[GameEvent.ApplicationFacadeEvent.AWAKE_COMPLETE,GameEvent.ProtocolProxyEvent.MODIFY_COMPLETE_SC_SYNC_VALUE]},t.prototype.handleNotification=function(e){var t=e.getBody();switch(e.getName()){case GameEvent.ApplicationFacadeEvent.AWAKE_COMPLETE:this.retrieveAllProxyAndMediator();break;case GameEvent.ProtocolProxyEvent.MODIFY_COMPLETE_SC_SYNC_VALUE:this.parserSCSyncEntity(t)}},t.prototype.parserSCSyncEntity=function(e){this.handlePlaySound(e)},t.prototype.handlePlaySound=function(e){},t.NAME="SoundObjectManagerProxyAdapterMediator",t}(BaseAdapterMediator);__reflect(SoundObjectManagerProxyAdapterMediator.prototype,"SoundObjectManagerProxyAdapterMediator");var SpecialEffectComponent=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._logScope="[SpecialEffectComponent]",t._isLog=!1,t._isFXComplete=!0,t}return __extends(t,e),t.prototype.startObject=function(e){switch(Logger.log("startObject"+this.hashCode,this),e.id){case 1:this._fx=new WaveBillboardFX;break;case 2:this._fx=new CaiShenBillboardFX;break;default:Logger.error("startObject id:"+e.id+" is not exist",this)}this.fxStart(this._fx,e)},t.prototype.initObject=function(e){switch(Logger.log("initObject "+this.hashCode,this),this._tableEntity.id){case 1:var t=new WaveBillboardFXData;this._fx.init(t);break;case 2:var t=new CaiShenBillboardFXData;this._fx.init(t);break;default:Logger.error("initObject id:"+this._tableEntity.id+" is not exist",this)}Utils.DisplayObjectTool.resetDisplayObject(this,!0)},t.prototype.resetObject=function(){Logger.log("resetObject "+this.hashCode,this),Utils.DisplayObjectTool.resetDisplayObject(this,!1)},t.prototype.playObject=function(){Logger.log("playObject "+this.hashCode,this),this._fx&&(this._fx.play(),this._isFXComplete=!1)},t.prototype.stopObject=function(){Logger.log("stopObject "+this.hashCode,this),this._fx&&(this._fx.stop(),this._isFXComplete=!1),this.onComplete()},t.prototype.completeObject=function(){Logger.log("completeObject "+this.hashCode,this)},t.prototype.onFXComplete=function(e){var t;this._isFXComplete=!0,egret.is(e.target,WaveBillboardFX.NAME)?t=WaveBillboardFX.NAME:egret.is(e.target,CaiShenBillboardFX.NAME)?t=CaiShenBillboardFX.NAME:Logger.error("onFXComplete "+e.target+" is not exist",this),Logger.log("onFXComplete "+this.hashCode+" "+t,this),this._isFXComplete&&this.onComplete()},t.prototype.fxStart=function(e,t){e.addEventListener(ObjectEvent.COMPLETE,this.onFXComplete,this),this.addChild(e),e.start(t)},t.NAME="SpecialEffectComponent",t}(BaseComponent);__reflect(SpecialEffectComponent.prototype,"SpecialEffectComponent");var SpecialEffectViewObject=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._logScope="[SpecialEffectViewObject]",t._isLog=!1,t._component=new SpecialEffectComponent,t}return __extends(t,e),t.prototype.startObject=function(t){Logger.log("startObject "+this.hashCode,this),e.prototype.startObject.call(this,t)},t.prototype.initObject=function(t){Logger.log("initObject "+this.hashCode,this),this.name=this._tableEntity.enumName+"_"+String(this.hashCode),e.prototype.initObject.call(this,t)},t.prototype.resetObject=function(){Logger.log("resetObject "+this.hashCode,this),e.prototype.resetObject.call(this)},t.prototype.playObject=function(){Logger.log("playObject "+this.hashCode,this),e.prototype.playObject.call(this)},t.prototype.stopObject=function(){Logger.log("stopObject "+this.hashCode,this),e.prototype.stopObject.call(this)},t.prototype.completeObject=function(){Logger.log("completeObject "+this.hashCode,this),e.prototype.completeObject.call(this)},t.prototype.getProxy=function(){return this._proxy},t.prototype.getData=function(){return this._data},t.prototype.getTableEntity=function(){return this._tableEntity},t.NAME="SpecialEffectViewObject",t}(BaseCOPObject);__reflect(SpecialEffectViewObject.prototype,"SpecialEffectViewObject");var SpecialEffectViewObjectManagerProxy=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._logScope="[SpecialEffectViewObjectManagerProxy]",t._isLog=!1,t._objectMap={},t}return __extends(t,e),t.getInstance=function(){return null==this._instance&&(this._instance=ApplicationFacade.getInstance().retrieveProxy(t.NAME)),this._instance},t.prototype.onFacadeAwakeComplete=function(){this.facadeComplete()},t.prototype.onPreloadResourceComplete=function(){},t.prototype.onNonPreloadResourceComplete=function(e){e==GameEnum.LoadingCollectionTypeEnum.Battle&&this.resourceComplete()},t.prototype.onSCRoomLoginComplete=function(){this.init()},t.prototype.onSCRoomLogoutComplete=function(){this.reset()},t.prototype.nextAwake=function(){},t.prototype.nextStart=function(){var e=GameEvent.SpecialEffectViewObjectManagerProxyEvent.MODIFY_COMPLETE_GENERATOR_MAP,t=GameEvent.SpecialEffectViewObjectManagerProxyEvent.MODIFY_COMPLETE_OBJECT_MAP,o=TableEntityProxy.getInstance().specialEffectTableEntityArray;this.startData(e,t,o);var i=ApplicationFacade.getInstance().retrieveMediator(BattleSpecialEffectArrayViewMediator.NAME);this._layer=i.getSkinView()},t.prototype.nextInit=function(){},t.prototype.nextReset=function(){},t.prototype.startObject=function(e){var t=TableEntityProxy.getInstance().getSpecialEffectTableEntity(e),o=this._generatorMap[e],i=o.getObject(SpecialEffectViewObject);return this.addChild(i),0==i.isStartComplete()&&(i.opSetProtocol(o.getDistributor()),i.start(t,this)),i},t.prototype.initObject=function(e,t){e.init(t)},t.prototype.playObject=function(e){e.play()},t.prototype.stopObject=function(e){e.stop()},t.prototype.onObjectCompleteHandle=function(e){},t.prototype.getObject=function(e){var t=this._objectMap;for(var o in t){var i=t[o];if(i.hashCode==e)return i}return null},t.prototype.getMap=function(){return this._objectMap},t.prototype.addChild=function(e){this._layer.addChild(e)},t.prototype.removeChild=function(e){this._layer.removeChild(e)},t.NAME="SpecialEffectViewObjectManagerProxy",t}(BaseObjectManagerProxy);__reflect(SpecialEffectViewObjectManagerProxy.prototype,"SpecialEffectViewObjectManagerProxy");var SpecialEffectViewObjectManagerProxyAdapterMediator=function(e){function t(t,o){var i=e.call(this,t,o)||this;return i._logScope="[SpecialEffectViewObjectManagerProxyAdapterMediator]",i._isLog=!1,i}return __extends(t,e),t.prototype.listNotificationInterests=function(){return[GameEvent.ApplicationFacadeEvent.AWAKE_COMPLETE,GameEvent.ProtocolProxyEvent.MODIFY_COMPLETE_SC_SYNC_VALUE]},t.prototype.handleNotification=function(e){var t=e.getBody();switch(e.getName()){case GameEvent.ApplicationFacadeEvent.AWAKE_COMPLETE:this.retrieveAllProxyAndMediator();break;case GameEvent.ProtocolProxyEvent.MODIFY_COMPLETE_SC_SYNC_VALUE:this.parserSCSyncEntity(t)}},t.prototype.parserSCSyncEntity=function(e){},t.NAME="SpecialEffectViewObjectManagerProxyAdapterMediator",t}(BaseAdapterMediator);__reflect(SpecialEffectViewObjectManagerProxyAdapterMediator.prototype,"SpecialEffectViewObjectManagerProxyAdapterMediator");var SystemProxy=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._logScope="[SystemProxy]",t._isLog=!1,t._isMobile=!1,t}return __extends(t,e),t.prototype.onFacadeAwakeComplete=function(){this.retrieveProxy()},t.prototype.onPreloadResourceComplete=function(){},t.prototype.onNonPreloadResourceComplete=function(e){e==GameEnum.LoadingCollectionTypeEnum.Lobby&&this.start()},t.prototype.onSCRoomLoginComplete=function(){},t.prototype.onSCRoomLogoutComplete=function(){},t.prototype.awake=function(){this.isMobile=egret.Capabilities.isMobile,this.language=egret.Capabilities.language,this.os=egret.Capabilities.os,this.runtimeType=egret.Capabilities.runtimeType},t.prototype.start=function(){},t.prototype.init=function(){},t.prototype.reset=function(){},Object.defineProperty(t.prototype,"isMobile",{get:function(){return this._isMobile},set:function(e){this._isMobile=e,this.sendNotification(GameEvent.SystemProxyEvent.MODIFY_COMPLETE_IS_MOBLIE_VALUE,this._isMobile)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"language",{get:function(){return this._language},set:function(e){this._language=e,this.sendNotification(GameEvent.SystemProxyEvent.MODIFY_COMPLETE_LANGUAGE_VALUE,this._language)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"os",{get:function(){return this._os},set:function(e){this._os=e,this.sendNotification(GameEvent.SystemProxyEvent.MODIFY_COMPLETE_OS_VALUE,this._os)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"runtimeType",{get:function(){return this._runtimeType},set:function(e){this._runtimeType=e,this.sendNotification(GameEvent.SystemProxyEvent.MODIFY_COMPLETE_RUNTIME_TYPE_VALUE,this._runtimeType)},enumerable:!0,configurable:!0}),t.NAME="SystemProxy",t}(BaseProxy);__reflect(SystemProxy.prototype,"SystemProxy");var TableEntityProxy=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._logScope="[TableEntityProxy]",t._isLog=!1,t}return __extends(t,e),t.getInstance=function(){return null==this._instance&&(this._instance=ApplicationFacade.getInstance().retrieveProxy(t.NAME)),this._instance},t.prototype.onFacadeAwakeComplete=function(){this.retrieveProxy()},t.prototype.onPreloadResourceComplete=function(){this.creatArrayByPreload()},t.prototype.onNonPreloadResourceComplete=function(e){e==GameEnum.LoadingCollectionTypeEnum.Lobby&&(this.creatArrayByNonPreload(),this.start())},t.prototype.onSCRoomLoginComplete=function(){},t.prototype.onSCRoomLogoutComplete=function(){},t.prototype.awake=function(){},t.prototype.start=function(){},t.prototype.init=function(){},t.prototype.reset=function(){},t.prototype.creatArrayByPreload=function(){this.soundTableEntityArray=Utils.ResourceTool.getRes("Sound_json"),this.zoneTableEntityArray=Utils.ResourceTool.getRes("Zone_json")},t.prototype.creatArrayByNonPreload=function(){this.battleBGTableEntityArray=Utils.ResourceTool.getRes("BattleBG_json"),this.betTableEntityArray=Utils.ResourceTool.getRes("Bet_json"),this.fishTableEntityArray=Utils.ResourceTool.getRes("Fish_json"),this.bulletTableEntityArray=Utils.ResourceTool.getRes("Bullet_json"),this.coinTableEntityArray=Utils.ResourceTool.getRes("Coin_json"),this.fishPathTableEntityArray=Utils.ResourceTool.getRes("FishPath_json"),this.fishTeamTableEntityArray=Utils.ResourceTool.getRes("FishTeam_json"),this.bossAndWeaponFCTableEntityArray=Utils.ResourceTool.getRes("BossAndWeaponFC_json"),this.bulletTypeTableEntityArray=Utils.ResourceTool.getRes("BulletType_json"),this.effectTableEntityArray=Utils.ResourceTool.getRes("Effect_json"),this.fortTableEntityArray=Utils.ResourceTool.getRes("Fort_json"),this.medalsTableEntityArray=Utils.ResourceTool.getRes("Medals_json"),this.middleFCTableEntityArray=Utils.ResourceTool.getRes("MiddleFC_json"),this.highFCTableEntityArray=Utils.ResourceTool.getRes("HighFC_json"),this.lowFCTableEntityArray=Utils.ResourceTool.getRes("LowFC_json"),this.scoreTableEntityArray=Utils.ResourceTool.getRes("Score_json"),this.shakeFXTableEntityArray=Utils.ResourceTool.getRes("ShakeFX_json"),this.luckyDrawTableEntityArray=Utils.ResourceTool.getRes("LuckyDraw_json"),this.shaderFXTableEntityArray=Utils.ResourceTool.getRes("ShaderFX_json"),this.movieClipFXTableEntityArray=Utils.ResourceTool.getRes("MovieClipFX_json"),this.particleFXTableEntityArray=Utils.ResourceTool.getRes("ParticleFX_json"),this.speakSoundGroupTableEntityArray=Utils.ResourceTool.getRes("SpeakSoundGroup_json"),this.soundTableEntityArray=Utils.ResourceTool.getRes("Sound_json"),this.specialEffectTableEntityArray=Utils.ResourceTool.getRes("SpecialEffect_json"),this.zoneTableEntityArray=Utils.ResourceTool.getRes("Zone_json")},t.prototype.getBattleBGTableEntity=function(e){for(var t=0;t<this.battleBGTableEntityArray.length;t++)if(this.battleBGTableEntityArray[t].id==e)return this.battleBGTableEntityArray[t];return Logger.error("getBattleBGTableEntity id:"+e+" is not exist",this),null},t.prototype.getBetTableEntity=function(e){for(var t=0;t<this.betTableEntityArray.length;t++)if(this.betTableEntityArray[t].id==e)return this.betTableEntityArray[t];return Logger.error("getBetTableEntity id:"+e+" is not exist",this),null},t.prototype.getFishTableEntity=function(e){for(var t=0;t<this.fishTableEntityArray.length;t++)if(this.fishTableEntityArray[t].id==e)return this.fishTableEntityArray[t];return Logger.error("getFishTableEntity id:"+e+" is not exist",this),null},t.prototype.getBulletTableEntity=function(e){for(var t=0;t<this.bulletTableEntityArray.length;t++)if(this.bulletTableEntityArray[t].id==e)return this.bulletTableEntityArray[t];return Logger.error("getBulletTableEntity id:"+e+" is not exist",this),null},t.prototype.getCoinTableEntity=function(e){for(var t=0;t<this.coinTableEntityArray.length;t++)if(this.coinTableEntityArray[t].id==e)return this.coinTableEntityArray[t];return Logger.error("getCoinTableEntity id:"+e+" is not exist",this),null},t.prototype.getFishPathTableEntity=function(e){for(var t=0;t<this.fishPathTableEntityArray.length;t++)if(this.fishPathTableEntityArray[t].id==e)return this.fishPathTableEntityArray[t];return Logger.error("getFishPathTableEntity id:"+e+" is not exist",this),null},t.prototype.getFishTeamTableEntity=function(e){for(var t=0;t<this.fishTeamTableEntityArray.length;t++)if(this.fishTeamTableEntityArray[t].id==e)return this.fishTeamTableEntityArray[t];return Logger.error("getFishTeamTableEntity id:"+e+" is not exist",this),null},t.prototype.getBossAndWeaponFCTableEntity=function(e){for(var t=0;t<this.bossAndWeaponFCTableEntityArray.length;t++)if(this.bossAndWeaponFCTableEntityArray[t].id==e)return this.bossAndWeaponFCTableEntityArray[t];return Logger.error("getBossAndWeaponFCTableEntity id:"+e+" is not exist",this),null},t.prototype.getBulletTypeTableEntity=function(e){for(var t=0;t<this.bulletTypeTableEntityArray.length;t++)if(this.bulletTypeTableEntityArray[t].id==e)return this.bulletTypeTableEntityArray[t];return Logger.error("getBulletTypeTableEntity id:"+e+" is not exist",this),null},t.prototype.getEffectTableEntity=function(e){for(var t=0;t<this.effectTableEntityArray.length;t++)if(this.effectTableEntityArray[t].id==e)return this.effectTableEntityArray[t];return Logger.error("getEffectTableEntity id:"+e+" is not exist",this),null},t.prototype.getFortTableEntity=function(e){for(var t=0;t<this.fortTableEntityArray.length;t++)if(this.fortTableEntityArray[t].id==e)return this.fortTableEntityArray[t];return Logger.error("getFortTableEntity id:"+e+" is not exist",this),null},t.prototype.getMedalsTableEntity=function(e){for(var t=0;t<this.medalsTableEntityArray.length;t++)if(this.medalsTableEntityArray[t].id==e)return this.medalsTableEntityArray[t];return Logger.error("getMedalsTableEntity id:"+e+" is not exist",this),null},t.prototype.getMiddleFCTableEntity=function(e){for(var t=0;t<this.middleFCTableEntityArray.length;t++)if(this.middleFCTableEntityArray[t].id==e)return this.middleFCTableEntityArray[t];return Logger.error("getMiddleFCTableEntity id:"+e+" is not exist",this),null},t.prototype.getHighFCTableEntity=function(e){for(var t=0;t<this.highFCTableEntityArray.length;t++)if(this.highFCTableEntityArray[t].id==e)return this.highFCTableEntityArray[t];return Logger.error("getHighFCTableEntity id:"+e+" is not exist",this),null},t.prototype.getLowFCTableEntity=function(e){for(var t=0;t<this.lowFCTableEntityArray.length;t++)if(this.lowFCTableEntityArray[t].id==e)return this.lowFCTableEntityArray[t];return Logger.error("getLowFCTableEntity id:"+e+" is not exist",this),null},t.prototype.getScoreTableEntity=function(e){for(var t=0;t<this.scoreTableEntityArray.length;t++)if(this.scoreTableEntityArray[t].id==e)return this.scoreTableEntityArray[t];return Logger.error("getScoreTableEntity id:"+e+" is not exist",this),null},t.prototype.getShakeFXTableEntity=function(e){for(var t=0;t<this.shakeFXTableEntityArray.length;t++)if(this.shakeFXTableEntityArray[t].id==e)return this.shakeFXTableEntityArray[t];return Logger.error("getShakeFXTableEntity id:"+e+" is not exist",this),null},t.prototype.getLuckyDrawTableEntity=function(e){for(var t=0;t<this.luckyDrawTableEntityArray.length;t++)if(this.luckyDrawTableEntityArray[t].id==e)return this.luckyDrawTableEntityArray[t];return Logger.error("getLuckyDrawTableEntity id:"+e+" is not exist",this),null},t.prototype.getShaderFXTableEntity=function(e){for(var t=0;t<this.shaderFXTableEntityArray.length;t++)if(this.shaderFXTableEntityArray[t].id==e)return this.shaderFXTableEntityArray[t];return Logger.error("getShaderFXTableEntity id:"+e+" is not exist",this),null},t.prototype.getMovieClipFXTableEntity=function(e){for(var t=0;t<this.movieClipFXTableEntityArray.length;t++)if(this.movieClipFXTableEntityArray[t].id==e)return this.movieClipFXTableEntityArray[t];return Logger.error("getMovieClipFXTableEntity id:"+e+" is not exist",this),null},t.prototype.getParticleFXTableEntity=function(e){for(var t=0;t<this.particleFXTableEntityArray.length;t++)if(this.particleFXTableEntityArray[t].id==e)return this.particleFXTableEntityArray[t];return Logger.error("getParticleFXTableEntity id:"+e+" is not exist",this),null},t.prototype.getSpeakSoundGroupTableEntity=function(e){for(var t=0;t<this.speakSoundGroupTableEntityArray.length;t++)if(this.speakSoundGroupTableEntityArray[t].id==e)return this.speakSoundGroupTableEntityArray[t];return Logger.error("getSpeakSoundGroupTableEntity id:"+e+" is not exist",this),null},t.prototype.getSoundTableEntity=function(e){for(var t=0;t<this.soundTableEntityArray.length;t++)if(this.soundTableEntityArray[t].id==e)return this.soundTableEntityArray[t];return Logger.error("getSoundTableEntity id:"+e+" is not exist",this),null},t.prototype.getSpecialEffectTableEntity=function(e){for(var t=0;t<this.specialEffectTableEntityArray.length;t++)if(this.specialEffectTableEntityArray[t].id==e)return this.specialEffectTableEntityArray[t];return Logger.error("getSpecialEffectTableEntity id:"+e+" is not exist",this),null},t.prototype.getZoneTableEntity=function(e){for(var t=0;t<this.zoneTableEntityArray.length;t++)if(this.zoneTableEntityArray[t].id==e)return this.zoneTableEntityArray[t];return Logger.error("getZoneTableEntity id:"+e+" is not exist",this),null},t.NAME="TableEntityProxy",t}(BaseProxy);__reflect(TableEntityProxy.prototype,"TableEntityProxy");var ThemeAdapter=function(){function e(){}return e.prototype.getTheme=function(e,t,o,i){function n(e){t.call(i,e)}function a(t){t.resItem.url==e&&(RES.removeEventListener(RES.ResourceEvent.ITEM_LOAD_ERROR,a,null),o.call(i))}var r=this;if("undefined"!=typeof generateEUI)egret.callLater(function(){t.call(i,generateEUI)},this);else if("undefined"!=typeof generateEUI2)RES.getResByUrl("resource/gameEui.json",function(e,o){window.JSONParseClass.setData(e),egret.callLater(function(){t.call(i,generateEUI2)},r)},this,RES.ResourceItem.TYPE_JSON);else if("undefined"!=typeof generateJSON)if(e.indexOf(".exml")>-1){var s=e.split("/");s.pop();var l=s.join("/")+"_EUI.json";generateJSON.paths[e]?egret.callLater(function(){t.call(i,generateJSON.paths[e])},this):RES.getResByUrl(l,function(o){window.JSONParseClass.setData(o),egret.callLater(function(){t.call(i,generateJSON.paths[e])},r)},this,RES.ResourceItem.TYPE_JSON)}else egret.callLater(function(){t.call(i,generateJSON)},this);else RES.addEventListener(RES.ResourceEvent.ITEM_LOAD_ERROR,a,null),RES.getResByUrl(e,n,this,RES.ResourceItem.TYPE_TEXT)},e}();__reflect(ThemeAdapter.prototype,"ThemeAdapter",["eui.IThemeAdapter"]);var TransitionSceneMediator=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._logScope="[TransitionSceneMediator]",t._isLog=!1,t.balanceChanged=!1,t.hideTransitionScene=!1,t.tempData=null,t.delayTimeout=-1,t}return __extends(t,e),t.prototype.listNotificationInterests=function(){return[GameEvent.SceneEvent.LOAD_TRANSITION_SCENE,GameEvent.SceneEvent.UNLOAD_TRANSITION_SCENE,GameEvent.SceneEvent.SHOW_TRANSITION_SCENE,GameEvent.SceneEvent.SHOW_TRANSITION_SCENE_LOADING,GameEvent.SceneEvent.HIDE_TRANSITION_SCENE,GameEvent.SceneEvent.FORCE_HIDE_TRANSITION,GameEvent.ProtocolProxyEvent.MODIFY_COMPLETE_CS_QUICK_LOGIN_VALUE,GameEvent.ProtocolProxyEvent.MODIFY_COMPLETE_CS_ROOM_LOGOUT_VALUE,GameEvent.ProtocolProxyEvent.MODIFY_COMPLETE_SC_USER_INFO_VALUE]
},t.prototype.handleNotification=function(e){var t=e.getBody();switch(e.getName()){case GameEvent.SceneEvent.LOAD_TRANSITION_SCENE:this.init();break;case GameEvent.SceneEvent.UNLOAD_TRANSITION_SCENE:this.reset();break;case GameEvent.SceneEvent.SHOW_TRANSITION_SCENE:this.enable(),t[1]==GameEnum.SceneTypeEnum.Battle&&SoundObjectManagerProxy.getInstance().play(GameEnum.SoundTableEnum.SE_Lobby_Background),SoundObjectManagerProxy.getInstance().inTransition=!0;break;case GameEvent.SceneEvent.HIDE_TRANSITION_SCENE:this.hideTransitionScene=!0,this.tempData=t,this.nextStep();break;case GameEvent.SceneEvent.FORCE_HIDE_TRANSITION:this._view.visible&&(this.disable(),SoundObjectManagerProxy.getInstance().inTransition=!1,this.sendNotification(GameEvent.SceneEvent.LOAD_LOBBY_SCENE));break;case GameEvent.ProtocolProxyEvent.MODIFY_COMPLETE_CS_QUICK_LOGIN_VALUE:case GameEvent.SceneEvent.SHOW_TRANSITION_SCENE_LOADING:this.enable(),this.sendNotification(LoadGameSceneCommand.NAME,GameEnum.SceneTypeEnum.Transition),this.sendNotification(ShowGameSceneCommand.NAME,GameEnum.SceneTypeEnum.Transition);break;case GameEvent.ProtocolProxyEvent.MODIFY_COMPLETE_CS_ROOM_LOGOUT_VALUE:this.sendNotification(GameEvent.GuideViewMediatorEvent.DISABLE),this.enable(),this.sendNotification(LoadGameSceneCommand.NAME,GameEnum.SceneTypeEnum.Transition),this.sendNotification(ShowGameSceneCommand.NAME,GameEnum.SceneTypeEnum.Transition);break;case GameEvent.ProtocolProxyEvent.MODIFY_COMPLETE_SC_USER_INFO_VALUE:this.delayTimeout>=0&&(egret.clearTimeout(this.delayTimeout),this.delayTimeout=-1,this.sendNotification(CheckReconnectCommand.NAME))}},t.prototype.awake=function(){Logger.log("awake",this),this._view=new egret.DisplayObjectContainer,this._view.name=t.NAME,this.getViewComponent().addChild(this._view),this.sendNotification(RegistTransitionSceneMediatorsCommand.NAME,this._view)},t.prototype.nextStep=function(){var e=this;this._allProxy||(this._allProxy=new RetrieveAllProxy,this._allProxy.retrieveAllProxy()),this.hideTransitionScene&&(this.balanceChanged=this.hideTransitionScene=!1,this.tempData[0]==GameEnum.SceneTypeEnum.Battle?this.delayTimeout=egret.setTimeout(function(){e.delayTimeout=-1,e._allProxy._gameDataProxy.reconnectInScene!=GameEnum.SceneTypeEnum.Transition&&(e.disable(),e.sendNotification(GameEvent.GuideViewMediatorEvent.ENABLE),e.sendNotification(GameEvent.OptionMenuViewMediatorEvent.ENABLE,GameEnum.SceneTypeEnum.Battle)),SoundObjectManagerProxy.getInstance().inTransition=!1,e.sendNotification(CheckReconnectCommand.NAME)},this,1e3):(this.disable(),SoundObjectManagerProxy.getInstance().inTransition=!1,this.tempData[0]==GameEnum.SceneTypeEnum.Lobby&&(this._allProxy._gameDataProxy.reconnectInScene=GameEnum.SceneTypeEnum.Lobby),this._allProxy._gameDataProxy.isUpdateTicketRequest&&this.sendNotification(GSReconnectCommand.NAME)))},t.NAME="TransitionSceneMediator",t}(BaseSceneMediator);__reflect(TransitionSceneMediator.prototype,"TransitionSceneMediator");var TransitionSkinView=function(e){function t(){var t=e.call(this)||this;return t._logScope="[TransitionSkinView]",t._isLog=!1,t.name="TransitionSkinView",t.currentState=Utils.ResourceTool.language,t}return __extends(t,e),t.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),this.awake()},t.prototype.awake=function(){Logger.log("awake",this)},t.prototype.start=function(){Logger.log("start",this)},t.prototype.init=function(){Logger.log("init",this)},t.prototype.reset=function(){Logger.log("reset",this)},t.prototype.enable=function(){Logger.log("enable",this),this.visible=!0,this.msgImage.texture=Utils.ResourceTool.getTextureResByRandomByLanguage(GameName.TextureName.tip,1,11)},t.prototype.disable=function(){Logger.log("disable",this),this.visible=!1},t.prototype.refresh=function(e){Logger.log("refresh",this),this.progressBar.value=e[1],this.progressBar.maximum=e[2],this.progressBar.labelDisplay.visible=!1},t}(eui.Component);__reflect(TransitionSkinView.prototype,"TransitionSkinView",["IView"]);var TransitionViewMediator=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._logScope="[TransitionViewMediator]",t._isLog=!1,t}return __extends(t,e),t.prototype.listNotificationInterests=function(){return[GameEvent.ApplicationFacadeEvent.AWAKE_COMPLETE,GameEvent.ResourceProxyEvent.LOAD_COMPLETE_NON_PRELOAD_GROUP,GameEvent.SceneEvent.LOAD_TRANSITION_SCENE,GameEvent.SceneEvent.UNLOAD_TRANSITION_SCENE,GameEvent.ResourceProxyEvent.LOAD_PROGRESS_NON_PRELOAD_GROUP]},t.prototype.handleNotification=function(e){var t=e.getBody();switch(e.getName()){case GameEvent.ApplicationFacadeEvent.AWAKE_COMPLETE:this.facadeAwakeComplete();break;case GameEvent.ResourceProxyEvent.LOAD_COMPLETE_NON_PRELOAD_GROUP:t==GameEnum.LoadingCollectionTypeEnum.Lobby&&this.resourceComplete();break;case GameEvent.SceneEvent.LOAD_TRANSITION_SCENE:this.init(),this.enable();break;case GameEvent.SceneEvent.UNLOAD_TRANSITION_SCENE:break;case GameEvent.ResourceProxyEvent.LOAD_PROGRESS_NON_PRELOAD_GROUP:var o=e.getBody()[0];o==GameEnum.LoadingCollectionTypeEnum.Battle&&this.refresh(e.getBody())}},t.prototype.nextAwake=function(){this._view=new TransitionSkinView,this.getViewComponent().addChild(this._view),this._view.visible=!1},t.prototype.nextStart=function(){this._view.start()},t.prototype.nextInit=function(){this._view.init()},t.prototype.nextReset=function(){this._view.reset()},t.prototype.nextEnable=function(){this._view.enable()},t.prototype.nextDisable=function(){this._view.disable()},t.prototype.nextRefresh=function(e){Logger.log("refreshObject, "+GameEnum.LoadingCollectionTypeEnum[e[0]]+" "+e[1]+" / "+e[2]+" ",this),this._view.refresh(e)},t.NAME="TransitionViewMediator",t}(BaseViewMediator);__reflect(TransitionViewMediator.prototype,"TransitionViewMediator");var Vector2D=function(){function e(e,t){this.x=e,this.y=t}return e.prototype.getNormalVector=function(){return new e(this.y,-this.x)},e.prototype.getLength=function(){return Math.sqrt(this.x*this.x+this.y*this.y)},e.getDotProduct=function(e,t){return e.x*t.x+e.y*t.y},e.getCos=function(t,o){var i=e.getDotProduct(t,o)/(t.getLength()*o.getLength());return i},e.toVecter2D=function(t){return new e(t.x,t.y)},e.prototype.Normalize=function(){var e=Math.sqrt(this.x*this.x+this.y*this.y);this.x/=e,this.y/=e},e}();__reflect(Vector2D.prototype,"Vector2D");var AssetAdapter=function(){function e(){}return e.prototype.getAsset=function(e,t,o){function i(i){t.call(o,i,e)}if(RES.hasRes(e)){var n=RES.getRes(e);n?i(n):RES.getResAsync(e,i,this)}else RES.getResByUrl(e,i,this,RES.ResourceItem.TYPE_IMAGE)},e}();__reflect(AssetAdapter.prototype,"AssetAdapter",["eui.IAssetAdapter"]);var WaveBillboardFXData=function(){function e(){}return e}();__reflect(WaveBillboardFXData.prototype,"WaveBillboardFXData");var WebBridgeProxy=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._logScope="[WebBridgeProxy]",t._isLog=!1,t}return __extends(t,e),t.prototype.onFacadeAwakeComplete=function(){this.retrieveProxy()},t.prototype.onPreloadResourceComplete=function(){this.start()},t.prototype.onNonPreloadResourceComplete=function(e){},t.prototype.onSCRoomLoginComplete=function(){},t.prototype.onSCRoomLogoutComplete=function(){},t.prototype.awake=function(){this.registerEvent()},t.prototype.start=function(){},t.prototype.init=function(){},t.prototype.reset=function(){},t.prototype.registerEvent=function(){var e=this;window.closeSound=function(t){return e.closeSound(t)},window.isSoundOff=function(){return e.isSoundOff()},window.resetContentSize=function(){return e.onOrientationChange()},window.updatedTicket=function(t){return e.updatedTicket(t)},window.sendCampaignData=function(t){return e.sendCampaignData(t)}},t.prototype.closeSound=function(e){this._allProxy._soundObjectManagerProxy.soundOn=!e},t.prototype.isSoundOff=function(){return!this._allProxy._soundObjectManagerProxy.soundOn},t.prototype.onOrientationChange=function(e){void 0===e&&(e=null);var t=ApplicationFacade.getInstance().getView();t.stage.setContentSize(GameSettingProxy.screenWidth,GameSettingProxy.screenHeight),t.x=t.y=0},t.prototype.getTicketObj=function(){return Logger.log("getTicketObj",this),this.webObj("initTicket")},t.prototype.getUserInfoObj=function(){return Logger.log("getUserInfoObj",this),this.webObj("userInfo")},t.prototype.getServInfoHost=function(){return Logger.log("getServInfoHost",this),this.webObj("servInfo")},t.prototype.getGameDataObj=function(){return Logger.log("getGameDataObj",this),this.webObj("gameData")},t.prototype.notifyGameReady=function(){Logger.log("notifyGameReady",this),this.webFun("notifyGameReady")},t.prototype.showErrorMsgByCode=function(e,t){void 0===t&&(t=0);var o="Network Abnormal",i="",n="Error",a="",r="Format error",s="",l="ID",c="Incorrect ID or Password.",h="",u="",p="\n\n",y="",E="",_="Your account insufficient balance",g="Multiple account login detected.\nPlease login again or\ncontact customer service.",m="Your account has been suspended,please contact customer service.",d="",f="You have been logged out. Please login again or\ncontact customer service.",b="",v="Your account has been suspended, please contact customer service",S="Your account has been locked, please contact customer service.",C="Unable to find account, please contact customer service.",T="",P="Receive account can't be transferred right now. Please contact customer service",M="Your account has been locked,please contact customer service.",w={cn:{gametype:{slot:"",fish:"",baccarat:"",arcade:"",bingo:"",card:""},alert:{caution:"",browser:"SafariChrome"},currency:{US:"",SG:"",HK:"",RM:"",RB:"",JP:"",RP:"",TB:"",AU:"",MM:"",VN:"",KW:"",RS:"",PO:"",XX:"",MX:"",AE:"",EU:""},global:{baflashwarning:" Adobe Flash Player ",bawarning:" APP ",closepage:"",moregame:"",error:"",code:": ","return":"",reload:"",credit:"",line:"",way:"",win:"",bet:"",autoplays:"",numberofspin:"",resume:"",stop:"",quickspin:"",cancel:"",ok:"",totalbet:"",major:"JP ",grand:"JP ",minor:"JP ",turbomode:"",turbomodedescription:"",initialize:"",malfunction:""},errors:{0:i,1:i,2:b,3:i,4:i,5:i,6:i,7:i,8:i,10:b,100:":\n\n\n",101:i,102:"\n\n",103:E,104:d,200:i,201:i,202:i,203:i,204:d,205:E,206:"\n\n",207:i,208:"",209:i,210:i,211:i,212:i,213:i,214:p,215:p,216:"",217:i,218:i,219:"",220:i,301:"",505:"",4001:a,4002:a,4003:a,5100:a,5105:a,5301:a,6001:"",6002:"",6003:s,6004:"",6005:a,6006:"",6007:"",6201:a,6202:a,6203:a,6204:a,7001:a,7002:T,7003:h,7004:u,7102:i,7103:i,7104:i,7105:i,7106:i,7107:i,7108:i,7109:",",7110:i,7111:i,7112:i,7113:i,7401:"",7402:l,7403:"",7404:"",7405:"",7501:l,7502:T,7503:h,7504:u,7505:"",7506:"",7601:"ID a-zA-Z0-9",7602:" ID",7603:"",7604:"611",7605:" 2,3, 4, 5",7701:"",7702:y,7703:y,7704:"",8e3:"",8001:"",8002:s,8003:"",8005:s,8006:s,8007:s,8008:s,8009:s,8010:s,8888:i,9001:"",9002:a,9003:l,9004:a,9005:"",9006:a,9007:a,9008:"",9009:i,9010:i,9011:"",9012:"",9013:"",9014:"",9015:a,9016:"",9999:"",10199:i,2e4:i}},en:{},th:{gametype:{arcade:"",baccarat:"",bingo:"",card:"",fish:"",slot:""},alert:{browser:"  Safari  Chrome",caution:""},global:{autoplays:"",baflashwarning:" Adobe Flash Player ",bawarning:" ",bet:"",cancel:"",closepage:"",code:"",credit:"",error:"",feature:"",grand:"GRAND",initialize:"",line:"",major:"MAJOR",malfunction:"  ",minor:"MINOR",moregame:"",numberofspin:"",ok:"",quickspin:"",reload:"",resume:"","return":"",stop:"",totalbet:"",turbomode:"QUICK SPIN",turbomodedescription:"Would you like to enable QUICK SPIN?",way:"",win:""},errorHandler:{ok:"OK",cancel:"CANCEL","return":"Return",reload:"Reload",error:"ERROR",code:"Code: "},errors:{0:o,1:o,2:_,3:o,4:o,5:o,6:o,7:o,8:o,10:_,100:"Dear Player:\nDue to inactivity this game will\nbe close and automatically\ncalculate the results.",101:o,102:g,103:m,104:M,200:o,201:o,202:o,203:o,204:M,205:m,206:g,207:o,208:"Please put bet",209:o,210:o,211:o,212:o,213:o,214:f,215:f,216:"You have an unsettled transaction. Please try again or \ncontact customer service.",217:o,218:o,219:"System is under maintenance. Please try again or \ncontact customer service.",220:o,221:o,301:"Re-connect",505:"Parameters isn't enough.",4001:n,4002:n,4003:n,5100:n,5105:n,5301:n,6001:"Your (Cash Balance / Coin) not enough to withdraw",6002:"User (balance / coin) is zero",6003:r,6004:"Repeat transfer",6005:n,6006:"Your (Cash Balance / Coin) not enough",6007:"Amount is zero",6201:n,6202:n,6203:n,6204:n,7001:n,7002:v,7003:S,7004:C,7102:o,7103:o,7104:o,7105:o,7106:o,7107:o,7108:o,7109:"Full Seat.",7110:o,7111:o,7112:o,7113:o,7401:"User is not login",7402:c,7403:"The validation code you entered is incorrect!",7404:"Retry too many times, please try again later.",7405:"You have been logged out!",7501:c,7502:v,7503:S,7504:C,7505:"User is not playing",7506:"Demo account is full",7601:"Invalid User ID. Please only use characters between a-z, A-Z, 0-9",7602:"Account already exist. Please choose other User ID",7603:"Invalid username",7604:"The password must at least 6 characters, with 1 alphabet and 1 number",7605:"Format error. Please only use number 2, 3, 4, 5.",7701:"Receive account does not exist.",7702:P,7703:P,7704:"Receive account has to be different",8e3:"Format error. Please check your parameter is correct or not",8001:"Format error. Fields not allowed to be blank",8002:r,8003:"Format error. The parameter cannot be negative",8005:r,8006:r,8007:r,8008:r,8009:r,8010:r,8888:o,9001:"No authorized to access. We are sorry for any inconvenience caused",9002:n,9003:c,9004:n,9005:"Error. Please login again",9006:n,9007:n,9008:"The same value as before",9009:o,9010:o,9011:"Repeated transactions. Please try again later",9012:"Please try again later",9013:"System is maintained. We are sorry for any inconvenience caused",9014:"Multiple account login detected. Please login again or contact customer service",9015:n,9016:"Country is not allowed. We are sorry for any inconvenience caused",9020:"Connection lost due to unstable network, please try again.",9999:"Failed",10199:o,2e4:o},currency:{AU:"",HK:"",JP:"",KW:"",MM:"",PO:"",RB:"",RM:"",RP:"",RS:"",SG:"",TB:"",US:"",VN:"",XX:"",MX:"",AE:"AED",EU:""}}},O=window.userInfo.lang;("en"==O||"th"==O)&&(O="th");var L="th"==O?"errorHandler":"global",A={code:w[O][L].code+e,description:w[O].errors[e],button:w[O][L].ok,title:w[O][L].error};Logger.log("showErrorMsgByCode",this),this.webFun("showErrorMsgByCode",e,A)},t.prototype.gotoGameHall=function(){Logger.log("gotoGameHall",this),this.webFun("gotoGameHall")},t.prototype.gotoReport=function(){Logger.log("gotoReport",this),this.webFun("gotoReport")},t.prototype.enableUIVersion=function(e){Logger.log("enableUIVersion",this),this.webFun("getUIVersion",e)},t.prototype.openFrame=function(e,t){this.webFun("openFrame",e,t)},t.prototype.isShowHome=function(){return Logger.log("isShowHome",this),window.gameData?window.gameData.isShowGoHome:null},t.prototype.isShowReport=function(){return Logger.log("isShowReport",this),window.isShowInfor?window.isShowInfor.isShowPlayerReport:window.gameData?window.gameData.isShowPlayerReport:null},t.prototype.requestTicket=function(){Logger.log("updateTicket",this),this.webFun("updateTicket")},t.prototype.sendCloseAllErrorDialog=function(){Logger.log("sendCloseAllErrorDialog",this),this.webFun("resetWebErrors")},t.prototype.updatedTicket=function(e){if(Logger.log("updatedTicket",this),e){var t=ApplicationFacade.getInstance().retrieveProxy(SmartFoxProxy.NAME);t.initReconnect(Utils.GameTool.generateSFSProxyConfig(e)),GameDataProxy.getInstance().isUpdateTicketRequest=!1,GameDataProxy.getInstance().isReconnectRequest=!0}},t.prototype.sendCampaignData=function(e){var t=e,o=t.data.results[0];"true"==o.campaignAd&&(ApplicationFacade.getInstance().registerMediator(new EventBannerViewMediator(EventBannerViewMediator.NAME,ApplicationFacade.getInstance().getView())),ApplicationFacade.getInstance().sendNotification(GameEvent.GameDataProxyEvent.ON_SET_EVENT_BANNER,o.campaignAdUrl)),"true"==o.campaignBtn&&(ApplicationFacade.getInstance().sendNotification(GameEvent.GameDataProxyEvent.ON_SET_EVENT_BTN),this._allProxy._gameDataProxy.gameAchievementData||(this._allProxy._gameDataProxy.gameAchievementData=new Object),this._allProxy._gameDataProxy.gameAchievementData.btn_url=o.campaignBtnUrl)},t.prototype.webFun=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var o=e.shift();return window[o]?window[o].apply(window,e):(Logger.warn("function:"+o+" is miss!!!",this),null)},t.prototype.webObj=function(e){return window[e]?window[e]:(Logger.warn("Obj:"+e+" is miss!!!",this),null)},t.NAME="WebBridgeProxy",t}(BaseProxy);__reflect(WebBridgeProxy.prototype,"WebBridgeProxy");var WheelOfFortuneMedalsFX=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._logScope="[WheelOfFortuneMedalsFX]",t._isLog=!1,t._winBitmapLabel=new eui.BitmapLabel,t._winScoreBGImage=new eui.Image,t._winBGImage=new eui.Image,t}return __extends(t,e),t.prototype.startObject=function(e){Logger.log("startObject"+this.hashCode,this),this._data,this._winBitmapLabel.font=Utils.ResourceTool.getRes(GameName.FontName.GoldCredit),this._winScoreBGImage.texture=Utils.ResourceTool.getTextureRes(GameName.TextureName.MedalsCaiShenFaFaFaScoreBG),Utils.DisplayObjectTool.setAnchorOffset(this._winScoreBGImage),this._winBGImage.texture=Utils.ResourceTool.getTextureRes(GameName.TextureName.MedalsWheelOfFortuneBG),Utils.DisplayObjectTool.setAnchorOffset(this._winBGImage),this.addChild(this._winBGImage),this.addChild(this._winScoreBGImage),this.addChild(this._winBitmapLabel)},t.prototype.initObject=function(e){Logger.log("initObject "+this.hashCode,this),this._winBitmapLabel&&Utils.DisplayObjectTool.resetDisplayObject(this._winBitmapLabel,!0),this._winScoreBGImage&&Utils.DisplayObjectTool.resetDisplayObject(this._winScoreBGImage,!0),this._winBGImage&&Utils.DisplayObjectTool.resetDisplayObject(this._winBGImage,!0),Utils.DisplayObjectTool.resetDisplayObject(this,!0)},t.prototype.resetObject=function(){Logger.log("resetObject "+this.hashCode,this),this._winBitmapLabel&&Utils.DisplayObjectTool.resetDisplayObject(this._winBitmapLabel,!1),this._winScoreBGImage&&Utils.DisplayObjectTool.resetDisplayObject(this._winScoreBGImage,!1),this._winBGImage&&Utils.DisplayObjectTool.resetDisplayObject(this._winBGImage,!1),Utils.DisplayObjectTool.resetDisplayObject(this,!1)},t.prototype.playObject=function(){Logger.log("playObject "+this.hashCode,this);var e=this._data,t=this._winBitmapLabel,o=this._winScoreBGImage,i=this._winBGImage;this.visible=!0;var n=e.targetObject.localToGlobal(0,0),a=n.x,r=n.y,s=e.reverse?-1:1;t.visible=!0,t.y=15,t.text=String(Utils.TranslateTool.win2CashTenDolla(e.win,e.denom)),Utils.DisplayObjectTool.setAnchorOffset(t),t.scaleX=0,t.scaleY=0,o.visible=!0,Utils.DisplayObjectTool.setAnchorOffset(o),o.y=15,o.scaleX=1,o.scaleY=1,o.alpha=1,i.visible=!0,this.x=a,this.y=r-150*s,this.scaleX=0,this.scaleY=0,this.alpha=1;var l=0;l=e.self?this._tableEntity.waitTimeBySelf:this._tableEntity.waitTimeByOther;var c=Utils.MathTool.randomRange(1e3,3e3);egret.Tween.get(t).wait(320+l/2+150+c).to({scaleX:1.3,scaleY:1.3},260,egret.Ease.quadIn).to({scaleX:1,scaleY:1},60,egret.Ease.quadOut),egret.Tween.get(o).wait(320+l/2+c).to({scaleX:1.3,scaleY:1.3},260,egret.Ease.quadIn).to({scaleX:0,scaleY:0,alpha:0},60,egret.Ease.quadOut),egret.Tween.get(this).to({scaleX:1.3,scaleY:1.3},260,egret.Ease.quadIn).to({scaleX:1,scaleY:1},60,egret.Ease.quadOut).wait(l+c).to({scaleX:1.3,scaleY:1.3,alpha:0},100).wait(1e3).call(this.onComplete,this),(this._tableEntity.isSoundByOther||e.self)&&(MedalsViewObject.soundObject&&SoundObjectManagerProxy.getInstance().stop(MedalsViewObject.soundObject),MedalsViewObject.soundObject=SoundObjectManagerProxy.getInstance().play(this._tableEntity.soundID))},t.prototype.stopObject=function(){Logger.log("stopObject "+this.hashCode,this),this.onComplete()},t.prototype.completeObject=function(){Logger.log("completeObject "+this.hashCode,this),egret.Tween.removeTweens(this)},t.NAME="WheelOfFortuneMedalsFX",t}(BaseFX);__reflect(WheelOfFortuneMedalsFX.prototype,"WheelOfFortuneMedalsFX");var WheelOfFortuneMedalsFXData=function(){function e(e,t,o,i,n,a){this.targetObject=e,this.win=t,this.denom=o,this.fishID=i,this.reverse=n,this.self=a}return e}();__reflect(WheelOfFortuneMedalsFXData.prototype,"WheelOfFortuneMedalsFXData");var whiteList=function(){function e(){}return e.list=["10.20.8.30","10.20.8.31","sqntbw.com"],e}();__reflect(whiteList.prototype,"whiteList");var Entity;!function(e){var t=function(){function e(){}return e}();e.HitResultEntity=t,__reflect(t.prototype,"Entity.HitResultEntity")}(Entity||(Entity={}));var Entity;!function(e){var t=function(){function e(){}return e}();e.ProbabilityResultEntity=t,__reflect(t.prototype,"Entity.ProbabilityResultEntity")}(Entity||(Entity={}));var Entity;!function(e){var t=function(){function e(){}return e}();e.RandomUsedDetailEntity=t,__reflect(t.prototype,"Entity.RandomUsedDetailEntity")}(Entity||(Entity={}));var CodeNumber;!function(e){e[e.connectionFail=0]="connectionFail",e[e.disconnectLost=1]="disconnectLost",e[e.canNotLoginRoomWithNoMoney=2]="canNotLoginRoomWithNoMoney",e[e.insufficientBalance=10]="insufficientBalance",e[e.loginError=200]="loginError",e[e.loginFail=7113]="loginFail",e[e.roomJoinError=7108]="roomJoinError",e[e.fullSeat=7109]="fullSeat",e[e.idleRemind=100]="idleRemind",e[e.netLag=7001]="netLag",e[e.gameLag=7002]="gameLag",e[e.missResult=7003]="missResult",e[e.serverErrorCodeLoginError=7110]="serverErrorCodeLoginError",e[e.serverErrorCodeLogoutError=7111]="serverErrorCodeLogoutError",e[e.serverErrorCodeDisconnectError=7112]="serverErrorCodeDisconnectError",e[e.serverErrorCodeFcInfoIndexError=7102]="serverErrorCodeFcInfoIndexError",e[e.serverErrorCodeFireError=7103]="serverErrorCodeFireError",e[e.serverErrorCodeFireDragonDataError=7104]="serverErrorCodeFireDragonDataError",e[e.serverErrorCodeHitDataError=7105]="serverErrorCodeHitDataError",e[e.serverErrorCodeHitAccountError=7106]="serverErrorCodeHitAccountError",e[e.serverErrorCodeWithdrawError=7107]="serverErrorCodeWithdrawError",e[e.Failed=9999]="Failed"}(CodeNumber||(CodeNumber={}));var KeyEnum;!function(e){e[e.Backspace=8]="Backspace",e[e.Tab=9]="Tab",e[e.Enter=13]="Enter",e[e.Shift=16]="Shift",e[e.Ctrl=17]="Ctrl",e[e.Alt=18]="Alt",e[e.PauseBreak=19]="PauseBreak",e[e.CapsLock=20]="CapsLock",e[e.Escape=27]="Escape",e[e.Space=32]="Space",e[e.PageUp=33]="PageUp",e[e.PageDown=34]="PageDown",e[e.End=35]="End",e[e.Home=36]="Home",e[e.LeftArrow=37]="LeftArrow",e[e.UpArrow=38]="UpArrow",e[e.RightArrow=39]="RightArrow",e[e.DownArrow=40]="DownArrow",e[e.Insert=45]="Insert",e[e.Delete=46]="Delete",e[e.Zero=48]="Zero",e[e.One=49]="One",e[e.Two=50]="Two",e[e.Three=51]="Three",e[e.Four=52]="Four",e[e.Five=53]="Five",e[e.Six=54]="Six",e[e.Seven=55]="Seven",e[e.Eight=56]="Eight",e[e.Nine=57]="Nine",e[e.A=65]="A",e[e.B=66]="B",e[e.C=67]="C",e[e.D=68]="D",e[e.E=69]="E",e[e.F=70]="F",e[e.G=71]="G",e[e.H=72]="H",e[e.I=73]="I",e[e.J=74]="J",e[e.K=75]="K",e[e.L=76]="L",e[e.M=77]="M",e[e.N=78]="N",e[e.O=79]="O",e[e.P=80]="P",e[e.Q=81]="Q",e[e.R=82]="R",e[e.S=83]="S",e[e.T=84]="T",e[e.U=85]="U",e[e.V=86]="V",e[e.W=87]="W",e[e.X=88]="X",e[e.Y=89]="Y",e[e.Z=90]="Z",e[e.LeftWindowKey=91]="LeftWindowKey",e[e.RightWindowKey=92]="RightWindowKey",e[e.SelectKey=93]="SelectKey",e[e.Numpad0=96]="Numpad0",e[e.Numpad1=97]="Numpad1",e[e.Numpad2=98]="Numpad2",e[e.Numpad3=99]="Numpad3",e[e.Numpad4=100]="Numpad4",e[e.Numpad5=101]="Numpad5",e[e.Numpad6=102]="Numpad6",e[e.Numpad7=103]="Numpad7",e[e.Numpad8=104]="Numpad8",e[e.Numpad9=105]="Numpad9",e[e.Multiply=106]="Multiply",e[e.Add=107]="Add",e[e.Subtract=109]="Subtract",e[e.DecimalPoint=110]="DecimalPoint",e[e.Divide=111]="Divide",e[e.F1=112]="F1",e[e.F2=113]="F2",e[e.F3=114]="F3",e[e.F4=115]="F4",e[e.F5=116]="F5",e[e.F6=117]="F6",e[e.F7=118]="F7",e[e.F8=119]="F8",e[e.F9=120]="F9",e[e.F10=121]="F10",e[e.F11=122]="F11",e[e.F12=123]="F12",e[e.NumLock=144]="NumLock",e[e.ScrollLock=145]="ScrollLock",e[e.SemiColon=186]="SemiColon",e[e.Equals=187]="Equals",e[e.Comma=188]="Comma",e[e.Dash=189]="Dash",e[e.Period=190]="Period",e[e.ForwardSlash=191]="ForwardSlash",e[e.Tilde=192]="Tilde",e[e.OpenBracket=219]="OpenBracket",e[e.ClosedBracket=221]="ClosedBracket",e[e.Quote=222]="Quote"}(KeyEnum||(KeyEnum={}));var MessageType;!function(e){e[e.connectionFail=0]="connectionFail",e[e.disconnectLost=1]="disconnectLost",e[e.loginError=2]="loginError",e[e.loginFail=3]="loginFail",e[e.roomJoinError=4]="roomJoinError",e[e.fullSeat=5]="fullSeat",e[e.idleRemind=6]="idleRemind",e[e.accountStatus=7]="accountStatus",e[e.canNotLoginRoomWithNoMoney=9]="canNotLoginRoomWithNoMoney",e[e.insufficientBalance=10]="insufficientBalance",e[e.netLag=100]="netLag",e[e.gameLag=101]="gameLag",e[e.missResult=102]="missResult",e[e.errorCode=103]="errorCode",e[e.gameLoginError=104]="gameLoginError",e[e.failed=105]="failed"}(MessageType||(MessageType={}));var Protocol_App;!function(e){e[e.EV_GS_LOGIN=6]="EV_GS_LOGIN",e[e.EV_GS_LOGOUT=8]="EV_GS_LOGOUT",e[e.EV_GS_FC_INFO=12]="EV_GS_FC_INFO",e[e.EV_GS_GAME_INIT=14]="EV_GS_GAME_INIT",e[e.EV_GS_FIRE=16]="EV_GS_FIRE",e[e.EV_GS_HIT=18]="EV_GS_HIT",e[e.EV_SG_LOBBY_INFO=2]="EV_SG_LOBBY_INFO",e[e.EV_SG_LOGIN=7]="EV_SG_LOGIN",e[e.EV_SG_LOGOUT=9]="EV_SG_LOGOUT",e[e.EV_SG_OTHERS_LOGIN=10]="EV_SG_OTHERS_LOGIN",e[e.EV_SG_OTHERS_LOGOUT=11]="EV_SG_OTHERS_LOGOUT",e[e.EV_SG_FC_INFO=13]="EV_SG_FC_INFO",e[e.EV_SG_SYNC=15]="EV_SG_SYNC",e[e.EV_SG_HIT=19]="EV_SG_HIT",e[e.EV_SG_FIRE=17]="EV_SG_FIRE",e[e.EV_SG_ERROR=0]="EV_SG_ERROR",e[e.EV_SG_USERINFO=3]="EV_SG_USERINFO",e[e.EV_SG_TURN=30]="EV_SG_TURN",e[e.EV_SG_AWARD=100]="EV_SG_AWARD",e[e.changeBalance=21]="changeBalance",e[e.gameLoginReturn=22]="gameLoginReturn",e[e.heartbeat=23]="heartbeat",e[e.maintenanceAnnounce=24]="maintenanceAnnounce",e[e.EV_GS_QUICK_LOGIN=101]="EV_GS_QUICK_LOGIN",e[e.EV_SG_QUICK_LOGIN=102]="EV_SG_QUICK_LOGIN"}(Protocol_App||(Protocol_App={}));var ProtocolType;!function(e){e[e.scLogin=20]="scLogin",e[e.scErrorCode=0]="scErrorCode",e[e.scLobbyJoin=1]="scLobbyJoin",e[e.scLobbyInfo=2]="scLobbyInfo",e[e.scUserInfo=3]="scUserInfo",e[e.scRoomJoin=5]="scRoomJoin",e[e.scRoomLogin=7]="scRoomLogin",e[e.csRoomLogout=8]="csRoomLogout",e[e.scRoomLogout=9]="scRoomLogout",e[e.scPlayerRoomLogin=10]="scPlayerRoomLogin",e[e.scPlayerRoomLogout=11]="scPlayerRoomLogout",e[e.scSync=15]="scSync",e[e.csFire=16]="csFire",e[e.scFire=17]="scFire",e[e.csHit=18]="csHit",e[e.changeBalance=21]="changeBalance",e[e.maintenanceAnnounce=24]="maintenanceAnnounce",e[e.scTurn=30]="scTurn",e[e.award=100]="award",e[e.csQuickLogin=101]="csQuickLogin",e[e.SCQuickLoginError=102]="SCQuickLoginError"}(ProtocolType||(ProtocolType={}));var ServerErrorCode;!function(e){e[e.loginError=0]="loginError",e[e.logoutError=1]="logoutError",e[e.disconnectError=2]="disconnectError",e[e.fcInfoIndexError=3]="fcInfoIndexError",e[e.fireError=4]="fireError",e[e.fireDragonDataError=5]="fireDragonDataError",e[e.hitDataError=6]="hitDataError",e[e.hitAccountError=7]="hitAccountError",e[e.withdrawError=100]="withdrawError"}(ServerErrorCode||(ServerErrorCode={}));var GameEnum;!function(e){var t;!function(e){e[e.None=0]="None",e[e.Idle=1]="Idle",e[e.Move=2]="Move",e[e.Hit=3]="Hit",e[e.Die=4]="Die"}(t=e.BulletStateEnum||(e.BulletStateEnum={}))}(GameEnum||(GameEnum={}));var GameEnum;!function(e){var t;!function(e){e[e.NormalOne=1]="NormalOne",e[e.NormalTwo=2]="NormalTwo",e[e.NormalThree=3]="NormalThree",e[e.AutomaticBazooka=51]="AutomaticBazooka",e[e.MegaDrill=61]="MegaDrill"}(t=e.BulletTableEnum||(e.BulletTableEnum={}))}(GameEnum||(GameEnum={}));var GameEnum;!function(e){var t;!function(e){e[e.NormalBullet=0]="NormalBullet",e[e.DragonBullet_01=1]="DragonBullet_01",e[e.DragonBullet_02=2]="DragonBullet_02",e[e.DragonBullet_03=3]="DragonBullet_03",e[e.DrillBullet=4]="DrillBullet",e[e.Bazooka=5]="Bazooka",e[e.MegaDrill=6]="MegaDrill",e[e.Bullet_08=7]="Bullet_08",e[e.Bullet_09=8]="Bullet_09"}(t=e.BulletTypeTableEnum||(e.BulletTypeTableEnum={}))}(GameEnum||(GameEnum={}));var GameEnum;!function(e){var t;!function(e){e[e.NormalSort=1]="NormalSort",e[e.NormalRandom=2]="NormalRandom",e[e.MegaDrillSort=3]="MegaDrillSort"}(t=e.CoinTableEnum||(e.CoinTableEnum={}))}(GameEnum||(GameEnum={}));var GameEnum;!function(e){var t;!function(e){e[e.PlaySound=0]="PlaySound",e[e.StopAllSound=1]="StopAllSound",e[e.PlayEffect=2]="PlayEffect",e[e.StopAllEffect=3]="StopAllEffect",e[e.PlayScore=4]="PlayScore",e[e.StopAllScore=5]="StopAllScore",e[e.PlayMedals=6]="PlayMedals",e[e.StopAllMedals=7]="StopAllMedals",e[e.PlayCoin=8]="PlayCoin",e[e.StopAllCoin=9]="StopAllCoin",e[e.PlayFort=10]="PlayFort",e[e.PlayFC=11]="PlayFC",e[e.TestFCTable=12]="TestFCTable",e[e.CreateFish=13]="CreateFish",e[e.TestFishTable=14]="TestFishTable",e[e.SpecialEffect=15]="SpecialEffect",e[e.PrintBet=16]="PrintBet",e[e.TestBetTable=17]="TestBetTable",e[e.LockFPSSpeedOffset=18]="LockFPSSpeedOffset",e[e.PlayCredit=19]="PlayCredit"}(t=e.ControlPanelTypeEnum||(e.ControlPanelTypeEnum={}))}(GameEnum||(GameEnum={}));var GameEnum;!function(e){var t;!function(e){e[e.Goldfinger=0]="Goldfinger",e[e.ControlPanel=1]="ControlPanel",e[e.LogMonitor=2]="LogMonitor",e[e.GroupList=3]="GroupList"}(t=e.DebuggerViewTypeEnum||(e.DebuggerViewTypeEnum={}))}(GameEnum||(GameEnum={}));var GameEnum;!function(e){var t;!function(e){e[e.SS_Fire_Bubble=1]="SS_Fire_Bubble",e[e.SS_Coin_02=2]="SS_Coin_02",e[e.SS_Gun3_02=3]="SS_Gun3_02",e[e.SS_Gun3_03=4]="SS_Gun3_03",e[e.SS_Gun3_06=5]="SS_Gun3_06",e[e.SS_Gun3_01=6]="SS_Gun3_01",e[e.SS_Gun3_04=7]="SS_Gun3_04",e[e.SS_Credit_Coin=8]="SS_Credit_Coin",e[e.SS_BTN_OnParticle=9]="SS_BTN_OnParticle",e[e.SS_Hit2=10]="SS_Hit2",e[e.SS_Symbol_Freeze=11]="SS_Symbol_Freeze",e[e.Move=100]="Move",e[e.Scale=200]="Scale",e[e.BigFishDieEffect=102202]="BigFishDieEffect"}(t=e.EffectTableEnum||(e.EffectTableEnum={}))}(GameEnum||(GameEnum={}));var GameEnum;!function(e){var t;!function(e){e[e.None=0]="None",e[e.Idle=1]="Idle",e[e.Move=2]="Move",e[e.Hit=3]="Hit",e[e.Die=4]="Die",e[e.StoneBegin=5]="StoneBegin",e[e.StoneMove=6]="StoneMove",e[e.StoneEnd=7]="StoneEnd"}(t=e.FishStateEnum||(e.FishStateEnum={}))}(GameEnum||(GameEnum={}));var GameEnum;!function(e){var t;!function(e){e[e.B_0=0]="B_0",e[e.B_1=1]="B_1",e[e.B_2=2]="B_2",e[e.B_3=3]="B_3",e[e.B_4=4]="B_4",e[e.B_5=5]="B_5",e[e.B_6=6]="B_6",e[e.B_7=7]="B_7",e[e.B_8=8]="B_8",e[e.B_9=9]="B_9",e[e.B_10=10]="B_10",e[e.B_11=11]="B_11",e[e.B_12=12]="B_12",e[e.B_13=13]="B_13",e[e.B_14=14]="B_14",e[e.B_15=15]="B_15",e[e.B_16=16]="B_16",e[e.B_17=17]="B_17",e[e.B_18=18]="B_18",e[e.B_19=19]="B_19",e[e.G_100=100]="G_100",e[e.G_101=101]="G_101",e[e.G_102=102]="G_102",e[e.G_103=103]="G_103",e[e.S_200=200]="S_200",e[e.S_201=201]="S_201"
}(t=e.FishTableEnum||(e.FishTableEnum={}))}(GameEnum||(GameEnum={}));var GameEnum;!function(e){var t;!function(e){e[e.Normal=0]="Normal",e[e.AutomaticBazooka=5]="AutomaticBazooka",e[e.MegaDrill=6]="MegaDrill"}(t=e.FortTableEnum||(e.FortTableEnum={}))}(GameEnum||(GameEnum={}));var GameEnum;!function(e){var t;!function(e){e[e.Lobby=0]="Lobby",e[e.Battle=1]="Battle",e[e.Total=2]="Total"}(t=e.LoadingCollectionTypeEnum||(e.LoadingCollectionTypeEnum={}))}(GameEnum||(GameEnum={}));var GameEnum;!function(e){var t;!function(e){e[e.Auto=0]="Auto",e[e.Total=1]="Total"}(t=e.LobbyTypeEnum||(e.LobbyTypeEnum={}))}(GameEnum||(GameEnum={}));var GameEnum;!function(e){var t;!function(e){e[e.Count=0]="Count",e[e.MN_000=1]="MN_000",e[e.MN_001=2]="MN_001",e[e.MN_002=3]="MN_002",e[e.MN_004=4]="MN_004",e[e.MN_005=5]="MN_005",e[e.MN_006=6]="MN_006",e[e.MN_007=7]="MN_007",e[e.MN_008=8]="MN_008",e[e.MN_009=9]="MN_009"}(t=e.MechanismTypeEnum||(e.MechanismTypeEnum={}))}(GameEnum||(GameEnum={}));var GameEnum;!function(e){var t;!function(e){e[e.Normal=1]="Normal",e[e.CaiShenFaFaFa=2]="CaiShenFaFaFa",e[e.WheelOfFortune=3]="WheelOfFortune"}(t=e.MedalsTableEnum||(e.MedalsTableEnum={}))}(GameEnum||(GameEnum={}));var GameEnum;!function(e){var t;!function(e){e[e.SS_Fire_Bubble=1]="SS_Fire_Bubble",e[e.SS_Coin_02=2]="SS_Coin_02",e[e.SS_Gun3_02=3]="SS_Gun3_02",e[e.SS_Gun3_03=4]="SS_Gun3_03",e[e.SS_Gun3_06=5]="SS_Gun3_06",e[e.SS_Gun3_01=6]="SS_Gun3_01",e[e.SS_Gun3_04=7]="SS_Gun3_04",e[e.SS_Credit_Coin=8]="SS_Credit_Coin",e[e.SS_BTN_OnParticle=9]="SS_BTN_OnParticle",e[e.SS_Hit2=10]="SS_Hit2",e[e.SS_Symbol_Freeze=11]="SS_Symbol_Freeze"}(t=e.MovieClipFXTableEnum||(e.MovieClipFXTableEnum={}))}(GameEnum||(GameEnum={}));var GameEnum;!function(e){var t;!function(e){e[e.Home=0]="Home",e[e.Report=1]="Report",e[e.Sound=2]="Sound",e[e.Help=3]="Help"}(t=e.OptionTypeEnum||(e.OptionTypeEnum={}))}(GameEnum||(GameEnum={}));var GameEnum;!function(e){var t;!function(e){e[e.Bubble=1]="Bubble",e[e.Light=2]="Light"}(t=e.ParticleFXTableEnum||(e.ParticleFXTableEnum={}))}(GameEnum||(GameEnum={}));var GameEnum;!function(e){var t;!function(e){e[e.MoveUp=0]="MoveUp",e[e.Wait=1]="Wait",e[e.MoveDown=2]="MoveDown",e[e.End=3]="End"}(t=e.PopStateEnum||(e.PopStateEnum={}))}(GameEnum||(GameEnum={}));var GameEnum;!function(e){var t;!function(e){e[e.Loading=0]="Loading",e[e.Lobby=1]="Lobby",e[e.Transition=2]="Transition",e[e.Battle=3]="Battle"}(t=e.SceneTypeEnum||(e.SceneTypeEnum={}))}(GameEnum||(GameEnum={}));var GameEnum;!function(e){var t;!function(e){e[e.Normal=1]="Normal"}(t=e.ScoreTableEnum||(e.ScoreTableEnum={}))}(GameEnum||(GameEnum={}));var GameEnum;!function(e){var t;!function(e){e[e.WaveShader=1]="WaveShader"}(t=e.ShaderFXTableEnum||(e.ShaderFXTableEnum={}))}(GameEnum||(GameEnum={}));var GameEnum;!function(e){var t;!function(e){e[e.Move=1]="Move",e[e.Scale=2]="Scale"}(t=e.ShakeFXTableEnum||(e.ShakeFXTableEnum={}))}(GameEnum||(GameEnum={}));var GameEnum;!function(e){var t;!function(e){e[e.SE_Lobby_Background=1]="SE_Lobby_Background",e[e.SE_ButtonPress_01=201]="SE_ButtonPress_01",e[e.SE_ButtonPress_02=202]="SE_ButtonPress_02",e[e.SE_MenuPress_01=203]="SE_MenuPress_01",e[e.SE_MenuPress_02=204]="SE_MenuPress_02",e[e.SE_Game_Background_01=1001]="SE_Game_Background_01",e[e.SE_Game_Background_02=1002]="SE_Game_Background_02",e[e.SE_Game_Background_03=1003]="SE_Game_Background_03",e[e.SE_Game_Bet_01=1201]="SE_Game_Bet_01",e[e.SE_Game_Bet_02=1202]="SE_Game_Bet_02",e[e.SE_Game_AutoFire_01=1203]="SE_Game_AutoFire_01",e[e.SE_Game_AutoFire_02=1204]="SE_Game_AutoFire_02",e[e.SE_Game_Coin1=1401]="SE_Game_Coin1",e[e.SE_Game_Coin2=1402]="SE_Game_Coin2",e[e.SE_Game_Coin3=1403]="SE_Game_Coin3",e[e.SE_Game_CoinGet=1404]="SE_Game_CoinGet",e[e.SE_Game_Transition=1901]="SE_Game_Transition",e[e.SE_Game_Roulette=1902]="SE_Game_Roulette",e[e.SE_LD_Background=3001]="SE_LD_Background",e[e.SE_LD_Hit=3901]="SE_LD_Hit",e[e.SE_LD_End=3902]="SE_LD_End",e[e.SE_LD_Click=3903]="SE_LD_Click",e[e.SE_Game_Background_04=4001]="SE_Game_Background_04",e[e.SE_Game_LuckyRoll_Hit=5901]="SE_Game_LuckyRoll_Hit",e[e.SE_Game_LuckyRoll_03=5902]="SE_Game_LuckyRoll_03",e[e.SE_Game_LuckyRoll_04=5903]="SE_Game_LuckyRoll_04",e[e.SE_Game_LuckyRoll_End=5904]="SE_Game_LuckyRoll_End",e[e.SE_Game_LuckyRoll_02=5905]="SE_Game_LuckyRoll_02",e[e.SE_Game_LuckyRoll_01=5906]="SE_Game_LuckyRoll_01",e[e.SE_Game_LuckyRoll_Background=5907]="SE_Game_LuckyRoll_Background",e[e.SE_Game_GunChange1=10301]="SE_Game_GunChange1",e[e.SE_Game_Fire1=10303]="SE_Game_Fire1",e[e.SE_Game_GunChange3_01=15301]="SE_Game_GunChange3_01",e[e.SE_Game_GunChange3_02=15302]="SE_Game_GunChange3_02",e[e.SE_Game_Fire2=15303]="SE_Game_Fire2",e[e.SE_Game_GunChange2_01=16301]="SE_Game_GunChange2_01",e[e.SE_Game_GunChange2_02=16302]="SE_Game_GunChange2_02",e[e.SE_Game_Fire3_01=16312]="SE_Game_Fire3_01",e[e.SE_Game_Fire3_03=16313]="SE_Game_Fire3_03",e[e.SE_Game_Fire3_02=16314]="SE_Game_Fire3_02",e[e.SE_Narration_LuckyRoll_cn=21994861]="SE_Narration_LuckyRoll_cn",e[e.SE_Narration_CaiShenFaFaFa_01_cn=21993871]="SE_Narration_CaiShenFaFaFa_01_cn",e[e.SE_Narration_LowSymbol_M_01=41990811]="SE_Narration_LowSymbol_M_01",e[e.SE_Narration_LowSymbol_M_02=41990812]="SE_Narration_LowSymbol_M_02",e[e.SE_Narration_LowSymbol_M_03=41990813]="SE_Narration_LowSymbol_M_03",e[e.SE_Narration_LowSymbol_M_04=41990814]="SE_Narration_LowSymbol_M_04",e[e.SE_Narration_LowSymbol_F_01=42990811]="SE_Narration_LowSymbol_F_01",e[e.SE_Narration_LowSymbol_F_02=42990812]="SE_Narration_LowSymbol_F_02",e[e.SE_Narration_LowSymbol_F_03=42990813]="SE_Narration_LowSymbol_F_03",e[e.SE_Narration_LowSymbol_F_04=42990814]="SE_Narration_LowSymbol_F_04",e[e.SE_Narration_LowSymbol_F_05=42990815]="SE_Narration_LowSymbol_F_05",e[e.SE_Narration_MediumSymbol_M_02_cn=21990821]="SE_Narration_MediumSymbol_M_02_cn",e[e.SE_Narration_MediumSymbol_M_05_cn=21990822]="SE_Narration_MediumSymbol_M_05_cn",e[e.SE_Narration_MediumSymbol_M_07_cn=21990823]="SE_Narration_MediumSymbol_M_07_cn",e[e.SE_Narration_MediumSymbol_M_08_cn=21990824]="SE_Narration_MediumSymbol_M_08_cn",e[e.SE_Narration_MediumSymbol_F_05_cn=22990821]="SE_Narration_MediumSymbol_F_05_cn",e[e.SE_Narration_MediumSymbol_F_06_cn=22990822]="SE_Narration_MediumSymbol_F_06_cn",e[e.SE_Narration_MediumSymbol_F_11_cn=22990823]="SE_Narration_MediumSymbol_F_11_cn",e[e.SE_Narration_MediumSymbol_F_12_cn=22990824]="SE_Narration_MediumSymbol_F_12_cn",e[e.SE_Narration_MediumSymbol_F_13_cn=22990825]="SE_Narration_MediumSymbol_F_13_cn",e[e.SE_Narration_MediumSymbol_F_15_cn=22990826]="SE_Narration_MediumSymbol_F_15_cn",e[e.SE_Narration_MediumSymbol_M_01_en=31990821]="SE_Narration_MediumSymbol_M_01_en",e[e.SE_Narration_MediumSymbol_M_03_en=31990822]="SE_Narration_MediumSymbol_M_03_en",e[e.SE_Narration_MediumSymbol_M_06_en=31990823]="SE_Narration_MediumSymbol_M_06_en",e[e.SE_Narration_MediumSymbol_F_08_en=32990821]="SE_Narration_MediumSymbol_F_08_en",e[e.SE_Narration_MediumSymbol_F_09_en=32990822]="SE_Narration_MediumSymbol_F_09_en",e[e.SE_Narration_MediumSymbol_F_10_en=32990823]="SE_Narration_MediumSymbol_F_10_en",e[e.SE_Narration_MediumSymbol_F_11_en=32990824]="SE_Narration_MediumSymbol_F_11_en",e[e.SE_Narration_MediumSymbol_F_12_en=32990825]="SE_Narration_MediumSymbol_F_12_en",e[e.SE_Narration_MediumSymbol_F_13_en=32990826]="SE_Narration_MediumSymbol_F_13_en",e[e.SE_Narration_MediumSymbol_F_14_en=32990827]="SE_Narration_MediumSymbol_F_14_en",e[e.SE_Narration_HighSymbol_01_cn=21990831]="SE_Narration_HighSymbol_01_cn",e[e.SE_Narration_MediumSymbol_M_03_cn=21990832]="SE_Narration_MediumSymbol_M_03_cn",e[e.SE_Narration_MediumSymbol_F_14_cn=22990831]="SE_Narration_MediumSymbol_F_14_cn",e[e.SE_Narration_CaiShen_01_en=31990831]="SE_Narration_CaiShen_01_en",e[e.SE_Narration_HighSymbol_01_en=31990832]="SE_Narration_HighSymbol_01_en",e[e.SE_Narration_CaiShen_01_cn=21994881]="SE_Narration_CaiShen_01_cn",e[e.SE_Narration_CaiShen_02_cn=21994882]="SE_Narration_CaiShen_02_cn",e[e.SE_Narration_CaiShen_03_cn=21994883]="SE_Narration_CaiShen_03_cn",e[e.SE_Narration_CaiShen_04_cn=21994884]="SE_Narration_CaiShen_04_cn",e[e.SE_Narration_CaiShen_05_cn=21994885]="SE_Narration_CaiShen_05_cn",e[e.SE_Narration_CaiShen_06_cn=21994886]="SE_Narration_CaiShen_06_cn",e[e.SE_Narration_CaiShen_02_en=31994881]="SE_Narration_CaiShen_02_en",e[e.SE_Narration_CaiShen_03_en=31994882]="SE_Narration_CaiShen_03_en",e[e.SE_Narration_CaiShen_04_en=31994883]="SE_Narration_CaiShen_04_en",e[e.SE_Narration_CaiShen_05_en=31994884]="SE_Narration_CaiShen_05_en"}(t=e.SoundTableEnum||(e.SoundTableEnum={}))}(GameEnum||(GameEnum={}));var GameEnum;!function(e){var t;!function(e){e[e.BGM=1]="BGM",e[e.SE=2]="SE"}(t=e.SoundTypeEnum||(e.SoundTypeEnum={}))}(GameEnum||(GameEnum={}));var GameEnum;!function(e){var t;!function(e){e[e.Speak8xTo15x=1]="Speak8xTo15x",e[e.Speak16xTo50x=2]="Speak16xTo50x",e[e.Speak51xTo150x=3]="Speak51xTo150x",e[e.SpeakCaiShen=8]="SpeakCaiShen"}(t=e.SpeakSoundGroupTableEnum||(e.SpeakSoundGroupTableEnum={}))}(GameEnum||(GameEnum={}));var GameEnum;!function(e){var t;!function(e){e[e.WaveBillboard=1]="WaveBillboard",e[e.CaiShenBillboard=2]="CaiShenBillboard"}(t=e.SpecialEffectTableEnum||(e.SpecialEffectTableEnum={}))}(GameEnum||(GameEnum={}));var GameEnum;!function(e){var t;!function(e){e[e.NORMAL=0]="NORMAL",e[e.SF_01=1]="SF_01",e[e.SF_02=2]="SF_02",e[e.SF_03=3]="SF_03",e[e.SF_05=4]="SF_05"}(t=e.SpecialFeatureTypeEnum||(e.SpecialFeatureTypeEnum={}))}(GameEnum||(GameEnum={}));var GameEnum;!function(e){var t;!function(e){e[e.Low=0]="Low",e[e.Middle=1]="Middle",e[e.High=2]="High"}(t=e.ZoneTypeEnum||(e.ZoneTypeEnum={}))}(GameEnum||(GameEnum={}));var Fix;!function(e){var t=function(){function e(){}return e}();e.SFSEvent=t,__reflect(t.prototype,"Fix.SFSEvent")}(Fix||(Fix={}));var Fix;!function(e){var t=function(){function e(e){this.params=e}return e.prototype.getBool=function(e){return this.params[e]},e.prototype.getByte=function(e){return this.params[e]},e.prototype.getShort=function(e){return this.params[e]},e.prototype.getInt=function(e){return this.params[e]},e.prototype.getLong=function(e){return this.params[e]},e.prototype.getFloat=function(e){return this.params[e]},e.prototype.getDouble=function(e){return this.params[e]},e.prototype.getUtfString=function(e){return this.params[e]},e.prototype.getText=function(e){return this.params[e]},e.prototype.getBoolArray=function(e){return this.params[e]},e.prototype.getByteArray=function(e){return this.params[e]},e.prototype.getShortArray=function(e){return this.params[e]},e.prototype.getIntArray=function(e){return this.params[e]},e.prototype.getLongArray=function(e){return this.params[e]},e.prototype.getFloatArray=function(e){return this.params[e]},e.prototype.getDoubleArray=function(e){return this.params[e]},e.prototype.getUtfStringArray=function(e){return this.params[e]},e.prototype.getSFSObject=function(e){return this.params[e]},e.prototype.getSFSArray=function(e){return this.params[e]},e}();e.SFSObject=t,__reflect(t.prototype,"Fix.SFSObject")}(Fix||(Fix={}));var Fix;!function(e){var t;!function(e){e[e.validate=5006]="validate",e[e.roomid=5001]="roomid",e[e.version=9999]="version",e[e.lobby_login=1e4]="lobby_login",e[e.lobby_guest=10001]="lobby_guest",e[e.lobby_account=10002]="lobby_account",e[e.lobby_rooms=10008]="lobby_rooms",e[e.lobby_ping=10127]="lobby_ping",e[e.lobby_pong=10128]="lobby_pong",e[e.game_login=20100]="game_login",e[e.game_ping=20189]="game_ping",e[e.game_pong=20190]="game_pong",e[e.game_quit=29203]="game_quit",e[e.game_sit=20103]="game_sit",e[e.game_login_success=20105]="game_login_success",e[e.game_update_into_money=20106]="game_update_into_money",e[e.game_login_error=20149]="game_login_error",e[e.game_enter=29200]="game_enter",e[e.game_come=29201]="game_come",e[e.game_leave=29202]="game_leave",e[e.game_extra_info=20181]="game_extra_info",e[e.game_fire_send=29204]="game_fire_send",e[e.game_hit_send=29205]="game_hit_send",e[e.game_turn=29206]="game_turn",e[e.game_fire=29207]="game_fire",e[e.game_sync=29208]="game_sync",e[e.game_award=29209]="game_award",e[e.lobby_award=10072]="lobby_award"}(t=e.SmartEnum||(e.SmartEnum={}))}(Fix||(Fix={}));var Fix;!function(e){var t=function(t){function o(e){var i=t.call(this)||this;return i.tssss=0,i.roomId=-1,o.instance=i,i._protocolProxy=ApplicationFacade.getInstance().retrieveProxy(ProtocolProxy.NAME),i._configData=e,i}return __extends(o,t),o.getInstance=function(){return null==this.instance&&(this.instance=new o),this.instance},o.prototype.setConfigData=function(e){this._configData=e},o.prototype.connect=function(t){void 0===t&&(t=!1),t?(this._game||(this._game=new e.SmartGame(this._configData)),this._game.connect()):(this._lobby||(this._lobby=new e.SmartLobby(this._configData)),this._lobby.connect())},o.prototype._onSocketData=function(e){},o.prototype._onSocketError=function(e){},o.prototype.disconnect=function(){},o.prototype.send=function(e,t){void 0===t&&(t=!1),t?this._game.send(e):this._lobby.send(e)},o.prototype.enableLagMonitor=function(e){},o.prototype.getRoomListFromGroup=function(e){return this.roomList},o.prototype.toRoom=function(e){this.roomId=e,e>-1&&this.connect(!0)},Object.defineProperty(o.prototype,"room",{get:function(){return this.roomId<0?{id:0,name:"",groupId:"cspy"}:this.roomList[this.roomId]},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"selecetRoom",{get:function(){var e=this._protocolProxy.scUserInfo.iRoomCount-1,t=e-this.roomId;return{iDenom:this._protocolProxy.scUserInfo.iDenom[t],iMaxBet:this._protocolProxy.scUserInfo.iMaxBet[t],iMinBet:this._protocolProxy.scUserInfo.iMinBet[t],iRoomType:this._protocolProxy.scUserInfo.iRoomType[t]}},enumerable:!0,configurable:!0}),o.prototype.checkSelfPlayerID=function(e){return this._protocolProxy.checkSelfPlayerID(e)},o}(egret.EventDispatcher);e.SmartFox=t,__reflect(t.prototype,"Fix.SmartFox")}(Fix||(Fix={}));var Fix;!function(e){var t=function(t){function o(){var e=null!==t&&t.apply(this,arguments)||this;return e._logScope="[SmartFoxProxy]",e._isLog=!1,e._keepAliveDelay=1e4,e}return __extends(o,t),o.prototype.onFacadeAwakeComplete=function(){this.retrieveProxy()},o.prototype.onPreloadResourceComplete=function(){},o.prototype.onNonPreloadResourceComplete=function(e){},o.prototype.onSCRoomLoginComplete=function(){this.sendNotification(GameEvent.SceneEvent.LOAD_BATTLE_SCENE)},o.prototype.onSCRoomLogoutComplete=function(){},o.prototype.awake=function(){},o.prototype.start=function(t){var o=window.params,i=(o.token,window.sysInfo.websocket);console.log(i),t.urls=i,Logger.log("start",this),this._sfsConfig=t,this._sfs?this._sfs.setConfigData(this._sfsConfig):(this._sfs=new e.SmartFox(this._sfsConfig),this.addEvents())},o.prototype.init=function(){},o.prototype.reset=function(){},o.prototype.addEvents=function(){Logger.log("addEvents",this),this._sfs.addEventListener(SFS2X.SFSEvent.CONNECTION,this.onConnection,this),this._sfs.addEventListener(SFS2X.SFSEvent.CONNECTION_LOST,this.onConnectionLost,this),this._sfs.addEventListener(SFS2X.SFSEvent.LOGIN,this.onLogin,this),this._sfs.addEventListener(SFS2X.SFSEvent.LOGIN_ERROR,this.onLoginError,this),this._sfs.addEventListener(SFS2X.SFSEvent.EXTENSION_RESPONSE,this.onExtensionResponse,this),this._sfs.addEventListener(SFS2X.SFSEvent.ROOM_JOIN,this.onLobbyORRoomJoin,this),this._sfs.addEventListener(SFS2X.SFSEvent.ROOM_JOIN_ERROR,this.onRoomJoinError,this),this._sfs.addEventListener(SFS2X.SFSEvent.PUBLIC_MESSAGE,this.onPublicMessage,this),this._sfs.addEventListener(SFS2X.SFSEvent.PING_PONG,this.onPingPong,this)},o.prototype.removeEvents=function(){Logger.log("removeEvents",this),this._sfs.removeEventListener(SFS2X.SFSEvent.CONNECTION,this.onConnection,this),this._sfs.removeEventListener(SFS2X.SFSEvent.CONNECTION_LOST,this.onConnectionLost,this),this._sfs.removeEventListener(SFS2X.SFSEvent.LOGIN_ERROR,this.onLoginError,this),this._sfs.removeEventListener(SFS2X.SFSEvent.EXTENSION_RESPONSE,this.onExtensionResponse,this),this._sfs.removeEventListener(SFS2X.SFSEvent.LOGIN,this.onLogin,this),this._sfs.removeEventListener(SFS2X.SFSEvent.ROOM_JOIN,this.onLobbyORRoomJoin,this),this._sfs.removeEventListener(SFS2X.SFSEvent.ROOM_JOIN_ERROR,this.onRoomJoinError,this),this._sfs.removeEventListener(SFS2X.SFSEvent.PUBLIC_MESSAGE,this.onPublicMessage,this),this._sfs.removeEventListener(SFS2X.SFSEvent.PING_PONG,this.onPingPong,this)},o.prototype.connect=function(e){Logger.log("connect",this),this._sfs.connect(e),console.log("[INFO] SmartFox connect")},o.prototype.disconnect=function(){Logger.log("disconnect",this),this._sfs.disconnect(),console.log("[INFO] SmartFox disconnect")},o.prototype.initReconnect=function(e){Logger.log("initReconnect",this),this.sfsConfig=e,this.disconnect()},o.prototype.login=function(){var t=new egret.ByteArray,o=window.params,i=o.token;if("guest"==i){var n=parseInt(egret.localStorage.getItem("csby_guestid"))||0,a=new guest_loginCS;a.uid=n,a.agent_id=0,a.device_id="",t.writeUnsignedShort(e.SmartEnum.lobby_guest),t.writeBytes(a.encode())}else{var r=new account_loginCS;r.username=o.username||"",r.password=o.password||"",r.captcha="",r.proving="",r.machineCode="",r.client_type=0,r.is_encoded=1,r.token=o.token||"",t.writeUnsignedShort(e.SmartEnum.lobby_login),t.writeBytes(r.encode())}Logger.log("login",this),this._sfs.send(t)},o.prototype.gameLogin=function(){if(Logger.log("gameLogin",this),window.isIframe){this._sfs.mySelf={},null==window.sysInfo.account&&(window.sysInfo.account={bag_money:0,currency:"",username:"",password:"",linecode:"",all_npc:0,userid:0,nickname:""}),this._sfs.mySelf.agent_id=window.sysInfo.account.agent_id,this._sfs.mySelf.main_agent_id=window.sysInfo.account.main_agent_id,this._sfs.mySelf.bag_money=1e3*window.sysInfo.account.bag_money,this._sfs.mySelf.currency=window.sysInfo.account.currency,this._sfs.mySelf.username=window.sysInfo.account.username,this._sfs.mySelf.password=window.sysInfo.account.password,this._sfs.mySelf.linecode=window.sysInfo.account.linecode,this._sfs.mySelf.all_npc=window.sysInfo.account.all_npc,this._sfs.mySelf.userid=window.sysInfo.account.userid,this._sfs.mySelf.id=window.sysInfo.account.userid,this._sfs.mySelf.name=window.sysInfo.account.nickname,this._sfs.mySelf.fixseat=!0,this.sendNotification(ParserProtocolCommand.NAME,[ProtocolType.scLogin,this._sfs.mySelf]),this._sfs.roomList=[];for(var t={iDenom:[1,1,1],iMaxBet:[],iMinBet:[],iRoomCount:0,iRoomName:null,iRoomType:[],llCent:this._sfs.mySelf.bag_money,showName:this._sfs.mySelf.name},o=window.sysInfo.rooms||[],i=0;i<o.length;i++){var n=o[i];n.is_active||o.splice(i,1)}t.iRoomCount=o.length>3?3:o.length;for(var i=0;i<t.iRoomCount;i++){var n=o[i];t.iMinBet.unshift(1e3*n.init_money),t.iMaxBet.unshift(1e3*n.top_money),t.iRoomType.unshift(i),this._sfs.roomList.push({capacity:4,groupId:"cspy",id:n.room_id,isGame:!0,isHidden:!1,isJoined:!1,isPasswordProtected:!1,maxSpectators:0,maxUsers:4,name:n.title,spectatorCount:0,userCount:n.online_num})}this._sfs.dispatchEvent(new egret.Event(SFS2X.SFSEvent.ROOM_JOIN,!1,!0,{room:this._sfs.room})),this._sfs.dispatchEvent(new egret.Event(SFS2X.SFSEvent.PUBLIC_MESSAGE,!1,!0,{message:"EV_SG_USERINFO",data:new e.SFSObject(t)})),this._sfs.dispatchEvent(new egret.Event(SFS2X.SFSEvent.PUBLIC_MESSAGE,!1,!0,{message:"EV_SG_LOBBY_INFO",data:new e.SFSObject({iLobbyRoomInfo:[],iRoomCount:t.iRoomCount})}))}else{if(null==this._sfs.mySelf)return;if(null==this._room||""==this._room.name){var a=new egret.ByteArray,r=new QueryRoomVo;r.rt=-1,r.gt=2025,r.maxv=39999,r.agentid=0,r.minv=0,r.currency=this._sfs.mySelf.currency,r.new_agent_id=this._sfs.mySelf.agent_id,r.new_main_agent_id=this._sfs.mySelf.main_agent_id,a.writeUnsignedShort(e.SmartEnum.lobby_rooms),a.writeBytes(r.encode()),this._sfs.send(a)}}},o.prototype.sendExtensionRequest=function(t,o){var i=new egret.ByteArray,n=ProtocolType[t],a=Protocol_App[n];switch(n){case Protocol_App.EV_GS_LOGOUT:i.writeUnsignedShort(e.SmartEnum.game_quit),this._sfs.send(i,!0);break;case Protocol_App.EV_GS_FIRE:var r=new pk_C2S_JdbcsbyCsFire;r.iPlayerID=o.iPlayerID,r.iBet=o.iBet,r.iRotation=o.iRotation,r.iBulletType=o.iBulletType,r.iBulletID=o.iBulletID,r.iTargetSN=o.iTargetSN,i.writeUnsignedShort(e.SmartEnum.game_fire_send),i.writeBytes(r.encode()),this._sfs.send(i,!0);break;case Protocol_App.EV_GS_HIT:var s=new pk_C2S_JdbcsbyCsHit;s.iPlayerID=o.iPlayerID,s.iBulletID=o.iBulletID,s.iTargetID=o.iTargetID,s.iTargetSN=o.iTargetSN,s.iBulletType=o.iBulletType,s.iBet=o.iBet,s.sBulletInfo=o.sBulletInfo,i.writeUnsignedShort(e.SmartEnum.game_hit_send),i.writeBytes(s.encode()),this._sfs.send(i,!0);break;case Protocol_App.EV_GS_QUICK_LOGIN:this._sfs.toRoom(o.iRoomType)}Logger.log("sendExtensionRequest cmd: "+t+" => "+a+", room:"+this._room+"}",this)},o.prototype.sendPublicMessageRequest=function(e,t){var o=ProtocolType[e],i=Protocol_App[o];Logger.log("sendPublicMessageRequest cmd: "+e+" => "+i+", room:"+this._room+"}",this),this._sfs.send(new SFS2X.PublicMessageRequest(i,t,this._room))},o.prototype.log=function(e){var t="";for(var o in e)e.hasOwnProperty(o)&&(t+=", "+o+":"+e[o]);return t},o.prototype.sendJoinRoomRequest=function(e){e=e.data,Logger.log("sendJoinRoomRequest roomID:"+e,this),this._sfs.send(new SFS2X.JoinRoomRequest(e))},o.prototype.onConnection=function(e){e=e.data,e.success?(Logger.log("onConnection",this),GameDataProxy.getInstance().isReconnectRequest=!1,this.connectionSuccessCallback()):(Logger.log("onConnection Fail",this),this.sendNotification(ParserMessageCommand.NAME,new ParserMessageData(MessageType.connectionFail)))},o.prototype.onConnectionLost=function(e){e=e.data;e.isGame,e.isReconnectRequest;console.log("[INFO] SmartFox onConnectionLost"),Logger.log("onConnectionLost",this),"manual"==e.reason?e.isReconnectRequest&&(this.start(this.sfsConfig),egret.setTimeout(this.connect,this,1e3,e.isGame)):this.sendNotification(ParserMessageCommand.NAME,new ParserMessageData(MessageType.disconnectLost))},o.prototype.onLogin=function(e){e=e.data,Logger.log("onLogin",this),this.loginSuccessCallback(),this.sendNotification(ParserProtocolCommand.NAME,[ProtocolType.scLogin,this._sfs.mySelf])},o.prototype.onLoginError=function(e){e=e.data,Logger.error(this._logScope+" onLoginError"),this._sfs.enableLagMonitor(!1),this.sendNotification(ParserMessageCommand.NAME,new ParserMessageData(MessageType.loginError))},o.prototype.onLobbyORRoomJoin=function(e){if(e=e.data,this._room=e.room,""==e.room.name){if(Logger.log("onLobbyORRoomJoin LobbyJoin name:"+e.room.name,this),this._allProxy._gameDataProxy.isUpdateTicketRequest){if(this._allProxy._gameDataProxy.reconnectInScene==GameEnum.SceneTypeEnum.Battle)return void(SoundObjectManagerProxy.getInstance().inTransition=!1);if(this._allProxy._gameDataProxy.reconnectInScene==GameEnum.SceneTypeEnum.Transition)return SoundObjectManagerProxy.getInstance().inTransition=!1,void this.sendNotification(GSReconnectCommand.NAME)}this._allProxy._gameDataProxy.isCloseMaintanceDialogRequest&&(this._allProxy._webBridgeProxy.sendCloseAllErrorDialog(),this._allProxy._gameDataProxy.reconnectInScene=-1),this.sendNotification(ParserProtocolCommand.NAME,[ProtocolType.scLobbyJoin,e.room])}else Logger.log("onLobbyORRoomJoin RoomJoin name:"+e.room.name,this),this._lastSyncTime=-1,this.sendNotification(ParserProtocolCommand.NAME,[ProtocolType.scRoomJoin,e.room])},o.prototype.onRoomJoinError=function(e){e=e.data;var t=e.error||MessageType.roomJoinError;this.sendNotification(ParserMessageCommand.NAME,new ParserMessageData(t))},o.prototype.onExtensionResponse=function(e){if(e=e.data,Logger.log("onExtensionResponse even:"+e.cmd,this),e.cmd==GameEvent.SFSExtEvent.SFS_EVENT_IDLE_REMIND)this.sendNotification(ParserMessageCommand.NAME,new ParserMessageData(MessageType.idleRemind));else if(e.cmd==GameEvent.SFSExtEvent.SFS_ACCOUNT_STATUS){var t=e.params,o=t.getInt("status_code")+101,i=t.getInt("err_msg");this.sendNotification(ParserMessageCommand.NAME,new ParserMessageData(MessageType.accountStatus,o,i))}else if(e.cmd==GameEvent.SFSExtEvent.SFS_EVENT_CHANGE_BALANCE){var n=ProtocolType.changeBalance;this.sendNotification(ParserProtocolCommand.NAME,[n,e.params])}else if(e.cmd==GameEvent.SFSExtEvent.SFS_EVENT_LOGIN){var t=e.params,a=new ProtocolEntity.SCGameLoginEntity(t);a.data?(this._sfs.enableLagMonitor(!0),this.enableKeepAlive()):this.sendNotification(ParserMessageCommand.NAME,new ParserMessageData(MessageType.gameLoginError,a.code))}else if(e.cmd==GameEvent.SFSExtEvent.SFS_KEEP_ALIVE_RESPONSE);else{var n=Protocol_App[e.cmd];Logger.log("onExtensionResponse even:"+ProtocolType[n],this),this.sendNotification(ParserProtocolCommand.NAME,[n,e.params])}},o.prototype.onPublicMessage=function(e){e=e.data;var t=Protocol_App[e.message];"EV_SG_TURN"!=e.message?Logger.log("onPublicMessage even:"+ProtocolType[t],this):this._lastSyncTime=this.getTime(),this.sendNotification(ParserProtocolCommand.NAME,[t,e.data])},o.prototype.onPingPong=function(e){e=e.data,this.sendNotification(GameEvent.SmartFoxProxyEvent.PING_PONG,e.lagValue)},o.prototype.enableKeepAlive=function(){null==this._keepAliveTimer&&(this._keepAliveTimer=new egret.Timer(this._keepAliveDelay,0),this._keepAliveTimer.addEventListener(egret.TimerEvent.TIMER,this.onTimerProgressKeepAlive,this)),this._keepAliveTimer.start()},o.prototype.onTimerProgressKeepAlive=function(){this._sfs.send(new SFS2X.ExtensionRequest("GEN_HEARTBEAT",new SFS2X.SFSObject))},Object.defineProperty(o.prototype,"sfsConfig",{get:function(){return this._sfsConfig},set:function(e){this._sfsConfig=e},enumerable:!0,configurable:!0}),o.prototype.onEnterFrame=function(){if(-1!=this._lastSyncTime){var e=this._lastSyncTime-this._lastRenderTime;e>GameSettingProxy.lagTimeThreshold?window.location.reload():this._lastRenderTime=this.getTime()}},o.prototype.getTime=function(){return(new Date).getTime()},o.NAME="SmartFoxProxy",o}(BaseProxy);e.SmartFoxProxy=t,__reflect(t.prototype,"Fix.SmartFoxProxy")}(Fix||(Fix={}));var Fix;!function(e){var t=function(){function t(e){this._statusId=0,this._pingInterval=-1,this._pingList=[],this.llTurn=0,this.isReconnectRequest=!0,this._configData=e}return t.prototype.connect=function(e,t,o,i){var n=this;if(this._isConnecting)return void console.warn("Connection attempt interrupted: another attempt is already in progress");if(this.isReconnectRequest=!0,this._configData.urls){var a=this._configData.urls[1],r=new URL(a);this._configData.host=r.hostname,this._configData.port=r.port,this._configData.search=r.search,this._configData.useSSL=r.protocol.indexOf("wss")>-1}e=e||this._configData.host,t=t||this._configData.port,o=o||this._configData.useSSL,i=i||this._configData.search,this._configData={host:e,port:t,useSSL:o,search:i},this._isConnecting=!0;var s="ws"+(o?"s":"");this._socket=new WebSocket(s+"://"+e+":"+t+"/"+i),this._socket.binaryType="arraybuffer",this._socket.onopen=function(e){n._onSocketConnect(e)},this._socket.onclose=function(e){n._onSocketDisconnect(e)},this._socket.onmessage=function(e){n._onSocketData(e)},this._socket.onerror=function(e){n._onSocketError(e)}},t.prototype._onSocketConnect=function(e){this._isConnecting=!1,this._isConnected=!0},t.prototype._onSocketDisconnect=function(t){var o=this._statusId;if(this.PingPong(!1),this._isConnecting)this._isConnecting=!1,e.SmartFox.getInstance().dispatchEvent(new egret.Event(SFS2X.SFSEvent.CONNECTION,!1,!0,{success:!1}));else if(this._isConnected){var i=this.isReconnectRequest,n="manual";e.SmartFox.getInstance().dispatchEvent(new egret.Event(SFS2X.SFSEvent.CONNECTION_LOST,!1,!0,{status:o,reason:n,isReconnectRequest:i,isGame:!0}))}this._isConnected=!1},t.prototype._onSocketData=function(t){var o=new egret.ByteArray(t.data),i=o.readUnsignedShort(),n=new egret.ByteArray;switch(this._statusId=i,i){case e.SmartEnum.validate:var a=o.readInt(),r=o.readInt(),s=a^a+r;n.writeUnsignedShort(e.SmartEnum.validate),n.writeInt(s),this.send(n);break;case e.SmartEnum.version:o.readUTF();n.writeUnsignedShort(e.SmartEnum.roomid),n.writeInt(e.SmartFox.getInstance().room.id),this.send(n);break;case e.SmartEnum.roomid:e.SmartFox.getInstance().dispatchEvent(new egret.Event(SFS2X.SFSEvent.CONNECTION,!1,!0,{success:!0}));var l=new GameLoginCS;l.userid=e.SmartFox.getInstance().mySelf.userid,l.password=e.SmartFox.getInstance().mySelf.password,l.client_type=0,l.client_info="h5",l.version=3,l.fixseat=e.SmartFox.getInstance().mySelf.fixseat,l.dbname="",l.first_money=1,l.roomid=e.SmartFox.getInstance().room.id,l.linecode=e.SmartFox.getInstance().mySelf.linecode,l.all_npc=e.SmartFox.getInstance().mySelf.all_npc,n.writeUnsignedShort(e.SmartEnum.game_login),n.writeBytes(l.encode()),this.send(n);break;case e.SmartEnum.game_login_success:var c=new GameSitCS;c.sitIndex=-1,c.tableId=-1,n.writeUnsignedShort(e.SmartEnum.game_sit),n.writeBytes(c.encode()),this.send(n),e.SmartFox.getInstance().room.isJoined=!0,e.SmartFox.getInstance().dispatchEvent(new egret.Event(SFS2X.SFSEvent.ROOM_JOIN,!1,!0,{room:e.SmartFox.getInstance().room}));break;case e.SmartEnum.game_update_into_money:break;case e.SmartEnum.game_enter:this.PingPong(!0);var h=new pk_S2C_JdbcsbyEnter(o);h.decode(),e.SmartFox.getInstance().dispatchEvent(new egret.Event(SFS2X.SFSEvent.EXTENSION_RESPONSE,!1,!0,{cmd:"EV_SG_LOGIN",params:new e.SFSObject(h),room:e.SmartFox.getInstance().room}));break;case e.SmartEnum.game_turn:var u=new pk_S2C_JdbcsbyScTurn(o);u.decode(),e.SmartFox.getInstance().dispatchEvent(new egret.Event(SFS2X.SFSEvent.PUBLIC_MESSAGE,!1,!0,{message:"EV_SG_TURN",data:new e.SFSObject({llTurn:u.llTurn})}));break;case e.SmartEnum.game_come:var p=new pk_S2C_JdbcsbyCome(o);p.decode(),e.SmartFox.getInstance().dispatchEvent(new egret.Event(SFS2X.SFSEvent.EXTENSION_RESPONSE,!1,!0,{cmd:"EV_SG_OTHERS_LOGIN",params:new e.SFSObject(p),room:e.SmartFox.getInstance().room}));break;case e.SmartEnum.game_fire:var y=new pk_S2C_JdbcsbyScFire(o);y.decode(),e.SmartFox.getInstance().dispatchEvent(new egret.Event(SFS2X.SFSEvent.PUBLIC_MESSAGE,!1,!0,{message:"EV_SG_FIRE",data:new e.SFSObject({entity:"["+y.entity+"]"})}));break;case e.SmartEnum.game_sync:var E=new pk_S2C_JdbcsbyScSync(o);E.decode(),e.SmartFox.getInstance().dispatchEvent(new egret.Event(SFS2X.SFSEvent.PUBLIC_MESSAGE,!1,!0,{message:"EV_SG_SYNC",data:new e.SFSObject({entity:E.entity})}));break;case e.SmartEnum.game_leave:var _=o.readInt();console.log("id:"+_);var g=0;e.SmartFox.getInstance().checkSelfPlayerID(_)&&(console.log("id:"+_),g=PlayerViewEntityArrayProxy.getInstance().getPlayerViewEntityBySelf().credit,this.isReconnectRequest=!1,e.SmartFox.getInstance().toRoom(-1),e.SmartFox.getInstance().room.isJoined=!1,e.SmartFox.getInstance().dispatchEvent(new egret.Event(SFS2X.SFSEvent.EXTENSION_RESPONSE,!1,!0,{cmd:"EV_SG_LOGOUT",params:new e.SFSObject({bLogOutSuccess:!0}),room:e.SmartFox.getInstance().room})),e.SmartFox.getInstance().dispatchEvent(new egret.Event(SFS2X.SFSEvent.ROOM_JOIN,!1,!0,{room:e.SmartFox.getInstance().room})),window.isIframe?(window.sysInfo.account.bag_money=.001*g,ApplicationFacade.getInstance().retrieveProxy(e.SmartFoxProxy.NAME).gameLogin()):(n.writeUnsignedShort(e.SmartEnum.lobby_account),e.SmartFox.getInstance().send(n))),e.SmartFox.getInstance().dispatchEvent(new egret.Event(SFS2X.SFSEvent.PUBLIC_MESSAGE,!1,!0,{message:"EV_SG_OTHERS_LOGOUT",data:new e.SFSObject({iPlayerID:_,llPlayerCent:g,iLocation:0})}));break;case e.SmartEnum.game_login_error:var m=new LoginFailedErrorSC(o);m.decode();var d={};e.SmartFox.getInstance().dispatchEvent(new egret.Event(SFS2X.SFSEvent.ROOM_JOIN_ERROR,!1,!0,{error:d[m.error]}));break;case e.SmartEnum.game_pong:var f=o.readInt(),b=Date.now()-this._pingList[f];e.SmartFox.getInstance().dispatchEvent(new egret.Event(GameEvent.SmartFoxProxyEvent.PING_PONG,!1,!0,{lagValue:b}));break;case e.SmartEnum.game_award:}},t.prototype._onSocketError=function(t){var o=this.isReconnectRequest,i="manual";e.SmartFox.getInstance().dispatchEvent(new egret.Event(SFS2X.SFSEvent.CONNECTION_LOST,!1,!0,{status:status,reason:i,isReconnectRequest:o,isGame:!0}))},t.prototype.disconnect=function(){this._isConnected&&this._socket.close()},t.prototype.send=function(e){this._isConnected&&this._socket.send(e.buffer)
},t.prototype.PingPong=function(t){var o=this;void 0===t&&(t=!1),clearInterval(this._pingInterval);var i=1;this._pingList=[],t?this._pingInterval=setInterval(function(){i>9?i=1:i++,o._pingList[i]=Date.now();var t=new egret.ByteArray;t.writeUnsignedShort(e.SmartEnum.game_ping),t.writeInt(i),o.send(t)},3e3):(i=null,this._pingList.length=0,this._pingList=null)},t}();e.SmartGame=t,__reflect(t.prototype,"Fix.SmartGame")}(Fix||(Fix={}));var Fix;!function(e){var t=function(){function t(e){this._statusId=0,this._pingInterval=-1,this._pingList=[],this.isReconnectRequest=!0,this._configData=e}return t.prototype.connect=function(e,t,o,i){var n=this;if(this._isConnecting)return void console.warn("Connection attempt interrupted: another attempt is already in progress");if(!window.isIframe){if(this._configData.urls){var a=this._configData.urls[0],r=new URL(a);this._configData.host=r.hostname,this._configData.port=r.port,this._configData.search=r.search,this._configData.useSSL=r.protocol.indexOf("wss")>-1}e=e||this._configData.host,t=t||this._configData.port,o=o||this._configData.useSSL,i=i||this._configData.search,this._configData={host:e,port:t,useSSL:o,search:i},this._isConnecting=!0;var s="ws"+(o?"s":"");console.log(this._configData),console.log(s+"://"+e+":"+t+"/"+i),this._socket=new WebSocket(s+"://"+e+":"+t+"/"+i),this._socket.binaryType="arraybuffer",this._socket.onopen=function(e){n._onSocketConnect(e)},this._socket.onclose=function(e){n._onSocketDisconnect(e)},this._socket.onmessage=function(e){n._onSocketData(e)},this._socket.onerror=function(e){n._onSocketError(e)}}},t.prototype._onSocketConnect=function(e){this._isConnecting=!1,this._isConnected=!0},t.prototype._onSocketDisconnect=function(t){var o=this._statusId;if(this.PingPong(!1),this._isConnecting)this._isConnecting=!1,e.SmartFox.getInstance().dispatchEvent(new egret.Event(SFS2X.SFSEvent.CONNECTION,!1,!0,{success:!1}));else if(this._isConnected){var i=this.isReconnectRequest,n="manual";e.SmartFox.getInstance().dispatchEvent(new egret.Event(SFS2X.SFSEvent.CONNECTION_LOST,!1,!0,{status:o,reason:n,isReconnectRequest:i,isGame:!1}))}this._isConnected=!1},t.prototype._onSocketData=function(t){var o=new egret.ByteArray(t.data),i=o.readUnsignedShort(),n=new egret.ByteArray;switch(this._statusId=i,i){case e.SmartEnum.validate:var a=o.readInt(),r=o.readInt(),s=a^a+r;n.writeUnsignedShort(e.SmartEnum.validate),n.writeInt(s),this.send(n);break;case e.SmartEnum.version:o.readUTF();n.writeUnsignedShort(e.SmartEnum.roomid),n.writeInt(0),this.send(n);break;case e.SmartEnum.roomid:e.SmartFox.getInstance().dispatchEvent(new egret.Event(SFS2X.SFSEvent.CONNECTION,!1,!0,{success:!0}));break;case e.SmartEnum.lobby_login:var l=new account_loginSC(o);l.decode(),"ok"==l.result?(n.writeUnsignedShort(e.SmartEnum.lobby_account),e.SmartFox.getInstance().send(n)):e.SmartFox.getInstance().dispatchEvent(new egret.Event(SFS2X.SFSEvent.LOGIN_ERROR,!1,!0,{}));break;case e.SmartEnum.lobby_guest:var c=new guest_loginSC(o);c.decode(),"ok"==c.result?(egret.localStorage.setItem("csby_guestid",c.uid.toString()),n.writeUnsignedShort(e.SmartEnum.lobby_account),e.SmartFox.getInstance().send(n)):e.SmartFox.getInstance().dispatchEvent(new egret.Event(SFS2X.SFSEvent.LOGIN_ERROR,!1,!0,{}));break;case e.SmartEnum.lobby_account:this.PingPong(!0);var h=new get_accountSC(o);h.decode(),console.log(h.body);var u={};u.agent_id=h.body.agent_id,u.main_agent_id=h.body.main_agent_id,u.bag_money=1e3*h.body.bag_money,u.currency=h.body.currency,u.username=h.body.username,u.password=h.body.password,u.linecode=h.body.linecode,u.all_npc=h.body.all_npc,u.userid=h.body.userid,u.id=h.body.userid,u.name=h.body.nickname,u.fixseat=!0,e.SmartFox.getInstance().mySelf=u,e.SmartFox.getInstance().dispatchEvent(new egret.Event(SFS2X.SFSEvent.LOGIN,!1,!0,{zone:"JDB_ZONE_GAME",user:u,data:null}));break;case e.SmartEnum.lobby_rooms:var p=new RoomInfoListVo(o);if(p.decode(),"ok"==p.result){e.SmartFox.getInstance().roomList=[];for(var y={iDenom:[1,1,1],iMaxBet:[],iMinBet:[],iRoomCount:0,iRoomName:null,iRoomType:[],llCent:e.SmartFox.getInstance().mySelf.bag_money,showName:e.SmartFox.getInstance().mySelf.name},E=p.rooms,_=0;_<E.length;_++){var g=E[_];g.is_active||E.splice(_,1)}y.iRoomCount=E.length>3?3:E.length;for(var _=0;_<y.iRoomCount;_++){var g=E[_];y.iMinBet.unshift(1e3*g.init_money),y.iMaxBet.unshift(1e3*g.top_money),y.iRoomType.unshift(_),e.SmartFox.getInstance().roomList.push({capacity:4,groupId:"cspy",id:g.room_id,isGame:!0,isHidden:!1,isJoined:!1,isPasswordProtected:!1,maxSpectators:0,maxUsers:4,name:g.title,spectatorCount:0,userCount:g.online_num})}e.SmartFox.getInstance().dispatchEvent(new egret.Event(SFS2X.SFSEvent.ROOM_JOIN,!1,!0,{room:e.SmartFox.getInstance().room})),e.SmartFox.getInstance().dispatchEvent(new egret.Event(SFS2X.SFSEvent.PUBLIC_MESSAGE,!1,!0,{message:"EV_SG_USERINFO",data:new e.SFSObject(y)})),e.SmartFox.getInstance().dispatchEvent(new egret.Event(SFS2X.SFSEvent.PUBLIC_MESSAGE,!1,!0,{message:"EV_SG_LOBBY_INFO",data:new e.SFSObject({iLobbyRoomInfo:[],iRoomCount:y.iRoomCount})}))}else e.SmartFox.getInstance().dispatchEvent(new egret.Event(SFS2X.SFSEvent.ROOM_JOIN_ERROR,!1,!0,{}));break;case e.SmartEnum.lobby_pong:var m=o.readInt(),d=Date.now()-this._pingList[m];e.SmartFox.getInstance().dispatchEvent(new egret.Event(GameEvent.SmartFoxProxyEvent.PING_PONG,!1,!0,{lagValue:d}));break;case e.SmartEnum.lobby_award:e.SmartFox.getInstance().dispatchEvent(new egret.Event(SFS2X.SFSEvent.PUBLIC_MESSAGE,!1,!0,{message:"EV_SG_AWARD",data:new e.SFSObject([{uid:"****901",roomType:1,targetId:104,multiplier:200,win:18e6}])}))}},t.prototype._onSocketError=function(t){var o=this.isReconnectRequest,i="manual";e.SmartFox.getInstance().dispatchEvent(new egret.Event(SFS2X.SFSEvent.CONNECTION_LOST,!1,!0,{status:status,reason:i,isReconnectRequest:o,isGame:!1}))},t.prototype.disconnect=function(){this._isConnected&&this._socket.close()},t.prototype.send=function(e){this._isConnected&&this._socket.send(e.buffer)},t.prototype.PingPong=function(t){var o=this;void 0===t&&(t=!1),clearInterval(this._pingInterval);var i=1;this._pingList=[],t?this._pingInterval=setInterval(function(){i>9?i=1:i++,o._pingList[i]=Date.now();var t=new egret.ByteArray;t.writeUnsignedShort(e.SmartEnum.lobby_ping),t.writeInt(i),o.send(t)},3e3):(i=null,this._pingList.length=0,this._pingList=null)},t}();e.SmartLobby=t,__reflect(t.prototype,"Fix.SmartLobby")}(Fix||(Fix={}));var pk_C2S_JdbcsbyCsFire=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.decode=function(){this.iPlayerID=this._bytes.readInt(),this.iBet=this._bytes.readDouble(),this.iBet=parseFloat(this.iBet.toFixed(2)),this.iRotation=this._bytes.readDouble(),this.iRotation=parseFloat(this.iRotation.toFixed(2)),this.iBulletType=this._bytes.readInt(),this.iBulletID=this._bytes.readInt(),this.iTargetSN=this._bytes.readInt()},t.prototype.encode=function(){var e=new egret.ByteArray;return e.writeInt(this.iPlayerID),e.writeDouble(this.iBet),e.writeDouble(this.iRotation),e.writeInt(this.iBulletType),e.writeInt(this.iBulletID),e.writeInt(this.iTargetSN),e},t}(BaseParse);__reflect(pk_C2S_JdbcsbyCsFire.prototype,"pk_C2S_JdbcsbyCsFire");var pk_C2S_JdbcsbyCsHit=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.decode=function(){this.iPlayerID=this._bytes.readInt(),this.iBulletID=this._bytes.readInt(),this.iTargetID=this._bytes.readInt(),this.iTargetSN=this._bytes.readInt(),this.iBulletType=this._bytes.readInt(),this.iBet=this._bytes.readDouble(),this.iBet=parseFloat(this.iBet.toFixed(2)),this.sBulletInfo=this._bytes.readUTF()},t.prototype.encode=function(){var e=new egret.ByteArray;return e.writeInt(this.iPlayerID),e.writeInt(this.iBulletID),e.writeInt(this.iTargetID),e.writeInt(this.iTargetSN),e.writeInt(this.iBulletType),e.writeDouble(this.iBet),e.writeUTF(this.sBulletInfo),e},t}(BaseParse);__reflect(pk_C2S_JdbcsbyCsHit.prototype,"pk_C2S_JdbcsbyCsHit");var pk_S2C_JdbcsbyCome=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.decode=function(){this.iPlayerID=this._bytes.readInt(),this.llPlayerCent=this._bytes.readDouble(),this.llPlayerCent=parseFloat(this.llPlayerCent.toFixed(2)),this.iLocation=this._bytes.readByte()},t.prototype.encode=function(){var e=new egret.ByteArray;return e.writeInt(this.iPlayerID),e.writeDouble(this.llPlayerCent),e.writeByte(this.iLocation),e},t}(BaseParse);__reflect(pk_S2C_JdbcsbyCome.prototype,"pk_S2C_JdbcsbyCome");var pk_S2C_JdbcsbyEnter=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.decode=function(){this.bInRoom=[];for(var e=this._bytes.readShort();e--;)this.bInRoom.push(this._bytes.readBoolean());for(this.bLogInSuccess=this._bytes.readBoolean(),this.iDenom=this._bytes.readInt(),this.iID=[],e=this._bytes.readShort();e--;)this.iID.push(this._bytes.readInt());for(this.iMaxBet=this._bytes.readDouble(),this.iMaxBet=parseFloat(this.iMaxBet.toFixed(2)),this.iMinBet=this._bytes.readDouble(),this.iMinBet=parseFloat(this.iMinBet.toFixed(2)),this.iRoomNum=this._bytes.readInt(),this.iRoomType=this._bytes.readByte(),this.lCent=[],e=this._bytes.readShort();e--;)this.lCent.push(this._bytes.readDouble());this.llTurn=this._bytes.readInt(),this.sRoomView=this._bytes.readUTF()},t.prototype.encode=function(){var e=new egret.ByteArray,t=this.bInRoom.length;for(e.writeShort(t);t--;)e.writeBoolean(this.bInRoom[this.bInRoom.length-1-t]);for(e.writeBoolean(this.bLogInSuccess),e.writeInt(this.iDenom),t=this.iID.length,e.writeShort(t);t--;)e.writeInt(this.iID[this.iID.length-1-t]);for(e.writeDouble(this.iMaxBet),e.writeDouble(this.iMinBet),e.writeInt(this.iRoomNum),e.writeByte(this.iRoomType),t=this.lCent.length,e.writeShort(t);t--;)e.writeDouble(this.lCent[this.lCent.length-1-t]);return e.writeInt(this.llTurn),e.writeUTF(this.sRoomView),e},t}(BaseParse);__reflect(pk_S2C_JdbcsbyEnter.prototype,"pk_S2C_JdbcsbyEnter");var pk_S2C_JdbcsbyLeave=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.decode=function(){this.iPlayerID=this._bytes.readInt(),this.llPlayerCent=this._bytes.readDouble(),this.llPlayerCent=parseFloat(this.llPlayerCent.toFixed(2)),this.iLocation=this._bytes.readByte()},t.prototype.encode=function(){var e=new egret.ByteArray;return e.writeInt(this.iPlayerID),e.writeDouble(this.llPlayerCent),e.writeByte(this.iLocation),e},t}(BaseParse);__reflect(pk_S2C_JdbcsbyLeave.prototype,"pk_S2C_JdbcsbyLeave");var pk_S2C_JdbcsbyScAward=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.decode=function(){this.entity=this._bytes.readUTF()},t.prototype.encode=function(){var e=new egret.ByteArray;return e.writeUTF(this.entity),e},t}(BaseParse);__reflect(pk_S2C_JdbcsbyScAward.prototype,"pk_S2C_JdbcsbyScAward");var pk_S2C_JdbcsbyScFire=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.decode=function(){this.entity=this._bytes.readUTF()},t.prototype.encode=function(){var e=new egret.ByteArray;return e.writeUTF(this.entity),e},t}(BaseParse);__reflect(pk_S2C_JdbcsbyScFire.prototype,"pk_S2C_JdbcsbyScFire");var pk_S2C_JdbcsbyScSync=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.decode=function(){this.entity=this._bytes.readUTF()},t.prototype.encode=function(){var e=new egret.ByteArray;return e.writeUTF(this.entity),e},t}(BaseParse);__reflect(pk_S2C_JdbcsbyScSync.prototype,"pk_S2C_JdbcsbyScSync");var pk_S2C_JdbcsbyScTurn=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.decode=function(){this.llTurn=this._bytes.readInt()},t.prototype.encode=function(){var e=new egret.ByteArray;return e.writeInt(this.llTurn),e},t}(BaseParse);__reflect(pk_S2C_JdbcsbyScTurn.prototype,"pk_S2C_JdbcsbyScTurn");var account_loginCS=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.decode=function(){this.username=this._bytes.readUTF(),this.password=this._bytes.readUTF(),this.captcha=this._bytes.readUTF(),this.proving=this._bytes.readUTF(),this.machineCode=this._bytes.readUTF(),this.client_type=this._bytes.readByte(),this.token=this._bytes.readUTF(),this.is_encoded=this._bytes.readByte()},t.prototype.encode=function(){var e=new egret.ByteArray;return e.writeUTF(this.username),e.writeUTF(this.password),e.writeUTF(this.captcha),e.writeUTF(this.proving),e.writeUTF(this.machineCode),e.writeByte(this.client_type),e.writeUTF(this.token),e.writeByte(this.is_encoded),e},t}(BaseParse);__reflect(account_loginCS.prototype,"account_loginCS");var account_loginSC=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.decode=function(){this.username=this._bytes.readUTF(),this.password=this._bytes.readUTF(),this.result=this._bytes.readUTF()},t.prototype.encode=function(){var e=new egret.ByteArray;return e.writeUTF(this.username),e.writeUTF(this.password),e.writeUTF(this.result),e},t}(BaseParse);__reflect(account_loginSC.prototype,"account_loginSC");var accountvo=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.decode=function(){this.userid=this._bytes.readInt(),this.username=this._bytes.readUTF(),this.password=this._bytes.readUTF(),this.nickname=this._bytes.readUTF(),this.realname=this._bytes.readUTF(),this.sex=this._bytes.readShort(),this.birthday=this._bytes.readUTF(),this.avatar_no=this._bytes.readShort(),this.inviter_id=this._bytes.readInt(),this.chick_task=this._bytes.readShort(),this.email=this._bytes.readUTF(),this.telephone=this._bytes.readUTF(),this.qq=this._bytes.readUTF(),this.agent_user_id=this._bytes.readInt(),this.cert_type=this._bytes.readShort(),this.cert_no=this._bytes.readUTF(),this.validate_realname=this._bytes.readShort(),this.validate_cert=this._bytes.readShort(),this.validate_video=this._bytes.readInt(),this.validate_email=this._bytes.readShort(),this.validate_qq=this._bytes.readShort(),this.validate_mobile=this._bytes.readShort(),this.wechat_id=this._bytes.readUTF(),this.wechat_lock=this._bytes.readShort(),this.bank_validate=this._bytes.readShort(),this.bag_money=this._bytes.readDouble(),this.bag_money=parseFloat(this.bag_money.toFixed(2)),this.vip_level=this._bytes.readShort(),this.bank_money=this._bytes.readDouble(),this.bank_money=parseFloat(this.bank_money.toFixed(2)),this.pay_money=this.readInt64(this._bytes),this.dollar_money=this.readInt64(this._bytes),this.promo_dollar=this.readInt64(this._bytes),this.win_dollar_sum=this.readInt64(this._bytes),this.online_time=this._bytes.readInt(),this.level=this._bytes.readShort(),this.happycard=this._bytes.readInt(),this.locked=this._bytes.readShort(),this.exp_value=this._bytes.readInt(),this.award_value=this._bytes.readInt(),this.gold_money=this.readInt64(this._bytes),this.next_exp=this._bytes.readInt(),this.gfname=this._bytes.readUTF(),this.wfname=this._bytes.readUTF(),this.gfname1=this._bytes.readUTF(),this.wfname1=this._bytes.readUTF(),this.win_times=this._bytes.readInt(),this.lost_times=this._bytes.readInt(),this.ol_roomd_id=this._bytes.readInt(),this.linecode=this._bytes.readUTF(),this.game_hid=this._bytes.readUTF(),this.show_back_button=this._bytes.readInt(),this.vip_tp=this._bytes.readInt(),this.realusername=this._bytes.readUTF(),this.all_npc=this._bytes.readInt(),this.currency=this._bytes.readUTF(),this.game_defs=[];for(var e=this._bytes.readShort();e--;){var t=new pk_S2C_AccountGame_defs(this._bytes);t.decode(),this.game_defs.push(t)}this.gametypes=this._bytes.readUTF(),this.status=this._bytes.readUTF(),this.agent_id=this._bytes.readInt(),this.main_agent_id=this._bytes.readInt()},t.prototype.encode=function(){var e=new egret.ByteArray;e.writeInt(this.userid),e.writeUTF(this.username),e.writeUTF(this.password),e.writeUTF(this.nickname),e.writeUTF(this.realname),e.writeShort(this.sex),e.writeUTF(this.birthday),e.writeShort(this.avatar_no),e.writeInt(this.inviter_id),e.writeShort(this.chick_task),e.writeUTF(this.email),e.writeUTF(this.telephone),e.writeUTF(this.qq),e.writeInt(this.agent_user_id),e.writeShort(this.cert_type),e.writeUTF(this.cert_no),e.writeShort(this.validate_realname),e.writeShort(this.validate_cert),e.writeInt(this.validate_video),e.writeShort(this.validate_email),e.writeShort(this.validate_qq),e.writeShort(this.validate_mobile),e.writeUTF(this.wechat_id),e.writeShort(this.wechat_lock),e.writeShort(this.bank_validate),e.writeDouble(this.bag_money),e.writeShort(this.vip_level),e.writeDouble(this.bank_money),e.writeBytes(this.writeInt64(this.pay_money)),e.writeBytes(this.writeInt64(this.dollar_money)),e.writeBytes(this.writeInt64(this.promo_dollar)),e.writeBytes(this.writeInt64(this.win_dollar_sum)),e.writeInt(this.online_time),e.writeShort(this.level),e.writeInt(this.happycard),e.writeShort(this.locked),e.writeInt(this.exp_value),e.writeInt(this.award_value),e.writeBytes(this.writeInt64(this.gold_money)),e.writeInt(this.next_exp),e.writeUTF(this.gfname),e.writeUTF(this.wfname),e.writeUTF(this.gfname1),e.writeUTF(this.wfname1),e.writeInt(this.win_times),e.writeInt(this.lost_times),e.writeInt(this.ol_roomd_id),e.writeUTF(this.linecode),e.writeUTF(this.game_hid),e.writeInt(this.show_back_button),e.writeInt(this.vip_tp),e.writeUTF(this.realusername),e.writeInt(this.all_npc),e.writeUTF(this.currency);var t=this.game_defs.length;for(e.writeShort(t);t--;)e.writeBytes(this.game_defs[t].encode());return e.writeUTF(this.gametypes),e.writeUTF(this.status),e.writeInt(this.agent_id),e.writeInt(this.main_agent_id),e},t}(BaseParse);__reflect(accountvo.prototype,"accountvo");var AutomaticBazookaCoinFX=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._logScope="[AutomaticBazookaCoinFX]",t._isLog=!1,t._coinCountLabel=new eui.BitmapLabel,t.temporaryBeginPoint=new egret.Point,t.temporaryEndPoint=new egret.Point,t}return __extends(t,e),t.prototype.startObject=function(e){Logger.log("startObject"+this.hashCode,this);var t=Utils.ResourceTool.getMovieClip(e.jsonName,e.clipName);this._coinCountLabel.font=Utils.ResourceTool.getRes(GameName.FontName.AutomaticBazookCount),this._coinCountLabel.letterSpacing=-10,this.addChild(t),this.addChild(this._coinCountLabel),this._coinMC=t},t.prototype.initObject=function(e){Logger.log("initObject "+this.hashCode,this),this._coinMC&&Utils.DisplayObjectTool.resetDisplayObject(this._coinMC,!0),this._coinCountLabel&&Utils.DisplayObjectTool.resetDisplayObject(this._coinCountLabel,!0),Utils.DisplayObjectTool.resetDisplayObject(this,!0)},t.prototype.resetObject=function(){Logger.log("resetObject "+this.hashCode,this),this._coinMC&&Utils.DisplayObjectTool.resetDisplayObject(this._coinMC,!1),this._coinCountLabel&&Utils.DisplayObjectTool.resetDisplayObject(this._coinCountLabel,!1),Utils.DisplayObjectTool.resetDisplayObject(this,!1)},t.prototype.playObject=function(){Logger.log("playObject "+this.hashCode,this),this._coinMC,this._data,this._coinCountLabel.visible=!1,this.coinMoveFromFish()},t.prototype.stopObject=function(){Logger.log("stopObject "+this.hashCode,this),this.onComplete()},t.prototype.completeObject=function(){Logger.log("completeObject "+this.hashCode,this),egret.clearTimeout(this.setTimeout),egret.Tween.removeTweens(this)},t.prototype.coinMoveFromFish=function(){var e=this._coinMC,t=this._data;e.x=t.beginTargetObject.x,e.y=t.beginTargetObject.y,e.scaleX=1,e.scaleY=1,e.alpha=.8,e.visible=!0,e.parent.addChildAt(e,0),e.gotoAndPlay(Utils.MathTool.randomRange(0,e.totalFrames-1),-1);var o=200,i=(new egret.Point,new egret.Point,Utils.MathTool.randomRangeByPositiveAndNegative(50,100)+e.x),n=Utils.MathTool.randomRangeByPositiveAndNegative(50,100)+e.y;egret.Tween.get(e).to({x:i,y:n},o,egret.Ease.circOut).wait(500).call(this.coinMoveFormEndPoint,this),0==t.index?(this._coinCountLabel.visible=!0,this.coinMoveFormCredit()):(this._coinCountLabel.visible=!1,this._coinCountLabel.text="")},t.prototype.coinMoveFormEndPoint=function(){var e=this._coinMC,t=this._data,o=new egret.Point(e.x,e.y),i=t.endTargetObject.localToGlobal(0,0),n=egret.Point.distance(o,i)/500*400;egret.Tween.get(e).to({y:i.y},n,egret.Ease.sineInOut),egret.Tween.get(e).to({x:i.x},n,egret.Ease.sineOut).set({visible:!1}).wait(10*t.index).call(this.onComplete,this)},t.prototype.coinMoveFormCredit=function(){var e=this._coinCountLabel,t=this._data,o=t.creditTargetObject.localToGlobal();e.x=o.x,e.y=o.y,e.alpha=1,e.visible=!0,e.text="+"+t.win,egret.Tween.get(e).to({y:o.y-50,alpha:1},300,egret.Ease.quadOut).to({y:o.y-100,alpha:.5},800).call(this.onComplete,this)},t.prototype.playAnimation=function(e){var t=this._coinMC;e?t.gotoAndPlay(0,-1):t.gotoAndStop(0)},t.NAME="AutomaticBazookaCoinFX",t}(BaseFX);__reflect(AutomaticBazookaCoinFX.prototype,"AutomaticBazookaCoinFX");var GameEnterSC=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.decode=function(){this.continue_timeout=this._bytes.readByte(),this.init_money=this._bytes.readDouble(),this.init_money=parseFloat(this.init_money.toFixed(2)),this.max_player_num=this._bytes.readByte(),this.p2p=this._bytes.readByte(),this.top_money=this._bytes.readDouble(),this.top_money=parseFloat(this.top_money.toFixed(2)),this.unit_money=this._bytes.readDouble(),this.unit_money=parseFloat(this.unit_money.toFixed(2)),this.memberinfos=[];for(var e=this._bytes.readShort();e--;){var t=new GameMemberinfovo(this._bytes);t.decode(),this.memberinfos.push(t)}for(this.bb_money=this._bytes.readDouble(),this.bb_money=parseFloat(this.bb_money.toFixed(2)),this.sb_money=this._bytes.readDouble(),this.sb_money=parseFloat(this.sb_money.toFixed(2)),this.nolimit=this._bytes.readByte(),this.max_chip=this._bytes.readDouble(),this.max_chip=parseFloat(this.max_chip.toFixed(2)),this.init_bets=[],e=this._bytes.readShort();e--;)this.init_bets.push(this._bytes.readDouble());for(this.level_type=this._bytes.readInt(),this.cannon_rate=this._bytes.readDouble(),this.cannon_rate=parseFloat(this.cannon_rate.toFixed(2)),this.cannon_doubles=[],e=this._bytes.readShort();e--;)this.cannon_doubles.push(this._bytes.readDouble());for(this.calltype=this._bytes.readInt(),this.deskno=this._bytes.readInt(),this.max_bullet_multiple=this._bytes.readDouble(),this.max_bullet_multiple=parseFloat(this.max_bullet_multiple.toFixed(2)),this.min_bullet_multiple=this._bytes.readDouble(),this.min_bullet_multiple=parseFloat(this.min_bullet_multiple.toFixed(2)),this.myprops=[],e=this._bytes.readShort();e--;){var t=new pk_S2C_MyPropsInfos(this._bytes);t.decode(),this.myprops.push(t)}for(this.awards=[],e=this._bytes.readShort();e--;)this.awards.push(this._bytes.readDouble());for(this.apply_cost=this._bytes.readDouble(),this.apply_cost=parseFloat(this.apply_cost.toFixed(2)),this.apply_num=this._bytes.readInt(),this.need_num=this._bytes.readInt(),this.buttle_num=this._bytes.readInt(),this.game_mode=this._bytes.readInt(),this.apply_surplus=this._bytes.readInt(),this.step=this._bytes.readInt(),this.top10=[],e=this._bytes.readShort();e--;){var t=new pk_S2C_Top10Info(this._bytes);t.decode(),this.top10.push(t)}for(this.round=this._bytes.readInt(),this.matchtime=this._bytes.readInt(),this.cn=this._bytes.readInt(),this.multiple=[],e=this._bytes.readShort();e--;)this.multiple.push(this._bytes.readDouble());for(this.title=this._bytes.readUTF(),this.promotioncn=this._bytes.readInt(),this.promotion_jushu=this._bytes.readInt(),this.max_round=this._bytes.readInt(),this.max_unit_money=this._bytes.readDouble(),this.max_unit_money=parseFloat(this.max_unit_money.toFixed(2)),this.max_mult=this._bytes.readInt(),this.min_mult=this._bytes.readInt(),this.match_type=this._bytes.readInt(),this.def_cannon=[],e=this._bytes.readShort();e--;)this.def_cannon.push(this._bytes.readInt());for(this.def_avatar=[],e=this._bytes.readShort();e--;)this.def_avatar.push(this._bytes.readDouble());for(this.cannon_types=[],e=this._bytes.readShort();e--;)this.cannon_types.push(this._bytes.readInt());for(this.cannon_levels=[],e=this._bytes.readShort();e--;)this.cannon_levels.push(this._bytes.readInt());for(this.avatar_speeds=[],e=this._bytes.readShort();e--;)this.avatar_speeds.push(this._bytes.readInt());for(this.avatar_lock_types=[],e=this._bytes.readShort();e--;)this.avatar_lock_types.push(this._bytes.readInt());for(this.avatar_props=[],e=this._bytes.readShort();e--;)this.avatar_props.push(this._bytes.readInt());for(this.shoot_interval=this._bytes.readDouble(),this.shoot_interval=parseFloat(this.shoot_interval.toFixed(2)),this.bullet_max=this._bytes.readInt(),this.angle_min=this._bytes.readDouble(),this.angle_min=parseFloat(this.angle_min.toFixed(2)),this.angle_max=this._bytes.readDouble(),this.angle_max=parseFloat(this.angle_max.toFixed(2)),this.data_effect=[],e=this._bytes.readShort();e--;){var t=new pk_S2C_GameDataEffect(this._bytes);t.decode(),this.data_effect.push(t)}for(this.data_magic=[],e=this._bytes.readShort();e--;){var t=new pk_S2C_GameDataMagic(this._bytes);t.decode(),this.data_magic.push(t)}},t.prototype.encode=function(){var e=new egret.ByteArray;e.writeByte(this.continue_timeout),e.writeDouble(this.init_money),e.writeByte(this.max_player_num),e.writeByte(this.p2p),e.writeDouble(this.top_money),e.writeDouble(this.unit_money);var t=this.memberinfos.length;for(e.writeShort(t);t--;)e.writeBytes(this.memberinfos[t].encode());for(e.writeDouble(this.bb_money),e.writeDouble(this.sb_money),e.writeByte(this.nolimit),e.writeDouble(this.max_chip),t=this.init_bets.length,e.writeShort(t);t--;)e.writeDouble(this.init_bets[this.init_bets.length-1-t]);for(e.writeInt(this.level_type),e.writeDouble(this.cannon_rate),t=this.cannon_doubles.length,e.writeShort(t);t--;)e.writeDouble(this.cannon_doubles[this.cannon_doubles.length-1-t]);for(e.writeInt(this.calltype),e.writeInt(this.deskno),e.writeDouble(this.max_bullet_multiple),e.writeDouble(this.min_bullet_multiple),t=this.myprops.length,e.writeShort(t);t--;)e.writeBytes(this.myprops[t].encode());for(t=this.awards.length,e.writeShort(t);t--;)e.writeDouble(this.awards[this.awards.length-1-t]);for(e.writeDouble(this.apply_cost),e.writeInt(this.apply_num),e.writeInt(this.need_num),e.writeInt(this.buttle_num),e.writeInt(this.game_mode),e.writeInt(this.apply_surplus),e.writeInt(this.step),t=this.top10.length,e.writeShort(t);t--;)e.writeBytes(this.top10[t].encode());for(e.writeInt(this.round),e.writeInt(this.matchtime),e.writeInt(this.cn),t=this.multiple.length,e.writeShort(t);t--;)e.writeDouble(this.multiple[this.multiple.length-1-t]);for(e.writeUTF(this.title),e.writeInt(this.promotioncn),e.writeInt(this.promotion_jushu),e.writeInt(this.max_round),e.writeDouble(this.max_unit_money),e.writeInt(this.max_mult),e.writeInt(this.min_mult),e.writeInt(this.match_type),t=this.def_cannon.length,e.writeShort(t);t--;)e.writeInt(this.def_cannon[this.def_cannon.length-1-t]);for(t=this.def_avatar.length,e.writeShort(t);t--;)e.writeDouble(this.def_avatar[this.def_avatar.length-1-t]);for(t=this.cannon_types.length,e.writeShort(t);t--;)e.writeInt(this.cannon_types[this.cannon_types.length-1-t]);for(t=this.cannon_levels.length,e.writeShort(t);t--;)e.writeInt(this.cannon_levels[this.cannon_levels.length-1-t]);for(t=this.avatar_speeds.length,e.writeShort(t);t--;)e.writeInt(this.avatar_speeds[this.avatar_speeds.length-1-t]);for(t=this.avatar_lock_types.length,e.writeShort(t);t--;)e.writeInt(this.avatar_lock_types[this.avatar_lock_types.length-1-t]);for(t=this.avatar_props.length,e.writeShort(t);t--;)e.writeInt(this.avatar_props[this.avatar_props.length-1-t]);for(e.writeDouble(this.shoot_interval),e.writeInt(this.bullet_max),e.writeDouble(this.angle_min),e.writeDouble(this.angle_max),t=this.data_effect.length,e.writeShort(t);t--;)e.writeBytes(this.data_effect[t].encode());for(t=this.data_magic.length,e.writeShort(t);t--;)e.writeBytes(this.data_magic[t].encode());return e},t}(BaseParse);__reflect(GameEnterSC.prototype,"GameEnterSC");var GameLoginCS=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.decode=function(){this.userid=this._bytes.readInt(),this.password=this._bytes.readUTF(),this.client_type=this._bytes.readByte(),this.client_info=this._bytes.readUTF(),this.version=this._bytes.readByte(),this.fixseat=this._bytes.readBoolean(),this.dbname=this._bytes.readUTF(),this.first_money=this.readInt64(this._bytes),this.roomid=this._bytes.readInt(),this.linecode=this._bytes.readUTF(),this.all_npc=this._bytes.readInt()},t.prototype.encode=function(){var e=new egret.ByteArray;return e.writeInt(this.userid),e.writeUTF(this.password),e.writeByte(this.client_type),e.writeUTF(this.client_info),e.writeByte(this.version),e.writeBoolean(this.fixseat),e.writeUTF(this.dbname),e.writeBytes(this.writeInt64(this.first_money)),e.writeInt(this.roomid),e.writeUTF(this.linecode),e.writeInt(this.all_npc),e},t}(BaseParse);__reflect(GameLoginCS.prototype,"GameLoginCS");var GameMemberinfovo=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.decode=function(){this.active_point=this._bytes.readInt(),this.avatar_img=this._bytes.readUTF(),this.avatar_no=this._bytes.readShort(),this.bag_money=this._bytes.readDouble(),this.bag_money=parseFloat(this.bag_money.toFixed(2)),this.client_address=this._bytes.readUTF(),this.exp=this._bytes.readInt(),this.into_money=this._bytes.readDouble(),this.into_money=parseFloat(this.into_money.toFixed(2)),this.is_staff=this._bytes.readBoolean(),this.keynum=this._bytes.readInt(),this.level=this._bytes.readShort(),this.lose_times=this._bytes.readInt(),this.mobile_type=this._bytes.readShort(),this.nickname=this._bytes.readUTF(),this.position=this._bytes.readByte(),this.ready=this._bytes.readBoolean(),this.uid=this._bytes.readInt(),this.vip_level=this._bytes.readByte(),this.waiting=this._bytes.readBoolean(),this.win_times=this._bytes.readInt(),this.winning=this._bytes.readInt(),this.wzcardnum=this._bytes.readInt(),this.upoint=this._bytes.readInt(),this.win_rate=this._bytes.readInt(),this.win_num=this._bytes.readInt(),this.max_winmoney=this._bytes.readInt(),this.lose_num=this._bytes.readInt(),this.max_cards=[];for(var e=this._bytes.readShort();e--;)this.max_cards.push(this._bytes.readByte());for(this.cannon_type=this._bytes.readInt(),this.cannon_level=this._bytes.readDouble(),this.cannon_level=parseFloat(this.cannon_level.toFixed(2)),this.score=this._bytes.readDouble(),this.score=parseFloat(this.score.toFixed(2)),this.money=this._bytes.readDouble(),this.money=parseFloat(this.money.toFixed(2)),this.cannons=[],e=this._bytes.readShort();e--;)this.cannons.push(this._bytes.readDouble());for(this.is_dummy=this._bytes.readBoolean(),this.fast_shoot=this._bytes.readBoolean(),this.lock_fish=this._bytes.readInt(),this.lock_angle=this._bytes.readInt(),this.is_shoot_stop=this._bytes.readBoolean(),this.ip=this._bytes.readUTF(),this.buttle_num=this._bytes.readInt(),this.rank=this._bytes.readInt(),this.jushu=this._bytes.readInt(),this.myprops=[],e=this._bytes.readShort();e--;){var t=new pk_S2C_MyPropsInfos(this._bytes);t.decode(),this.myprops.push(t)}},t.prototype.encode=function(){var e=new egret.ByteArray;e.writeInt(this.active_point),e.writeUTF(this.avatar_img),e.writeShort(this.avatar_no),e.writeDouble(this.bag_money),e.writeUTF(this.client_address),e.writeInt(this.exp),e.writeDouble(this.into_money),e.writeBoolean(this.is_staff),e.writeInt(this.keynum),e.writeShort(this.level),e.writeInt(this.lose_times),e.writeShort(this.mobile_type),e.writeUTF(this.nickname),e.writeByte(this.position),e.writeBoolean(this.ready),e.writeInt(this.uid),e.writeByte(this.vip_level),e.writeBoolean(this.waiting),e.writeInt(this.win_times),e.writeInt(this.winning),e.writeInt(this.wzcardnum),e.writeInt(this.upoint),e.writeInt(this.win_rate),e.writeInt(this.win_num),e.writeInt(this.max_winmoney),e.writeInt(this.lose_num);var t=this.max_cards.length;
for(e.writeShort(t);t--;)e.writeByte(this.max_cards[this.max_cards.length-1-t]);for(e.writeInt(this.cannon_type),e.writeDouble(this.cannon_level),e.writeDouble(this.score),e.writeDouble(this.money),t=this.cannons.length,e.writeShort(t);t--;)e.writeDouble(this.cannons[this.cannons.length-1-t]);for(e.writeBoolean(this.is_dummy),e.writeBoolean(this.fast_shoot),e.writeInt(this.lock_fish),e.writeInt(this.lock_angle),e.writeBoolean(this.is_shoot_stop),e.writeUTF(this.ip),e.writeInt(this.buttle_num),e.writeInt(this.rank),e.writeInt(this.jushu),t=this.myprops.length,e.writeShort(t);t--;)e.writeBytes(this.myprops[t].encode());return e},t}(BaseParse);__reflect(GameMemberinfovo.prototype,"GameMemberinfovo");var GameSitCS=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.decode=function(){this.tableId=this._bytes.readShort(),this.sitIndex=this._bytes.readByte()},t.prototype.encode=function(){var e=new egret.ByteArray;return e.writeShort(this.tableId),e.writeByte(this.sitIndex),e},t}(BaseParse);__reflect(GameSitCS.prototype,"GameSitCS");var get_accountSC=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.decode=function(){this.body=new accountvo(this._bytes),this.body.decode(),this.result=this._bytes.readUTF()},t.prototype.encode=function(){var e=new egret.ByteArray;return e.writeBytes(this.body.encode()),e.writeUTF(this.result),e},t}(BaseParse);__reflect(get_accountSC.prototype,"get_accountSC");var guest_loginCS=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.decode=function(){this.uid=this._bytes.readInt(),this.agent_id=this._bytes.readInt(),this.device_id=this._bytes.readUTF()},t.prototype.encode=function(){var e=new egret.ByteArray;return e.writeInt(this.uid),e.writeInt(this.agent_id),e.writeUTF(this.device_id),e},t}(BaseParse);__reflect(guest_loginCS.prototype,"guest_loginCS");var guest_loginSC=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.decode=function(){this.uid=this._bytes.readInt(),this.username=this._bytes.readUTF(),this.password=this._bytes.readUTF(),this.nickname=this._bytes.readUTF(),this.level=this._bytes.readInt(),this.vip_level=this._bytes.readInt(),this.avatar_no=this._bytes.readInt(),this.avatar_img=this._bytes.readUTF(),this.bag_money=this._bytes.readDouble(),this.bag_money=parseFloat(this.bag_money.toFixed(2)),this.bank_money=this._bytes.readDouble(),this.bank_money=parseFloat(this.bank_money.toFixed(2)),this.dollar_money=this.readInt64(this._bytes),this.result=this._bytes.readUTF()},t.prototype.encode=function(){var e=new egret.ByteArray;return e.writeInt(this.uid),e.writeUTF(this.username),e.writeUTF(this.password),e.writeUTF(this.nickname),e.writeInt(this.level),e.writeInt(this.vip_level),e.writeInt(this.avatar_no),e.writeUTF(this.avatar_img),e.writeDouble(this.bag_money),e.writeDouble(this.bank_money),e.writeBytes(this.writeInt64(this.dollar_money)),e.writeUTF(this.result),e},t}(BaseParse);__reflect(guest_loginSC.prototype,"guest_loginSC");var LoginFailedErrorSC=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.decode=function(){this.error=this._bytes.readShort(),this.body=this._bytes.readShort(),this.infos=[];for(var e=this._bytes.readShort();e--;)this.infos.push(this._bytes.readUTF())},t.prototype.encode=function(){var e=new egret.ByteArray;e.writeShort(this.error),e.writeShort(this.body);var t=this.infos.length;for(e.writeShort(t);t--;)e.writeUTF(this.infos[this.infos.length-1-t]);return e},t}(BaseParse);__reflect(LoginFailedErrorSC.prototype,"LoginFailedErrorSC");var OnSitdownSC=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.decode=function(){this.tableId=this._bytes.readShort(),this.uid=this._bytes.readInt(),this.headId=this._bytes.readShort(),this.pos=this._bytes.readByte(),this.result=this._bytes.readUTF()},t.prototype.encode=function(){var e=new egret.ByteArray;return e.writeShort(this.tableId),e.writeInt(this.uid),e.writeShort(this.headId),e.writeByte(this.pos),e.writeUTF(this.result),e},t}(BaseParse);__reflect(OnSitdownSC.prototype,"OnSitdownSC");var pk_S2C_AccountGame_defs=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.decode=function(){this.info=[];for(var e=this._bytes.readShort();e--;)this.info.push(this._bytes.readInt())},t.prototype.encode=function(){var e=new egret.ByteArray,t=this.info.length;for(e.writeShort(t);t--;)e.writeInt(this.info[this.info.length-1-t]);return e},t}(BaseParse);__reflect(pk_S2C_AccountGame_defs.prototype,"pk_S2C_AccountGame_defs");var pk_S2C_GameDataEffect=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.decode=function(){this.state_id=this._bytes.readInt(),this.state_type=this._bytes.readInt(),this.con_time=this._bytes.readDouble(),this.con_time=parseFloat(this.con_time.toFixed(2)),this.param_type=this._bytes.readInt()},t.prototype.encode=function(){var e=new egret.ByteArray;return e.writeInt(this.state_id),e.writeInt(this.state_type),e.writeDouble(this.con_time),e.writeInt(this.param_type),e},t}(BaseParse);__reflect(pk_S2C_GameDataEffect.prototype,"pk_S2C_GameDataEffect");var pk_S2C_GameDataMagic=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.decode=function(){this.magic_id=this._bytes.readInt(),this.magic_type=this._bytes.readInt(),this.param_types=[];for(var e=this._bytes.readShort();e--;)this.param_types.push(this._bytes.readInt())},t.prototype.encode=function(){var e=new egret.ByteArray;e.writeInt(this.magic_id),e.writeInt(this.magic_type);var t=this.param_types.length;for(e.writeShort(t);t--;)e.writeInt(this.param_types[this.param_types.length-1-t]);return e},t}(BaseParse);__reflect(pk_S2C_GameDataMagic.prototype,"pk_S2C_GameDataMagic");var pk_S2C_MyPropsInfos=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.decode=function(){this.pid=this._bytes.readInt(),this.num=this._bytes.readInt()},t.prototype.encode=function(){var e=new egret.ByteArray;return e.writeInt(this.pid),e.writeInt(this.num),e},t}(BaseParse);__reflect(pk_S2C_MyPropsInfos.prototype,"pk_S2C_MyPropsInfos");var pk_S2C_Top10Info=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.decode=function(){this.score=this._bytes.readDouble(),this.score=parseFloat(this.score.toFixed(2)),this.uid=this._bytes.readInt(),this.nickname=this._bytes.readUTF(),this.rank=this._bytes.readInt()},t.prototype.encode=function(){var e=new egret.ByteArray;return e.writeDouble(this.score),e.writeInt(this.uid),e.writeUTF(this.nickname),e.writeInt(this.rank),e},t}(BaseParse);__reflect(pk_S2C_Top10Info.prototype,"pk_S2C_Top10Info");var QueryRoomVo=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.decode=function(){this.rt=this._bytes.readByte(),this.gt=this._bytes.readShort(),this.maxv=this._bytes.readInt(),this.agentid=this._bytes.readInt(),this.minv=this._bytes.readInt(),this.currency=this._bytes.readUTF(),this.new_agent_id=this._bytes.readInt(),this.new_main_agent_id=this._bytes.readInt()},t.prototype.encode=function(){var e=new egret.ByteArray;return e.writeByte(this.rt),e.writeShort(this.gt),e.writeInt(this.maxv),e.writeInt(this.agentid),e.writeInt(this.minv),e.writeUTF(this.currency),e.writeInt(this.new_agent_id),e.writeInt(this.new_main_agent_id),e},t}(BaseParse);__reflect(QueryRoomVo.prototype,"QueryRoomVo");var ReadMessageInfo=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.decode=function(){this.id=this._bytes.readInt(),this.game_type=this._bytes.readInt(),this.timeout=this._bytes.readInt(),this.nickname=this._bytes.readUTF(),this.msg_type=this._bytes.readInt(),this.content=this._bytes.readUTF(),this.create_time=this._bytes.readInt()},t.prototype.encode=function(){var e=new egret.ByteArray;return e.writeInt(this.id),e.writeInt(this.game_type),e.writeInt(this.timeout),e.writeUTF(this.nickname),e.writeInt(this.msg_type),e.writeUTF(this.content),e.writeInt(this.create_time),e},t}(BaseParse);__reflect(ReadMessageInfo.prototype,"ReadMessageInfo");var ReadMessagesCS=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.decode=function(){this.game_type=this._bytes.readInt()},t.prototype.encode=function(){var e=new egret.ByteArray;return e.writeInt(this.game_type),e},t}(BaseParse);__reflect(ReadMessagesCS.prototype,"ReadMessagesCS");var ReadMessagesSC=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.decode=function(){this.info=[];for(var e=this._bytes.readShort();e--;){var t=new ReadMessageInfo(this._bytes);t.decode(),this.info.push(t)}this.result=this._bytes.readUTF()},t.prototype.encode=function(){var e=new egret.ByteArray,t=this.info.length;for(e.writeShort(t);t--;)e.writeBytes(this.info[t].encode());return e.writeUTF(this.result),e},t}(BaseParse);__reflect(ReadMessagesSC.prototype,"ReadMessagesSC");var RoomInfoListVo=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.decode=function(){this.rooms=[];for(var e=this._bytes.readShort();e--;){var t=new RoomInfoVo(this._bytes);t.decode(),this.rooms.push(t)}this.result=this._bytes.readUTF()},t.prototype.encode=function(){var e=new egret.ByteArray,t=this.rooms.length;for(e.writeShort(t);t--;)e.writeBytes(this.rooms[t].encode());return e.writeUTF(this.result),e},t}(BaseParse);__reflect(RoomInfoListVo.prototype,"RoomInfoListVo");var RoomInfoVo=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.decode=function(){this.room_id=this._bytes.readInt(),this.title=this._bytes.readUTF(),this.game_type=this._bytes.readShort(),this.room_type=this._bytes.readShort(),this.room_level=this._bytes.readShort(),this.unit_money=this._bytes.readDouble(),this.unit_money=parseFloat(this.unit_money.toFixed(2)),this.init_money=this._bytes.readDouble(),this.init_money=parseFloat(this.init_money.toFixed(2)),this.top_money=this._bytes.readDouble(),this.top_money=parseFloat(this.top_money.toFixed(2)),this.min_money=this._bytes.readDouble(),this.min_money=parseFloat(this.min_money.toFixed(2)),this.max_money=this._bytes.readDouble(),this.max_money=parseFloat(this.max_money.toFixed(2)),this.entry_fee=this._bytes.readInt(),this.max_online=this._bytes.readShort(),this.online_num=this._bytes.readShort(),this.is_active=this._bytes.readBoolean(),this.close_reason=this._bytes.readUTF(),this.remark=this._bytes.readUTF(),this.match_id=this._bytes.readInt(),this.create_time=this._bytes.readUTF(),this.end_time=this._bytes.readUTF(),this.star_level=this._bytes.readShort(),this.dbname=this._bytes.readUTF(),this.is_end=this._bytes.readBoolean(),this.tag=this._bytes.readUTF(),this.cmp=this._bytes.readUTF(),this.flex=this._bytes.readBoolean(),this.ver=this._bytes.readShort(),this.is_old=this._bytes.readBoolean(),this.socket_encode=this._bytes.readUTF(),this.common_top=this._bytes.readBoolean(),this.match_top=this._bytes.readBoolean(),this.cannon_rate=[];for(var e=this._bytes.readShort();e--;)this.cannon_rate.push(this._bytes.readDouble())},t.prototype.encode=function(){var e=new egret.ByteArray;e.writeInt(this.room_id),e.writeUTF(this.title),e.writeShort(this.game_type),e.writeShort(this.room_type),e.writeShort(this.room_level),e.writeDouble(this.unit_money),e.writeDouble(this.init_money),e.writeDouble(this.top_money),e.writeDouble(this.min_money),e.writeDouble(this.max_money),e.writeInt(this.entry_fee),e.writeShort(this.max_online),e.writeShort(this.online_num),e.writeBoolean(this.is_active),e.writeUTF(this.close_reason),e.writeUTF(this.remark),e.writeInt(this.match_id),e.writeUTF(this.create_time),e.writeUTF(this.end_time),e.writeShort(this.star_level),e.writeUTF(this.dbname),e.writeBoolean(this.is_end),e.writeUTF(this.tag),e.writeUTF(this.cmp),e.writeBoolean(this.flex),e.writeShort(this.ver),e.writeBoolean(this.is_old),e.writeUTF(this.socket_encode),e.writeBoolean(this.common_top),e.writeBoolean(this.match_top);var t=this.cannon_rate.length;for(e.writeShort(t);t--;)e.writeDouble(this.cannon_rate[this.cannon_rate.length-1-t]);return e},t}(BaseParse);__reflect(RoomInfoVo.prototype,"RoomInfoVo");var GameEvent;!function(e){var t=function(){function e(){}return e.NAME="ApplicationFacadeEvent",e.AWAKE_COMPLETE=e.NAME+"AwakeComplete",e.START_UP_COMPLETE=e.NAME+"StartUpComplete",e}();e.ApplicationFacadeEvent=t,__reflect(t.prototype,"GameEvent.ApplicationFacadeEvent")}(GameEvent||(GameEvent={}));var GameEvent;!function(e){var t=function(){function e(){}return e.NAME="BattleCaiShenFaFaFaViewMediatorEvent",e.ENABLE=e.NAME+"Enable",e.DISABLE=e.NAME+"Disable",e.ENABLE_COMPLETE=e.NAME+"EnableComplete",e.DISABLE_COMPLETE=e.NAME+"DisableComplete",e.READY_COMPLETE=e.NAME+"ReadyComplete",e}();e.BattleCaiShenFaFaFaViewMediatorEvent=t,__reflect(t.prototype,"GameEvent.BattleCaiShenFaFaFaViewMediatorEvent")}(GameEvent||(GameEvent={}));var GameEvent;!function(e){var t=function(){function e(){}return e.NAME="BattleSceneEvent",e.ENTER_FRAME=e.NAME+"EnterFrane",e.PLAY_BGM=e.NAME+"PlayBGM",e.SET_BACKGROUND=e.NAME+"SetBackground",e.SET_BACKGROUND_COMPLETE=e.NAME+"SetBackgroundComplete",e.CHANGE_BACKGROUND=e.NAME+"ChangeBackground",e.CHANGE_BACKGROUND_COMPLETE=e.NAME+"ChangeBackgroundComplete",e}();e.BattleSceneEvent=t,__reflect(t.prototype,"GameEvent.BattleSceneEvent")}(GameEvent||(GameEvent={}));var GameEvent;!function(e){var t=function(){function e(){}return e.NAME="BattleSpecialButtonViewMediatorEvent",e.SET_COMPLETE_AUTO=e.NAME+"SetCompleteAuto",e.SET_COMPLETE_LOCK=e.NAME+"SetCompleteLock",e}();e.BattleSpecialButtonViewMediatorEvent=t,__reflect(t.prototype,"GameEvent.BattleSpecialButtonViewMediatorEvent")}(GameEvent||(GameEvent={}));var GameEvent;!function(e){var t=function(){function e(){}return e.NAME="BattleWheelOfFortuneViewMediatorEvent",e.ENABLE=e.NAME+"Enable",e.DISABLE=e.NAME+"Disable",e.ENABLE_COMPLETE=e.NAME+"EnableComplete",e.DISABLE_COMPLETE=e.NAME+"DisableComplete",e.READY_COMPLETE=e.NAME+"ReadyComplete",e}();e.BattleWheelOfFortuneViewMediatorEvent=t,__reflect(t.prototype,"GameEvent.BattleWheelOfFortuneViewMediatorEvent")}(GameEvent||(GameEvent={}));var GameEvent;!function(e){var t=function(){function e(){}return e.NAME="BulletViewEntityArrayProxyEvent",e.MODIFY_COMPLETE_BULLET_ARRAY=e.NAME+"ModifyCompleteBulletArray",e}();e.BulletViewEntityArrayProxyEvent=t,__reflect(t.prototype,"GameEvent.BulletViewEntityArrayProxyEvent")}(GameEvent||(GameEvent={}));var GameEvent;!function(e){var t=function(){function e(){}return e.NAME="BulletViewObjectManagerProxyEvent",e.MODIFY_COMPLETE_GENERATOR_MAP=e.NAME+"ModifyCompleteGeneratorMap",e.MODIFY_COMPLETE_OBJECT_MAP=e.NAME+"ModifyCompleteObjectMap",e.CHANGE_COMPLETE_STATE_DIE=e.NAME+"ChangeCompleteStateDie",e.CHANGE_COMPLETE_STATE_HIT=e.NAME+"ChangeCompleteStateHit",e.CHANGE_COMPLETE_STATE_IDLE=e.NAME+"ChangeCompleteStateIdle",e.CHANGE_COMPLETE_STATE_MOVE=e.NAME+"ChangeCompleteStateMove",e.CHANGE_COMPLETE_STATE_NONE=e.NAME+"ChangeCompleteStateNone",e}();e.BulletViewObjectManagerProxyEvent=t,__reflect(t.prototype,"GameEvent.BulletViewObjectManagerProxyEvent")}(GameEvent||(GameEvent={}));var GameEvent;!function(e){var t=function(){function e(){}return e.NAME="CoinViewObjectManagerProxyEvent",e.MODIFY_COMPLETE_GENERATOR_MAP=e.NAME+"ModifyCompleteGeneratorMap",e.MODIFY_COMPLETE_OBJECT_MAP=e.NAME+"ModifyCompleteObjectMap",e}();e.CoinViewObjectManagerProxyEvent=t,__reflect(t.prototype,"GameEvent.CoinViewObjectManagerProxyEvent")}(GameEvent||(GameEvent={}));var GameEvent;!function(e){var t=function(){function e(){}return e.NAME="ControlPanelViewMediatorEvent",e.ENABLE_COMPLETE_TEST_FISH_TABLE=e.NAME+"EnableCompleteTestFish",e.DISABLE_COMPLETE_TEST_FISH_TABLE=e.NAME+"DisableCompleteTestFish",e.ENABLE_COMPLETE_TEST_FC_TABLE=e.NAME+"EnableCompleteTestFC",e.DISABLE_COMPLETE_TEST_FC_TABLE=e.NAME+"DisableCompleteTestFC",e.ENABLE_COMPLETE_LOCK_FPS_SPEED_OFFSET=e.NAME+"EnableCompleteLockSpeedFPS",e.DISABLE_COMPLETE_LOCK_FPS_SPEED_OFFSET=e.NAME+"DisableCompleteLockSpeedFPS",e}();e.ControlPanelViewMediatorEvent=t,__reflect(t.prototype,"GameEvent.ControlPanelViewMediatorEvent")}(GameEvent||(GameEvent={}));var GameEvent;!function(e){var t=function(){function t(){}return t.NAME="DebuggerEvent",t.REGIST_DEBUGGER_VIEW_STACK_MEDIATORS_COMPLETE=t.NAME+"RegistDebuggerViewStackMediatorsComplete",t.ENABLE_DEBUGGER_VIEW_STACK=t.NAME+"EnableDebuggerViewStack",t.DISABLE_DEBUGGER_VIEW_STACK=t.NAME+"DisableDebuggerViewStack",t.ENABLE_GOLDFINGER_VIEW=t.NAME+"EnableGoldfingerView",t.DISABLE_GOLDFINGER_VIEW=t.NAME+"DisableGoldfingerView",t.SHOW_GOLDFINGER_VIEW=""+t.NAME+e.DebuggerViewEventNamingRules.SHOW+"Goldfinger"+e.DebuggerViewEventNamingRules.VIEW,t.HIDE_GOLDFINGER_VIEW=""+t.NAME+e.DebuggerViewEventNamingRules.HIDE+"Goldfinger"+e.DebuggerViewEventNamingRules.VIEW,t.SET_ITEM_GOLDFINGER_VIEW=t.NAME+"SetItemGoldfingerView",t.SHOW_LOGMONITOR_VIEW=""+t.NAME+e.DebuggerViewEventNamingRules.SHOW+"LogMonitor"+e.DebuggerViewEventNamingRules.VIEW,t.HIDE_LOGMONITOR_VIEW=""+t.NAME+e.DebuggerViewEventNamingRules.HIDE+"LogMonitor"+e.DebuggerViewEventNamingRules.VIEW,t.SET_ITEM_LOGMONITOR_VIEW=t.NAME+"SetItemLogMonitorView",t.TAP_ITEM_LOGMONITOR_VIEW=t.NAME+"TapItemLogMonitorView",t.SHOW_GROUPLIST_VIEW=""+t.NAME+e.DebuggerViewEventNamingRules.SHOW+"GroupList"+e.DebuggerViewEventNamingRules.VIEW,t.HIDE_GROUPLIST_VIEW=""+t.NAME+e.DebuggerViewEventNamingRules.HIDE+"GroupList"+e.DebuggerViewEventNamingRules.VIEW,t.SET_ITEM_GROUPLIST_VIEW=t.NAME+"SetItemGroupListView",t.SHOW_CONTROLPANEL_VIEW=""+t.NAME+e.DebuggerViewEventNamingRules.SHOW+"ControlPanel"+e.DebuggerViewEventNamingRules.VIEW,t.HIDE_CONTROLPANEL_VIEW=""+t.NAME+e.DebuggerViewEventNamingRules.HIDE+"ControlPanel"+e.DebuggerViewEventNamingRules.VIEW,t.SET_ITEM_CONTROLPANEL_VIEW=t.NAME+"SetItemControlPanelView",t}();e.DebuggerEvent=t,__reflect(t.prototype,"GameEvent.DebuggerEvent")}(GameEvent||(GameEvent={}));var AutomaticBazookaCoinFXData=function(){function e(e,t,o,i,n,a,r){this.beginTargetObject=e,this.endTargetObject=t,this.creditTargetObject=o,this.index=i,this.totalCount=n,this.win=a,this.self=r}return e}();__reflect(AutomaticBazookaCoinFXData.prototype,"AutomaticBazookaCoinFXData");var GameEvent;!function(e){var t=function(){function e(){}return e.NAME="EffectViewObjectManagerProxyEvent",e.MODIFY_COMPLETE_GENERATOR_MAP=e.NAME+"ModifyCompleteGeneratorMap",e.MODIFY_COMPLETE_OBJECT_MAP=e.NAME+"ModifyCompleteObjectMap",e}();e.EffectViewObjectManagerProxyEvent=t,__reflect(t.prototype,"GameEvent.EffectViewObjectManagerProxyEvent")}(GameEvent||(GameEvent={}));var GameEvent;!function(e){var t=function(){function e(){}return e.NAME="FishViewObjectManagerProxyEvent",e.STONE=e.NAME+"Stone",e.UNSTONE=e.NAME+"UnStone",e.MODIFY_COMPLETE_GENERATOR_MAP=e.NAME+"ModifyCompleteGeneratorMap",e.MODIFY_COMPLETE_OBJECT_MAP=e.NAME+"ModifyCompleteObjectMap",e.MODIFY_COMPLETE_GO_OUT_FISH=e.NAME+"ModifyCompleteGoOutFish",e.MODIFY_COMPLETE_GO_IN_FISH=e.NAME+"ModifyCompleteGoInFish",e.MODIFY_COMPLETE_MOVE_FISH=e.NAME+"ModifyCompleteMoveFish",e.CHANGE_COMPLETE_STATE_DIE=e.NAME+"ChangeCompleteStateDie",e.CHANGE_COMPLETE_STATE_HIT=e.NAME+"ChangeCompleteStateHit",e.CHANGE_COMPLETE_STATE_IDLE=e.NAME+"ChangeCompleteStateIdle",e.CHANGE_COMPLETE_STATE_MOVE=e.NAME+"ChangeCompleteStateMove",e.CHANGE_COMPLETE_STATE_NONE=e.NAME+"ChangeCompleteStateNone",e.CHANGE_COMPLETE_STATE_STONE_BEGIN=e.NAME+"ChangeCompleteStateStoneBegin",e.CHANGE_COMPLETE_STATE_STONE_MOVE=e.NAME+"ChangeCompleteStateStoneMove",e.CHANGE_COMPLETE_STATE_STONE_END=e.NAME+"ChangeCompleteStateStoneEnd",e}();e.FishViewObjectManagerProxyEvent=t,__reflect(t.prototype,"GameEvent.FishViewObjectManagerProxyEvent")}(GameEvent||(GameEvent={}));var GameEvent;!function(e){var t=function(){function e(){}return e.NAME="FlowControlProxyEvent",e.ENABLE=e.NAME+"Enable",e.DISABLE=e.NAME+"Disable",e.MODIFY_FC_INDEX_VALUE=e.NAME+"ModifyFCIDValue",e.MODIFY_FC_LOG=e.NAME+"Log",e.MODIFY_TURN_ID_BY_LOGIN_VALUE=e.NAME+"ModifyTurnIDByLoinValue",e.MODIFY_TURN_ID_BY_CREATE_FC_ARRAY_VALUE=e.NAME+"ModifyTurnIDByCreateFCArrayValue",e.MODIFY_TURN_ID_BY_SYNC_VALUE=e.NAME+"ModifyTurnIDBySyncValue",e}();e.FlowControlProxyEvent=t,__reflect(t.prototype,"GameEvent.FlowControlProxyEvent")}(GameEvent||(GameEvent={}));var GameEvent;!function(e){var t=function(){function e(){}return e.NAME="GameDataProxyEvent",e.MODIFY_COMPLETE_GAME_SCENE_VALUE=e.NAME+"ModifyCompleteGameSceneValue",e.SET_LOCK_FIRE_TARGET=e.NAME+"SetLockFireTarget",e.REMOVE_LOCK_FIRE_TARGET=e.NAME+"RemoveLockFireTarget",e.SET_AUTO_FIRE_TARGET=e.NAME+"SetAutoFireTarget",e.REMOVE_AUTO_FIRE_TARGET=e.NAME+"RemoveAutoFireTarget",e.ON_SET_EVENT_BTN=e.NAME+"OnSetEventBtn",e.ON_SET_EVENT_BANNER=e.NAME+"OnSetEventBanner",e.ON_EVENT_BTN_CLICK=e.NAME+"OnEventBtnClick",e.GOTO_EVENT_PAGE=e.NAME+"GotoEventPage",e}();e.GameDataProxyEvent=t,__reflect(t.prototype,"GameEvent.GameDataProxyEvent")}(GameEvent||(GameEvent={}));var GameEvent;!function(e){var t=function(){function e(){}return e.NAME="GoldfingerViewMediatorEvent",e.ENABLE_COMPLTET_AUTO_CREATE_FISH=e.NAME+"EnableCompleteAutoCreateFish",e.DISABLE_COMPLTET_AUTO_CREATE_FISH=e.NAME+"DisableCompleteAutoCreateFish",e}();e.GoldfingerViewMediatorEvent=t,__reflect(t.prototype,"GameEvent.GoldfingerViewMediatorEvent")}(GameEvent||(GameEvent={}));var GameEvent;!function(e){var t=function(){function e(){}return e.NAME="GuideEvent",e.TOUCH_BEGIN=e.NAME+"touchBegin",e}();e.GuideEvent=t,__reflect(t.prototype,"GameEvent.GuideEvent")}(GameEvent||(GameEvent={}));var GameEvent;!function(e){var t=function(){function e(){}return e.NAME="GuideViewMediatorEvent",e.ENABLE=e.NAME+"Enable",e.DISABLE=e.NAME+"Disable",e}();e.GuideViewMediatorEvent=t,__reflect(t.prototype,"GameEvent.GuideViewMediatorEvent")}(GameEvent||(GameEvent={}));var GameEvent;!function(e){var t=function(){function e(){}return e.NAME="HelpViewMediatorEvent",e.ENABLE=e.NAME+"Enable",e.DISABLE=e.NAME+"Disable",e}();e.HelpViewMediatorEvent=t,__reflect(t.prototype,"GameEvent.HelpViewMediatorEvent")}(GameEvent||(GameEvent={}));var GameEvent;!function(e){var t=function(){function e(){}return e.NAME="MedalsViewObjectManagerProxyEvent",e.MODIFY_COMPLETE_GENERATOR_MAP=e.NAME+"ModifyCompleteGeneratorMap",e.MODIFY_COMPLETE_OBJECT_MAP=e.NAME+"ModifyCompleteObjectMap",e}();e.MedalsViewObjectManagerProxyEvent=t,__reflect(t.prototype,"GameEvent.MedalsViewObjectManagerProxyEvent")}(GameEvent||(GameEvent={}));var GameEvent;!function(e){var t=function(){function e(){}return e.NAME="OptionMenuViewMediatorEvent",e.ENABLE=e.NAME+"Enable",e.DISABLE=e.NAME+"Disable",e}();e.OptionMenuViewMediatorEvent=t,__reflect(t.prototype,"GameEvent.OptionMenuViewMediatorEvent")}(GameEvent||(GameEvent={}));var GameEvent;!function(e){var t=function(){function e(){}return e.NAME="PlayerViewEntityArrayProxyEvent",e.MODIFY_COMPLETE_PLAYER_ARRAY=e.NAME+"ModifyCompletePlayerArray",e.CLEAR_COMPLETE_PLAYER_ARRAY=e.NAME+"ClearCompletePlayerArray",e.MODIFY_COMPLETE_CREDIT_VALUE=e.NAME+"ModifyCompleteCreditValue",e.MODIFY_COMPLETE_BET_VALUE=e.NAME+"ModifyCompleteBetValue",e.MODIFY_COMPLETE_FORT=e.NAME+"ModifyCompleteFort",e.MODIFY_COMPLETE_FORT_COUNT=e.NAME+"ModifyCompleteFortCount",e.FIRE_BULLET=e.NAME+"FireBullet",e.ADD_COMPLETE_PLAYER=e.NAME+"AddCompletePlayer",e.REMOVE_COMPLETE_PLAYER=e.NAME+"RemoveCompletePlayer",e}();e.PlayerViewEntityArrayProxyEvent=t,__reflect(t.prototype,"GameEvent.PlayerViewEntityArrayProxyEvent")}(GameEvent||(GameEvent={}));var GameEvent;!function(e){var t=function(){function e(){}return e.NAME="ProtocolProxyEvent",e.DISCONNECT_SMARTFOX=e.NAME+"DisconnectSmartfox",e.MODIFY_COMPLETE_SC_LOGIN_VALUE=e.NAME+"ModifyCompleteSCLoginValue",e.MODIFY_COMPLETE_SC_LOBBY_JOIN_VALUE=e.NAME+"ModifyCompleteSCLobbyJoinValue",e.MODIFY_COMPLETE_SC_LOBBY_INFO_VALUE=e.NAME+"ModifyCompleteSCLobbyInfoValue",e.MODIFY_COMPLETE_SC_USER_INFO_VALUE=e.NAME+"ModifyCompleteSCUserInfoValue",e.MODIFY_COMPLETE_SC_ROOM_JOIN_VALUE=e.NAME+"ModifyCompleteSCRoomJoinValue",e.MODIFY_COMPLETE_SC_ROOM_LOGIN_VALUE=e.NAME+'"ModifyCompleteSCRoomLoginValue',e.MODIFY_COMPLETE_CS_QUICK_LOGIN_VALUE=e.NAME+"ModifyCompleteCSQuickLoginValue",e.MODIFY_COMPLETE_SC_QUICK_LOGIN_VALUE=e.NAME+'"ModifyCompleteSCQuickLoginValue',e.MODIFY_COMPLETE_CS_ROOM_LOGOUT_VALUE=e.NAME+"ModifyCompleteCSRoomLogoutValue",e.MODIFY_COMPLETE_SC_ROOM_LOGOUT_VALUE=e.NAME+"ModifyCompleteSCRoomLogoutValue",e.MODIFY_COMPLETE_SC_PLAYER_ROOM_LOGIN_VALUE=e.NAME+"ModifyCompleteSCPlayerRoomLoginValue",e.MODIFY_COMPLETE_SC_PLAYER_ROOM_LOGOUT_VALUE=e.NAME+"ModifyCompleteSCPlayerRoomLogoutValue",e.MODIFY_COMPLETE_SC_PLAYER_ROOM_LOGIN_ARRAY=e.NAME+"ModifyCompleteSCPlayerRoomLoginArray",e.MODIFY_COMPLETE_SC_TURN_VALUE=e.NAME+"ModifyCompleteSCTurnValue",e.MODIFY_COMPLETE_CS_FIRE_VALUE=e.NAME+"ModifyCompleteCSFireValue",e.MODIFY_COMPLETE_SC_FIRE_VALUE=e.NAME+"ModifyCompleteSCFireValue",e.MODIFY_COMPLETE_CS_HIT_VALUE=e.NAME+"ModifyCompleteCSHitValue",e.MODIFY_COMPLETE_SC_SYNC_VALUE=e.NAME+"ModifyCompleteSCSyncValue",e.MODIFY_COMPLETE_CHANGE_BALANCE=e.NAME+"ModifyChangeBalanceValue",e.MODIFY_COMPLETE_BROADCAST=e.NAME+"ModifyCompleteBroadCast",e}();e.ProtocolProxyEvent=t,__reflect(t.prototype,"GameEvent.ProtocolProxyEvent")}(GameEvent||(GameEvent={}));var GameEvent;!function(e){var t=function(){function e(){}return e.NAME="ResourceProxyEvent",e.LOAD_COMPLETE_PRELOAD_GROUP=e.NAME+"LoadCompletePreloadGroup",e.LOAD_COMPLETE_NON_PRELOAD_GROUP=e.NAME+"LoadCompleteNonPreloadGroup",e.LOAD_PROGRESS_NON_PRELOAD_GROUP=e.NAME+"LoadProgressNonPreloadGroup",e}();e.ResourceProxyEvent=t,__reflect(t.prototype,"GameEvent.ResourceProxyEvent")}(GameEvent||(GameEvent={}));var GameEvent;!function(e){var t=function(){function t(){}return t.NAME="SceneEvent",t.REGIST_SCENE_VIEW_STACK_MEDIATORS_COMPLETE=t.NAME+"RegistSceneViewStackMediatorsComplete",t.LOBBY_TOUCH_BEGIN=t.NAME+"LobbyTouchBegin",t.BATTLE_TOUCH_BEGIN=t.NAME+"BattleTouchBegin",t.BATTLE_TOUCH_MOVE=t.NAME+"BattleTouchMove",t.BATTLE_TOUCH_END=t.NAME+"BattleTouchEnd",t.REGIST_LOADING_SCENE_MEDIATORS_COMPLETE=t.NAME+"RegistLoadingSceneMediatorsComplete",t.REGIST_LOBBY_SCENE_MEDIATORS_COMPLETE=t.NAME+"RegistLobbySceneMediatorsComplete",t.REGIST_TRANSITION_SCENE_MEDIATORS_COMPLETE=t.NAME+"RegistTransitionSceneMediatorsComplete",t.REGIST_BATTLE_SCENE_MEDIATORS_COMPLETE=t.NAME+"RegistBattleSceneMediatorsComplete",t.LOAD_LOADING_SCENE=""+t.NAME+e.SceneEventNamingRules.LOAD+"Loading"+e.SceneEventNamingRules.SCENE,t.UNLOAD_LOADING_SCENE=""+t.NAME+e.SceneEventNamingRules.UNLOAD+"Loading"+e.SceneEventNamingRules.SCENE,t.LOAD_LOBBY_SCENE=""+t.NAME+e.SceneEventNamingRules.LOAD+"Lobby"+e.SceneEventNamingRules.SCENE,t.UNLOAD_LOBBY_SCENE=""+t.NAME+e.SceneEventNamingRules.UNLOAD+"Lobby"+e.SceneEventNamingRules.SCENE,t.LOAD_TRANSITION_SCENE=""+t.NAME+e.SceneEventNamingRules.LOAD+"Transition"+e.SceneEventNamingRules.SCENE,t.UNLOAD_TRANSITION_SCENE=""+t.NAME+e.SceneEventNamingRules.UNLOAD+"Transition"+e.SceneEventNamingRules.SCENE,t.LOAD_BATTLE_SCENE=""+t.NAME+e.SceneEventNamingRules.LOAD+"Battle"+e.SceneEventNamingRules.SCENE,t.UNLOAD_BATTLE_SCENE=""+t.NAME+e.SceneEventNamingRules.UNLOAD+"Battle"+e.SceneEventNamingRules.SCENE,t.SHOW_LOADING_SCENE=""+t.NAME+e.SceneEventNamingRules.SHOW+"Loading"+e.SceneEventNamingRules.SCENE,t.HIDE_LOADING_SCENE=""+t.NAME+e.SceneEventNamingRules.HIDE+"Loading"+e.SceneEventNamingRules.SCENE,t.SHOW_LOBBY_SCENE=""+t.NAME+e.SceneEventNamingRules.SHOW+"Lobby"+e.SceneEventNamingRules.SCENE,t.HIDE_LOBBY_SCENE=""+t.NAME+e.SceneEventNamingRules.HIDE+"Lobby"+e.SceneEventNamingRules.SCENE,t.SHOW_TRANSITION_SCENE=""+t.NAME+e.SceneEventNamingRules.SHOW+"Transition"+e.SceneEventNamingRules.SCENE,t.SHOW_TRANSITION_SCENE_LOADING=""+t.NAME+e.SceneEventNamingRules.SHOW+"TransitionLoading"+e.SceneEventNamingRules.SCENE,t.HIDE_TRANSITION_SCENE=""+t.NAME+e.SceneEventNamingRules.HIDE+"Transition"+e.SceneEventNamingRules.SCENE,t.SHOW_BATTLE_SCENE=""+t.NAME+e.SceneEventNamingRules.SHOW+"Battle"+e.SceneEventNamingRules.SCENE,t.HIDE_BATTLE_SCENE=""+t.NAME+e.SceneEventNamingRules.HIDE+"Battle"+e.SceneEventNamingRules.SCENE,t.FORCE_HIDE_TRANSITION=t.NAME+"force"+e.SceneEventNamingRules.HIDE+"Transition"+e.SceneEventNamingRules.SCENE,t.HIDE_CURSOR=""+t.NAME+e.SceneEventNamingRules.HIDE+"Cursor"+e.SceneEventNamingRules.SCENE,t}();e.SceneEvent=t,__reflect(t.prototype,"GameEvent.SceneEvent")}(GameEvent||(GameEvent={}));var ApplicationFacade=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._logScope="[ApplicationFacade]",t._isLog=!1,t}return __extends(t,e),t.getInstance=function(){return null==this.instance&&(this.instance=new t),this.instance},t.prototype.initialize=function(e){Logger.log("initialize",this),this._view=e,this.registerProxy(new BulletViewObjectManagerProxy(BulletViewObjectManagerProxy.NAME)),this.registerProxy(new CoinViewObjectManagerProxy(CoinViewObjectManagerProxy.NAME)),this.registerProxy(new EffectViewObjectManagerProxy(EffectViewObjectManagerProxy.NAME)),this.registerProxy(new FishViewObjectManagerProxy(FishViewObjectManagerProxy.NAME)),this.registerProxy(new ScoreViewObjectManagerProxy(ScoreViewObjectManagerProxy.NAME)),this.registerProxy(new MedalsViewObjectManagerProxy(MedalsViewObjectManagerProxy.NAME)),this.registerProxy(new SoundObjectManagerProxy(SoundObjectManagerProxy.NAME)),this.registerProxy(new SpecialEffectViewObjectManagerProxy(SpecialEffectViewObjectManagerProxy.NAME)),this.registerProxy(new BulletViewEntityArrayProxy(BulletViewEntityArrayProxy.NAME)),this.registerProxy(new ColliderProxy(ColliderProxy.NAME)),this.registerProxy(new FlowControlProxy(FlowControlProxy.NAME)),this.registerProxy(new GameDataProxy(GameDataProxy.NAME)),this.registerProxy(new GameSettingProxy(GameSettingProxy.NAME)),this.registerProxy(new PlayerViewEntityArrayProxy(PlayerViewEntityArrayProxy.NAME)),this.registerProxy(new ProtocolProxy(ProtocolProxy.NAME)),this.registerProxy(new ResourceProxy(ResourceProxy.NAME)),window.fix?this.registerProxy(new Fix.SmartFoxProxy(SmartFoxProxy.NAME)):this.registerProxy(new SmartFoxProxy(SmartFoxProxy.NAME)),this.registerProxy(new SystemProxy(SystemProxy.NAME)),this.registerProxy(new TableEntityProxy(TableEntityProxy.NAME)),this.registerProxy(new WebBridgeProxy(WebBridgeProxy.NAME)),this.registerMediator(new ProxyAdapterMediator(ProxyAdapterMediator.NAME,this._view))},t.prototype.awake=function(){Logger.log("awake",this),this.registerMediator(new BulletViewObjectManagerProxyAdapterMediator(BulletViewObjectManagerProxyAdapterMediator.NAME,this._view)),this.registerMediator(new CoinViewObjectManagerProxyAdapterMediator(CoinViewObjectManagerProxyAdapterMediator.NAME,this._view)),this.registerMediator(new FishViewObjectManagerProxyAdapterMediator(FishViewObjectManagerProxyAdapterMediator.NAME,this._view)),this.registerMediator(new MedalsViewObjectManagerProxyAdapterMediator(MedalsViewObjectManagerProxyAdapterMediator.NAME,this._view)),this.registerMediator(new ScoreViewObjectManagerProxyAdapterMediator(ScoreViewObjectManagerProxyAdapterMediator.NAME,this._view)),this.registerMediator(new SoundObjectManagerProxyAdapterMediator(SoundObjectManagerProxyAdapterMediator.NAME,this._view)),this.registerMediator(new SpecialEffectViewObjectManagerProxyAdapterMediator(SpecialEffectViewObjectManagerProxyAdapterMediator.NAME,this._view)),this.registerMediator(new BulletViewEntityProxyAdapterMediator(BulletViewEntityProxyAdapterMediator.NAME,this._view)),this.registerMediator(new FlowControlProxyAdapterMediator(FlowControlProxyAdapterMediator.NAME,this._view)),this.registerMediator(new GameDataProxyAdapterMediator(GameDataProxyAdapterMediator.NAME,this._view)),this.registerMediator(new PlayerViewEntityProxyAdapterMediator(PlayerViewEntityProxyAdapterMediator.NAME,this._view)),this.registerMediator(new SmartfoxProxyAdapterMediator(SmartfoxProxyAdapterMediator.NAME,this._view)),this.registerCommand(RegistSceneViewStackMediatorsCommand.NAME,RegistSceneViewStackMediatorsCommand),this.registerCommand(RegistBattleSceneMediatorsCommand.NAME,RegistBattleSceneMediatorsCommand),this.registerCommand(RegistLobbySceneMediatorsCommand.NAME,RegistLobbySceneMediatorsCommand),this.registerCommand(RegistTransitionSceneMediatorsCommand.NAME,RegistTransitionSceneMediatorsCommand),this.registerMediator(new SceneViewStackMediator(SceneViewStackMediator.NAME,this._view)),this.registerCommand(RegistDebuggerViewStackMediatorsCommand.NAME,RegistDebuggerViewStackMediatorsCommand),this.registerMediator(new DebugSkinViewMediator(DebugSkinViewMediator.NAME,this._view)),this.registerMediator(new OptionMenuViewMediator(OptionMenuViewMediator.NAME,this._view)),this.registerMediator(new HelpViewMediator(HelpViewMediator.NAME,this._view)),this.registerMediator(new GuideViewMediator(GuideViewMediator.NAME,this._view)),this.registerMediator(new LoadingViewMediator(LoadingViewMediator.NAME,this._view)),this.registerCommand(ChangeDebuggerViewCommand.NAME,ChangeDebuggerViewCommand),this.registerCommand(ParserProtocolCommand.NAME,ParserProtocolCommand),this.registerCommand(GeneratorProtocolCommand.NAME,GeneratorProtocolCommand),this.registerCommand(LoadGameSceneCommand.NAME,LoadGameSceneCommand),this.registerCommand(ShowGameSceneCommand.NAME,ShowGameSceneCommand),this.registerCommand(GeneratePathCommand.NAME,GeneratePathCommand),this.registerCommand(ParserMessageCommand.NAME,ParserMessageCommand),this.registerCommand(GSReconnectCommand.NAME,GSReconnectCommand),this.registerCommand(CheckReconnectCommand.NAME,CheckReconnectCommand),this.sendNotification(GameEvent.ApplicationFacadeEvent.AWAKE_COMPLETE)
},t.prototype.startUp=function(){Logger.log("startUp",this),this.sendNotification(GameEvent.ApplicationFacadeEvent.START_UP_COMPLETE)},t.prototype.getView=function(){return this._view},t}(puremvc.Facade);__reflect(ApplicationFacade.prototype,"ApplicationFacade",["puremvc.IFacade","puremvc.INotifier","ILogger"]);var GameEvent;!function(e){var t=function(){function e(){}return e.NAME="ScoreViewObjectManagerProxyEvent",e.MODIFY_COMPLETE_GENERATOR_MAP=e.NAME+"ModifyCompleteGeneratorMap",e.MODIFY_COMPLETE_OBJECT_MAP=e.NAME+"ModifyCompleteObjectMap",e}();e.ScoreViewObjectManagerProxyEvent=t,__reflect(t.prototype,"GameEvent.ScoreViewObjectManagerProxyEvent")}(GameEvent||(GameEvent={}));var GameEvent;!function(e){var t=function(){function e(){}return e.SFS_EVENT_LOGIN="gameLoginReturn",e.SFS_EVENT_CHANGE_BALANCE="gs.changeBalance",e.SFS_EVENT_IDLE_REMIND="gs.IDLE_REMIND",e.SFS_ACCOUNT_STATUS="gs.SC_ACCOUNT_STATUS",e.SFS_KEEP_ALIVE_RESPONSE="heartbeat",e}();e.SFSExtEvent=t,__reflect(t.prototype,"GameEvent.SFSExtEvent")}(GameEvent||(GameEvent={}));var GameEvent;!function(e){var t=function(){function e(){}return e.NAME="SmartFoxProxyEvent",e.PING_PONG=e.NAME+"PingPong",e}();e.SmartFoxProxyEvent=t,__reflect(t.prototype,"GameEvent.SmartFoxProxyEvent")}(GameEvent||(GameEvent={}));var GameEvent;!function(e){var t=function(){function e(){}return e.NAME="SoundObjectManagerProxyEvent",e.MODIFY_COMPLETE_GENERATOR_MAP=e.NAME+"ModifyCompleteGeneratorMap",e.MODIFY_COMPLETE_OBJECT_MAP=e.NAME+"ModifyCompleteObjectMap",e.MODIFY_COMPLETE_SOUND_VOLUME_VALUE=e.NAME+"ModifyCompleteSoundVolumeValue",e.MODIFY_COMPLETE_SOUND_ON_VALUE=e.NAME+"ModifyCompleteSoundOnValue",e}();e.SoundObjectManagerProxyEvent=t,__reflect(t.prototype,"GameEvent.SoundObjectManagerProxyEvent")}(GameEvent||(GameEvent={}));var GameEvent;!function(e){var t=function(){function e(){}return e.NAME="SpecialEffectViewObjectManagerProxyEvent",e.MODIFY_COMPLETE_GENERATOR_MAP=e.NAME+"ModifyCompleteGeneratorMap",e.MODIFY_COMPLETE_OBJECT_MAP=e.NAME+"ModifyCompleteObjectMap",e}();e.SpecialEffectViewObjectManagerProxyEvent=t,__reflect(t.prototype,"GameEvent.SpecialEffectViewObjectManagerProxyEvent")}(GameEvent||(GameEvent={}));var GameEvent;!function(e){var t=function(){function e(){}return e.NAME="SystemProxyEvent",e.MODIFY_COMPLETE_IS_MOBLIE_VALUE=e.NAME+"ModifyCompleteIsMobileValue",e.MODIFY_COMPLETE_LANGUAGE_VALUE=e.NAME+"ModifyCompleteLanguageValue",e.MODIFY_COMPLETE_OS_VALUE=e.NAME+"ModifyCompleteOSValue",e.MODIFY_COMPLETE_RUNTIME_TYPE_VALUE=e.NAME+"ModifyCompleteRuntimeTypeValue",e}();e.SystemProxyEvent=t,__reflect(t.prototype,"GameEvent.SystemProxyEvent")}(GameEvent||(GameEvent={}));var GameName;!function(e){var t=function(){function e(){}return e}();e.BulletType=t,__reflect(t.prototype,"GameName.BulletType")}(GameName||(GameName={}));var GameName;!function(e){var t=function(){function e(){}return e.GoldCredit="GP_Credit_Num1_fnt",e.SilverCredit="GP_Credit_Num2_fnt",e.RedEnvelopeNumSelect="GP_LD_RedEnvelope_Num1_fnt",e.RedEnvelopeNumNoSelect="GP_LD_RedEnvelope_Num2_fnt",e.AutomaticBazookCount="GP_Credit_Num3_fnt",e}();e.FontName=t,__reflect(t.prototype,"GameName.FontName")}(GameName||(GameName={}));var GameName;!function(e){var t=function(){function e(){}return e.SS_Lobby="SS_Lobby",e.AnimationAtlas01="SS_Animation_Atlas_01",e.AnimationAtlas02="SS_Animation_Atlas_02",e.AnimationAtlas03="SS_Animation_Atlas_03",e.SS_TST_Wave2="SS_TST_Wave2",e}();e.JsonName=t,__reflect(t.prototype,"GameName.JsonName")}(GameName||(GameName={}));var GameName;!function(e){var t=function(){function e(){}return e.CN="cn",e.EN="en",e.TW="tw",e.TH="th",e}();e.LanguageName=t,__reflect(t.prototype,"GameName.LanguageName")}(GameName||(GameName={}));var GameName;!function(e){var t=function(){function e(){}return e.NetWorkSignal="SS_Single",e.GAME_LOADING="Game_Loading",e.Touch="SS_Touch",e.SS_TST_Wave2="SS_TST_Wave2",e.CaiShenFaFaFaDoor="SS_LD_Background",e.CaiShenFaFaFaRedEnvelope="SS_LD_RedEnvelope",e.CaiShenFaFaFaRedEnvelopeSelect="SS_LD_RedEnvelope_01",e.CaiShenFaFaFaRedEnvelopeNoSelect="SS_LD_RedEnvelope_02",e.CaiShenFaFaFaDoorFX="SS_LD_FX_01",e.CaiShenFaFaFaWinFX="SS_LD_FX_02",e.SpecialButtleFX="SS_BTN_OnParticle",e.WheelOfFortuneBoardFX1="SS_Roulette_Board_01",e.WheelOfFortuneBoardFX2="SS_Roulette_Board_02",e.WheelOfFortuneRouletteFX="SS_Roulette_FX",e}();e.MCName=t,__reflect(t.prototype,"GameName.MCName")}(GameName||(GameName={}));var GameName;!function(e){var t=function(){function e(){}return e.NORMAL="NORMAL",e.SF_01="SF_01",e.SF_02="SF_02",e.SF_03="SF_03",e}();e.SpecialFeatureName=t,__reflect(t.prototype,"GameName.SpecialFeatureName")}(GameName||(GameName={}));var GameName;!function(e){var t=function(){function e(){}return e.tip="GP_Loading_Msg_{0}_{1}",e.LobbyHelp="UI_Lobby_Help",e.LobbyHome="UI_Lobby_Home",e.LobbyMenu="UI_Lobby_Menu",e.LobbyReport="UI_Lobby_Report",e.LobbySoundOn="UI_Lobby_Sound_01",e.LobbySoundOff="UI_Lobby_Sound_02",e.BattleHelp="UI_BTN_Help",e.BattleHome="UI_BTN_Home",e.BattleMenuOn="UI_BTN_Menu_01",e.BattleMenuOff="UI_BTN_Menu_02",e.BattleSoundOn="UI_BTN_Sound_01",e.BattleSoundOff="UI_BTN_Sound_02",e.MedalsBG="GP_Roulette1",e.MedalsRedRibbonBG="GP_Roulette2",e.MedalsCaiShenFaFaFaBG="GP_LD_Prompt",e.MedalsCaiShenFaFaFaScoreBG="GP_LD_Prompt_02",e.MedalsWheelOfFortuneBG="GP_Roulette_Prompt",e.CaiShenComing="GP_BossMsg_{0}",e.LockSign="GP_Aim",e.HelpPayTable1="UI_Help_PayTable1_01_{0}",e.HelpPayTable2="UI_Help_PayTable1_02_{0}",e.HelpGameFeature1="UI_Help_GameFeature1_01_{0}",e.HelpGameFeature2="UI_Help_GameFeature1_02_{0}",e.UserInterface1="UI_Help_Info1_01_{0}",e.UserInterface2="UI_Help_Info1_02_{0}",e.HelpGameRule1="UI_Help_Game-Rule1_01_{0}",e.HelpGameRule2="UI_Help_Game-Rule1_02_{0}",e.GPRouletteMuti01="GP_Roulette_Muti_01",e.GPRouletteMuti02="GP_Roulette_Muti_02",e.GPRouletteMuti03="GP_Roulette_Muti_03",e.GPRouletteMuti04="GP_Roulette_Muti_04",e.GPRouletteMuti05="GP_Roulette_Muti_05",e}();e.TextureName=t,__reflect(t.prototype,"GameName.TextureName")}(GameName||(GameName={}));var kibana;!function(e){var t=function(){function e(){}return e}();e.logData=t,__reflect(t.prototype,"kibana.logData")}(kibana||(kibana={}));var kibana;!function(e){var t=function(){function e(){}return e.send=function(e){e.gameType=GameSettingProxy.getInstance().initTicket.gameType,e.machineType=GameSettingProxy.getInstance().initTicket.machineType,e.version=GameSettingProxy.getInstance().gameVer,e.host=window.location.host,window.callBackLog&&window.callBackLog.h5Log&&window.callBackLog.h5Log(JSON.stringify(e))},e}();e.m=t,__reflect(t.prototype,"kibana.m")}(kibana||(kibana={}));var ObjectPool;!function(e){var t=function(){function e(){this._usedPool=null,this._idlePool=null,this._idlePool={},this._usedPool={}}return e.prototype.distribution=function(e){e.opIsIdle?(this._idlePool[e.opHashc]=e,delete this._usedPool[e.opHashc]):(this._usedPool[e.opHashc]=e,delete this._idlePool[e.opHashc])},e.prototype.addVO=function(e){e.opSetProtocol(this),e.opIsIdle?this._idlePool[e.opHashc]=e:this._usedPool[e.opHashc]=e},e.prototype.getVO=function(){var e=null;for(var t in this._idlePool)return e=this._idlePool[t],e.opInit(),e;return null},e.prototype.clear=function(){var e=null;for(var t in this._idlePool)e=this._idlePool[t],e.opDel();this._idlePool=null,this._idlePool={}},e.prototype.getIdlePoolCount=function(){return this._idlePool.propertyIsEnumerable.length},e.prototype.getUsedPoolCount=function(){return this._usedPool.propertyIsEnumerable.length},e}();e.Distributor=t,__reflect(t.prototype,"ObjectPool.Distributor",["ObjectPool.IDistributor"])}(ObjectPool||(ObjectPool={}));var ObjectPool;!function(e){var t=function(){function t(){this._dis=new e.Distributor}return t.prototype.getDistributor=function(){return this._dis},t.prototype.getObject=function(e){var t=this._dis.getVO();return null==t&&(t=new e,this._dis.addVO(t)),t},t}();e.Generator=t,__reflect(t.prototype,"ObjectPool.Generator",["ObjectPool.IGenerator"])}(ObjectPool||(ObjectPool={}));var ProtocolEntity;!function(e){var t=function(){function e(){}return e}();e.AddMagazineBagEntity=t,__reflect(t.prototype,"ProtocolEntity.AddMagazineBagEntity")}(ProtocolEntity||(ProtocolEntity={}));var ProtocolEntity;!function(e){var t=function(){function e(){}return e}();e.BulletInfoEntity=t,__reflect(t.prototype,"ProtocolEntity.BulletInfoEntity")}(ProtocolEntity||(ProtocolEntity={}));var ProtocolEntity;!function(e){var t=function(){function e(){}return e.prototype.getRequest=function(){if(window.fix)return this;var e=new SFS2X.SFSObject;return e.putInt("iPlayerID",this.iPlayerID),e.putInt("iBet",this.iBet),e.putInt("iRotation",this.iRotation),e.putInt("iBulletType",this.iBulletType),e.putInt("iBulletID",this.iBulletID),e.putInt("iTargetSN",this.iTargetSN),e},e}();e.CSFireEntity=t,__reflect(t.prototype,"ProtocolEntity.CSFireEntity")}(ProtocolEntity||(ProtocolEntity={}));var ProtocolEntity;!function(e){var t=function(){function t(){}return t.prototype.setBulletInfo=function(t,o,i){var n=new e.BulletInfoEntity;n.credit=o,n.bulletType=GameEnum.BulletTypeTableEnum[t].toString(),this.sBulletInfo=JSON.stringify(n)},t.prototype.getRequest=function(){if(window.fix)return this;var e=new SFS2X.SFSObject;return e.putInt("iPlayerID",this.iPlayerID),e.putInt("iBulletID",this.iBulletID),e.putInt("iTargetID",this.iTargetID),e.putInt("iTargetSN",this.iTargetSN),e.putInt("iBulletType",this.iBulletType),e.putInt("iBet",this.iBet),e.putUtfString("sBulletInfo",this.sBulletInfo),e},t}();e.CSHitEntity=t,__reflect(t.prototype,"ProtocolEntity.CSHitEntity")}(ProtocolEntity||(ProtocolEntity={}));var ProtocolEntity;!function(e){var t=function(){function e(){}return e.prototype.getRequest=function(){if(window.fix)return this;var e=new SFS2X.SFSObject;return e.putInt("iRoomType",this.iRoomType),e},e}();e.CSQuickRoomLoginEntity=t,__reflect(t.prototype,"ProtocolEntity.CSQuickRoomLoginEntity")}(ProtocolEntity||(ProtocolEntity={}));var ProtocolEntity;!function(e){var t=function(){function e(){}return e.prototype.getRequest=function(){if(window.fix)return this;var e=new SFS2X.SFSObject;return e.putInt("iPlayerID",this.iPlayerID),e},e}();e.CSRoomLogoutEntity=t,__reflect(t.prototype,"ProtocolEntity.CSRoomLogoutEntity")}(ProtocolEntity||(ProtocolEntity={}));var ProtocolEntity;!function(e){var t=function(){function e(){}return e}();e.HitResultEntity=t,__reflect(t.prototype,"ProtocolEntity.HitResultEntity")}(ProtocolEntity||(ProtocolEntity={}));var ProtocolEntity;!function(e){var t=function(){function e(){}return e}();e.MagazineBagEntity=t,__reflect(t.prototype,"ProtocolEntity.MagazineBagEntity")}(ProtocolEntity||(ProtocolEntity={}));var ProtocolEntity;!function(e){var t=function(){function e(){}return e}();e.MagazineEntity=t,__reflect(t.prototype,"ProtocolEntity.MagazineEntity")}(ProtocolEntity||(ProtocolEntity={}));var ProtocolEntity;!function(e){var t=function(){function e(){}return e.prototype.setMechanismType=function(e){this.mechanismType=GameEnum.MechanismTypeEnum[e]},e}();e.MechanismResultEntity=t,__reflect(t.prototype,"ProtocolEntity.MechanismResultEntity")}(ProtocolEntity||(ProtocolEntity={}));var ProtocolEntity;!function(e){var t=function(){function e(){}return e}();e.SCBroadcastDataEntity=t,__reflect(t.prototype,"ProtocolEntity.SCBroadcastDataEntity")}(ProtocolEntity||(ProtocolEntity={}));var ProtocolEntity;!function(e){var t=function(){function e(e){e&&(this.balance=e.getDouble("balance"),this.ts=e.getLong("ts"),this.ts1=e.getLong("ts1"))}return e}();e.SCChangeBalanceEntity=t,__reflect(t.prototype,"ProtocolEntity.SCChangeBalanceEntity")}(ProtocolEntity||(ProtocolEntity={}));var ProtocolEntity;!function(e){var t=function(){function e(e){this.bSystemError=e.getBool("bSystemError"),this.iPlayerID=e.getInt("iPlayerID"),this.iErrorCode=e.getInt("iErrorCode"),this.iExtraData=e.getInt("iExtraData")}return e}();e.SCErrorCodeEntity=t,__reflect(t.prototype,"ProtocolEntity.SCErrorCodeEntity")}(ProtocolEntity||(ProtocolEntity={}));var ProtocolEntity;!function(e){var t=function(){function e(){}return e}();e.SCFireEntity=t,__reflect(t.prototype,"ProtocolEntity.SCFireEntity")}(ProtocolEntity||(ProtocolEntity={}));var ProtocolEntity;!function(e){var t=function(){function e(e){this.data=e.getBool("data"),this.data?(this.balance=e.getDouble("balance"),this.GroupId=e.getUtfString("GroupId"),this.sc=e.getBool("sc"),this.serverId=e.getUtfString("serverId"),this.testMode=e.getBool("testMode"),this.ts=e.getLong("ts")):(this.code=e.getInt("code"),this.message=e.getUtfString("message"))}return e}();e.SCGameLoginEntity=t,__reflect(t.prototype,"ProtocolEntity.SCGameLoginEntity")}(ProtocolEntity||(ProtocolEntity={}));var ProtocolEntity;!function(e){var t=function(){function e(e){e&&(this.iRoomCount=e.getInt("iRoomCount"),this.iLobbyRoomInfo=e.getIntArray("iLobbyRoomInfo"))}return e}();e.SCLobbyInfoEntity=t,__reflect(t.prototype,"ProtocolEntity.SCLobbyInfoEntity")}(ProtocolEntity||(ProtocolEntity={}));var ProtocolEntity;!function(e){var t=function(){function e(){}return e}();e.SCLobbyJoinEntity=t,__reflect(t.prototype,"ProtocolEntity.SCLobbyJoinEntity")}(ProtocolEntity||(ProtocolEntity={}));var ProtocolEntity;!function(e){var t=function(){function e(e){e&&(this.iPlayerID=e.getInt("iPlayerID"),this.llPlayerCent=e.getLong("llPlayerCent"),this.iLocation=e.getInt("iLocation"))}return e}();e.SCPlayerRoomLoginEntity=t,__reflect(t.prototype,"ProtocolEntity.SCPlayerRoomLoginEntity")}(ProtocolEntity||(ProtocolEntity={}));var ProtocolEntity;!function(e){var t=function(){function e(e){e&&(this.iPlayerID=e.getInt("iPlayerID"),this.llPlayerCent=e.getLong("llPlayerCent"),this.iLocation=e.getInt("iLocation"))}return e}();e.SCPlayerRoomLogoutEntity=t,__reflect(t.prototype,"ProtocolEntity.SCPlayerRoomLogoutEntity")}(ProtocolEntity||(ProtocolEntity={}));var ProtocolEntity;!function(e){var t=function(){function e(e){this.iErrorCode=e.getInt("iErrorCode")}return e}();e.SCQuickLoginErrorEntity=t,__reflect(t.prototype,"ProtocolEntity.SCQuickLoginErrorEntity")}(ProtocolEntity||(ProtocolEntity={}));var ProtocolEntity;!function(e){var t=function(){function e(){}return e}();e.SCRoomJoinEntity=t,__reflect(t.prototype,"ProtocolEntity.SCRoomJoinEntity")}(ProtocolEntity||(ProtocolEntity={}));var ProtocolEntity;!function(e){var t=function(){function e(e){e&&(this.iRoomNum=e.getInt("iRoomNum"),this.bLogInSuccess=e.getBool("bLogInSuccess"),this.iMinBet=e.getInt("iMinBet"),this.sRoomView=e.getUtfString("sRoomView"),this.iMaxBet=e.getInt("iMaxBet"),this.llTurn=e.getLong("llTurn"),this.iDenom=e.getInt("iDenom"),this.iRoomType=e.getInt("iRoomType"))}return e}();e.SCRoomLoginEntity=t,__reflect(t.prototype,"ProtocolEntity.SCRoomLoginEntity")}(ProtocolEntity||(ProtocolEntity={}));var ProtocolEntity;!function(e){var t=function(){function e(e){this.bLogOutSuccess=!1,e&&(this.bLogOutSuccess=e.getBool("bLogOutSuccess"))}return e}();e.SCRoomLogoutEntity=t,__reflect(t.prototype,"ProtocolEntity.SCRoomLogoutEntity")}(ProtocolEntity||(ProtocolEntity={}));var ProtocolEntity;!function(e){var t=function(){function e(){}return e}();e.SCSyncEntity=t,__reflect(t.prototype,"ProtocolEntity.SCSyncEntity")}(ProtocolEntity||(ProtocolEntity={}));var ProtocolEntity;!function(e){var t=function(){function e(e){e&&(this.llTurn=e.getLong("llTurn"))}return e}();e.SCTurnEntity=t,__reflect(t.prototype,"ProtocolEntity.SCTurnEntity")}(ProtocolEntity||(ProtocolEntity={}));var ProtocolEntity;!function(e){var t=function(){function e(e){e&&(this.showName=e.getUtfString("showName"),this.iRoomName=e.getUtfStringArray("iRoomName"),this.iRoomCount=e.getInt("iRoomCount"),this.iMinBet=e.getIntArray("iMinBet"),this.iMaxBet=e.getIntArray("iMaxBet"),this.iDenom=e.getIntArray("iDenom"),this.iRoomType=e.getIntArray("iRoomType"),this.llCent=e.getLong("llCent"))}return e}();e.SCUserInfoEntity=t,__reflect(t.prototype,"ProtocolEntity.SCUserInfoEntity")}(ProtocolEntity||(ProtocolEntity={}));var ProtocolEntity;!function(e){var t=function(){function e(){}return e}();e.SpecialFeatureResultEntity=t,__reflect(t.prototype,"ProtocolEntity.SpecialFeatureResultEntity")}(ProtocolEntity||(ProtocolEntity={}));var ProtocolEntity;!function(e){var t=function(){function e(){}return e}();e.SpinRequestEntity=t,__reflect(t.prototype,"ProtocolEntity.SpinRequestEntity")}(ProtocolEntity||(ProtocolEntity={}));var ProtocolEntity;!function(e){var t=function(){function e(){}return e}();e.SpinResultEntity=t,__reflect(t.prototype,"ProtocolEntity.SpinResultEntity")}(ProtocolEntity||(ProtocolEntity={}));var BattleBroadcastView=function(e){function t(){var t=e.call(this)||this;return t._logScope="[BattleBroadcastView]",t._isLog=!1,t.layoutGap=3,t.name="BattleBroadcastView",t.currentState=Utils.ResourceTool.language,t}return __extends(t,e),t.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),this.awake()},t.prototype.awake=function(){Logger.log("awake",this)},t.prototype.start=function(){Logger.log("start",this)},t.prototype.enable=function(e){Logger.log("enable",this),this.userName.text=e.uid.replace("********","****"),this.roomName.text=e.roomType.toString(),this.oddText.text=e.multiplier.toString(),this.creditText.text=e.win.toString(),this.symbolImg.texture=RES.getRes("GP_Broadcast_Symbol"+(104==e.targetId?GameEnum.FishTableEnum.G_103:e.targetId)+"_png"),this.roomName.text=this.getRoomName(e.roomType),Utils.ResourceTool.language==GameName.LanguageName.EN||Utils.ResourceTool.language==GameName.LanguageName.TH?(this.lblWon.x=this.userName.x+this.userName.width+this.layoutGap,this.oddText.x=this.lblWon.x+this.lblWon.width+this.layoutGap,this.lblTimes.x=this.oddText.x+this.oddText.width,this.symbolImg.x=this.lblTimes.x+this.lblTimes.width+.5*this.symbolImg.width+this.layoutGap,this.lblWon2.x=this.symbolImg.x+.5*this.symbolImg.width+this.layoutGap,this.creditText.x=this.lblWon2.x+this.lblWon2.width+2*this.layoutGap,this.lblAt.x=this.creditText.x+this.creditText.width+2*this.layoutGap,this.roomName.x=this.lblAt.x+this.lblAt.width+2*this.layoutGap,this.lblJinTenHao.x=this.roomName.x+this.roomName.width):(this.lblAt.x=this.userName.x+this.userName.width+this.layoutGap,this.roomName.x=this.lblAt.x+this.lblAt.width+this.layoutGap,this.lblWon.x=this.roomName.x+this.roomName.width+this.layoutGap,this.oddText.x=this.lblWon.x+this.lblWon.width+this.layoutGap,this.lblTimes.x=this.oddText.x+this.oddText.width,this.symbolImg.x=this.lblTimes.x+this.lblTimes.width+.5*this.symbolImg.width,this.lblWon2.x=this.symbolImg.x+.5*this.symbolImg.width,this.creditText.x=this.lblWon2.x+this.lblWon2.width+this.layoutGap,this.lblAward.x=this.creditText.x+this.creditText.width+this.layoutGap,this.lblJinTenHao.x=this.lblAward.x+this.lblAward.width),this.symbolImg.anchorOffsetX=.5*this.symbolImg.width,this.symbolImg.anchorOffsetY=.5*this.symbolImg.height,this.visible=!0,this.alpha=0,egret.Tween.get(this).to({alpha:1},340).wait(3e3).to({alpha:0},340).call(this.fadeComplete)},t.prototype.reset=function(){Logger.log("reset",this)},t.prototype.init=function(){Logger.log("init",this),this.visible=!0},t.prototype.disable=function(){Logger.log("disable",this),this.visible=!1},t.prototype.refresh=function(){Logger.log("refresh",this)},t.prototype.setTextColor=function(){this.lblContrat.filters=[Utils.FilterTool.getGrayColorFilter()],this.lblAt.filters=[Utils.FilterTool.getGrayColorFilter()],this.lblWon.filters=[Utils.FilterTool.getGrayColorFilter()],this.lblTimes.filters=[Utils.FilterTool.getGrayColorFilter()],this.lblWon2.filters=[Utils.FilterTool.getGrayColorFilter()],this.userName.filters=[Utils.FilterTool.getGrayBlueColorFilter()],this.roomName.filters=[Utils.FilterTool.getGrayBlueColorFilter()],this.oddText.filters=[Utils.FilterTool.getYellowColorFilter()],this.creditText.filters=[Utils.FilterTool.getYellowColorFilter()]},t.prototype.fadeComplete=function(){this.visible=!1,this.checkAndShowBroadcast()},t.prototype.getRoomName=function(e){if(Utils.ResourceTool.language==GameName.LanguageName.TW){if(0==e)return"";if(1==e)return"";if(2==e)return""}else if(Utils.ResourceTool.language==GameName.LanguageName.CN){if(0==e)return"";if(1==e)return"";if(2==e)return""}else if(Utils.ResourceTool.language==GameName.LanguageName.EN||Utils.ResourceTool.language==GameName.LanguageName.TH){if(0==e)return"Newbie";if(1==e)return"Expert";if(2==e)return"CaiShen"}},t}(eui.Component);__reflect(BattleBroadcastView.prototype,"BattleBroadcastView",["IView"]);var Smartfox;!function(e){var t=function(e){function t(){var t=e.call(this,"GEN_HEARTBEAT")||this;return t}return __extends(t,e),t.prototype.getRequest=function(){if(window.fix)return this;var e=new Object;return JSON.stringify(e)},t}(e.GameRequest);e.KeepAliveRequest=t,__reflect(t.prototype,"Smartfox.KeepAliveRequest")}(Smartfox||(Smartfox={}));var TableEntity;!function(e){var t=function(){function e(){}return e}();e.BattleBGTableEntity=t,__reflect(t.prototype,"TableEntity.BattleBGTableEntity",["TableEntity.ITableEntity"])}(TableEntity||(TableEntity={}));var TableEntity;!function(e){var t=function(){function e(){}return e}();e.BetTableEntity=t,__reflect(t.prototype,"TableEntity.BetTableEntity",["TableEntity.ITableEntity"])}(TableEntity||(TableEntity={}));var TableEntity;!function(e){var t=function(){function e(){}return e}();e.BossAndWeaponFCTableEntity=t,__reflect(t.prototype,"TableEntity.BossAndWeaponFCTableEntity",["TableEntity.ITableEntity"])}(TableEntity||(TableEntity={}));var TableEntity;!function(e){var t=function(){function e(){}return e}();e.BossFCTableEntity=t,__reflect(t.prototype,"TableEntity.BossFCTableEntity",["TableEntity.ITableEntity"])}(TableEntity||(TableEntity={}));var TableEntity;!function(e){var t=function(){function e(){}return e}();e.BulletTableEntity=t,__reflect(t.prototype,"TableEntity.BulletTableEntity",["TableEntity.ITableEntity"])}(TableEntity||(TableEntity={}));var TableEntity;!function(e){var t=function(){function e(){}return e}();e.BulletTypeTableEntity=t,__reflect(t.prototype,"TableEntity.BulletTypeTableEntity",["TableEntity.ITableEntity"])}(TableEntity||(TableEntity={}));var TableEntity;!function(e){var t=function(){function e(){}return e}();e.CoinTableEntity=t,__reflect(t.prototype,"TableEntity.CoinTableEntity",["TableEntity.ITableEntity"])}(TableEntity||(TableEntity={}));var TableEntity;!function(e){var t=function(){function e(){}return e}();e.EffectTableEntity=t,__reflect(t.prototype,"TableEntity.EffectTableEntity",["TableEntity.ITableEntity"])}(TableEntity||(TableEntity={}));var TableEntity;!function(e){var t=function(){function e(){}return e}();e.FishPathTableEntity=t,__reflect(t.prototype,"TableEntity.FishPathTableEntity",["TableEntity.ITableEntity"])}(TableEntity||(TableEntity={}));var TableEntity;!function(e){var t=function(){function e(){}return e}();e.FishSoundTableEntity=t,__reflect(t.prototype,"TableEntity.FishSoundTableEntity",["TableEntity.ITableEntity"])}(TableEntity||(TableEntity={}));var TableEntity;!function(e){var t=function(){function e(){}return e}();e.FishTableEntity=t,__reflect(t.prototype,"TableEntity.FishTableEntity",["TableEntity.ITableEntity"])}(TableEntity||(TableEntity={}));var TableEntity;!function(e){var t=function(){function e(){}return e}();e.FishTeamTableEntity=t,__reflect(t.prototype,"TableEntity.FishTeamTableEntity",["TableEntity.ITableEntity"])}(TableEntity||(TableEntity={}));var TableEntity;!function(e){var t=function(){function e(){}return e}();e.FortTableEntity=t,__reflect(t.prototype,"TableEntity.FortTableEntity",["TableEntity.ITableEntity"])}(TableEntity||(TableEntity={}));var TableEntity;!function(e){var t=function(){function e(){}return e}();e.HighFCTableEntity=t,__reflect(t.prototype,"TableEntity.HighFCTableEntity",["TableEntity.ITableEntity"])}(TableEntity||(TableEntity={}));var TableEntity;!function(e){var t=function(){function e(){}return e}();e.ItemTableEntity=t,__reflect(t.prototype,"TableEntity.ItemTableEntity",["TableEntity.ITableEntity"])}(TableEntity||(TableEntity={}));var TableEntity;!function(e){var t=function(){function e(){}return e}();e.LobbyZoneBGTableEntity=t,__reflect(t.prototype,"TableEntity.LobbyZoneBGTableEntity",["TableEntity.ITableEntity"])}(TableEntity||(TableEntity={}));var TableEntity;!function(e){var t=function(){function e(){}return e}();e.LowFCTableEntity=t,__reflect(t.prototype,"TableEntity.LowFCTableEntity",["TableEntity.ITableEntity"])}(TableEntity||(TableEntity={}));var TableEntity;!function(e){var t=function(){function e(){}return e}();e.LuckyDrawTableEntity=t,__reflect(t.prototype,"TableEntity.LuckyDrawTableEntity",["TableEntity.ITableEntity"])}(TableEntity||(TableEntity={}));var TableEntity;!function(e){var t=function(){function e(){}return e}();e.MedalsTableEntity=t,__reflect(t.prototype,"TableEntity.MedalsTableEntity",["TableEntity.ITableEntity"])}(TableEntity||(TableEntity={}));var TableEntity;!function(e){var t=function(){function e(){}return e}();e.MiddleFCTableEntity=t,__reflect(t.prototype,"TableEntity.MiddleFCTableEntity",["TableEntity.ITableEntity"])}(TableEntity||(TableEntity={}));var TableEntity;!function(e){var t=function(){function e(){}return e}();e.MovieClipFXTableEntity=t,__reflect(t.prototype,"TableEntity.MovieClipFXTableEntity",["TableEntity.ITableEntity"])}(TableEntity||(TableEntity={}));var TableEntity;!function(e){var t=function(){function e(){}return e}();e.ParticleFXTableEntity=t,__reflect(t.prototype,"TableEntity.ParticleFXTableEntity",["TableEntity.ITableEntity"])}(TableEntity||(TableEntity={}));var TableEntity;!function(e){var t=function(){function e(){}return e}();e.ScoreTableEntity=t,__reflect(t.prototype,"TableEntity.ScoreTableEntity",["TableEntity.ITableEntity"])}(TableEntity||(TableEntity={}));var TableEntity;!function(e){var t=function(){function e(){}return e}();e.ShaderFXTableEntity=t,__reflect(t.prototype,"TableEntity.ShaderFXTableEntity",["TableEntity.ITableEntity"])}(TableEntity||(TableEntity={}));var TableEntity;!function(e){var t=function(){function e(){}return e}();e.ShakeFXTableEntity=t,__reflect(t.prototype,"TableEntity.ShakeFXTableEntity",["TableEntity.ITableEntity"])}(TableEntity||(TableEntity={}));var TableEntity;!function(e){var t=function(){function e(){}return e}();e.SoundTableEntity=t,__reflect(t.prototype,"TableEntity.SoundTableEntity",["TableEntity.ITableEntity"])}(TableEntity||(TableEntity={}));var TableEntity;!function(e){var t=function(){function e(){}return e}();e.SpeakSoundGroupTableEntity=t,__reflect(t.prototype,"TableEntity.SpeakSoundGroupTableEntity",["TableEntity.ITableEntity"])}(TableEntity||(TableEntity={}));var TableEntity;!function(e){var t=function(){function e(){}return e}();e.SpecialEffectTableEntity=t,__reflect(t.prototype,"TableEntity.SpecialEffectTableEntity",["TableEntity.ITableEntity"])}(TableEntity||(TableEntity={}));var TableEntity;!function(e){var t=function(){function e(){}return e}();e.ZoneBGTableEntity=t,__reflect(t.prototype,"TableEntity.ZoneBGTableEntity",["TableEntity.ITableEntity"])}(TableEntity||(TableEntity={}));var TableEntity;!function(e){var t=function(){function e(){}return e}();e.ZoneTableEntity=t,__reflect(t.prototype,"TableEntity.ZoneTableEntity",["TableEntity.ITableEntity"])}(TableEntity||(TableEntity={}));var Utils;!function(e){var t=function(){function t(){}return t.IsSpecialBullet=function(t){var o=e.GameTool.addZero(t,6);return this.GetBulletTypeByBulletID(o)!=GameEnum.FortTableEnum.Normal},t.IsSpecialBulletByBulletType=function(e){return e!=GameEnum.FortTableEnum.Normal},t.IsFirstMegaDrillBullet=function(t){var o=e.GameTool.addZero(t,6);return this.GetBulletTypeByBulletID(o)==GameEnum.FortTableEnum.MegaDrill&&50==this.GetBulletCountByBulletID(o)?!0:!1},t.IsFinalMegaDrillBullet=function(t){var o=e.GameTool.addZero(t,6);return this.GetBulletTypeByBulletID(o)==GameEnum.FortTableEnum.MegaDrill&&1==this.GetBulletCountByBulletID(o)?!0:!1},t.IsMegaDrillBullet=function(t){var o=e.GameTool.addZero(t,6);return this.GetBulletTypeByBulletID(o)==GameEnum.FortTableEnum.MegaDrill?!0:!1},t.IsAutomaticBazookaBullet=function(t){var o=e.GameTool.addZero(t,6);return this.GetBulletTypeByBulletID(o)==GameEnum.FortTableEnum.AutomaticBazooka?!0:!1},t.GetBulletCountByBulletID=function(e){return this.GetBulletSeqNo(e)},t.GetSeatIDByBulletID=function(t){var o=e.GameTool.addZero(t,6);return Number(o.substr(0,1))},t.GetBulletTypeByBulletID=function(e){return Number(e.substr(1,2))},t.GetBulletSeqNo=function(e){return Number(e)%this.maxBulletSeq},t.GetBulletID=function(t,o,i){var n=e.MathTool.multiply(t,this.maxSeatNumber),a=e.MathTool.multiply(o,this.maxBulletSeq),r=i,s=n+a+r;return s},t.maxSeatNumber=1e5,t.maxBulletSeq=1e3,t}();e.BulletTool=t,__reflect(t.prototype,"Utils.BulletTool")}(Utils||(Utils={}));var Utils;!function(e){var t=function(){function t(){}return t.buttonEffect=function(t){egret.Tween.removeTweens(t),t.scaleX=.9,t.scaleY=.9,e.DisplayObjectTool.setAnchorOffset(t),egret.Tween.get(t).to({scaleX:1,scaleY:1},200,egret.Ease.backInOut)},t}();e.ButtonTool=t,__reflect(t.prototype,"Utils.ButtonTool")}(Utils||(Utils={}));var Utils;!function(e){var t=function(){function e(){}return e.resetDisplayObject=function(e,t){egret.Tween.removeTweens(e),e.x=0,e.y=0,e.visible=t,e.scaleX=1,e.scaleY=1,e.rotation=0,e.alpha=1,e.filters=null},e.resetMovieClip=function(e,t){egret.Tween.removeTweens(e),e.x=0,e.y=0,e.visible=t,e.scaleX=1,e.scaleY=1,e.rotation=0,e.alpha=1,e.filters=null,e.stop()},e.setAnchorOffset=function(e){e.anchorOffsetX=e.width/2,e.anchorOffsetY=e.height/2},e.setAnchorOffsetByMovieClip=function(e){if(!e.movieClipData)return void Logger.error("[DisplayObjectTool] setAnchorOffsetByMovieClip, obj.movieClipData is not exist");for(var t in e.frames){var o=e.frames[t];if(o.res){var i=e.movieClipData.textureData[o.res];if(i.w>1&&i.h>1){e.anchorOffsetX=i.w/2+o.x,e.anchorOffsetY=i.h/2+o.y;break}}}},e.createRectanglePointArray=function(e){var t=new Array;return t[0]=new egret.Point(e.x,e.y+e.width),t[1]=new egret.Point(e.x,e.y),t[2]=new egret.Point(e.x+e.height,e.y+e.width),t[3]=new egret.Point(e.x+e.height,e.y),t},e.createRectanglePointArrayByNumber=function(e,t){void 0===t&&(t=0);var o=new Array;return o[0]=[e.x+t,e.y+t],o[1]=[e.x+e.width-t,e.y+t],o[2]=[e.x+e.width-t,e.y+e.height-t],o[3]=[e.x+t,e.y+e.height-t],o},e}();e.DisplayObjectTool=t,__reflect(t.prototype,"Utils.DisplayObjectTool")}(Utils||(Utils={}));var Utils;!function(e){var t=function(){function e(){}return e.getWhiteColorFilter=function(){return this._whiteColorFlilter||(this._whiteColorFlilter=new egret.ColorMatrixFilter(this._whiteColorMatrix)),this._whiteColorFlilter},e.getGrayColorFilter=function(){return this._grayColorFlilter||(this._grayColorFlilter=new egret.ColorMatrixFilter(this._grayColorMatrix)),this._grayColorFlilter},e.getRedColorFilter=function(){return this._redColorFlilter||(this._redColorFlilter=new egret.ColorMatrixFilter(this._redColorMatrix)),this._redColorFlilter},e.getLightRColorFilter=function(){return this._lightRColorFlilter||(this._lightRColorFlilter=new egret.ColorMatrixFilter(this._lightRedColorMatrix)),this._lightRColorFlilter},e.getGrayBlueColorFilter=function(){return this._GrayBlueColorFlilter||(this._GrayBlueColorFlilter=new egret.ColorMatrixFilter(this._GrayBlueColorMatrix)),this._GrayBlueColorFlilter},e.getYellowColorFilter=function(){return this._YellowColorFlilter||(this._YellowColorFlilter=new egret.ColorMatrixFilter(this._YellowColorMatrix)),this._YellowColorFlilter},e._whiteColorMatrix=[1,0,0,0,1,0,1,0,0,1,0,0,1,0,1,0,0,0,1,0],e._grayColorMatrix=[.9,0,0,0,0,0,.9,0,0,0,0,0,.9,0,0,0,0,0,1,0],e._redColorMatrix=[.4,0,0,0,153,0,.4,0,0,0,0,0,.4,0,0,0,0,0,1,0],e._lightRedColorMatrix=[1,0,0,0,255,0,.7,0,0,0,0,0,.7,0,0,0,0,0,1,0],e._GrayBlueColorMatrix=[.52,0,0,0,0,0,.76,0,0,0,0,0,.77,0,0,0,0,0,1,0],e._YellowColorMatrix=[.79,0,0,0,0,0,.82,0,0,0,0,0,0,0,0,0,0,0,1,0],e}();e.FilterTool=t,__reflect(t.prototype,"Utils.FilterTool")}(Utils||(Utils={}));var Utils;!function(e){var t=function(){function e(){}return e.isReverseByLayer=function(e){return 2>e?!1:!0},e.isReverseByLabelAndBulletRotation=function(e,t){return 2>t&&e>=2||t>=2&&2>e?!0:!1
},e.getRoomNumber=function(e,t,o,i){for(var n in i)for(var a=i[n],r=1,s=0;s<t.iRoomCount;s++)if(t.iRoomType[s]==a){if(o[s].id==e)return r;r++}},e.getSeatID=function(e,t){for(var o=t,i=0;i<o.iID.length;i++)if(o.iID[i]==e)return i},e.getZoneTypeArray=function(e){for(var t=new Array,o=0;o<e.iRoomCount;o++){for(var i=e.iRoomType[o],n=!1,a=0;a<t.length;a++)if(t[a]==i){n=!0;break}n||t.push(i)}return t.sort(),t},e.getBarrelLevel=function(e,t,o,i){var n=this.getBetArray(t,o),a=this.getBetLevelArray(i,n),r=a.length;for(var s in a)if(e<=a[s]){r=Number(s);break}return r},e.getBetArray=function(e,t){var o=e,i=t,n=new Array,a=10;for(n.push(o);i>o;){for(;o>=a&&10*a>o;){if(o+=a,!(i>=o)){-1==n.indexOf(i)&&n.push(i);break}n.push(o)}a*=10}return n},e.getBetLevelArray=function(e,t){for(var o=Math.floor(t.length/e),i=new Array,n=1;e>n;n++)i.push(t[o*n]);return i},e.getRoomIDByAutoJoinRoom=function(e,t,o,i,n,a){void 0===a&&(a=3);for(var r=new Array,s=e.iRoomCount-1;s>=0;--s){var l=e.iRoomType[s],c=t.iLobbyRoomInfo[s];l==i&&c>=n&&4!=c&&c!=a&&r.push(s)}if(r.length>0){var h=Math.round(Math.random()*(r.length-1)),u=r[h],p=o.roomListFromGroup[u].id;return p}return-1},e.addZero=function(e,t){for(var o=e.toString();o.length<t;)o="0"+o;return o},e.isWeaponFish=function(e){return e==GameEnum.FishTableEnum.S_200||e==GameEnum.FishTableEnum.S_201},e.inWhiteList=function(e){var t;for(t=0;t<whiteList.list.length;t++)if(-1!=e.indexOf(whiteList.list[t]))return!0;return!1},e.getCaiShenFaFaFaDataIndex=function(e){if(e.specialFeatureResults){var t=void 0;for(var o in e.specialFeatureResults)if(t=e.specialFeatureResults[o],t.specialFeatureType&&t.specialFeatureType==GameName.SpecialFeatureName.SF_03)return Number(o)}return-1},e.getWheelOfFortuneDataIndex=function(e){if(e.specialFeatureResults){var t=void 0;for(var o in e.specialFeatureResults)if(t=e.specialFeatureResults[o],t.specialFeatureType&&t.specialFeatureType==GameName.SpecialFeatureName.SF_02)return Number(o)}return-1},e.getLuckyDrawDataIndex=function(e){if(e.specialFeatureResults){var t=void 0;for(var o in e.specialFeatureResults)if(t=e.specialFeatureResults[o],t.specialFeatureType&&t.specialFeatureType!=GameName.SpecialFeatureName.SF_01)return Number(o)}return-1},e.resultWithLuckyDrawData=function(e,t){if(e.specialFeatureResults){var o=void 0;if(o=e.specialFeatureResults[t],o.specialFeatureType&&o.specialFeatureType!=GameName.SpecialFeatureName.SF_01&&o.totalWin>0)return!0}return!1},e.getRandomRoomID=function(e,t){var o=-1;return o=this.getRoomID(e,3,t,GameSettingProxy.getInstance().maxPlayerCountInRoom),o>-1?o:(o=this.getRoomID(e,2,t),o>-1?o:(o=this.getRoomID(e,1,t),o>-1?o:(o=this.getRoomID(e,0,t),o>-1?o:-1)))},e.getRoomID=function(e,t,o,i){void 0===i&&(i=3);var n=o.scUserInfo,a=o.scLobbyInfo,r=o.scLobbyJoin,s=this.getRoomIDByAutoJoinRoom(n,a,r,e,t,i);return s},e.getZonePlayerCount=function(e,t,o){var i=new Array;for(var n in e){for(var a=0,r=e[n],s=0;s<t.iRoomCount;s++){var l=t.iRoomType[s];l==r&&(a+=o.iLobbyRoomInfo[s])}i.push(a)}return i},e.getZoneRoomCountArray=function(e,t,o){var i=new Array;for(var n in e){for(var a=0,r=e[n],s=0;s<t.iRoomCount;s++){var l=t.iRoomType[s];l==r&&(a+=1)}i.push(a)}return i},e.generateSFSProxyConfig=function(e){if(window.fix)return{};var t,o=e;t={},t.debug=!1,t.password="",t.clientType="Web",t.t="jdb168.net",t.zone=o.zone,t.gameType=o.gameType,t.machineType=o.machineType,t.zoneName=o.zone,t.sessionID0=o.sessionID[0],t.sessionID1=o.sessionID[1],t.sessionID2=o.sessionID[2],t.sessionID3=o.sessionID[3],t.sessionID4=o.sessionID[4],t.gameUid=o.gameUid,t.gamePass=o.gamePass,t.useSSL=!1;var i,n=o.gsInfo;return i=n.split("_"),t.host=i[0],t.port=Number(i[1]),t.gameLoginName="gameLogin",t.uid=o.gameUid,t.userName=o.gameUid,t.gameUid=o.gameUid,t.useSSL=o.useSSL,t},e}();e.GameTool=t,__reflect(t.prototype,"Utils.GameTool")}(Utils||(Utils={}));var Utils;!function(e){var t=function(){function t(){}return t.createEntityArrayByJsonByBase64=function(e){var t=RES.getRes(e+"_bin"),o=new egret.ByteArray(t),i=o.readUTFBytes(o.length),n=egret.Base64Util.decode(i),a=new egret.ByteArray(n),r=a.readUTFBytes(a.length);return JSON.parse(r)},t.createEntityArrayByJson=function(t){return e.ResourceTool.getRes(t+"_json")},t}();e.JsonTool=t,__reflect(t.prototype,"Utils.JsonTool")}(Utils||(Utils={}));var Utils;!function(e){var t=function(){function e(){}return e.repeat=function(e,t){var o=e-Math.floor(e/t)*t;return o},e.clamp=function(e,t,o){return t>e?e=t:e>o&&(e=o),e},e.randomRange=function(e,t){return Math.round(Math.random()*(t-1-e))+e},e.randomRangeByPositiveAndNegative=function(e,t){var o=Math.round(Math.random());return 0==o?-1*(Math.round(Math.random()*(t-1-e))+e):Math.round(Math.random()*(t-1-e))+e},e.randomBool=function(e,t){var o=Math.round(Math.random()*t-1);return e>o?!0:!1},e.multiply=function(e,t){var o,i=+(e+"").replace(".",""),n=+(t+"").replace(".",""),a=this._getDecimalLength(e)+this._getDecimalLength(t);return o=i*n/Math.pow(10,a)},e.except=function(e,t){return e/t},e.subtract=function(e,t){var o=Math.max(this._getDecimalLength(e),this._getDecimalLength(t)),i=Math.pow(10,o);return(this.multiply(e,i)-this.multiply(t,i))/i},e._getDecimalLength=function(e){var t=(e+"").split("."),o=0;return t[1]&&t[1].length>0&&(o=t[1].length),o},e.getSeed=function(t){var o=t%e.pi.length,i=Number(e.pi.toString().substr(0,o));return i},e.shuffleArray=function(e){for(var t=e.length-1;t>0;t--){var o=Math.floor(Math.random()*(t+1)),i=e[t];e[t]=e[o],e[o]=i}},e.shuffleArrayBySeed=function(e,t){for(var o=e.length-1;o>0;o--){var i=this.getSeed(t+1)%(o+1),n=e[o];e[o]=e[i],e[i]=n}},e.pi="3141592653589793",e}();e.MathTool=t,__reflect(t.prototype,"Utils.MathTool")}(Utils||(Utils={}));var Utils;!function(e){var t=function(){function t(){}return t.getRes=function(e){var t=RES.getRes(e);return t||Logger.error(e+" is not exist"),t},t.getTextureRes=function(e){return t.getRes(e+"_png")},t.getTextureResByLanguage=function(o){var i=e.StringTool.format(o,t.language);return t.getRes(i+"_png")},t.getTextureResByRandomByLanguage=function(o,i,n){var a=e.MathTool.randomRange(i,n),r="";r=10>a?"0"+a:""+a;var s=e.StringTool.format(o,[r,t.language]);return t.getRes(s+"_png")},t.getMovieClip=function(e,t,o){var i=new egret.MovieClip;return i.movieClipData=this.getMovieClipData(e,t),null==i.movieClipData.textureData&&Logger.error("movieClip.movieClipData.textureData == null, jsonName:"+e+", mcName:"+t),i},t.getMovieClipData=function(t,o){var i=t+"_"+o;if(!this._mcFactoryMap[i]){var n=e.ResourceTool.getRes(t+"_json"),a=e.ResourceTool.getRes(t+"_png"),r=new egret.MovieClipDataFactory(n,a);this._mcFactoryMap[i]=r}return this._mcFactoryMap[i].generateMovieClipData(o)},t.getParticleSystem=function(t,o){var i=e.ResourceTool.getRes(t+"_json"),n=e.ResourceTool.getRes(t+"_png"),a=new particle.GravityParticleSystem(n,i);return a},t.getArmatureByDragonBones=function(e,t){this.dragonbonesFactory||(this.dragonbonesFactory=new dragonBones.EgretFactory,egret.startTick(this.onTicker,this));var o=this.dragonbonesFactory.buildArmature(t);if(!o){var i=RES.getRes(e+"_ske_json"),n=RES.getRes(e+"_tex_json"),a=RES.getRes(e+"_tex_png");this.dragonbonesFactory.addDragonBonesData(dragonBones.DataParser.parseDragonBonesData(i)),this.dragonbonesFactory.addTextureAtlas(new dragonBones.EgretTextureAtlas(a,n)),o=this.dragonbonesFactory.buildArmature(t)}return dragonBones.WorldClock.clock.add(o),o},t.onTicker=function(e){this._time||(this._time=e);var t=e,o=t-this._time;return this._time=t,dragonBones.WorldClock.clock.advanceTime(o/1e3),!1},t.setTexture=function(e,o,i){e.texture=t.getRes(o+"_png")},t.setMovieClipData=function(e,t,o,i){"null"==t||"null"==o?(e.movieClipData=null,e.visible=!1):(e.movieClipData=this.getMovieClipData(t,o),0==e.movieClipData.frames.length&&Logger.error("movieClip.movieClipData.frames.length == 0, jsonName:"+t+", mcName:"+o),e.visible=!0)},t.getName=function(e,t){if(null==t.parent)return"";for(var o in e)if(e.hasOwnProperty(o)&&e[o]==t)return o;return""},t.language=null,t.dragonbonesFactory=null,t._mcFactoryMap={},t}();e.ResourceTool=t,__reflect(t.prototype,"Utils.ResourceTool")}(Utils||(Utils={}));var Utils;!function(e){var t=function(){function e(){}return e.isWin=function(e){return e.spinResult.mechanismResult.totalWin>0?!0:!1},e.isDie=function(e){return e.spinResult&&e.spinResult.mechanismResult&&e.spinResult.mechanismResult.hitResult&&e.spinResult.mechanismResult.hitResult.killCount&&(e.spinResult.mechanismResult.hitResult.killCount>1&&Logger.error("scSyncEntity.spinResult.mechanismResult.hitResult.killCount:"+e.spinResult.mechanismResult.hitResult.killCount+" > 1"),e.spinResult.mechanismResult.hitResult.killCount>0)?!0:!1},e.isAwardMagazine=function(e){var t=this.getAddMagazineEntity(e);return t&&t.count>0?!0:!1},e.isAwardLuckyDraw=function(e){var t=this.getSpecialFeatureResultEntity(e,GameEnum.SpecialFeatureTypeEnum.SF_05);return t&&t.totalWin>0?!0:!1},e.getAddMagazineEntity=function(e){if(e.spinResult&&e.spinResult.mechanismResult&&e.spinResult.mechanismResult.addMagazineBag)for(var t=0,o=e.spinResult.mechanismResult.addMagazineBag.magazines;t<o.length;t++){var i=o[t];if(i.count>0)return i}return null},e.getLuckDrawSpecialFeatureResultEntity=function(e){if(e.spinResult&&e.spinResult.mechanismResult&&e.spinResult.mechanismResult.specialFeatureResults)for(var t=0,o=e.spinResult.mechanismResult.specialFeatureResults;t<o.length;t++){var i=o[t];if(i.specialFeatureType!=GameEnum.SpecialFeatureTypeEnum[GameEnum.SpecialFeatureTypeEnum.NORMAL]&&i.specialFeatureType!=GameEnum.SpecialFeatureTypeEnum[GameEnum.SpecialFeatureTypeEnum.SF_01]&&i.totalWin>0)return i}return null},e.getSpecialFeatureResultEntity=function(e,t){if(e.spinResult&&e.spinResult.mechanismResult&&e.spinResult.mechanismResult.specialFeatureResults)for(var o=0,i=e.spinResult.mechanismResult.specialFeatureResults;o<i.length;o++){var n=i[o];if(n.specialFeatureType==GameEnum.SpecialFeatureTypeEnum[t])return n}return null},e.getMechanismResultTotalWin=function(e){return e.spinResult.mechanismResult.totalWin},e.getAwardBulletCount=function(e){var t=this.getAddMagazineEntity(e);return t?t.count:0},e.getRemainBulletCount=function(e){var t=this.getSpecialFeatureResultEntity(e,GameEnum.SpecialFeatureTypeEnum.SF_01);return t?t.remainTargetBulletCount:0},e}();e.SCSyncTools=t,__reflect(t.prototype,"Utils.SCSyncTools")}(Utils||(Utils={}));var Utils;!function(e){var t=function(){function e(){}return e.addPNG=function(e){return e+"_png"},e.format=function(e,t){var o;if(t instanceof Array){for(o=0;o<t.length;o++)e=e.replace(new RegExp("\\{"+o+"\\}","gm"),t[o]);return e}for(o=0;o<arguments.length-1;o++)e=e.replace(new RegExp("\\{"+o+"\\}","gm"),arguments[o+1]);return e},e.addDollarSign=function(t){return""+e.dollarSign+t},e.cent2TenDolla2GroupSeperator=function(e){for(var t=String(Math.floor(e));t.length<4;)t="0"+t;return t=t.split("").reverse().join("").replace(/(\d{3}\B)/,"$1.").replace(/(\d{3}\B)/g,"$1,").split("").reverse().join(""),t.substr(0,t.length-1)},e}();e.StringTool=t,__reflect(t.prototype,"Utils.StringTool")}(Utils||(Utils={}));var Utils;!function(e){var t=function(){function t(){}return t.rotation2WeaponInfo=function(e){return 100*e},t.weaponInfo2Rotation=function(e){return e/100},t.tenDollar2Cent=function(t){return e.MathTool.multiply(t,1e3)},t.cent2TenDollar=function(t){return e.MathTool.multiply(t,.001)},t.cent2TenDolla2GroupSeperator=function(t){return e.StringTool.cent2TenDolla2GroupSeperator(t)},t.cent2TenDolla2GroupSeperator2Sign=function(t){return e.StringTool.addDollarSign(e.StringTool.cent2TenDolla2GroupSeperator(t))},t.win2CashCent=function(t,o){return e.MathTool.multiply(t,o)},t.win2CashTenDolla=function(e,o){var i=t.win2CashCent(e,o);return t.cent2TenDollar(i)},t.win2CashTenDolla2Sign=function(o,i){var n=t.win2CashTenDolla(o,i);return e.StringTool.addDollarSign(n.toString())},t.bet2CashCent=function(t,o){return e.MathTool.multiply(t,o)},t.bet2CashTenDolla=function(e,o){var i=t.bet2CashCent(e,o);return t.cent2TenDollar(i)},t.bet2CashTenDolla2Sign=function(o,i){var n=t.bet2CashTenDolla(o,i);return e.StringTool.addDollarSign(n.toString())},t.betRange2CashTenDolla2Sign=function(e,o,i){return t.bet2CashTenDolla2Sign(e,i)+"-"+t.bet2CashTenDolla2Sign(o,i)},t.betRange2CashTenDolla=function(e,o,i){return t.bet2CashTenDolla(e,i)+"-"+t.bet2CashTenDolla(o,i)},t.getPayout=function(e,t){var o=e/t;return o},t}();e.TranslateTool=t,__reflect(t.prototype,"Utils.TranslateTool")}(Utils||(Utils={}));var Utils;!function(e){var t=function(){function t(){}return t.getLengthByNumber=function(e,t){var o=new egret.Point(e[0],e[1]),i=new egret.Point(t[0],t[1]),n=o.subtract(i).length;return n},t.getLengthByPoint=function(e,t){var o=e.subtract(t).length;return o},t.getVectorByNumberReturnNumber=function(e,t,o){var i=this.getRadianByNumber(e,t),n=egret.Point.polar(o,i),a=[n.x,n.y];return a},t.getVectorByDisplayObjectReturnPoint=function(e,t,o){var i=this.getRadianByDisplayObject(e,t),n=egret.Point.polar(o,i);return n},t.getVectorByRotationByNumberReturnNumber=function(t,o){var i=e.Vector2Tool.rotation2Degrees2Radian(t),n=egret.Point.polar(o,i),a=[n.x,n.y];return a},t.getVectorByRotationReturnPoint=function(t,o){var i=e.Vector2Tool.rotation2Degrees2Radian(t),n=egret.Point.polar(o,i);return n},t.getUnitVectorByPointReturnPoint=function(e,t){var o=t.subtract(e);return o},t.getUnitVectorByDisplayerObjectReturnPoint=function(e,t){var o=new egret.Point(e.x,e.y),i=new egret.Point(e.x,e.y),n=i.subtract(o);return n},t.rotation2Degrees=function(e){return e-90},t.rotation2Degrees2Radian=function(e){var o=t.rotation2Degrees(e),i=t.degrees2Radian(o);return i},t.degrees2Rotation=function(e){return e+90},t.degrees2Radian=function(e){var t=e*(Math.PI/180);return t},t.radian2Degrees=function(e){var t=e/Math.PI*180;return t},t.radian2Degrees2Rotation=function(e){var o=t.radian2Degrees(e),i=t.degrees2Rotation(o);return i},t.getRotationByNumber=function(e,t){var o=this.getDegreesByNumber(e,t),i=this.degrees2Rotation(o);return i},t.getRotationByDisplayObject=function(e,t){var o=this.getDegreesByDisplayObject(e,t),i=this.degrees2Rotation(o);return i},t.getRotationByPoint=function(e,t){var o=this.getDegreesByPoint(e,t),i=this.degrees2Rotation(o);return i},t.getRadianByNumber=function(e,t){var o=t[0]-e[0],i=t[1]-e[1],n=Math.atan2(i,o);return n},t.getRadianByDisplayObject=function(e,t){var o=t.x-e.x,i=t.y-e.y,n=Math.atan2(i,o);return n},t.getRadianByPoint=function(e,t){var o=t.x-e.x,i=t.y-e.y,n=Math.atan2(i,o);return n},t.getDegreesByNumber=function(e,t){var o=this.getRadianByNumber(e,t),i=this.radian2Degrees(o);return i},t.getDegreesByDisplayObject=function(e,t){var o=this.getRadianByDisplayObject(e,t),i=this.radian2Degrees(o);return i},t.getDegreesByPoint=function(e,t){var o=this.getRadianByPoint(e,t),i=this.radian2Degrees(o);return i},t.getRandomDisplayObjectByDisplayObject=function(t,o){var i=new egret.DisplayObject;return i.x=e.MathTool.randomRange(t.x-o,t.x+o+1),i.y=e.MathTool.randomRange(t.y-o,t.y+o+1),i},t.getRandomPointByDisplayObject=function(t,o){var i=e.MathTool.randomRange(t.x-o,t.x+o+1),n=e.MathTool.randomRange(t.y-o,t.y+o+1);return new egret.Point(i,n)},t.getRandomDisplayObjectByPoint=function(t,o){var i=new egret.DisplayObject;return i.x=e.MathTool.randomRange(t.x-o,t.x+o+1),i.y=e.MathTool.randomRange(t.y-o,t.y+o+1),i},t.getRandomPointByNumber=function(t,o){var i=e.MathTool.randomRange(t[0]-o,t[0]+o+1),n=e.MathTool.randomRange(t[1]-o,t[1]+o+1);return[i,n]},t}();e.Vector2Tool=t,__reflect(t.prototype,"Utils.Vector2Tool")}(Utils||(Utils={}));var Web;!function(e){var t=function(){function e(){}return e}();e.InitTicketEntity=t,__reflect(t.prototype,"Web.InitTicketEntity")}(Web||(Web={}));var Web;!function(e){var t=function(){function e(){}return e}();e.RunDaoDataEntity=t,__reflect(t.prototype,"Web.RunDaoDataEntity")}(Web||(Web={}));var Web;!function(e){var t=function(){function e(){}return e}();e.RunDaoEntity=t,__reflect(t.prototype,"Web.RunDaoEntity")}(Web||(Web={}));var Web;!function(e){var t=function(){function e(){}return e}();e.RunDaoResultEntity=t,__reflect(t.prototype,"Web.RunDaoResultEntity")}(Web||(Web={}));var Web;!function(e){var t=function(){function e(){}return e}();e.ServInfo=t,__reflect(t.prototype,"Web.ServInfo")}(Web||(Web={}));var Web;!function(e){var t=function(){function e(){}return e}();e.UserInfoEntity=t,__reflect(t.prototype,"Web.UserInfoEntity")}(Web||(Web={}));