var __extends=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},starlingswf;!function(t){var e=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.getTextField=function(t){return this.getChildByName(t)},e.prototype.getMovie=function(t){return this.getChildByName(t)},e.prototype.getSprite=function(t){return this.getChildByName(t)},e.prototype.getImage=function(t){return this.getChildByName(t)},e.prototype.getButton=function(t){return this.getChildByName(t)},e}(egret.DisplayObjectContainer);t.SwfSprite=e}(starlingswf||(starlingswf={}));var starlingswf;!function(t){var e=function(){function e(n,r){void 0===r&&(r=24),this._swfData=n,this._createDisplayFuns=new Object,this._createDisplayFuns[e.dataKey_Sprite]=this.createSprite,this._createDisplayFuns[e.dataKey_MovieClip]=this.createMovie,this._createDisplayFuns[e.dataKey_Button]=this.createButton,this._createDisplayFuns[e.dataKey_Image]=this.createImage,this._createDisplayFuns[e.dataKey_Scale9]=this.createS9Image,this._createDisplayFuns[e.dataKey_ShapeImg]=this.createShapeImage,this._createDisplayFuns[e.dataKey_TextField]=this.createTextField,this.swfUpdateManager=t.SwfUpdateManager.createSwfUpdateManager(r)}return e.prototype.createSprite=function(n,r,i){void 0===r&&(r=null),void 0===i&&(i=null),null==i&&(i=this._swfData[e.dataKey_Sprite][n]);for(var s,o,a,l=new t.SwfSprite,h=i.length,u=0;h>u;u++)s=i[u],a=this._createDisplayFuns[s[1]],null!=a&&(o=a.apply(this,[s[0],s]),o.name=s[9],o.x=s[2],o.y=s[3],s[1]==e.dataKey_TextField&&(o.y+=6),s[1]!=e.dataKey_Scale9&&s[1]!=e.dataKey_ShapeImg&&(o.scaleX=s[4],o.scaleY=s[5]),o.skewX=s[6],o.skewY=s[7],o.alpha=s[8],l.addChild(o));return null!=r&&t.SwfBlendMode.setBlendMode(l,r[11]),l},e.prototype.createMovie=function(n,r){void 0===r&&(r=null);var i,s,o,a,l,h=this._swfData[e.dataKey_MovieClip][n],u=h.objCount,d={};for(l in u){s=u[l][0],o=u[l][1],i=null==d[l]?[]:d[l];for(var c=0;o>c;c++)a=this._createDisplayFuns[s],null!=a&&i.push(a.apply(this,[l,null]));d[l]=i}var p=new t.SwfMovieClip(h.frames,h.labels,d,this,h.frameEvents);return p.loop=h.loop,null!=r&&t.SwfBlendMode.setBlendMode(p,r[11]),p},e.prototype.createButton=function(n,r){void 0===r&&(r=null);var i=this._swfData[e.dataKey_Button][n],s=this.createSprite(null,null,i),o=new t.SwfButton(s);return o},e.prototype.createImage=function(n,r){void 0===r&&(r=null);var i=this._swfData[e.dataKey_Image][n],s=new egret.Bitmap;return s.texture=RES.getRes(n),s.anchorOffsetX=i[0],s.anchorOffsetY=i[1],null!=r&&t.SwfBlendMode.setBlendMode(s,r[11]),s},e.prototype.createS9Image=function(n,r){void 0===r&&(r=null);var i=this._swfData[e.dataKey_Scale9][n],s=new egret.Bitmap;return s.texture=RES.getRes(n),s.scale9Grid=new egret.Rectangle(i[0],i[1],i[2],i[3]),null!=r&&(s.width=r[10],s.height=r[11],t.SwfBlendMode.setBlendMode(s,r[13])),s},e.prototype.createShapeImage=function(e,n){void 0===n&&(n=null);var r=new egret.Bitmap;return r.texture=RES.getRes(e),r.fillMode=egret.BitmapFillMode.REPEAT,null!=n&&(r.width=n[10],r.height=n[11],t.SwfBlendMode.setBlendMode(r,n[13])),r},e.prototype.createTextField=function(e,n){void 0===n&&(n=null);var r=new egret.TextField;return null!=n&&(r.width=n[10],r.height=n[11],r.fontFamily=n[12],r.textColor=n[13],r.size=n[14],r.textAlign=n[15],r.text=n[18],this.createTextFieldFilter(r,n[19]),t.SwfBlendMode.setBlendMode(r,n[20])),r},e.prototype.createTextFieldFilter=function(t,e){for(var n in e)"flash.filters::GlowFilter"==n&&(t.stroke=e[n].strength,t.strokeColor=e[n].color)},e}();e.dataKey_Sprite="spr",e.dataKey_Image="img",e.dataKey_MovieClip="mc",e.dataKey_TextField="text",e.dataKey_Button="btn",e.dataKey_Scale9="s9",e.dataKey_ShapeImg="shapeImg",e.dataKey_Component="comp",e.dataKey_Particle="particle",t.Swf=e}(starlingswf||(starlingswf={}));var starlingswf;!function(t){var e=function(e){function n(){var t=e.call(this)||this;return t._dataFormat=egret.HttpResponseType.TEXT,t}return __extends(n,e),n.prototype.analyzeData=function(e,n){var r=e.name;if(!this.fileDic[r]&&n)try{var i=n;this.fileDic[r]=new t.Swf(JSON.parse(i),30)}catch(s){egret.$warn(1017,e.url,n)}},n}(RES.BinAnalyzer);t.SwfAnalyzer=e}(starlingswf||(starlingswf={}));var starlingswf;!function(t){var e=function(){function t(){}return t.createSwfUpdateManager=function(e){var n=new t;return n._animations=[],n._addQueue=[],n._removeQueue=[],n._currentTime=0,n.setFps(e),egret.Ticker.getInstance().register(n.update,n),n},t.prototype.setFps=function(t){this._fps=t,this._fpsTime=1e3/t},t.prototype.addSwfAnimation=function(t){this._addQueue.push(t)},t.prototype.removeSwfAnimation=function(t){this._removeQueue.push(t)},t.prototype.updateAdd=function(){for(var t,e,n=this._addQueue.length,r=0;n>r;r++)e=this._addQueue.pop(),t=this._animations.indexOf(e),-1==t&&this._animations.push(e)},t.prototype.updateRemove=function(){for(var t,e,n=this._removeQueue.length,r=0;n>r;r++)e=this._removeQueue.pop(),t=this._animations.indexOf(e),-1!=t&&this._animations.splice(t,1)},t.prototype.update=function(t){if(this._currentTime+=t,!(this._currentTime<this._fpsTime)){this._currentTime-=this._fpsTime,this._currentTime>this._fpsTime&&(this._currentTime=0),this.updateRemove(),this.updateAdd();for(var e,n=this._animations.length,r=0;n>r;r++)e=this._animations[r],null!=e.getStage()&&e.update()}},t}();t.SwfUpdateManager=e}(starlingswf||(starlingswf={}));var starlingswf;!function(t){var e=function(){function t(){}return t.setBlendMode=function(e,n){t.modes[n]&&(e.blendMode=n)},t}();e.modes={normal:!0,add:!0},t.SwfBlendMode=e}(starlingswf||(starlingswf={}));var lzm;!function(t){var e=function(t){function e(){var e=t.call(this)||this;return e.addEventListener(egret.Event.ADDED_TO_STAGE,e.addToStage,e),e.addEventListener(egret.Event.REMOVED_FROM_STAGE,e.removeFromStage,e),e}return __extends(e,t),e.prototype.addToStage=function(t){},e.prototype.removeFromStage=function(t){},e.prototype.gotoPanel=function(t){this.parent.addChild(t),this.dispose()},e.prototype.dispose=function(){null!=this.parent&&this.parent.removeChild(this),this.removeEventListener(egret.Event.ADDED_TO_STAGE,this.addToStage,this),this.removeEventListener(egret.Event.REMOVED_FROM_STAGE,this.removeFromStage,this)},e}(egret.DisplayObjectContainer);t.BasePanel=e}(lzm||(lzm={}));var starlingswf;!function(t){var e=function(e){function n(t){var n=e.call(this)||this;return n.defScale=-1,n.skin=t,n._w=n.skin.width,n._h=n.skin.height,n.addChild(t),n.touchEnabled=!0,n.addEventListener(egret.TouchEvent.TOUCH_BEGIN,n.mouseDown,n),n.addEventListener(egret.TouchEvent.TOUCH_END,n.mouseUp,n),n.addEventListener(egret.TouchEvent.TOUCH_RELEASE_OUTSIDE,n.mouseUp,n),n.addEventListener(egret.TouchEvent.TOUCH_TAP,n.mouseClick,n),n}return __extends(n,e),n.prototype.mouseDown=function(t){this.skin.scaleX=.9,this.skin.scaleY=.9,this.skin.x=(1-.9)/2*this._w,this.skin.y=(1-.9)/2*this._h},n.prototype.mouseUp=function(t){this.skin.scaleX=1,this.skin.scaleY=1,this.skin.x=this.skin.y=0},n.prototype.mouseClick=function(e){this.dispatchEventWith(t.SwfButton.onClick),null!=n.defSound&&n.defSound.play(0,1)},n.prototype.setEnable=function(t){if(this.touchEnabled=t,t)this.filters=null;else{var e=[.3,.6,0,0,0,.3,.6,0,0,0,.3,.6,0,0,0,0,0,0,1,0],n=new egret.ColorMatrixFilter(e);this.filters=[n]}},n.prototype.dispose=function(){this.removeEventListener(egret.TouchEvent.TOUCH_BEGIN,this.mouseDown,this),this.removeEventListener(egret.TouchEvent.TOUCH_END,this.mouseUp,this),this.removeEventListener(egret.TouchEvent.TOUCH_RELEASE_OUTSIDE,this.mouseUp,this),this.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.mouseClick,this)},n}(t.SwfSprite);e.onClick="SwfButton.onClick",t.SwfButton=e}(starlingswf||(starlingswf={}));var starlingswf;!function(t){var e=function(e){function n(t,n,r,i,s){void 0===s&&(s=null);var o=e.call(this)||this;return o._isPlay=!1,o.loop=!0,o._completeFunction=null,o._hasCompleteListener=!1,o._frames=t,o._labels=n,o._displayObjects=r,o._frameEvents=s,o._startFrame=0,o._endFrame=o._frames.length-1,o._ownerSwf=i,o.setCurrentFrame(0),o.play(),o}return __extends(n,e),n.prototype.getStage=function(){return this.visible?this.stage:null},n.prototype.update=function(){if(this._isPlay){if(this._currentFrame>=this._endFrame){var t=!1;if(this.loop&&this._startFrame!=this._endFrame||(this._ownerSwf&&this.stop(!1),t=!0),this._completeFunction&&this._completeFunction(this),this._hasCompleteListener&&this.dispatchEventWith(egret.Event.COMPLETE),t)return;this._currentFrame=this._startFrame}else this._currentFrame++;this.setCurrentFrame(this._currentFrame)}},n.prototype.setCurrentFrame=function(e){this.removeAllChilds(),this._currentFrame=e,this.__frameInfos=this._frames[this._currentFrame];for(var n,r,i,s,o=this.__frameInfos.length,a=0;o>a;a++){switch(n=this.__frameInfos[a],s=n[10],r=this._displayObjects[n[0]][s],r.$setSkewX(n[6]),r.$setSkewY(n[7]),r.$setAlpha(n[8]),r.name=n[9],r.$setX(n[2]),r.$setY(n[3]),n[1]){case t.Swf.dataKey_Scale9:r.width=n[11],r.height=n[12],t.SwfBlendMode.setBlendMode(r,n[13]);break;case t.Swf.dataKey_ShapeImg:r.width=n[11],r.height=n[12],t.SwfBlendMode.setBlendMode(r,n[13]);break;case t.Swf.dataKey_TextField:i=r,i.width=n[11],i.height=n[12],i.fontFamily=n[13],i.textColor=n[14],i.size=n[15],i.textAlign=n[16],n[19]&&"\r"!=n[19]&&""!=n[19]&&(i.text=n[19]),t.SwfBlendMode.setBlendMode(i,n[20]);break;default:r.$setScaleX(n[4]),r.$setScaleY(n[5]),t.SwfBlendMode.setBlendMode(r,n[11])}this.$doAddChild(r,o,!1)}null!=this._frameEvents&&null!=this._frameEvents[this._currentFrame]&&this.dispatchEventWith(this._frameEvents[this._currentFrame])},n.prototype.getCurrentFrame=function(){return this._currentFrame},n.prototype.play=function(){this._isPlay=!0,this._ownerSwf.swfUpdateManager.addSwfAnimation(this);var e,n,r;for(e in this._displayObjects)if(0==e.indexOf(t.Swf.dataKey_MovieClip)){n=this._displayObjects[e],r=n.length;for(var i=0;r>i;i++)n[i].play()}},n.prototype.stop=function(e){if(void 0===e&&(e=!0),this._isPlay=!1,this._ownerSwf.swfUpdateManager.removeSwfAnimation(this),e){var n,r,i;for(n in this._displayObjects)if(0==n.indexOf(t.Swf.dataKey_MovieClip)){r=this._displayObjects[n],i=r.length;for(var s=0;i>s;s++)r[s].stop(e)}}},n.prototype.gotoAndStop=function(t,e){void 0===e&&(e=!0),this.goTo(t),this.stop(e)},n.prototype.gotoAndPlay=function(t){this.goTo(t),this.play()},n.prototype.goTo=function(t){if("string"==typeof t){var e=this.getLabelData(t);this._currentLabel=e[0],this._currentFrame=this._startFrame=e[1],this._endFrame=e[2]}else"number"==typeof t&&(this._currentFrame=this._startFrame=t,this._endFrame=this._frames.length-1);this.setCurrentFrame(this._currentFrame)},n.prototype.getLabelData=function(t){for(var e,n=this._labels.length,r=0;n>r;r++)if(e=this._labels[r],e[0]==t)return e;return null},n.prototype.isPlay=function(){return this._isPlay},n.prototype.totalFrames=function(){return this._frames.length},n.prototype.currentLabel=function(){return this._currentLabel},n.prototype.labels=function(){for(var t=this._labels.length,e=[],n=0;t>n;n++)e.push(this._labels[n][0]);return e},n.prototype.hasLabel=function(t){var e=this.labels();return!(-1==e.indexOf(t))},n.prototype.addEventListener1=function(t,e,n,r,i){void 0===r&&(r=!1),void 0===i&&(i=0),this.addEventListener(t,e,n,r,i),this._hasCompleteListener=this.hasEventListener(egret.Event.COMPLETE)},n.prototype.removeEventListener1=function(t,e,n,r){void 0===r&&(r=!1),this.removeEventListener(t,e,n,r),this._hasCompleteListener=this.hasEventListener(egret.Event.COMPLETE)},n.prototype.removeAllChilds=function(){for(var t=this.$children,e=t.length-1;e>=0;e--)this.$doRemoveChild(e,!1)},n}(t.SwfSprite);t.SwfMovieClip=e}(starlingswf||(starlingswf={}));var lzm;!function(t){var e=function(){function e(){}return e.init=function(e,n,r,i){t.Alert.root=e,t.Alert.stageWidth=n,t.Alert.stageHeight=r,t.Alert.alertScale=i,t.Alert.initBackGround()},e.container=function(){return t.Alert.root},e.width=function(){return t.Alert.stageWidth},e.height=function(){return t.Alert.stageHeight},e.initBackGround=function(){null==t.Alert.background&&(t.Alert.background=new egret.Shape,t.Alert.background.alpha=.7,t.Alert.background.touchEnabled=!0),t.Alert.background.graphics.clear(),t.Alert.background.graphics.beginFill(0),t.Alert.background.graphics.drawRect(0,0,t.Alert.stageWidth,t.Alert.stageHeight),t.Alert.background.graphics.endFill()},e.show=function(e){t.Alert.container().addChild(e)},e.alertLandscape=function(e){t.Alert.alert(e),e.rotation=90},e.alert=function(e,n){void 0===n&&(n=!0),-1==t.Alert.dialogs.indexOf(e)&&(e.addEventListener(egret.Event.ADDED_TO_STAGE,t.Alert.dialogAddToStage,e),t.Alert.container().addChild(t.Alert.background),t.Alert.container().addChild(e),n&&(e.anchorOffsetX=e.width/2,e.anchorOffsetY=e.height/2,e.x=t.Alert.stageWidth/2,e.y=t.Alert.stageHeight/2),e.scaleX=e.scaleY=t.Alert.alertScale)},e.dialogAddToStage=function(e){var n=e.currentTarget;n.removeEventListener(egret.Event.ADDED_TO_STAGE,t.Alert.dialogAddToStage,n),n.addEventListener(egret.Event.REMOVED_FROM_STAGE,t.Alert.dialogRemoveFromStage,n),t.Alert.dialogs.push(n)},e.dialogRemoveFromStage=function(e){var n=e.currentTarget;n.removeEventListener(egret.Event.REMOVED_FROM_STAGE,t.Alert.dialogRemoveFromStage,n),t.Alert.dialogs.pop(),0==t.Alert.dialogs.length?t.Alert.container().removeChild(t.Alert.background):(n=t.Alert.dialogs[t.Alert.dialogs.length-1],t.Alert.container().swapChildren(t.Alert.background,n))},e.closeAllAlert=function(){for(var t,n,r=e.dialogs.length,i=[],s=0;r>s;s++)i.push(e.dialogs[s]);for(var s=0;r>s;s++)t=i[s],n=t.dispose,n instanceof Function&&n.apply(t,[]),null!=t.parent&&t.parent.removeChild(t)},e}();e.dialogs=[],t.Alert=e}(lzm||(lzm={}));var lzm;!function(t){var e=function(){function e(){}return e.send=function(e,n,r,i,s){void 0===r&&(r=null),void 0===i&&(i=null),void 0===s&&(s="get");var o=new egret.HttpRequest,a=t.HttpClient.getRequestPars(n),l=function(t){o.removeEventListener(egret.Event.COMPLETE,l,o),o.removeEventListener(egret.IOErrorEvent.IO_ERROR,h,o),null!=r&&r(o.response)},h=function(t){o.removeEventListener(egret.Event.COMPLETE,l,o),o.removeEventListener(egret.IOErrorEvent.IO_ERROR,h,o),null!=i&&i(o.response)};o.addEventListener(egret.Event.COMPLETE,l,o),o.addEventListener(egret.IOErrorEvent.IO_ERROR,h,o),o.responseType=egret.HttpResponseType.TEXT,"get"==s?(o.open(e+"?"+a,egret.HttpMethod.GET),o.send()):"post"==s&&(o.open(e,egret.HttpMethod.POST),o.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),o.send(a))},e.getRequestPars=function(t){var e,n="";for(e in t)n+=e+"="+t[e]+"&";return n.substr(0,n.length-1)},e}();t.HttpClient=e}(lzm||(lzm={}));var lzm;!function(t){var e=function(){function t(t,e){this.isConnect=!1,this.host=t,this.port=e,this.socket=new egret.WebSocket,this.socket.addEventListener(egret.ProgressEvent.SOCKET_DATA,this.onReceiveMessage,this),this.socket.addEventListener(egret.Event.CONNECT,this.onSocketOpen,this),this.socket.addEventListener(egret.Event.CLOSE,this.onSocketClose,this),this.socket.addEventListener(egret.IOErrorEvent.IO_ERROR,this.onSocketIOError,this)}return t.prototype.connect=function(){this.socket.connect(this.host,this.port)},t.prototype.sendData=function(t){this.socket.writeUTF(JSON.stringify(t))},t.prototype.onSocketOpen=function(){this.isConnect=!0,null!=this.onConnectCallBack&&this.onConnectCallBack()},t.prototype.onReceiveMessage=function(t){var e=this.socket.readUTF();null!=this.onDataCallBack&&this.onDataCallBack(JSON.parse(e))},t.prototype.onSocketClose=function(t){this.isConnect=!1,null!=this.onCloseCallBack&&this.onCloseCallBack()},t.prototype.onSocketIOError=function(t){null!=this.onIOErrorCallBack&&this.onIOErrorCallBack()},t.prototype.dispose=function(){this.socket.close(),this.onConnectCallBack=null,this.onIOErrorCallBack=null,this.onCloseCallBack=null,this.onDataCallBack=null},t}();t.JSONWebSocketClient=e}(lzm||(lzm={}));